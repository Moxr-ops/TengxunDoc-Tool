"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["form-main-chunks"],{87861:(e,t,n)=>{n.d(t,{Y0:()=>s,Cs:()=>a,qe:()=>l,Sb:()=>c,wZ:()=>d,py:()=>u,rD:()=>p,DC:()=>m,fC:()=>h,_h:()=>f,yx:()=>g,hJ:()=>_,FR:()=>y,Xj:()=>b});var o,r=n(26709).default.getInstance(),i=r.getConfig('npm["@tencent/form-utils"]'),s=(r.getConfig("domain"),null!==(o=r.getConfig("privatization.hackReplacePattern"))&&void 0!==o&&o),a=(null==i?void 0:i.TOC_HOST)||"docs.qq.com",l=(null==i?void 0:i.TOB_HOST)||"doc.weixin.qq.com",c=new RegExp((null==i?void 0:i.SCENARIO_URL_REGEXP)||"^https?:\\/\\/(docs|doc.weixin).qq.com\\/scenario\\/link.html","i"),d=new RegExp((null==i?void 0:i.QQ_COM_REGEXP)||"\\.qq\\.com"),u=new RegExp((null==i?void 0:i.TDOCS_URL_REGEXP)||"^https?:\\/\\/docs\\.qq\\.com"),p=new RegExp((null==i?void 0:i.WEDRIVE_LINK_REGEXP)||"^https?:\\/\\/drive\\.weixin\\.qq\\.com\\/","i"),m=new RegExp((null==i?void 0:i.ENT_LINK_REGEXP)||"^https?:\\/\\/doc\\.weixin\\.qq\\.com\\/(doc|sheet|forms|mind|flowchart|slide|home|txdoc|formcol|mall\\/m\\/profile\\/craft|scenario\\/login)","i"),h=(null==i?void 0:i.GET_FILE_ID_CGI_URL)||"https://doc.weixin.qq.com/wedoc/getfileinfobyurl",f=(null==i||i.APIS_MAP_GEOLOCATION_URL,(null==i?void 0:i.APIS_MAP_GEOCODER_URL)||"https://apis.map.qq.com/ws/geocoder/v1/"),g=(null==i?void 0:i.APIS_TENCENT_MAP_SDK)||"https://mapapi.qq.com/web/mapComponents/geoLocation/v/geolocation.min.js",_=r.getConfig("links.sheetToFormHelp")||"http://docs.qq.com/doc/p/cb9cc8f93d87b846255ff1c4b0a12d10c5ce780e",y=r.getConfig("links.sheetToFormTemplateSheet")||"https://docs.qq.com/sheet/DZVNwRWtjbm1yT3JM?tab=BB08J2",b=(r.getConfig("tenantConfig.tenantName"),r.getConfig("tenantConfig.tenantDocName"),r.getConfig("tenantConfig.tenantLogo.SVGBlack"));r.getConfig("tenantConfig.tenantLogo.SVGColor"),r.getConfig("tenantConfig.tenantLogo.SVGSolidBlack")},36086:(e,t,n)=>{n.d(t,{D:()=>validateCardNumber});var validateCardNumber=function(e){if(!function(e){var t={12:/^(5018|5020|5038|5893|6304|6759|676[1-3]|67677[04])/,13:/^(40[013-9]|402[0-57-9]|41[0-689]|41750[1-9]|4175[1-9]|4[2-467]|450[0-79]|45[1-9]|48[0-35-9]|484[0-35-9]|49[02-9]|491[0-24-689]|5018|5020|5038|5893|6304|6759|676[1-3]|67677[04])/,14:/^(36|5018|5020|5038|5893|6304|6759|676[1-3]|67677[04])/,15:/^(1|34|36|37|5018|5020|5038|5893|6304|6759|676[1-3]|67677[04])/,16:/^(220[0-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720|352[89]|35[3-8]|36|4|501[89]|5020|5038|506099|5061[0-8]|50619[0-8]|50786[5-9]|5078[7-9]|5079[0-5]|50796[0-4]|508|5[1-5]|5893|60|62|6304|63[6-9]|64[4-9]|65|6759|676[1-3]|67677[04]|81|82|8600|9792|9860)/,17:/^(220[0-4]|352[89]|35[458]|3570|35710|35711[023456789]|357[2-9]|36|5018|5020|5038|5893|6011|62|6304|63[7-9]|64[4-9]|650001|65002[89]|6500[3-9]|650[1-9]|65[1-9]|6759|676[1-3]|67677[04])/,18:/^(220[0-4]|352[89]|35[458]|3570|35710|35711[023456789]|357[2-9]|36|5018|5020|5038|506099|5061[0-8]|50619[0-8]|50786[5-9]|5078[7-9]|5079[0-5]|50796[0-4]|5893|6011|62|6304|63[7-9]|64[4-9]|65|6759|676[1-3]|67677[04])/,19:/^(220[0-4]|352[89]|35[458]|3570|35710|35711[023456789]|357[2-9]|36|5018|5020|5038|506099|5061[0-8]|50619[0-8]|50786[5-9]|5078[7-9]|5079[0-5]|50796[0-4]|5893|6011|62|6304|63[7-9]|64[4-9]|65|6759|676[1-3]|67677[04])/};return!!t[e.length]&&t[e.length].test(e)}(e))return!1;for(var t=e.split("").reverse(),n=t.shift(),o=0,r=2,i=0,s=t;i<s.length;i++){var a=s[i];o+="".concat(Number(a)*r).split("").reduce((function(e,t){return e+Number(t)}),0),r=[2,1][r-1]}return 609*o%10===Number(n)}},80683:(e,t,n)=>{n.d(t,{k:()=>writeToClipBoard});var o=n(85556),setClipboard=function(e){var t,n=e.plain,o=document.createElement("textarea");o.style.clipPath="rect(0 0 0 0)",o.value=n,document.body.appendChild(o);var r=document.createRange();return r.selectNode(o),null===(t=window.getSelection())||void 0===t||t.addRange(r),o.select(),document.execCommand("selectAll"),document.execCommand("copy"),document.body.removeChild(o),Promise.resolve({success:!0,source:"default"})},r=n(36303),setMqqClipboard=function(e){var t=window.mqq;if(r.default.isMiniProgram||!t||"0"===t.clientVersion)return Promise.resolve({success:!1,source:"mqq"});var n=e.html,o=e.plain;return t.invoke("docx","writeSystemClipboard",{html:n,plain:o}),Promise.resolve({success:!0,source:"mqq"})},setNavigatorClipboard=function(e){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return r.default.isSafari&&navigator.clipboard?[4,navigator.clipboard.writeText(e.plain).then((function(){return!0}),(function(){return!1}))]:[2,Promise.resolve({success:!1,source:"navigator"})];case 1:return[2,{success:t.sent(),source:"navigator"}]}}))}))},isSupportWXRTF=function(){return!(!r.default.isWxMiniProgram&&!r.default.isWeChat)&&(!(!r.default.isAndroid||!r.default.isWeChatVersionAboveOrEqual("8.0.6"))||!(!r.default.isIOS||!r.default.isWeChatVersionAboveOrEqual("8.0.7")))},setWeixinJSBridgeClipboard=function(e,t){var n=window,o=n.wx,r=n.WeixinJSBridge;return isSupportWXRTF()&&o&&r?(t&&o.config(t),new Promise((function(t){var n=e.html,o=e.plain;r.call("setClipboardData",{data:o||"",htmlText:n||""},(function(e){var n=e.err_msg;t({success:!/fail_|_denied/i.test(n),source:"WeixinJSBridge"})}))}))):Promise.resolve({success:!1,source:"WeixinJSBridge"})},setWxClipboard=function(e,t){var n=window.wx;return(null==n?void 0:n.setClipboardData)?(t&&n.config(t),new Promise((function(t){n.setClipboardData({data:e.plain,success:function(){t({success:!0,source:"wx"})},fail:function(){t({success:!1,source:"wx"})}})}))):Promise.resolve({success:!1,source:"wx"})},writeToClipBoard=function(e,t){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var n,r,i,s,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:n=0,r=[setWxClipboard,setWeixinJSBridgeClipboard,setMqqClipboard,setNavigatorClipboard,setClipboard],o.label=1;case 1:return n<r.length?[4,(0,r[n])(e,t)]:[3,4];case 2:if(i=o.sent(),s=i.success,a=i.source,s)return[2,{success:s,source:a}];o.label=3;case 3:return n++,[3,1];case 4:return[2,{success:!1,source:"none"}]}}))}))}},1671:(e,t,n)=>{n.d(t,{H:()=>o});var o="Other"},20635:(e,t,n)=>{var o;n.d(t,{g:()=>o}),function(e){e[e.TEXT=1]="TEXT",e[e.NUMBER=2]="NUMBER",e[e.DATETIME=3]="DATETIME",e[e.EMAIL=4]="EMAIL",e[e.URL=5]="URL",e[e.ID_CARD=6]="ID_CARD",e[e.PHONE=7]="PHONE",e[e.POSITION=8]="POSITION"}(o||(o={}))},95789:(e,t,n)=>{n.d(t,{f:()=>o});var o=new Map([["SCORE_OUTOF_RANGE","E10000"],["TITLE_LEN_OUTOF_RANGE","E11000"],["SUBTITLE_LEN_OUTOF_RANGE","E11001"],["EXPLAIN_LEN_OUTOF_RANGE","E11002"],["OPTION_COUNT_OUTOF_RANGE","E11003"],["OPTION_LEN_OUTOF_RANGE","E11004"],["PART_LEN_OUTOF_RANGE","E11005"],["UPLOAD_IMAGE_FILESIZE_OUTOF_RANGE","E11006"],["TITLE_EMPTY","E12000"],["SCORE_PRECISION_OUTOF_RANGE","E14000"],["QUESTION_TYPE_UNKNOWN","E22000"],["SCORE_NOT_NUMBER","E22001"],["UPLOAD_IMAGE_EXTNAME_ERROR","E23000"],["UPLOAD_IMAGE_FILE_ERROR","E30000"],["ANSWER_UNKNOWN","E31000"],["COS_MULTIPART_UPLOAD_BAD_PARAM","E35000"],["UPLOAD_IMAGE_URL_EMPTY","E35001"],["UPLOAD_IMAGE_IMAGE_EMPTY","E35002"],["UPLOAD_IMAGE_IMAGE_LEN_OUTOF_RANGE","E35003"],["UPLOAD_IMAGE_NET_ERROR","E40000"],["COS_SECRET_KEY_ERROR","E42000"],["COS_MULTIPART_INIT_ERROR","E42001"],["COS_MULTIPART_UPLOAD_ERROR","E42002"],["COS_MULTIPART_COMPLETE_ERROR","E42003"],["UPLOAD_IMAGE_PARTIAL_FAIL","E42004"],["UPLOAD_IMAGE_FAIL","E42005"],["TDOC_URL_PARSE_FAIL","E42006"],["LOCAL_SHEET_PARSE_FAIL","E42007"]])},72481:(e,t,n)=>{n.r(t),n.d(t,{TITLE_MAX_LEN:()=>o,SUBTITLE_MAX_LEN:()=>r,EXPLAIN_MAX_LEN:()=>i,SCORE_MAX_VAL:()=>s,SCORE_MIN_VAL:()=>a,OPTION_MAX_COUNT:()=>l,OPTION_MAX_LEN:()=>c,OTHER_OPTION_MAX_LEN:()=>d,PART_MAX_LEN:()=>u,SIMPLE_FILL_MAX_LEN:()=>p});var o=4e3,r=4e3,i=500,s=100,a=0,l=26,c=4e3,d=100,u=20,p=4e3},58539:(e,t,n)=>{var o;n.d(t,{Y:()=>o}),function(e){e.NONE="NONE",e.NUMBER="NUMBER",e.ALPHABET="ALPHABET"}(o||(o={}))},69271:(e,t,n)=>{var o;n.d(t,{m:()=>o}),function(e){e.HEALTHCODE="HEALTHCODE",e.TRAVELCARD="TRAVELCARD"}(o||(o={}))},95240:(e,t,n)=>{n.d(t,{xy:()=>o,dq:()=>r,dm:()=>i,AR:()=>s,Fk:()=>a,rn:()=>l});var o=new Set(["AUTODEP","AUTONAME","CANVAS","CANVAS_IMAGE","CASCADER","COMMODITY","CHECKBOX","DATE","FILE","FILEIMAGE","FILLIN","IMAGE","INTELLIGENT_MATCH","LOCATION","MATRIX_CHECKBOX","MATRIX_RADIO","MATRIX_RATING","RADIO","RATING","RECOGNITION","SCALE","SCAN","SEGMENTATION","SELECT","SIMPLE","SORT","TABLE","TIME","TEMPERATURE","VOTE"]),r=new Set(["RADIO","CHECKBOX","SELECT","VOTE","SORT"]),i=new Set(["SIMPLE","RADIO","CHECKBOX","FILLIN"]),s=new Set(["SIMPLE","RADIO","CHECKBOX","FILLIN","MATRIX_CHECKBOX","MATRIX_RADIO","MATRIX_RATING","SELECT","SCALE","RATING","TABLE","SCAN","SORT"]),a=(new Set(["SIMPLE","FILLIN","RADIO","SELECT","SCAN","SORT"]),new Set(["MATRIX_CHECKBOX","MATRIX_RADIO","MATRIX_RATING"])),l=new Set(["CHECKBOX","COMMODITY","FILE","FILEIMAGE","CANVAS_IMAGE","IMAGE","MATRIX_CHECKBOX","MATRIX_RADIO","MATRIX_RATING","RADIO","SELECT","RECOGNITION","VOTE","SORT"])},14042:(e,t,n)=>{var o;n.d(t,{c:()=>o}),function(e){e.AUTODEP="AUTODEP",e.AUTONAME="AUTONAME",e.CANVAS="CANVAS",e.CANVAS_IMAGE="CANVAS_IMAGE",e.CASCADER="CASCADER",e.CHECKBOX="CHECKBOX",e.COMMODITY="COMMODITY",e.DATE="DATE",e.FILE="FILE",e.FILEIMAGE="FILEIMAGE",e.FILLIN="FILLIN",e.IMAGE="IMAGE",e.INTELLIGENT_MATCH="INTELLIGENT_MATCH",e.LOCATION="LOCATION",e.MATRIX_CHECKBOX="MATRIX_CHECKBOX",e.MATRIX_RADIO="MATRIX_RADIO",e.MATRIX_RATING="MATRIX_RATING",e.RADIO="RADIO",e.RATING="RATING",e.RECOGNITION="RECOGNITION",e.SCALE="SCALE",e.SCAN="SCAN",e.SEGMENTATION="SEGMENTATION",e.SELECT="SELECT",e.SIMPLE="SIMPLE",e.TIME="TIME",e.RICH="RICH",e.TABLE="TABLE",e.TEMPERATURE="TEMPERATURE",e.VOTE="VOTE",e.SORT="SORT"}(o||(o={}))},95608:(e,t,n)=>{var o;n.d(t,{ol:()=>c});var r="[a-zA-Z\\d]{1,63}|[a-zA-Z\\d][-a-zA-Z\\d]{0,61}[a-zA-Z\\d]",i="(".concat(r,")|((").concat(r,")(\\.(").concat(r,"))*\\.(").concat("[a-zA-Z][-a-zA-Z\\d]{0,61}[a-zA-Z\\d]|\\d+[-a-zA-Z]+[a-zA-Z\\d]|\\d+[-a-zA-Z\\d]*[a-zA-Z]","))"),s="^\\d{5,10}$",a="^[a-z\\-_][a-z\\d_-]{5,19}$",l="^1[3-9]\\d{9}$",c=((o={})[1]=/(^(1[1-5]|2[1-3]|3[1-7]|4[1-6]|5[0-4]|6[1-5]|71|81|82|83)\d{4}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^(1[1-5]|2[1-3]|3[1-7]|4[1-6]|5[0-4]|6[1-5]|71|81|82)\d{4}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3})$/,o[2]=new RegExp(l),o[3]=/^(\d{3,4}-)?\d{7,8}$/,o[4]=/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*/,o[5]=new RegExp("^(".concat("[-\\w]+|[-\\w]+(\\.[-\\w]+)*[-\\w]|[-\\w]+\\.[-\\w]",")@(").concat(i,")$")),o[6]=new RegExp("".concat(a,"|").concat(l,"|").concat(s),"i"),o[7]=new RegExp(s),o[8]=/^-?\d+(\.\d+)?$/,o[9]=new RegExp(a,"i"),o[10]=/^E[\dA-HJ-NP-Z]\d{7}$/,o[11]=/^-?\d+\.\d+$/,o[70]=/^(20|21|22|23|[0-1]?\d):[0-5]?\d$/,o[71]=/^\d+小时[0-5]?\d分钟[0-5]?\d秒$/,o[80]=/^(?:(?!0000)[0-9]{1,4}年(?:(?:0?[1-9]|1[0-2])月(?:0?[1-9]|1[0-9]|2[0-8])日|(?:0?[13-9]|1[0-2])月(?:29|30)日|(?:0?[13578]|1[02])月31日)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)年0?2月29日)$/,o[81]=/^\d{1,4}年(10|11|12|0[1-9]|[1-9])月$/,o[82]=/^(?:(?!0000)[0-9]{4}年(?:(?:0?[1-9]|1[0-2])月(?:0?[1-9]|1[0-9]|2[0-8])日|(?:0?[13-9]|1[0-2])月(?:29|30)日|(?:0?[13578]|1[02])月31日)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)年0?2月29日) ([01]?[0-9]|2[0-3]):([0-5][0-9])$/,o[90]=/^(([1-9]\d?|1\d{2})(\.\d)?|0\.\d)$/,o)},84863:(e,t,n)=>{var o;n.d(t,{S:()=>o}),function(e){e[e.ID_CARD=1]="ID_CARD",e[e.MOBILE_NUMBER=2]="MOBILE_NUMBER",e[e.TEL_NUMBER=3]="TEL_NUMBER",e[e.URL=4]="URL",e[e.EMAIL=5]="EMAIL",e[e.WECHAT=6]="WECHAT",e[e.QQ=7]="QQ",e[e.NUMBER=8]="NUMBER",e[e.WECHAT_ID=9]="WECHAT_ID",e[e.PASSPORT=10]="PASSPORT",e[e.DECIMAL=11]="DECIMAL",e[e.HOUR_MINUTE=70]="HOUR_MINUTE",e[e.DURATION=71]="DURATION",e[e.DATE=80]="DATE",e[e.MONTH=81]="MONTH",e[e.DATETIME=82]="DATETIME",e[e.COMPONENT_TEMPERATRUE=90]="COMPONENT_TEMPERATRUE"}(o||(o={}))},78984:(e,t,n)=>{var o;n.d(t,{c:()=>o}),function(e){e[e.FORM=0]="FORM",e[e.TASK=1]="TASK",e[e.CLOCK=2]="CLOCK",e[e.SEQUENCE=3]="SEQUENCE",e[e.EXAM=4]="EXAM",e[e.VOTE=5]="VOTE",e[e.QQ_GROUP_FORM=6]="QQ_GROUP_FORM",e[e.QQ_GROUP_TASK=7]="QQ_GROUP_TASK",e[e.QQ_GROUP_CLOCK=8]="QQ_GROUP_CLOCK",e[e.QQ_GROUP_SEQ=9]="QQ_GROUP_SEQ",e[e.QQ_CHANNEL_FORM=10]="QQ_CHANNEL_FORM",e[e.QQ_CHANNEL_SEQ=11]="QQ_CHANNEL_SEQ",e[e.QUESTIONNAIRE=12]="QUESTIONNAIRE",e[e.FILE_COLLECT=13]="FILE_COLLECT"}(o||(o={}))},36849:(e,t,n)=>{var o;n.d(t,{U:()=>o}),function(e){e[e.COMMON=1]="COMMON",e[e.EXAM=2]="EXAM"}(o||(o={}))},45099:(e,t,n)=>{var o;n.d(t,{g:()=>o}),function(e){e[e.UNSET=0]="UNSET",e[e.REQUIRED=1]="REQUIRED",e[e.VALUE_TYPE=2]="VALUE_TYPE",e[e.RANGE=3]="RANGE",e[e.NOT_BETWEEN=9]="NOT_BETWEEN",e[e.INTEGER=10]="INTEGER",e[e.PATTERN=11]="PATTERN",e[e.LENGTH=12]="LENGTH",e[e.INNER_PATTERN=13]="INNER_PATTERN",e[e.BANK_CARD=14]="BANK_CARD",e[e.DECIMAL_PRECISION=15]="DECIMAL_PRECISION",e[e.SUBQUESTION_VALID=16]="SUBQUESTION_VALID"}(o||(o={}))},71783:(e,t,n)=>{n.d(t,{C:()=>createQuestion});var o=n(85556),r=(n(78851),n(33017),n(25737)),i=n.n(r),s=n(62540),a=n(95240),l=n(1671),c=n(56898),getQuestionBase=function(e,t){var n,r=Date.now(),s=function(e){var t,n;return null!==(n=((t={}).DATE=3,t.TIME=3,t.RATING=2,t.SCALE=2,t)[e])&&void 0!==n?n:1}(e),d=function(e){var t,n;if("SEGMENTATION"===e)return[];var o=((t={}).TEMPERATURE=function(){return[(0,c.Q)({checkType:13,params:{ruletype:90}})]},t.TABLE=function(){return[(0,c.Q)({checkType:16})]},t);return[(0,c.Q)({checkType:1})].concat((null===(n=o[e])||void 0===n?void 0:n.call(o))||[])}(e),u=function(e,t){var n="SEGMENTATION"===e?{required:!1,showValidate:!1}:{required:!0,showValidate:!1};return(0,o.__assign)((0,o.__assign)({},n),t)}(e,t.toggle),p=function(e,t){var n,r,s=((n={}).CASCADER=function(){return{levelNames:[],options:[{name:"",children:[{name:"",children:[]},{name:"",children:[]},{name:"",children:[]}]},{name:"",children:[{name:"",children:[]},{name:"",children:[]},{name:"",children:[]}]},{name:"",children:[{name:"",children:[]},{name:"",children:[]},{name:"",children:[]}]}]}},n.CHECKBOX=function(){return{options:[{id:i()("CHECKBOXOPT"),title:""},{id:i()("CHECKBOXOPT"),title:""}]}},n.COMMODITY=function(){return{options:[{id:i()("COMMODITYOPT"),title:""}]}},n.DATE=function(){return{subType:"date",format:'yyyy"年"m"月"d"日"'}},n.FILE=function(){return{fileNum:{max:1,min:1,type:"EQL"},fileType:[],nameRules:[{type:"username"},{type:"time"},{type:"filename"}]}},n.FILEIMAGE=function(){return{fileNum:{max:6,type:"MAX"}}},n.IMAGE=function(){return{fileNum:{max:6,type:"MAX"}}},n.MATRIX_CHECKBOX=function(){return{options:[{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""}],subtitles:[{id:i()("MATRIXSUB"),title:""},{id:i()("MATRIXSUB"),title:""},{id:i()("MATRIXSUB"),title:""}]}},n.MATRIX_RADIO=function(){return{options:[{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""}],subtitles:[{id:i()("MATRIXSUB"),title:""},{id:i()("MATRIXSUB"),title:""},{id:i()("MATRIXSUB"),title:""}]}},n.MATRIX_RATING=function(){return{options:[{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""},{id:i()("MATRIXOPT"),title:""}],subtitles:[{id:i()("MATRIXSUB"),title:""},{id:i()("MATRIXSUB"),title:""},{id:i()("MATRIXSUB"),title:""}]}},n.RADIO=function(){return{options:[{id:i()("RADIOOPT"),title:""},{id:i()("RADIOOPT"),title:""}]}},n.SCALE=function(){return{end:5,endText:"",order:"positive",start:1,startText:"",type:"0"}},n.SCAN=function(){return{ext:{cutLeft:0,cutRight:0}}},n.SELECT=function(){return{options:[{id:i()("SELECTOPT"),title:""},{id:i()("SELECTOPT"),title:""}]}},n.SORT=function(){return{options:[{id:i()("SORTOPT"),title:""},{id:i()("SORTOPT"),title:""}]}},n.TEMPERATURE=function(){return{unit:"celsius"}},n.TIME=function(){return{subType:"timetype",format:"hh:mm"}},n.RATING=function(){return{icon:"stars",mode:"continuous",degree:"satisfaction"}},n.TABLE=function(){var e=[createQuestion("SIMPLE",{title:"姓名"}),createQuestion("SIMPLE",{title:"电话",dataType:7,validate:[(0,c.Q)({checkType:13,params:{ruletype:2}})],validateSetting:{type:5}})],t=[{qlist:e.map((function(e){return e.id}))}];return{tableQuestionData:{questions:e,sections:t}}},n.VOTE=function(){return{options:[{id:i()("VOTEOPT"),title:""},{id:i()("VOTEOPT"),title:""}],multiple:!1}},n),d=(0,o.__assign)((0,o.__assign)({},null===(r=s[e])||void 0===r?void 0:r.call(s)),t),u=null==t?void 0:t.options;return(null==u?void 0:u.length)&&(d.options=d.options.map((function(e){return(0,o.__assign)((0,o.__assign)({},e),{id:e.id===l.H?l.H:i()("OPT")})})),a.Fk.has(e)&&(d.subtitles=d.subtitles.map((function(e){return(0,o.__assign)((0,o.__assign)({},e),{id:e.id===l.H?l.H:i()("MATRIXSUB")})})))),d}(e,t.qdata),m=function(e,t){var n;return((n={}).CHECKBOX=(0,o.__assign)({type:"MIN",number:1},t),n)[e]||t}(e,t.validateInput),h=function(e,t){var n;if(t){var r=((n={}).RADIO=function(){return{rightOptionIds:[]}},n.CHECKBOX=function(){return{rightOptionIds:[]}},n.FILLIN=function(){return{rightTexts:[],canInclude:!1,caseSensitive:!1}},n);return a.dm.has(e)?(0,o.__assign)((0,o.__assign)((0,o.__assign)({},r[e]),{score:0}),t):void 0}}(e,t.answerInfo),f={answerInfo:h,createTime:r,dataType:s,id:i()("".concat(e).concat(r)),isDirty:!1,placeholder:"",richSubtitle:"",subtitle:"",title:"",type:e,updateTime:r,validate:d,qdata:p,toggle:u,validateInput:m},g=(0,o.__assign)((0,o.__assign)((0,o.__assign)({},f),t),{toggle:f.toggle,qdata:f.qdata,validateInput:f.validateInput});return g.validate=function(e,t,n){if(e===t)return e;var o=Array.from(t);if(!n)return o;var r=o.findIndex((function(e){return 1===e.type}));if(-1!==r){var i=o.splice(r,1)[0];o.unshift(i)}else o.unshift((0,c.Q)({checkType:1}));return o}(d,g.validate||[],g.toggle.required),n=g,["validateInput","validateSetting","answerInfo"].forEach((function(e){void 0===n[e]&&delete n[e]})),n},createQuestion=function(e,t){var n=a.xy.has(e)?e:"SIMPLE",o=t?(0,s.Z)(t):{};return delete o.id,delete o.type,delete o.createTime,delete o.updateTime,getQuestionBase(n,o)}},66040:(e,t,n)=>{n.d(t,{OT:()=>r,xB:()=>bindThis,w0:()=>eventReport,px:()=>functionForward});var o=n(85556),r=(n(46510),function(e,t,n){var r=n.value;return{get:function(){var e=this,a11yFn=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if("keyup"!==t.type||["Enter"," "].includes(t.key))return r.call.apply(r,(0,o.__spreadArray)([e,t],n,!1))};return Object.defineProperty(this,t,{value:a11yFn,writable:!0}),a11yFn}}}),bindThis=function(e,t,n){var o=n.value;return{get:function(){var e=o.bind(this);return Object.defineProperty(this,t,{value:e,configurable:!0,writable:!0}),e},set:function(e){Object.defineProperty(this,t,{value:e,configurable:!0,writable:!0})}}},eventReport=function(e){var t=void 0===e?{}:e,n=t.type,r=t.before,i=void 0!==r&&r,s=t.after,a=void 0===s||s,l=t.reporterPropsKey,c=void 0===l?"onReport":l,d=t.getCustomProperty;return function(e,t,r){var s=n||t,l=r.value||r.initializer,u=r,p=function main(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var u=null===(e=this.props)||void 0===e?void 0:e[c],createEvent=function(e,r){return new CustomEvent("".concat(e).concat(s.replace(/./,(function(e){return e.toUpperCase()}))),{detail:(0,o.__assign)({params:n,context:t,retValue:r},null==d?void 0:d.call(t,t))})};i&&(null==u||u.call(this,createEvent("before")));var p=l.apply(this,n);return a&&(null==u||u.call(this,createEvent("after",p))),p};return u.initializer?(u.initializer=function initializer(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return p.bind(e).apply(void 0,t)}},u):(u.value=function descriptorValue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this?p.apply(this,e):p.apply(e[0],e.slice(1))},u)}},functionForward=function(e){void 0===e&&(e={handleReport:"onReport"});var t=new Map(Object.entries(e));return function(e){var n=e;t.forEach((function(t,o){e.prototype[o]||Object.defineProperty(n.prototype,o,{get:function(){var e=this,bound=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(Array.isArray(t)?t:[t]).forEach((function(t){var o;return null===(o=e.props[t])||void 0===o?void 0:o.apply(e,n)}))};return Object.defineProperty(this,o,{value:bound}),bound}})}))}}},46752:(e,t,n)=>{n.d(t,{b:()=>getError});var getError=function(e,t,n,o){return function(e,t){return e>=t}(t,n)?{level:t,code:e,message:null!=o?o:""}:null}},21886:(e,t,n)=>{n.d(t,{p:()=>localeLoader});var o=n(85556),r="zh_CN",normalizeLang=function(e){if(!e)return"";var t,n,o,r=e.replace(/-/g,"_");return{en:"en_US",zh_hans:"zh_CN",zh_hant:"zh_TW",zh_hk:"zh_TW",zh_mo:"zh_TW",zh_my:"zh_CN",zh_sg:"zh_CN"}[r.toLowerCase()]||(t=r.split("_"),n=t[0],o=t[1],t.slice(2).length?r:[n.toLowerCase(),null==o?void 0:o.toUpperCase()].join("_"))},localeLoader=function(e){return function(t){var n,i,s,a=function(t){function ChildClass(n){var i=t.call(this,n)||this;return i.state=(0,o.__assign)((0,o.__assign)({},i.state),{locale:e.locale}),normalizeLang(n.lang)!==r&&i.loadLocale(n.lang),i}return(0,o.__extends)(ChildClass,t),ChildClass.prototype.componentDidUpdate=function(e,n,o){var r;null===(r=t.prototype.componentDidUpdate)||void 0===r||r.call(this,e,n,o);var i=this.props.lang;i!==e.lang&&this.loadLocale(i)},ChildClass.prototype.loadLocale=function(t){var n,o=this,i=normalizeLang(t);i!==r&&i?null===(n=e[i])||void 0===n||n.call(e).then((function(e){var t=e.default;o.setState({locale:t})})):this.setState({locale:e.locale})},ChildClass}(t);return a.displayName=t.displayName||t.name,null!==(n=a.defaultProps)&&void 0!==n||(a.defaultProps={}),null!==(i=(s=a.defaultProps).lang)&&void 0!==i||(s.lang=r),a}}},81893:(e,t,n)=>{n.d(t,{FJ:()=>m,Oi:()=>setNewWindowUrl,wB:()=>tencentDocOpenUrl,lY:()=>tencentDocOpenUrlForAll});var o=n(85556),r=n(36303),doOpenUrlForMiniProgram=function(e,t){var n=t.replace,o=t.wxUrl,r=window.wx;if(null==r?void 0:r.miniProgram){var i=null!=o?o:function(e){return/^https?:\/\/docs\.qq\.com\/(sheet|doc|slide|form|pdf|file|mind|flowchart|rec)\//.test(e)?"/pages/detail/detail?url=".concat(encodeURIComponent(e)):"/pages/webview/webview?url=".concat(encodeURIComponent(e))}(e);n?r.miniProgram.redirectTo({url:i}):r.miniProgram.navigateTo({url:i})}else!function(e,t){var n=t.replace,o=t.windowName,r=t.windowFeatures;n?window.location.replace(e):window.open(e,o,r)}(e,t)},i=n(87861),doOpenUrlForQQorDocApp=function(e,t){var n=t.style,o=t.replace,s=t.useNewConfig,a=window.mqq;o||i.Y0?function(e){r.default.isTencentDocsApp?(window.history.replaceState(null,document.title,e),window.location.replace("")):window.location.replace(e)}(e):null==a||a.invoke("ui","openUrl",{style:null!=n?n:2,target:1,url:e,useQQBrowser:!0,useNewConfig:s})},s=n(35442),a=r.default.isMac||r.default.isIPad;const l=new(function(){function CtrlKeyManager(){var e=this;this.isPressed=!1,this.handleKeyboardEvent=function(t){t.key===(a?"Meta":"Control")&&e.setCtrlKeyStatus("keydown"===t.type)},this.handleBlurEvent=function(){e.setCtrlKeyStatus(!1)};["keydown","keyup"].forEach((function(t){document.addEventListener(t,e.handleKeyboardEvent)})),window.addEventListener("blur",this.handleBlurEvent)}return CtrlKeyManager.prototype.setCtrlKeyStatus=function(e){this.isPressed=e},CtrlKeyManager}());var c,isWedriveLink=function(e){return i.rD.test(e)},isEntLink=function(e){return i.DC.test(e)};!function(e){e[e.REPLACE=0]="REPLACE",e[e.FORK_WEBVIEW=1]="FORK_WEBVIEW",e[e.BROWSER=2]="BROWSER",e[e.NEW_WEBVIEW=3]="NEW_WEBVIEW"}(c||(c={}));var d,u,escapeUrl=function(e){return/^(mailto:(\/\/)?)?([a-z\u00a1-\uffff0-9_\-.])+@([a-z\u00a1-\uffff0-9_\-.])+\.([a-z]{2,})$/i.test(e)?e.replace(/(mailto:(\/\/)?)?/i,"mailto:"):/^(https?|ftp|file):\/\//i.test(e)?e:"http://".concat(e)},fetchFileIdFromSvr=function(e){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t="".concat(i.fC,"?url=").concat(e),[4,fetch(t,{credentials:"include"}).then((function(e){return e.json()}))];case 1:return[2,n.sent().body.fileid];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))},openInBrowser=function(e,t){t.replace?window.location.href=e:window.open(e)},openInMobileBrowser=function(e,t){var n,o,r;return(null===(o=null===(n=window.mqq)||void 0===n?void 0:n.ui)||void 0===o?void 0:o.openUrl)?window.mqq.ui.openUrl({style:3,target:t.replace?0:1,url:e,useQQBrowser:!0}):(null===(r=window.qmailBridge)||void 0===r?void 0:r.openDocLink)?window.qmailBridge.openDocLink({url:e}):openInBrowser(e,t)},doOpenUrlForWxworkOrWedrive=function(e,t){try{var n=r.default.isMobile,a=r.default.isWxDrive,c=r.default.isWxWorkVersionAboveOrEqual;return n?(0,s.yC)((0,s.H7)("wdocs",navigator.userAgent)||"","1.0.0")>=0?function(e,t){var n;if(!(null===(n=window.tdocs)||void 0===n?void 0:n.openUrl))return openInMobileBrowser(e,t);var o=isEntLink(e)?1:3,r=t.replace?0:o;return window.tdocs.openUrl({url:e,target:r,style:3})}(e,t):openInMobileBrowser(e,t):a?function(e,t){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(null===(r=window.qmailBridge)||void 0===r?void 0:r.openFileInWedrive)&&isWedriveLink(e)?[4,fetchFileIdFromSvr(e)]:[3,2];case 1:if(n=o.sent())return[2,window.qmailBridge.openFileInWedrive(n,e)];o.label=2;case 2:return(null===(i=window.tdocs)||void 0===i?void 0:i.openInTab)&&isEntLink(e)?[2,window.tdocs.openInTab({url:e})]:[2,openInBrowser(e,t)]}}))}))}(e,t):c("3.1.18")?1===t.openType&&c("4.0.0")?function(e){var t;null===(t=window.tdocs)||void 0===t||t.openInWxworkBrowser({url:e})}(e):function(e,t){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var n,r,s,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t.replace?(window.location.href=e,[2]):(null===(r=window.tdocs)||void 0===r?void 0:r.openFileInWedrive)&&isWedriveLink(e)?[4,fetchFileIdFromSvr(e)]:[3,2];case 1:if(n=o.sent())return window.tdocs.openFileInWedrive({fileId:n,url:e}),[2];o.label=2;case 2:return(null===(s=window.tdocs)||void 0===s?void 0:s.openInBrowser)&&!i.wZ.test(e)?(window.tdocs.openInBrowser({url:escapeUrl(e)}),[2]):(null===(a=window.tdocs)||void 0===a?void 0:a.openInTab)?(window.tdocs.openInTab({is_silent:l.isPressed,url:e}),[2]):(openInBrowser(e,t),[2])}}))}))}(e,t):openInBrowser(e,t)}catch(d){return openInBrowser(e,t)}},p=n(37154),doOpenUrlForOther=function(e,t){var n=t.noHistory,r=t.replace;if(!function(e){var t=e.url,n=e.windowFeatures,o=e.windowName;return!(!o||!n||(window.open(t,o,n),0))}((0,o.__assign)((0,o.__assign)({},t),{url:e}))){var i=document.createElement("a");i.href=e,r?i.target="_self":(i.target="_blank",i.rel="noreferrer"),n&&window.history.replaceState(null,document.title,e);var s=new MouseEvent("click");i.dispatchEvent(s)}};!function(e){e.NAME="wwapp_cst",e.VID="wwapp_vid",e.DEVICE_ID="wwapp_deviceid"}(d||(d={})),function(e){e.NAME="cst",e.VID="vid",e.DEVICE_ID="deviceid"}(u||(u={}));var multi_user_getRealMultiUrl=function(e){if((0,p.Tb)("u",e)||!function(e){return i.py.test(e)}(e))return e;var t,n,o=(t=window,n=t.global_multi_user,t.nowUserIndex||(null==n?void 0:n.nowUserIndex)||(0,p.Tb)("u"));return o?(0,p.At)(e,"u=".concat(o)):e},shouldRewriteScenarioPage=function(e){return r.default.isMiniProgram?!function(e){var t,n=null===(t=e.match(/(https?:\/\/)?([^/]+)/i))||void 0===t?void 0:t[2];return new RegExp(i.Cs).test(n)||new RegExp(i.qe).test(n)}(e):!i.wZ.test(e)};function getTargetUrl(e,t,n){var o=function(e){return e===i.Cs?i.qe:i.Cs}(n);if(!t)return e.replace(n,o).replace(n,o);var r=t.indexOf("?")<0?"?":"&";return"".concat(t).concat(r,"url=").concat(encodeURIComponent(e))}var getChangeUrl=function(e){var t,n=e,o=function(e){return i.Sb.test(e)}(n),r=o?(0,p.oW)(n,"url"):"",s=null===(t=(n=o?(0,p.Tb)("url",n):n).match(/(https?:\/\/)?([^/]+)/i))||void 0===t?void 0:t[2],a=window.location.host;if(s!==a&&[i.qe,i.Cs].includes(s)){var l=getTargetUrl(n,r,s);return"https://".concat(a,"/cgi/gateway/changeticket?url=").concat(encodeURIComponent(l))}return e},preProcessUrl=function(e,t){if(!e)return"";var n=window.location,o=n.host,s=n.protocol,a=e;a.startsWith("//")&&(a="".concat(s).concat(a)),a=function(e){if(!r.default.isWxWork)return e;var t=e.split("#"),n=t.shift(),o=t.join("#");return[(0,p.oW)(n,["wwapp_cst","wwapp_vid","wwapp_deviceid","cst","vid","deviceid"]),o].filter(Boolean).join("#")}(a),a=getChangeUrl(a);var l=t||{},c=l.ignoreDomainDetect,d=l.noUserIndex;if(o!==i.qe&&shouldRewriteScenarioPage(e)&&!c){a="https://".concat(o,"/scenario/link.html?url=").concat(encodeURIComponent(a));var u=window.clientVars;u&&(a="".concat(a,"&pid=").concat(u.globalPadId,"&cid=").concat(u.creatorId))}return d||(a=multi_user_getRealMultiUrl(a)),a},tencentDocOpenUrl=function(e,t,n){if(e){var o=r.default.isMobile,i=r.default.isMiniProgram;if(o)window.open(e,t,n);else{var s=document.createElement("a");s.href=preProcessUrl(e),s.target=i?"_self":"_blank",s.rel="noreferrer";var a=new MouseEvent("click");s.dispatchEvent(a)}}},tencentDocOpenUrlForAll=function(e){var t=e.url,n=preProcessUrl(t,e);if(n){var o=r.default.isPCTencentDocsClient,i=r.default.isQQMiniProgram,s=r.default.isTencentDocsApp,a=r.default.isTimOrQQ,l=r.default.isWeChat,c=r.default.isWxDrive,d=r.default.isWxMiniProgram,u=r.default.isWxWork;switch(!0){case d||i:doOpenUrlForMiniProgram(n,e);break;case a||s:doOpenUrlForQQorDocApp(n,e);break;case u||c:doOpenUrlForWxworkOrWedrive(n,e);break;case l:window.location.href=n;break;case o:!function(e,t){var n=t.replace,o=t.windowFeatures,r=t.windowName;n?window.location.href=e:window.open((0,p.At)(e,"opennew=1"),r,o)}(n,e);break;default:doOpenUrlForOther(n,e)}}},setNewWindowUrl=function(e,t,n){"miniProgram"!==e?t&&((e||window).location.href=preProcessUrl(t,n)):tencentDocOpenUrlForAll((0,o.__assign)((0,o.__assign)({},n),{url:t}))},m=multi_user_getRealMultiUrl},29954:(e,t,n)=>{n.d(t,{y:()=>parseTDocUrl});var o,r,i,s=n(85556);!function(e){e[e.DOC=0]="DOC",e[e.SHEET=1]="SHEET",e[e.FORM=2]="FORM",e[e.SLIDE=4]="SLIDE",e[e.NOTE=5]="NOTE",e[e.PDF=6]="PDF",e[e.AIO=7]="AIO",e[e.UNKNOWN=10]="UNKNOWN",e[e.MIND=90]="MIND",e[e.FLOWCHART=91]="FLOWCHART",e[e.DRIVE=101]="DRIVE"}(r||(r={})),function(e){e.DOC="doc",e.SHEET="sheet",e.FORM="form",e.SLIDE="slide",e.NOTE="note",e.PDF="pdf",e.AIO="aio",e.UNKNOWN="unknown",e.MIND="mind",e.FLOWCHART="flowchart",e.DRIVE="drive"}(i||(i={}));var a=((o={})[0]="doc",o[1]="sheet",o[2]="form",o[4]="slide",o[5]="note",o[6]="pdf",o[7]="aio",o[10]="unknown",o[90]="mind",o[91]="flowchart",o[101]="drive",o),l=n(95789),c=n(46752),d=n(41589),parseTDocUrl=function(e,t){return void 0===t&&(t={}),(0,s.__awaiter)(void 0,void 0,void 0,(function(){var n,o,r,i,u,p,m,h,f,g=t.timeout,_=void 0===g?5e3:g,y=(0,s.__rest)(t,["timeout"]);return(0,s.__generator)(this,(function(t){switch(t.label){case 0:n="/v2/file/link/getinfo",o=(0,d.ej)("TOK"),r=fetch("".concat(n,"?xsrf=").concat(o),(0,s.__assign)({method:"POST",body:JSON.stringify({docUrl:e}),credentials:"include"},y)),t.label=1;case 1:return t.trys.push([1,4,,5]),i=new Promise((function(e,t){setTimeout((function(){t(new Error("".concat(n," - TIMEOUT")))}),_)})),[4,Promise.race([r,i])];case 2:return[4,t.sent().json()];case 3:return u=t.sent(),p=u.retcode,m=u.msg,0!==p?[2,{error:(0,c.b)(p.toString(),3,3,m)}]:(h=u.result.linkInfo,[2,{data:(0,s.__assign)((0,s.__assign)({},h),{docTypeAlias:a[h.docType]})}]);case 4:return f=t.sent(),[2,{error:(0,c.b)(l.f.get("TDOC_URL_PARSE_FAIL"),3,3,f.message)}];case 5:return[2]}}))}))}},41589:(e,t,n)=>{n.d(t,{H8:()=>convertSize,lU:()=>genQuestionMap,dJ:()=>genQlistBySections,tE:()=>getFileNameAssociated,xv:()=>getSelectedOptionIndexes,gp:()=>getWindowHeight,tZ:()=>getWxConfig,tr:()=>isAnswerEmpty,vb:()=>mergeComponentProps,qH:()=>resetTextAreaHeight,Dc:()=>wait,ej:()=>getCookie,v2:()=>getEditorSelectionInClipBoard});var o=n(85556),r=(n(78851),n(33017),n(1671)),convertSize=function(e,t,n,o,r){void 0===n&&(n="AUTO"),void 0===o&&(o=1/0),void 0===r&&(r=!0);var i=["B","K","M","G","T","P","E","Z","Y"],s=i.indexOf(t.toUpperCase()[0]),a=i.indexOf(n.toUpperCase()[0]);if(-1===s||"AUTO"!==n&&(-1===a||a===s))return"".concat(e).concat(t);var getPrecision=function(e){return o<0||o===1/0?e.toString():"".concat(Number(e.toFixed(o)))};if("AUTO"===n)return e>=1024&&s<i.length-1?convertSize(e/1024,i[s+1],n,o):e<1&&s>0?convertSize(1024*e,i[s-1],n,o):"".concat(getPrecision(e)).concat(t);var l=r?i[a]:"";return"".concat(getPrecision(e*Math.pow(1024,s-a))).concat(l)},genQuestionMap=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n;return(0,o.__assign)((0,o.__assign)({},e),((n={})[t.id]=t,n))}),{})},genQlistBySections=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){return e.concat(t.qlist||[])}),[])},getFileNameAssociated=function(e,t,n){return e.map((function(e,o){var r,i,s=t[e];return["FILE","FILEIMAGE"].includes(s.type)&&(null===(i=null===(r=s.qdata)||void 0===r?void 0:r.nameRules)||void 0===i?void 0:i.length)&&s.qdata.nameRules.find((function(e){var t=e.type,o=e.value;return"question"===t&&o===n}))?o:-1})).filter((function(e){return-1!==e}))},getSelectedIndexesByPropertyNames=function(e,t,n,o){var r;void 0===n&&(n=["id"]);var i=(void 0===o?{}:o).ignoreEmpty,s=void 0===i||i;if(!(null==e?void 0:e.length)||!n.length)return new Array(null!==(r=null==t?void 0:t.length)&&void 0!==r?r:0).fill(-1);var a=new Map(n.map((function(e){return[e,new Map]})));e.forEach((function(e,t){n.forEach((function(n){var o=e[n],r=a.get(n),i=r.get(o);i?i.push(t):r.set(o,[t])}))}));var l,c=(l=n.length,Array.from({length:l},(function(e,t){return Math.pow(2,t)})).reverse()),d=[];t.forEach((function(e,t){d[t]=new Map,n.forEach((function(n,o){var r=e[n];if(!s||(void 0===(i=r)&&(i=""),null!==i&&""!==i)){var i,l=a.get(n).get(r);l&&l.forEach((function(e){var n=d[t].get(e)||0;d[t].set(e,n+c[o])}))}}))}));var u=new Map;d.forEach((function(e,t){e.forEach((function(e,n){var o=u.get(n)||new Map;o.set(t,e),u.set(n,o)}))}));var p=[];return d.forEach((function(e,t){var n=Array.from(e).sort((function(e,t){var n=e[1];return t[1]-n})),o=n.some((function(e){var n=e[0],o=e[1],r=u.get(n);if(!r)return!1;var i,s,a=(i=r,Array.from(i).sort((function(e,t){var n=e[1];return t[1]-n}))[0][1]);return o===a&&(p.push(n),u.delete(n),s=t,u.forEach((function(e){e.delete(s)})),!0)}));o||p.push(-1)})),p},getSelectedOptionIndexes=function(e,t){if(!(null==e?void 0:e.length)||!(null==t?void 0:t.length))return[];var n=t.findIndex((function(e){return e.id===r.H})),i=Array.from(e,(function(e){var t=e.id,n=(0,o.__rest)(e,["id"]);return(0,o.__assign)((0,o.__assign)({},n),{id:"".concat(t)})})),s=Array.from(t),getSelectIndexes=function(){return getSelectedIndexesByPropertyNames(i,s,["title","id"],{ignoreEmpty:!1})},a=i.slice(-1)[0].id===r.H?i.length-1:-1,l=-1!==a;if(!(-1!==n))return getSelectIndexes().map((function(e){return e===a?-1:e}));s.splice(n,1),l&&i.splice(a,1);var c=getSelectIndexes();return c.splice(n,0,a),c},getWindowHeight=function(){return Math.max(window.innerHeight,document.documentElement.clientHeight)},getWxConfig=function(e,t){if(void 0===t&&(t=[]),e)return(0,o.__assign)((0,o.__assign)({},e),{jsApiList:Array.from(new Set(t.concat(e.jsApiList).filter(Boolean)))})},isAnswerEmpty=function(e){var t=e.type,n=e.content;return"LOCATION"===t?"string"==typeof n?!n.length:!(null==n?void 0:n.value):"TABLE"!==t?!(null==n?void 0:n.length):!(null==n?void 0:n.some((function(e){return e.some((function(e){return!isAnswerEmpty(e)}))})))},mergeComponentProps=function(e,t,n){var r=t.all||{},i=t[e.toLocaleLowerCase()]||{},s=n||{},isFunction=function(e){return"function"==typeof e},a=isFunction(s),l=isFunction(r),c=isFunction(i),mergeProps=function(e,t,n){var r=(0,o.__assign)({},e);return Object.keys(t).forEach((function(e){if(isFunction(t[e])&&isFunction(r[e])){var n=r[e];r[e]=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n.apply(void 0,o),t[e].apply(t,o)}}else r[e]=t[e]})),Object.keys(n).forEach((function(e){if(isFunction(n[e])&&isFunction(r[e])){var t=r[e];r[e]=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return t.apply(void 0,o),n[e].apply(n,o)}}else r[e]=n[e]})),r};if(a||l||c){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mergeProps(a?s.apply(void 0,e):s,l?r.apply(void 0,e):r,c?i.apply(void 0,e):i)}}return mergeProps(s,r,i)},resetTextAreaHeight=function(e,t){if(e&&!(e.value.length>t)){var n=e.style;n.height="auto",n.height="".concat(Math.max(e.scrollHeight,e.offsetHeight),"px")}},wait=function(e){return new Promise((function(t){setTimeout(t,e)}))},getCookie=function(e){var t=new RegExp("(?:^|;+|\\s+)".concat(e,"=([^;]*)")),n=document.cookie.match(t);return(n?n[1]:"")||""},getEditorSelectionInClipBoard=function(){var e,t=window.getSelection(),n="",o="";if(t&&t.rangeCount>0){var r=t.getRangeAt(0).cloneContents(),i=document.createElement("div");i.appendChild(r.cloneNode(!0)),n=i.innerHTML,o=(null===(e=window.getSelection())||void 0===e?void 0:e.toString())||""}return{html:n,plain:o}}},37154:(e,t,n)=>{n.d(t,{At:()=>addURLParameters,Tb:()=>getURLParameter,oW:()=>removeURLParameters});n(21045);var addURLParameters=function(e,t){var n,o,r="string"==typeof t?[t]:t;if(!(null==r?void 0:r.length))return e;var i=(null!==(n=e.match(/^[^?#]+/))&&void 0!==n?n:[])[0],s=null===(o=e.match(/^[^#]*(\?[^#]+)/))||void 0===o?void 0:o[1],a=e.split("#").slice(1),l=new URLSearchParams(s);return r.forEach((function(e){var t=e.split("="),n=t[0],o=t[1],r=void 0===o?"":o;l.append(n,r)})),[[i,l.toString()].join("?"),a.join("#")].filter(Boolean).join("#")},getURLParameter=function(e,t){void 0===t&&(t=window.location.search);var n=t.match(new RegExp("(\\?|&)".concat(e,"=([^&]*)(#|&|$)")));return n?decodeURIComponent(n[2]):""},removeURLParameters=function(e,t){var n="string"==typeof t?[t]:t;if(!(null==n?void 0:n.length))return e;var o=e.split("?"),r=o[0],i=o.slice(1).join("?").split("#"),s=i[0],a=i[1],l=new URLSearchParams(s);return n.forEach((function(e){return l.delete(e)})),[[r,l.toString()].filter(Boolean).join("?"),a].filter(Boolean).join("#")}},56898:(e,t,n)=>{n.d(t,{Q:()=>genValidateRule});var o=n(85556),genValidateRule=function(e){var t=void 0===e?{}:e,n=t.checkType,r=void 0===n?0:n,i=t.params,s=void 0===i?{}:i,a=s.message,l=void 0===a?"":a,c=s.ruletype,d={type:r,rules:(0,o.__rest)(s,["message","ruletype"]),message:l};return void 0!==c&&(d.ruletype=c),d}},77492:(e,t,n)=>{var o=n(20132);e.exports=o.call(Function.call,Object.prototype.hasOwnProperty)},20497:(e,t,n)=>{n.d(t,{Z:()=>p});const o="function"==typeof window.WeakMap&&"function"==typeof window.Map,r=function(){if(o)return window.WeakMap;function getIndex(e,t){let n=-1;return e.some(((e,o)=>{let r=e[0]===t;return r&&(n=o),r})),n}return class{constructor(){this.__entries__=[]}get(e){let t=getIndex(this.__entries__,e);return this.__entries__[t][1]}set(e,t){let n=getIndex(this.__entries__,e);~n?this.__entries__[n][1]=t:this.__entries__.push([e,t])}delete(e){let t=this.__entries__,n=getIndex(t,e);~n&&t.splice(n,1)}has(e){return!!~getIndex(this.__entries__,e)}}}(),i=o?window.Map:class extends r{get size(){return this.__entries__.length}clear(){this.__entries__.splice(0,this.__entries__.length)}entries(){return this.__entries__.slice()}keys(){return this.__entries__.map((e=>e[0]))}values(){return this.__entries__.map((e=>e[1]))}forEach(e,t=null){for(const n of this.__entries__)e.call(t,n[1],n[0])}},s=window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now(),a="function"==typeof window.MutationObserver,l=window.requestAnimationFrame?window.requestAnimationFrame:e=>setTimeout((()=>e(s())),1e3/60);function debounce(e,t=0){let n=!1;return function(...o){!1!==n&&clearTimeout(n),n=setTimeout((()=>{n=!1,e.apply(this,o)}),t)}}function mapToClientRect(e){const t={};for(const n of Object.keys(e))t[n]={value:e[n]};return Object.defineProperties({},t)}function createRectangle(e=0,t=0,n=0,o=0){return{left:e,top:t,width:n,height:o,bottom:t+o,right:e+n}}function getRectangle(e){return e===document.documentElement?createRectangle(0,0,e.clientWidth,e.clientHeight):e.getBoundingClientRect()}function getArea(e){return e.width*e.height}class IntersectionObserverEntry{constructor(e,t,n,o,r,i){Object.defineProperties(this,{boundingClientRect:{value:t},intersectionRatio:{value:o},intersectionRect:{value:mapToClientRect(n)},rootBounds:{value:mapToClientRect(r)},target:{value:e},time:{value:i}})}}const c=createRectangle();function computeIntersection(e,t){const n=Math.max(t.left,e.left),o=Math.min(t.right,e.right),r=Math.max(t.top,e.top);return createRectangle(n,r,o-n,Math.min(t.bottom,e.bottom)-r)}class IntersectionObservation{constructor(e,t){this.target=e,this.observer=t,this.prevTargetRect=c,this.prevThreshold=0,this.prevRatio=0}updateIntersection(e,t){let n,o=getRectangle(this.target),r=this.getIntersectionData(e,t,o),i=+r.exists,a=r.ratio!==this.prevRatio,l=!function isEqual(e,t){return e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}(o,this.prevTargetRect);if(r.exists&&!function isEmpty(e){return 0===e.height&&0===e.width}(o)&&(i=this.observer.getThresholdGreaterThan(r.ratio)),n=i!==this.prevThreshold,this.prevTargetRect=o,this.prevThreshold=i,this.prevRatio=r.ratio,r.exists||(r.ratio=0,r.rect=c),n){const e=new IntersectionObserverEntry(this.target,o,r.rect,r.ratio,t,s());this.observer.queueEntry(e)}return{ratioChanged:a,thresholdChanged:n,targetRectChanged:l}}getIntersectionData(e,t,n){const o=this.target;n||(n=getRectangle(this.target)),t||(t=getRectangle(e));let r=function isDetached(e,t){const n=document.documentElement;return e!==n&&!n.contains(e)||!e.contains(t)}(e,o),i=r?c:function getIntersection(e,t,n,o){let r=o,i=t.parentNode,s=!1;for(;!s;){let t=null;i===e||1!==i.nodeType?(s=!0,t=n):"visible"!==window.getComputedStyle(i).overflow&&(t=getRectangle(i)),t&&(r=computeIntersection(r,t)),i=i.parentNode}return r}(e,o,t,n),s=!r&&i.width>=0&&i.height>=0;return{rect:i,ratio:getArea(i)/getArea(n)||0,exists:s}}}class _IntersectionObserver_IntersectionObserver{constructor(e,t={},n,o){if("function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");if("object"!=typeof t)throw new TypeError("parameter 2 is not an object.");if("root"in t&&!(t.root instanceof Element))throw new TypeError("member root is not of type Element.");const r=function parseThresholds(e=0){let t=e;return Array.isArray(e)?e.length||(t=[0]):t=[e],t.map((e=>{if(e=Number(e),!window.isFinite(e))throw new TypeError("The provided double value is non-finite.");if(e<0||e>1)throw new RangeError("Threshold values must be between 0 and 1.");return e})).sort()}(t.threshold),s=function parseMargins(e="0px"){if((e=(e+"").split(/\s+/)).length>4)throw new Error("Extra text found at the end of rootMargin.");return e[0]=e[0]||"0px",e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],{rawData:e.join(" "),parsedData:e.map((e=>{let[,t,n]=/^(-?\d*\.?\d+)(px|%)$/.exec(e)||[];const o="px"===n;if(t=parseFloat(t),!window.isFinite(t))throw new Error("rootMargin must be specified in pixels or percent.");return o||(t/=100),{value:t,pixels:o}}))}}(t.rootMargin);this.root=t.root||null,this.rootMargin=s.rawData,this.thresholds=Object.freeze(r),this._root=t.root||document.documentElement,this._callback=e,this._rootMargin=s.parsedData,this._targets=new i,this._quedEntries=[],this._publicObserver=o||this,this.controller=n}observe(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(e instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');let t=this._targets;t.has(e)||(t.set(e,new IntersectionObservation(e,this)),this.controller.isConnected(this)||this.controller.connect(this),this.controller.startUpdateCycle())}unobserve(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(e instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');let t=this._targets;t.has(e)&&t.delete(e),t.size||this.disconnect()}disconnect(){this._targets.clear(),this.controller.disconnect(this)}takeRecords(){return this._quedEntries.splice(0)}notifySubscriber(){const e=this.takeRecords(),t=this._publicObserver;e.length&&this._callback.call(t,e,t)}queueEntry(e){this._quedEntries.push(e)}hasEntries(){return!!this._quedEntries.length}updateObservations(){let e=this._root,t=this.getRootRect(),n=!1;return this._targets.forEach((o=>{const r=o.updateIntersection(e,t);(r.ratioChanged||r.targetRectChanged)&&(n=!0)})),n}getThresholdGreaterThan(e){let t=this.thresholds,n=t.length,o=0;for(;o<n&&t[o]<=e;)++o;return o}getRootRect(){return function applyMargins(e,t){t=t.map(((t,n)=>{let o=t.value;return t.pixels||(o*=n%2?e.width:e.height),o}));const n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n}(getRectangle(this._root),this._rootMargin)}}const d=new class IntersectionObserverController{constructor(e=50,t=!1){this._idleTimeout=e,this._trackHovers=t,this._cycleStartTime=-1,this._isUpdateScheduled=!1,this._repeatCycle=!1,this._hoverInitiated=!1,this._mutationsObserver=null,this._isListening=!1,this._observers=[],this.startUpdateCycle=this.startUpdateCycle.bind(this),this.scheduleUpdate=this.scheduleUpdate.bind(this),this._onMutation=this._onMutation.bind(this),this._repeatHandler=debounce(this.scheduleUpdate,200),this._onMouseOver=debounce(this.startUpdateCycle,200)}get idleTimeout(){return this._idleTimeout}set idleTimeout(e){this._idleTimeout=e}connect(e){this.isConnected(e)||this._observers.push(e),this._isListening||this._initListeners()}disconnect(e){let t=this._observers,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this._isListening&&this._removeListeners()}isConnected(e){return!!~this._observers.indexOf(e)}_updateObservers(){let e=!1;for(const t of this._observers)t.updateObservations()&&(e=!0),t.hasEntries()&&t.notifySubscriber();return e}startUpdateCycle(){this._cycleStartTime=s(),this.scheduleUpdate()}scheduleUpdate(e){if("number"==typeof e){const e=this._updateObservers();if(this._isUpdateScheduled=!1,!this._wasCycleStarted())return;e?this.startUpdateCycle():this._hasIdleTimeEnded()?this._onCycleEnded():this.scheduleUpdate()}else this._isUpdateScheduled||(l(this.scheduleUpdate),this._isUpdateScheduled=!0)}_hasIdleTimeEnded(){return s()-this._cycleStartTime>this._idleTimeout}_wasCycleStarted(){return-1!==this._cycleStartTime}_onCycleEnded(){this._cycleStartTime=-1,this._repeatCycle&&(this._cycleStartTime=0,this._repeatHandler())}_initListeners(){this._isListening||(this._isListening=!0,window.addEventListener("resize",this.startUpdateCycle,!0),window.addEventListener("scroll",this.scheduleUpdate,!0),this._trackHovers&&this._addHoverListener(),a?(this._mutationsObserver=new MutationObserver(this._onMutation),this._mutationsObserver.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(this._repeatCycle=!0,window.addEventListener("click",this.startUpdateCycle,!0),this.startUpdateCycle()))}_removeListeners(){this._isListening&&(window.removeEventListener("resize",this.startUpdateCycle,!0),window.removeEventListener("scroll",this.scheduleUpdate,!0),this._removeHoverListener(),a?this._mutationsObserver&&(this._mutationsObserver.disconnect(),this._mutationsObserver=null):(this._repeatCycle=!1,window.removeEventListener("click",this.startUpdateCycle,!0)),this._isListening=!1)}enableHover(){this._trackHovers=!0,this._isListening&&this._addHoverListener()}disableHover(){this._trackHovers=!1,this._removeHoverListener()}isHoverEnabled(){return this._trackHovers}_addHoverListener(){this._hoverInitiated||(window.addEventListener("mouseover",this._onMouseOver,!0),this._hoverInitiated=!0)}_removeHoverListener(){this._hoverInitiated&&(window.removeEventListener("mouseover",this._onMouseOver,!0),this._hoverInitiated=!1)}_onMutation(e){e.every((e=>"attributes"!==e.type))?this.scheduleUpdate():this.startUpdateCycle()}},u=new r;class IntersectionObserver{constructor(e,t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");const n=new _IntersectionObserver_IntersectionObserver(e,t,d,this);Object.defineProperties(this,{root:{value:n.root},thresholds:{value:n.thresholds},rootMargin:{value:n.rootMargin}}),u.set(this,n)}static get idleTimeout(){return d.idleTimeout}static set idleTimeout(e){if("number"!=typeof e)throw new TypeError('type of "idleTimeout" value must be a number.');if(typeof e<0)throw new TypeError('"idleTimeout" value must be greater than 0.');d.idleTimeout=e}static get trackHovers(){return d.isHoverEnabled()}static set trackHovers(e){if("boolean"!=typeof e)throw new TypeError('type of "trackHovers" value must be a boolean.');e?d.enableHover():d.disableHover()}}["observe","unobserve","disconnect","takeRecords"].forEach((e=>{IntersectionObserver.prototype[e]=function(){return u.get(this)[e](...arguments)}}));const p=IntersectionObserver},74161:()=>{},95968:(e,t,n)=>{n.r(t)},49981:()=>{},97975:()=>{},42923:(e,t,n)=>{n.d(t,{E:()=>o});const o={formInfo:{state:{hadShowDeleteSubmit:!1,formInfo:{formData:{},conclusion:{}},roster:{},tempAnswerData:[],tableQuestionRowIndex:0,tableSubFormDisabled:!1,tableSubFormFromPage:"",isAgainFill:!1},setFormInfo(e){this.state.formInfo=e},updateFormData(e){this.state.formInfo.formData=e},setConclusion(e){this.state.formInfo.conclusion=e},setRosterMembers(e){this.state.roster.members=e},setTempAnswerData(e){this.state.tempAnswerData=e},setHadShowDeleteSubmit(e){this.state.hadShowDeleteSubmit=e},setTableQuestionRowIndex(e){this.state.tableQuestionRowIndex=e},setTableSubFormDisabled(e){this.state.tableSubFormDisabled=e},setTableSubFormFromPage(e){this.state.tableSubFormFromPage=e},setIsAgainFill(e){this.state.isAgainFill=e}},formSetting:{state:{canMultiSubmit:!1,canCheckPaperScore:!1,showResubmitToast:!1,conclusion:{linkList:[],picSrc:"",remarkTitle:""}},setMultiSubmit(e){this.state.canMultiSubmit=e},setCanCheckPaperScore(e){this.state.canCheckPaperScore=e},setShowResubmitToast(e){this.state.showResubmitToast=e},setConclusion(e){this.state.conclusion=e}},formStatistic:{state:{lastSid:0,paperTotalScore:0},setLastSid(e){this.state.lastSid=e},setPaperTotalScore(e){this.state.paperTotalScore=e}}}},72556:(e,t,n)=>{n.d(t,{t:()=>i});var o=n(14042),r=n(54734);const i={formName:r.Z.t("无标题收集表"),updateTime:1532399973794,title:"",subtitle:"",author:"",themeClass:"default",padId:"3$p5b69608f0004cac81d4b50eb00035180",isDirty:!1,rightBarClicked:!1,questions:[{id:"blank-1",section:0,title:"",subtitle:"",placeholder:r.Z.t("输入问题，例如“你的姓名”"),isDirty:!1,createTime:1532400190764,updateTime:1532400190764,type:o.c.SIMPLE,qdata:{placeholder:r.Z.t("请填写")},validate:[{type:12,rules:{max:500,open:!1},message:r.Z.t("输入内容需不超过500个字符。")}],toggle:{required:!1,randomOption:!1,showValidate:!1,showSubtitle:!1},questionDescripe:{simpleFirstIndex:0,simpleSecondIndex:0,simpleUserInputContent:"",simpleUserInputContentSupply:"",simpleUserInputErrorMessage:""}},{id:"blank-2",section:0,title:"",subtitle:"",placeholder:r.Z.t("输入问题，例如“你的性别”"),isDirty:!1,createTime:1532400190764,updateTime:1532400190764,type:o.c.RADIO,qdata:{options:[{id:111,title:r.Z.t("男")},{id:222,title:r.Z.t("女")}]},validate:null,toggle:{required:!1,randomOption:!1,showValidate:!1,showSubtitle:!1}}],sections:[{sid:0,title:"",qlist:["blank-1","blank-2"]}]};r.Z.t("无标题试题"),r.Z.t("输入问题，如“下列属光源的是”"),o.c.RADIO,r.Z.t("选项 1"),r.Z.t("选项 2"),r.Z.t("输入问题，如“请阐述你的观点”"),o.c.SIMPLE,r.Z.t("请填写"),r.Z.t("输入内容需不超过500个字符。")},17403:(e,t,n)=>{n.d(t,{Z:()=>getEmptyTitleContext,mN:()=>isEmptyOptionItem,Sj:()=>isEmptyCascaderOptions,Dl:()=>isEmptyMatrix,VZ:()=>isEmptyScaleQuestions,UC:()=>checkRightAnswer,Eb:()=>confirmNoScoreTips,B2:()=>showRecognitionOfflineSnackbar});var o=n(14042),r=n(95240),i=n(54734),s=n(87768),a=n(60250),l=n(52304),c=n(83956),d=n(45607);function getEmptyTitleContext(e){let t="";return t=e?i.Z.t("请添加试题的主题后再发布"):i.Z.t("请添加收集的主题后再发布"),t}function isEmptyOptionItem(e){if(!e)return!1;if(![o.c.CHECKBOX,o.c.SELECT,o.c.RADIO,o.c.COMMODITY,o.c.VOTE,o.c.SORT].includes(e.type))return!1;const{options:t}=e.qdata;return[o.c.VOTE].includes(e.type)?!(null==t||!t.some((e=>!e.title))):!(null==t||!t.some((e=>{var t;return""===e.title&&!(null!==(t=e.images)&&void 0!==t&&t.length)})))}function isVoidCascaderOption(e){return e.some((e=>{var t;return e.name&&null!==(t=e.children)&&void 0!==t&&t.length?isVoidCascaderOption(e.children):!e.name}))}function isEmptyCascaderOptions(e){if(!e)return!1;if(e.type!==o.c.CASCADER)return!1;const{options:t}=e.qdata;return isVoidCascaderOption(t)}function isEmptyMatrix(e){if(!e)return!1;if(!r.Fk.has(e.type))return!1;const{options:t,subtitles:n}=e.qdata;return e.type===o.c.MATRIX_RATING?n.some((e=>!e.title)):n.some((e=>!e.title))||t.some((e=>!e.title))}function isEmptyScaleQuestions(e){if(!e)return!1;if(e.type!==o.c.SCALE)return!1;const{type:t,startText:n,endText:r}=e.qdata;return!("-1"!==t||n&&r)}function checkRightAnswer(e){let t=[];if(null!=e&&e.taskConfig&&e.sections&&0!==e.sections.length&&e.sections[0].qlist&&e.questions&&0!==e.questions.length){var n;const r=null===(n=e.sections)||void 0===n?void 0:n[0].qlist;let i=1;r.forEach((n=>{const r=e.questions.find((e=>e&&e.id===n));var s,a;if([o.c.RADIO,o.c.CHECKBOX,o.c.VOTE].includes(null==r?void 0:r.type))null!==(s=r.answerInfo)&&void 0!==s&&null!==(a=s.rightOptionIds)&&void 0!==a&&a.length||t.push(i);else if((null==r?void 0:r.type)===o.c.FILLIN){var l,c;null!==(l=r.answerInfo)&&void 0!==l&&null!==(c=l.rightTexts)&&void 0!==c&&c.length||t.push(i)}i+=1}))}else t=[];return t}function confirmNoScoreTips(e,t){if(!e||0===e.length||!t)return!1;let n=i.Z.t("第 ");return e.forEach((e=>{n=e<10?`${n}0${e}、`:`${n}${e}、`})),n.length>0&&(n=n.substring(0,n.length-1)),n=i.Z.t("{{context}} 题未设置分数，确定分享试题吗？",{context:n}),(0,a.X7)({context:n,onConfirmText:d._3,onCancelText:d.OS,onConfirm:()=>{t()}}),!0}function showRecognitionOfflineSnackbar(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{dataset:o}=l.hx[c.Td.FORM_COMMON_CONFIG](),r=null==o||null===(e=o.question)||void 0===e||null===(t=e.recognition)||void 0===t?void 0:t.offlineTip;sessionStorage.getItem("offlineRecognition")||(setTimeout((()=>{(0,a.IG)(r,{duration:5e3}),(0,s.G)("ocr","offline_toast")}),n),sessionStorage.setItem("offlineRecognition","true"))}},97455:(e,t,n)=>{n.d(t,{fr:()=>getTopTabData,OY:()=>getTypeText,Pt:()=>isEmptyQuestionTitle,td:()=>openFormWithDesktop,xH:()=>toggleTabBar});n(11431);var o=n(4169),r=n(66408),i=n.n(r),s=n(63406),a=n(14042),l=n(54734);let c,d,u;!function(e){e[e.DOC_NORMAL=0]="DOC_NORMAL",e[e.DOC_DELETED=2]="DOC_DELETED",e[e.DOC_HAS_FILLED=4]="DOC_HAS_FILLED",e[e.DOC_NO_PERMISSION=5]="DOC_NO_PERMISSION",e[e.DOC_TIMED_REPEAT_EXPIRED=7]="DOC_TIMED_REPEAT_EXPIRED"}(c||(c={})),function(e){e[e.unknown=0]="unknown",e[e.normal=1]="normal",e[e.delete=2]="delete",e[e.finish=3]="finish"}(d||(d={})),function(e){e[e.unknown=0]="unknown",e[e.read=1]="read",e[e.edit=2]="edit",e[e.noAuth=3]="noAuth"}(u||(u={}));const p=l.Z.t("收集表");var m=n(60250);function isEmptyQuestionTitle(e){return!!e&&(e.type===a.c.SEGMENTATION?!e.title&&!e.subtitle:!e.title||"未命名的问题"===e.title||"请输入问题"===e.title)}function getTopTabData(){let{isOwner:e=!1,isAdmin:t=!1,isViewer:n=!1,hasSubmission:r=!1,isPublished:i=!1,totalSelf:a=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||t?!i||(0,s.YY)()||(0,s.Vs)()?o.wT:r&&!(0,s.P0)()?o.GE:o.A2:n?(0,s.P0)()?o.gc:o.GW:a>1?(0,s.P0)()?o.Sx:o.jD:[]}function toggleTabBar(e){i()().replace(`/${e}`)}function getTypeText(){var e,t;const{remoteFormData:n}=window.clientVars;return null!==(e=null==n||null===(t=n.scene)||void 0===t?void 0:t.title)&&void 0!==e?e:p}async function openFormWithDesktop(){const e=await(0,m.IG)(l.Z.t("正在打开腾讯文档..."),{type:"loading"}),{openWithDesktop:t}=await Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),n.e("vendors-node_modules_tencent_docs-scenario-component-navigate-client-pc_dist_index_esm_js")]).then(n.bind(n,31732));await(null==t?void 0:t(location.href))||e.update({message:l.Z.t("当前无法打开客户端，请先下载客户端。"),type:"warning"}),e.close()}},3429:(e,t,n)=>{n.d(t,{v:()=>o});const o={}},79072:(e,t,n)=>{n.d(t,{Kj:()=>openRelateUrl});var o=n(72870),r=n(86432),i=n(4852),s=n(81893);const openRelateUrl=(e,t)=>{let n=e;const a=(0,r.pm)("qqapp"),l="form"===a||"clock"===a||"jielong"===a;if(o.isMiniProgram||o.isQQMiniProgram){const openMini=()=>{let e="/pages/detail/detail";l&&(e="/pages/relayPage/relayPage"),0!==n.indexOf("https")&&(n=`https:${n}`),window.wx&&window.wx.miniProgram.navigateTo({url:`${e}?url=${encodeURIComponent(n)}&oldurl=${encodeURIComponent(location.href)}&name=${t||""}`})};return(0,i.J)(openMini,openMini),1}return o.isPC&&o.isSafari?2:o.isPC||o.isTencentDocsApp?((0,s.lY)({url:n}),2):((0,s.Oi)(window,n),0)}},22364:(e,t,n)=>{n.d(t,{Z:()=>FormRouterPC});n(11431);var o=n(27378),r=n(52851),i=n(90061),s=n(23545);function FallbackLoading(){return o.createElement("div",{className:"fallback-loading-container"},o.createElement("div",{className:"dui-spin-first-loading"},o.createElement("div",{className:"dui-spin-first-loading-container"},o.createElement("div",{className:"dui-spin-first-loading-circle dui-spin-first-loading-circle-dark"}))))}function getRouteComponents(e,t){const getRedirectedRoute=e=>{const{routeComponent:n,isLazy:r}=e;return()=>function redirectTo(e,t,n){return e?n?o.createElement(s.Z,null,o.createElement(o.Suspense,{fallback:o.createElement(FallbackLoading,null)},o.createElement(e,{history:t}))):o.createElement(e,{history:t}):o.createElement(o.Fragment,null)}(n,t,r)},n=[];return e.forEach(((e,t)=>{const{pathList:i,exact:s}=e;i.forEach(((i,a)=>{n.push(o.createElement(r.Route,{key:10*t+a,path:i,exact:s,component:getRedirectedRoute(e)}))}))})),n}var a=n(51399);const l=(0,o.lazy)((()=>Promise.all([n.e("framework_layout_pc_form_base_index_tsx-framework_layout_pc_form_base_logicShowServiceByPage_-41486a"),n.e("framework_layout_pc_form_layout-edit_index_tsx-js_components_performance-stats_index_less-js_-831469")]).then(n.bind(n,53489)))),c=(0,o.lazy)((()=>Promise.all([n.e("framework_layout_pc_form_base_index_tsx-framework_layout_pc_form_base_logicShowServiceByPage_-41486a"),n.e("framework_layout_pc_form_layout-fill_index_tsx-js_components_performance-stats_index_less-js_-90160a")]).then(n.bind(n,86635))));class PCFormLayout extends o.Component{render(){const e=this.props.isAdmin?l:c;return o.createElement(o.Suspense,{fallback:o.createElement(FallbackLoading,null)},o.createElement(e,this.props))}}var d=n(57516);const u=(0,d.yh)("IBaseRoute"),p=((0,d.yh)("IPCRoute"),(0,d.yh)("IPCRouteConsumer"));(0,d.yh)("IPCRouteEnterprise");var m=n(94929),h=n(86432),f=n(66127),g=n(66408),_=n.n(g);n(43521);const y=(0,d.yh)("IDocStatus"),b=(0,d.yh)("IUser"),E=(0,d.yh)("IEnv");var v,T=n(4869);let S=function(e,t){return u(e,void 0,0)}(v=function(e,t){return b(e,void 0,1)}(v=function(e,t){return y(e,void 0,2)}(v=function(e,t){return E(e,void 0,3)}(v=Reflect.metadata("design:type",Function)(v=Reflect.metadata("design:paramtypes",[void 0===u?Object:u,void 0===b?Object:b,void 0===y?Object:y,void 0===E?Object:E])(v=class PCRoute{constructor(e,t,n,o){this.baseRoute=e,this.user=t,this.docStatus=n,this.env=o,this._serviceBrand=void 0,this.redirectByDocStatusCount=0}jump(){this.isEnterExceptionPage()||this.redirectByDocStatus()}isNeedStayRoutePage(e){const t=[/\/edit/,/\/fill/,/\/result\/modify$/].find((t=>t.test(e))),n=["/"].find((t=>t===e));return(0,T.isLogin)()&&!t&&!n}})||v)||v)||v)||v)||v)||v;var O=n(36303);const{isIE:w}=O.default,{isOldEdge:I}=O.default;const C=new d.o5;C.register(p,class PCRouteConsumer extends S{constructor(){super(...arguments),this.history=_()()}replace(e){this.history.replace(e)}redirectByDocStatus(){var e,t;this.redirectByDocStatusCount+=1;const{isDocPublished:n,isDocEditing:o}=this.docStatus.getDocStatus(),r=this.isNeedStayRoutePage(this.baseRoute.initRoutePage),i=/\/blankpage/.test(this.baseRoute.initRoutePage);if(1!==this.redirectByDocStatusCount)return;const s=null!==(e=null===(t=[{condition:r&&!i,url:this.baseRoute.initRoutePage},{condition:!this.isAdmin,url:"/fill"},{condition:this.isOpenFromSwitchTip(),url:"/setting"},{condition:n,url:"/result"},{condition:(0,h.rA)(),url:"/quick-create"},{condition:!n||o,url:"/edit"}].find((e=>e.condition)))||void 0===t?void 0:t.url)&&void 0!==e?e:"/fill";this.replace(s)}isEnterExceptionPage(){var e;const{isDocPublished:t,isDocDeleted:n,isDocReady:o}=this.docStatus.getDocStatus(),{isLowIeVersion:r}=this.env,i=null===(e=[{condition:r,url:`/blankpage?type=${m.S.LOW_VERSION}`},{condition:!o,url:`/blankpage?type=${m.S.LOADING}`},{condition:n&&this.isAdmin,url:`/blankpage?type=${m.S.DELETED}`},{condition:!t&&!this.isAdmin,url:`/blankpage?type=${m.S.NOT_START}`}].find((e=>e.condition)))||void 0===e?void 0:e.url;return!!i&&(this.replace(i),!0)}isOpenFromSwitchTip(){return(0,h.pm)(f.ZV.OPEN_FROM)===f.m3.SWITCH_TIPS}get isAdmin(){if(window.basicClientVars){var e,t;const{isAdmin:n}=null!==(e=null===(t=window.basicClientVars.authInfo)||void 0===t?void 0:t.attribute)&&void 0!==e?e:{};return n}const{isAdmin:n}=this.user.getUserState();return n}}),C.register(u,class BaseRoute{constructor(){this._serviceBrand=void 0,this.initRoutePage=this.getCurrentPage()}getCurrentPage(){return location.hash.split("#")[1]}}),C.register(b,class User{constructor(){this._serviceBrand=void 0}getUserState(e){const t=e||window.clientVars;return{isOwner:t.isOwner,isAdmin:t.isAdmin,isLogin:t.isLogin}}}),C.register(y,class DocStatus{constructor(){this._serviceBrand=void 0}getDocStatus(e){const t=e||window.clientVars;return{isDocReady:!!t.globalPadId,isDocEditing:t.pub!==t.rev,isDocDeleted:t.isDeleted,isDocPublished:0!==t.pub,isDocStartCollecting:0!==t.pub}}}),C.register(E,class Env{constructor(){this._serviceBrand=void 0,this.isLowIeVersion=w||I}});const R=C.getServiceDescriptors(),P=new d.yk;R.forEach((e=>{let[t,n]=e;P.set(t,n)}));const A=new d.FS(P);var D=n(4222),N=n(43041);var L=n(35442);var j=n(64649);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=n(87768);function slowRenderReport(e){(0,M.G)("page","slow_render",{ver6:e,opername:"quality_form"})}class SlowRenderCollector{constructor(){this.hasReportSlowRender=!1,this.slowRenderCount=0,this.lastRenderTime=0,this.nowRenderTime=0,this.firstSlowTime=0,this.renderTimes=[],this.timeFrameInter=0,this.slowRenderMonitorId=0,this.startSlowRenderMonitor=e=>{window.log&&window.log.info("startSlowRenderMonitor"),this.startAnimationFrame(),document.addEventListener("visibilitychange",this.handleVisibilityChange),this.callback=e},this.slowRenderMonitor=()=>{if(this.nowRenderTime=Date.now(),this.timeFrameInter=this.nowRenderTime-this.lastRenderTime,this.isChangeLastRenderTime)return void(this.lastRenderTime=this.nowRenderTime);this.slowRenderCount+=1,this.renderTimes.push(this.lastRenderTime),this.firstSlowTime||(this.firstSlowTime=this.lastRenderTime);const e=this.checkSlowRender();this.slowRenderCount<3&&!e||this.updateFirstSlowTime(e),this.lastRenderTime=this.nowRenderTime},this.handleVisibilityChange=()=>{document.hidden?(this.clearSlowMonitor(),this.cancelAnimationFrame()):this.startAnimationFrame()}}static getInstance(){return SlowRenderCollector.instance||(SlowRenderCollector.instance=new SlowRenderCollector),SlowRenderCollector.instance}get isChangeLastRenderTime(){return this.hasReportSlowRender||this.lastRenderTime<=0||this.timeFrameInter<=3e3}executeCallBack(e){var t;null===(t=this.callback)||void 0===t||t.call(this,{ver6:JSON.stringify({isSlowerRender:e,lastFrameTime:this.timeFrameInter})})}updateFirstSlowTime(e){if(this.nowRenderTime-this.firstSlowTime<=6e4||e)this.hasReportSlowRender=!0,this.cancelAnimationFrame(),document.removeEventListener("visibilitychange",this.handleVisibilityChange),this.executeCallBack(e);else if(this.renderTimes.length>=3){for(;this.renderTimes.length>=3;)this.renderTimes.shift();this.firstSlowTime=this.renderTimes[0]}}checkSlowRender(){return this.timeFrameInter>1e4}startAnimationFrame(){this.hasReportSlowRender||(this.slowRenderTimeInterval=setInterval((()=>{this.slowRenderMonitor()}),1e3/60))}cancelAnimationFrame(){this.slowRenderTimeInterval&&(clearInterval(this.slowRenderTimeInterval),this.slowRenderTimeInterval=null)}clearSlowMonitor(){this.slowRenderCount=0,this.lastRenderTime=0,this.nowRenderTime=0,this.firstSlowTime=0,this.renderTimes=[]}}SlowRenderCollector.instance=void 0;var x=n(69841),F=n(67538),k=n(86550),Z=n(63406);function tdw_pv_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const B=new class PvReporter{constructor(){this.hasReported=!1}doReportPv(){if(!this.hasReported){var e,t,n,o,r;const{tag:i}=(0,h.lN)(),s=function tdw_pv_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tdw_pv_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tdw_pv_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({opername:"doc_core",touin:(null===(e=window.clientVars)||void 0===e?void 0:e.creatorDomain)||"",obj2:(null===(t=window.clientVars)||void 0===t?void 0:t.title)||"",ver2:(null===(n=window.clientVars)||void 0===n?void 0:n.creatorId)||"",ver5:(0,Z.YY)()?1:2},i?{ver9:i}:null);null!==(o=window.clientVars)&&void 0!==o&&null!==(r=o.relative)&&void 0!==r&&r.length&&(s.ver6=1),(0,M.G)("visit","detail_page",s),this.hasReported=!0}}};var U=n(72870);let G=!1;function reportPerformance(e){if(G)return;const t=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(0,Z.A9)();let n=`${t}-other`;return U.isIPad&&(n=`${t}-pad`),U.isMobile&&(n=`${t}-mobile`),U.isPC&&(n=`${t}-pc`),e?`${n}-lite`:n}(arguments.length>1&&void 0!==arguments[1]&&arguments[1]);G=!0,document.removeEventListener("visibilitychange",window[N.V],!1);const{offScreenTime:n,offScreenCount:o,firstHide:r,firstShow:i}=(()=>{if(D.pg.TOB)return{offScreenTime:0,offScreenCount:0,firstHide:0,firstShow:0};const{showInfo:e,hideInfo:t}=window[N.a],n=Date.now();return t[0]>e[0]&&t.unshift(e[0]),{offScreenTime:t.reduce(((t,o,r)=>t+((e[r]||n)-o)),0),offScreenCount:t.length,firstHide:t[0]||0,firstShow:e[0]||0}})(),{systemVer:s,browserVer:a,browserType:l}={systemVer:(0,L.H7)("OS",navigator.userAgent)||(0,L.H7)("Android",navigator.userAgent)||(0,L.H7)("NT",navigator.userAgent)||(0,L.H7)("OS X",navigator.userAgent),browserVer:(0,L.H7)("Chrome",navigator.userAgent)||(0,L.H7)("Version",navigator.userAgent)||(0,L.H7)("Firefox",navigator.userAgent),browserType:(()=>{const e=navigator.userAgent.match(/(Chrome)|(Firefox)|(Version)\//)||[];return/(Chrome|CriOS)\/([\d.]+)/i.test(navigator.userAgent)?"Chrome":e[1]||e[2]||e[3]&&"Safari"||"OTHER"})()},{firstPaint:c,fetchStart:d,requestStart:u,dnsLookup:p,connectDuration:m,sslConnectDelay:h,sslConnectDuration:f,TTFB:g,contentDownload:_,DOMContentLoaded:y,domLoadingDelay:b,domLoadDuration:E,domInteractive:v,cgiStart:T,jsStart:S,cssStart:O,cgiComplete:w,jsComplete:I,cssComplete:C,fileSize:R,fileDuration:P,cgiDuration:A,jsDuration:j,cssDuration:H,netType:V}=(()=>{var e,t,n,o,r,i,s;const a=window.performance||{},{timing:l}=a,{fetchStart:c,domainLookupEnd:d,domainLookupStart:u,connectStart:p,connectEnd:m,secureConnectionStart:h,requestStart:f,responseStart:g,responseEnd:_,domContentLoadedEventEnd:y,domLoading:b,domInteractive:E}=l||{},v=d-u,T=m-p,S=h?h-p:0,O=h?m-h:0,w=g-f,I=_-g,C=y-c,R=b-c,P=function(e){return e>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)&&e<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3)?e:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0}(E-b),A=Math.floor((null===(e=a.getEntriesByName)||void 0===e||null===(t=e.call(a,"first-paint"))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.startTime)||0),{cgiStart:D,jsStart:N,cssStart:L,cgiComplete:j,jsComplete:M,cssComplete:x,fileSize:F,fileDuration:k}=((null===(o=a.getEntriesByType)||void 0===o?void 0:o.call(a,"resource"))||[]).reduce(((e,t)=>{let{initiatorType:n,name:o,fetchStart:r,responseEnd:i,responseStart:s,transferSize:a}=t;const jsStatistics=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _objectSpread(_objectSpread({},e),{},{jsStart:~~Math.min(r,e.jsStart),jsComplete:~~Math.max(i,e.jsComplete),fileSize:e.fileSize+a,fileDuration:e.fileDuration+(i-s)})};switch(n){case"xmlhttprequest":case"fetch":return o.indexOf("/form/data/get?")>-1?_objectSpread(_objectSpread({},e),{},{cgiStart:~~Math.min(r,e.cgiStart),cgiComplete:~~Math.max(i,e.cgiComplete)}):e;case"script":return/\.js\??/i.test(o)?jsStatistics(e):e;case"link":return/\.js\??/i.test(o)?jsStatistics(e):/\.css\??/i.test(o)?_objectSpread(_objectSpread({},e),{},{cssStart:~~Math.min(r,e.cssStart),cssComplete:~~Math.max(i,e.cssComplete),fileSize:e.fileSize+a,fileDuration:e.fileDuration+(i-s)}):e;default:return e}}),{cgiStart:Number.MAX_SAFE_INTEGER,jsStart:Number.MAX_SAFE_INTEGER,cssStart:Number.MAX_SAFE_INTEGER,cgiComplete:0,jsComplete:0,cssComplete:0,fileSize:0,fileDuration:0});return{firstPaint:A,fetchStart:c,requestStart:f,dnsLookup:v,connectDuration:T,sslConnectDelay:S,sslConnectDuration:O,TTFB:w,contentDownload:I,DOMContentLoaded:C,domLoadingDelay:R,domLoadDuration:P,domInteractive:E,cgiStart:D,jsStart:N,cssStart:L,cgiComplete:j,jsComplete:M,cssComplete:x,fileSize:F,fileDuration:k,cgiDuration:Math.max(0,j-D),jsDuration:Math.max(0,M-N),cssDuration:Math.max(0,x-L),netType:(null===(r=navigator)||void 0===r||null===(i=r.userAgent)||void 0===i||null===(s=i.match(/NetType\/(\w+)/i))||void 0===s?void 0:s[1])||"unknown"}})(),q=JSON.stringify({dnsLookup:p,connectDuration:m,sslConnectDelay:h,sslConnectDuration:f,netType:V,netSpeed:Math.floor(P?1e3*R/1.024/P:0)}),Q=JSON.stringify({TTFB:g,contentDownload:_,domLoadingDelay:b,domLoadDuration:E,DOMContentLoaded:y,firstPaint:c,cgiStart:T===Number.MAX_SAFE_INTEGER?0:T,cgiComplete:w,cgiDuration:A,jsStart:S===Number.MAX_SAFE_INTEGER?0:S,jsComplete:I,jsDuration:j,cssStart:O===Number.MAX_SAFE_INTEGER?0:O,cssComplete:C,cssDuration:H});SlowRenderCollector.getInstance().startSlowRenderMonitor(slowRenderReport);const K=Date.now()-d;F.l.info(e,{cost:K});const W=1731466548415;K>0&&K<6e5?(setTimeout((()=>{const e=[t,V];(0,k.$)(x.U.tti,{value:K,dimensions:[t,V]}),(0,k.$)(K<=5e3?x.U.ttiLessThan5s:x.U.ttiMoreThan5s),(0,k.$)(x.U.fmp,{value:K,dimensions:e}),(0,k.$)(x.U.TTFB,{value:g,dimensions:[t]}),(0,k.$)(x.U.jsDuration,{value:j,dimensions:[t]}),(0,k.$)(x.U.pvForAll)}),1e3),(0,M.G)("page","first_page_cost",{opername:"quality_form",obj2:W,ver4:K,ver5:K,ver6:0,ver7:V,ver8:o,ver12:n,ver9:t}),B.doReportPv()):(0,M.G)("page","first_page_cost_timeout",{opername:"quality_form",obj2:W,ver4:K,ver5:r-d,ver6:i-d,ver7:V,ver8:o,ver9:t,ver12:n}),(0,M.G)("page","performanceInfo_connect",{opername:"quality_form",obj2:W,ver6:q,ver7:s,ver8:a,ver9:t,ver12:l}),(0,M.G)("page","performanceInfo",{opername:"quality_form",obj2:W,ver6:Q,ver7:s,ver8:a,ver9:t,ver12:l}),F.l.info("performanceInfo:",{dnsLookup:p,connectDuration:m,sslConnectDelay:h,sslConnectDuration:f,TTFB:g,contentDownload:_,domLoadingDelay:b,domLoadDuration:E,DOMContentLoaded:y,firstPaint:c,interactivetime:K,cgiDuration:A,jsDuration:j,cssDuration:H,netType:V,systemVer:s,browserVer:a,browserType:l});const $="background: linear-gradient(115deg,#f6ddb1,#e4bd80);\n    font-size: 14px;\n    font-style: italic;\n    padding: 6px 10px;\n    color: #865812;\n    text-shadow: 1px 1px 2px rgba(134, 88, 12, 0.4);\n    border-radius: 8px;\n  ";console.log("%c腾讯文档收集表","\n    padding: 32px 0 32px 99px;\n    font-size: 24px;\n    color: #edcd99;\n    background: url(https://docimg4.docs.qq.com/image/rNHh6PjPBDTX-LqE_gjwMw.gif?w=100&h=100?_type=jpeg) left center no-repeat;\n  "),console.log(`上报信息：${t}`),console.group("性能信息"),console.group("建连阶段"),console.log(`%cDNS查询时间: ${p}ms`,$),console.log(`%cSSL建连开始于: ${h}ms`,$),console.log(`%cSSL建连耗时: ${f}ms`,$),console.log(`%c建连整体耗时: ${m}ms`,$),console.log(`%c主文档发送请求开始于: ${u-d}ms`,$),console.groupEnd(),console.group("请求阶段"),console.log(`%cTTFB: ${g}ms`,$),console.log(`%c主文档下载耗时: ${_}ms`,$),console.groupEnd(),console.group("渲染阶段"),console.log(`%c文档渲染开始于: ${b}ms`,$),console.log(`%c文档渲染耗时: ${E}ms`,$),console.log(`%cfirstPaint: ${c}ms`,$),console.log(`%c文档可交互耗时: ${v-d}ms`,$),console.log(`%cDOMContentLoaded: ${y}ms`,$),console.groupEnd(),console.groupEnd()}const mutationObserverCallback=(e,t)=>{(document.querySelector(".form-root")||document.querySelector(".clock-root")||document.querySelector(".sequence-root"))&&!/blankpage/.test(location.hash)&&(reportPerformance("pc open_time_cost"),t.disconnect())};var H=n(71800),V=n(79260),q=n(84396);function form_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const Q=(0,r.withRouter)((0,a.connect)((e=>{var t,n,o,r;const{rev:i}=H.Q.getRevAndPos(),{pub:s,domainId:a,padId:l,tinyId:c,tinyid:d,userInfo:u={}}=e.formInfo.data,{isViewer:p}=e.formInfo,{isAdmin:m,isOwner:h}=e.formInfo.data,{isPeriodic:f,isInCurrPeriodic:g}=e.setting.relatedPeriodic;return{formStatus:e.formInfo.formStatus,isOwner:h,isAdmin:m,isViewer:p,domainId:a,padId:l,currentUserTinyId:c||d,currentUserName:null==u?void 0:u.fullName,endTime:e.formInfo.endTime,totalSelf:e.result.totalSelf,isInCurrPeriodic:g,isPeriodic:f,hasEverSubmitted:e.result.hasEverSubmitted,questions:e.formInfo.formData.questions,themeClass:e.formInfo.formData.themeClass,toggle:e.toggle,hasCommited:e.formInfo.hasCommited,isPublished:m?0!==s&&s===i:0!==s,unReadCount:e.result.unReadCount,taskType:null===(t=e.formInfo.formData)||void 0===t||null===(n=t.taskConfig)||void 0===n?void 0:n.taskType,tinyid:e.formInfo.data.tinyid,pub:e.formInfo.data.pub,isShowSideBar:e.edit.isShowSideBar,sceneType:m?null===(o=e.edit.formData.scene)||void 0===o?void 0:o.type:null===(r=e.formInfo.formData.scene)||void 0===r?void 0:r.type}}),(e=>function form_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?form_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):form_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({routerReplace(t){e(r.routerRedux.replace(t)),"/result"===t?(0,M.G)("edit","clk_result"):e({type:"formInfo/fetchFormData"})},cloneFormData(t){e({type:"formInfo/cloneFormData",payload:t})},bindSheet(t){return e({type:"setting/bindSheet",payload:{sheetType:t,download:!1,exportToLocal:!1}})},setHeaderImage(t){e({type:"edit/setHeaderImage",payload:t})},setIsShowSideBar(t){e({type:"edit/setIsShowSideBarReducer",payload:{isShowSideBar:t}})},clearHash(){e(r.routerRedux.replace(""))}},(0,V.bindActionCreators)({setScrollContainerRef:q.vp},e))))(class PCFormManager extends PCFormLayout{constructor(e){super(e),this.route=void 0,this.startUp(),(()=>{const e=document.querySelector("#root");new MutationObserver(mutationObserverCallback).observe(e,{attributes:!0,childList:!0,subtree:!0})})()}async componentDidMount(){var e;if(null===(e=super.componentDidMount)||void 0===e||e.call(this),D.pg.TOC){const{workbenchInitializerForm:e}=await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_ark-request_lib_index_js"),n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_react-sortable-hoc_SortableCon-4fdb53"),n.e("vendors-node_modules_tencent_ark-storage_lib_index_js-node_modules_tencent_docs-scenario-comp-78000c"),n.e("vendors-node_modules_tencent_docs-scenario-components-message-center_dist_index_js"),n.e("vendors-node_modules_tencent_docs-qrcode_dist_index_js"),n.e("vendors-node_modules_tencent_ark-extensions_lib_index_js"),n.e("vendors-node_modules_tencent_netcheck_lib_helper_js-node_modules_tencent_netcheck_lib_network-7c7eaf"),n.e("vendors-node_modules_tencent_dui_esm_components_Tooltip_index_js-node_modules_tencent_dui_lib-bbe94d"),n.e("vendors-node_modules_tencent_docs-scenario-components-pc-menu-file-info_dist_index_js-node_mo-08a9dd"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-a80fb9"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-160bc9"),n.e("framework_workbench_editor-adapters_base-adapter_ts-framework_workbench_initializers_initiali-e7ac8f"),n.e("framework_workbench_initializers_consumer_form-initializer_ts-framework_workbench_initializer-2e193e")]).then(n.bind(n,22830));e.initWorkbench()}else if(D.pg.PRIVATE){const{workbenchInitializerForm:e}=await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_ark-request_lib_index_js"),n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_react-sortable-hoc_SortableCon-4fdb53"),n.e("vendors-node_modules_tencent_ark-storage_lib_index_js-node_modules_tencent_docs-scenario-comp-78000c"),n.e("vendors-node_modules_tencent_docs-scenario-components-message-center_dist_index_js"),n.e("vendors-node_modules_tencent_docs-qrcode_dist_index_js"),n.e("vendors-node_modules_tencent_ark-extensions_lib_index_js"),n.e("vendors-node_modules_tencent_netcheck_lib_helper_js-node_modules_tencent_netcheck_lib_network-7c7eaf"),n.e("vendors-node_modules_tencent_dui_esm_components_Tooltip_index_js-node_modules_tencent_dui_lib-bbe94d"),n.e("vendors-node_modules_tencent_docs-scenario-components-pc-menu-file-info_dist_index_js-node_mo-08a9dd"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-a80fb9"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-160bc9"),n.e("framework_workbench_editor-adapters_base-adapter_ts-framework_workbench_initializers_initiali-e7ac8f"),n.e("framework_workbench_initializers_private-tdocs_form-initializer_ts-framework_workbench_initia-c097c8")]).then(n.bind(n,36818));e.initWorkbench()}else if(D.pg.SAAS){const{workbenchInitializerForm:e}=await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_ark-request_lib_index_js"),n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_react-sortable-hoc_SortableCon-4fdb53"),n.e("vendors-node_modules_tencent_ark-storage_lib_index_js-node_modules_tencent_docs-scenario-comp-78000c"),n.e("vendors-node_modules_tencent_docs-scenario-components-message-center_dist_index_js"),n.e("vendors-node_modules_tencent_docs-qrcode_dist_index_js"),n.e("vendors-node_modules_tencent_ark-extensions_lib_index_js"),n.e("vendors-node_modules_tencent_netcheck_lib_helper_js-node_modules_tencent_netcheck_lib_network-7c7eaf"),n.e("vendors-node_modules_tencent_dui_esm_components_Tooltip_index_js-node_modules_tencent_dui_lib-bbe94d"),n.e("vendors-node_modules_tencent_docs-scenario-components-pc-menu-file-info_dist_index_js-node_mo-08a9dd"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-a80fb9"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-160bc9"),n.e("framework_workbench_editor-adapters_base-adapter_ts-framework_workbench_initializers_initiali-e7ac8f"),n.e("framework_workbench_initializers_saas-tdocs_form-initializer_ts-framework_workbench_initializ-cd2cc3")]).then(n.bind(n,73241));e.initWorkbench()}else;}startUp(){this.initServices()}initRoute(){this.route.jump()}initServices(){this.route=A.invokeFunction((e=>e.get(p)))}render(){return this.initRoute(),super.render()}}));var K=n(25773),W=n(73428),$=n(33474),Y=n(77900),z=n(66040),X=n(74957),J=n(61709),ee=n(54734),te=n(73848),ne=n(19077),oe=n(24658),re=n(36635),ie=n(97455);function operation_bar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function operation_bar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?operation_bar_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):operation_bar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const se={EDIT:()=>ee.Z.t(`编辑${(0,ie.OY)()}`),MODIFY:ee.Z.t("修改我的结果"),QR_CODE:ee.Z.t("生成二维码"),RESUBMIT:ee.Z.t("再填一份")},ae=(ee.Z.t("编辑问题"),ee.Z.t("修改结果"),ee.Z.t("再填一份"),ee.Z.t("编辑接龙"),ee.Z.t("编辑打卡"),{EDIT:te,MODIFY:ne,QR_CODE:oe,RESUBMIT:re});operation_bar_objectSpread(operation_bar_objectSpread({},se),{},{FEEDBACK:ee.Z.t("向发布者反馈"),FEEDBACK_ALL:ee.Z.t("所有反馈")});var le=n(67010),ce=n(98297),de=n(60250);async function generateQrCode(){const e="dc-qr-container",t=`${e}-mask`,{mask:n}=await(0,de.OX)();n.open(t,!1);let o=document.getElementById(e);o||(o=document.createElement("div"),o.id=e,document.body.appendChild(o));const{default:r,QR_CODE_EXTENSION:i}=await(0,ce.f)();(await r.getExtension(i.name)).show({container:o,docTitle:window.clientVars.shareTitle||ee.Z.t("未命名的收集表"),docType:"form",mimeType:"application/vnd.tdocs-apps.form",onClose:()=>{n.close(t)},jumpUrl:(0,le.getShareLink)()}),(0,M.G)("tool_bar","QR_clk",{ver5:1,abtest:"1"})}var ue=n(83074),pe=n(90005),me=n.n(pe),he=n(96044),fe=n(26725),ge=n(80617);let _e;!function(e){e.FORM="form",e.CLOCK="clock",e.SEQ="sequence"}(_e||(_e={}));var ye,be,Ee,ve,Te,Se,Oe,we=n(68565),Ie=n(56356),Ce=n(45607),Re=n(67664);let Pe=(ye=Reflect.metadata("design:type",Function),be=Reflect.metadata("design:paramtypes",[]),Ee=Reflect.metadata("design:type",Function),ve=Reflect.metadata("design:paramtypes",[]),Te=Reflect.metadata("design:type",Function),Se=Reflect.metadata("design:paramtypes",[String]),Oe=class OperationBarBase extends o.Component{constructor(e){super(e),this.snackbar=null,this.embedded=!0,this.state={hide:!1}}render(){return this.renderActionBar()}getOptionsMenus(){const{canDeleteRecords:e,canModifyRecords:t}=this.props;return[{id:"change",title:ee.Z.t("更改填写内容"),disable:!t,titleClassName:t?"":"operation-item-disabled"},{id:"delete",title:ee.Z.t("删除结果"),disable:!e,titleStyle:{color:"#EB3639"},titleClassName:e?"":"operation-item-disabled"}]}handleDelete(){const{deleteRecord:e,canDeleteRecords:t}=this.props;if(t)return void(0,de.X7)({title:Ce.H6,context:ee.Z.t("删除后，已提交的所有内容都会清除，发布者也无法查看。确定删除吗？"),onConfirmText:Ce.z7,onCancelText:Ce.OS,onConfirm:(0,Ie.default)(e,200)});const{isPrevPeriodic:n}=this.props;n?(0,de.X7)({title:ee.Z.t("删除结果"),context:ee.Z.t("此条记录所属填写时间已结束，已不能删除。"),onCancelText:null,onConfirmText:Ce.ce}):(0,de.X7)({title:ee.Z.t("删除结果"),context:ee.Z.t("创建者不允许删除填写结果，请联系创建者后再试。"),onCancelText:null,onConfirmText:Ce.ce})}handleModify(){const{canModifyRecords:e,modifySubmitRecord:t,isPrevPeriodic:n}=this.props;Re.y.clearFileCache(),e?t():n?(0,de.X7)({title:ee.Z.t("修改结果"),context:ee.Z.t("此条记录所属填写时间已结束，已不能修改。"),onCancelText:null,onConfirmText:Ce.ce}):(0,de.X7)({title:ee.Z.t("修改结果"),context:ee.Z.t("创建者不允许修改填写结果，请联系创建者后再试。"),onCancelText:null,onConfirmText:Ce.ce})}handleOptionClick(e){({delete:this.handleDelete,change:this.handleModify})[e]()}},(0,W.Z)(Oe.prototype,"handleDelete",[z.xB,ye,be],Object.getOwnPropertyDescriptor(Oe.prototype,"handleDelete"),Oe.prototype),(0,W.Z)(Oe.prototype,"handleModify",[z.xB,Ee,ve],Object.getOwnPropertyDescriptor(Oe.prototype,"handleModify"),Oe.prototype),(0,W.Z)(Oe.prototype,"handleOptionClick",[z.xB,Te,Se],Object.getOwnPropertyDescriptor(Oe.prototype,"handleOptionClick"),Oe.prototype),Oe);const Ae={paddingLeft:24,paddingRight:24,marginLeft:-3,marginRight:3},De={paddingBottom:0,background:"transparent"};class OperationBarPC extends Pe{constructor(){super(...arguments),this.embedded=!0}render(){const e=this.renderActionBar();if(!e)return null;const{prefix:t=_e.FORM}=this.props;return o.createElement(we.default,{type:"bottom",btns:[e],itemStyle:Ae,mainStyle:De,getContainer:()=>document.querySelector(`.${t}-root-wrap`)})}renderMoreOptionsMenu(){return o.createElement(ge.default,{selectable:!1,onClick:this.handleOptionClick,style:{width:"128px"},className:"operation-modify-menu"},this.getOptionsMenus().map((e=>o.createElement(ge.default.Item,{key:e.id,id:e.id,className:me()({"operation-item-disabled":e.disable})},e.title))))}renderActionBar(){const{operationBarList:e=[],show:t=!0}=this.props,n=e.filter((e=>null==e?void 0:e.show));if(0===n.length||!t)return null;const r="action-bar";return o.createElement(he.ZP,{zIndex:3,embedded:this.embedded,visible:!0,className:me()(r,{[`${r}-hide`]:this.state.hide}),style:this.props.customizeStyle,key:r},n.map(((e,t)=>e.text===se.MODIFY?this.renderModifyOperation(e,t):o.createElement(he.ZP.Item,{key:`${t}-${e.text}`,className:`${r}-item`,style:e.style,icon:e.icon,onClick:e.onClick},e.text))))}renderModifyOperation(e,t){return o.createElement(he.ZP.Item,{key:`${t}-${e.text}`,className:"action-bar-item",style:e.style,icon:e.icon},o.createElement(fe.default,{style:{flex:1},alignment:"center",dropContent:this.renderMoreOptionsMenu()},o.createElement("div",{className:"modify-operation"},e.text)))}}var Ne=n(74699),Le=(n(54370),n(5153),n(80566),n(50870),n(75397),n(18829),n(51429),n(25376),n(95864),n(94565),n(95073),n(65204),n(47072),n(98391),n(22727),n(19647),n(13951),n(91117),n(41698),n(55294),n(9077),n(76999),n(91067),n(2126),n(18924),n(67699),n(18007),n(71675),n(99830),n(56583)),je=n(41589),Me=n(14042);var xe=n(33716),Fe=n(79195),ke=n(45731),Ze=n(67550),Be=n(4852),Ue=n(23615),Ge=n.n(Ue),He=n(81893),Ve=n(61868);class blank_page_BlankPage extends o.Component{componentDidMount(){const e=window.clientVars&&window.clientVars.padType||"",{docId:t,formType:n}=this.props,o={docId:t,formType:n,sourcePadType:e};localStorage.setItem(Ve.kv,JSON.stringify(o));const r=(0,Ve.RT)(location,n);2===n?(0,Ve.Pl)(r):3===n?(0,He.Oi)(window,r.replace(/\/form\/page\/sequence\//,"/blankpage/")):(0,Ve.RI)(r)}render(){return null}}blank_page_BlankPage.propTypes={docId:Ge().string.isRequired,formType:Ge().number.isRequired};const qe=U.isIPad&&U.isTencentDocsApp&&(0,ke.n)("1.4.3"),{isClock:Qe}=window.APPINFO||{},Ke=Qe?ee.Z.t("打卡"):ee.Z.t("收集表"),We=[ee.Z.t("编辑内容自动保存云端"),ee.Z.t("腾讯文档APP支持图片转文字"),ee.Z.t("腾讯文档APP支持语音实时转文字"),ee.Z.t("成员独立填写收集表，保护隐私"),ee.Z.t("收集表填写结果可自动汇总到表格"),ee.Z.t("支持10万人填写收集表"),ee.Z.t("收集表支持一键打卡签到"),ee.Z.t("收集表支持上传图片、拍照打卡"),ee.Z.t("收集表可上传地理位置")],$e=[{type:"loading",content:We[Math.floor(Math.random()*(We.length-1))],subcontent:"",imageClass:"form-blank-page-image-loading"},{type:"deleted",content:ee.Z.t("该{{DOC_TYPE}}已被创建者删除。",{DOC_TYPE:Ke}),subcontent:"",imageClass:"form-blank-page-image-deleted"},{type:"lowversion",content:ee.Z.t("很抱歉，我们暂不支持您的浏览器版本。"),subcontent:ee.Z.t("推荐您下载腾讯文档PC客户端，体验更流畅。"),imageClass:"form-blank-page-image-ie10"},{type:"not_start_collecting",content:ee.Z.t("收集表未发布，收集暂未开始。"),subcontent:"",imageClass:"form-blank-page-image-not-start-collecting"},{type:"recordDelete",content:ee.Z.t("填写内容不合规或者被创建者删除，请重新填写提交"),subcontent:"",imageClass:"form-blank-page-image-deleted"},{type:"not_in_range",content:ee.Z.t("您没有填写该收集表的权限"),subcontent:"",imageClass:"form-blank-page-image-not-start-collecting"},{type:"expired",content:ee.Z.t("无法填写"),subcontent:ee.Z.t("当前不是可填写时间"),imageClass:"form-blank-page-image-expired"},{type:m.S.NOT_IN_INTERNAL_RANGE,content:ee.Z.t("请在企业微信内打开"),subcontent:ee.Z.t(""),imageClass:"form-blank-page-image-not-start-collecting"}];class BlankPage extends o.Component{constructor(e){super(e),this.doPermissionSubmitted=()=>{this.setState({blankType:"auth_send"}),this.props.updateAuthState&&this.props.updateAuthState(!0)},this.redirectToLogin=()=>{(0,Be.J)(X.e1,X.e1,!0)},this.returnAio=()=>{if(U.isMiniProgram||U.isQQFormMiniProgram)window.wx&&window.wx.miniProgram&&window.wx.miniProgram.navigateTo&&window.wx.miniProgram.navigateTo({url:U.isQQFormMiniProgram?"/pages/templatesList/templatesList?searchtype=form&filtertype=2":"/pages/list/list"});else if(qe)(0,Ze.dw)("docx","back",{from:"form"},(()=>{}));else{let e=`${D.Zj.HOME}/m/index.html?_wv=2`;U.isTencentDocsApp&&(e=window.mqq.iOS?`${D.Zj.HOME}/m/index.html?_fv=0&_wv=131072`:`${D.Zj.HOME}/m/index.html?_fv=0&_wwv=4676`),U.isIPad&&(e=`${D.Zj.HOME}/index.html?_wv=2`),window.mqq.ui.openUrl({url:e,target:1,style:3})}},this.reSubmit=()=>{this.props.gotoResubmit&&this.props.gotoResubmit()},this.getBlankPage=()=>{if(!window.clientVars)return null;const e=window.clientVars.globalPadId;let t=0;return(0,Ve.IP)(location.href)?t=2:(0,Ve.AA)(location.href)&&(t=3),o.createElement(blank_page_BlankPage,{docId:e,formType:t})},this.getNeedRedirectToBlackPage=e=>["recordDelete","deleted","lowversion","not_start_collecting","loading","not_in_range",m.S.NOT_IN_INTERNAL_RANGE,"expired"].includes(e)?null:this.getBlankPage(),this.state={blankType:this.props&&this.props.blankType?this.props.blankType:"default"}}componentDidMount(){window.brandLoading&&window.brandLoading.hide()}componentWillReceiveProps(e){const{blankType:t}=e;t!==this.state.blankType&&this.setState({blankType:t})}checkIsSequence(e){return!!e&&e.indexOf("form/page/sequence")>-1}render(){const{blankType:e}=this.state,t=this.getNeedRedirectToBlackPage(e);if(t)return t;const n=$e.find((t=>{let{type:n}=t;return n===e}))||{},r=`form-blank-page-image ${n.imageClass}`,i=n.subcontent?o.createElement("p",{className:"form-blank-page-subcontent"},n.subcontent):null,s="recordDelete"===n.type?o.createElement("div",null,o.createElement("button",{type:"button",className:"form-blank-page-btn form-blank-page-btn-blue",onClick:this.reSubmit},ee.Z.t("再次填写"))):null,a="not_start_collecting"===n.type?o.createElement("div",{className:"form-blank-page-return-link",onClick:this.returnAio},D.Fo.BACK&&o.createElement("div",null,ee.Z.t("返回首页"))):null,l="lowversion"===n.type?o.createElement("a",{href:`${D.Zj.TENCENT_DOC_APP_DL_URL}`},o.createElement("button",{className:"dui-button dui-button-type-primary dui-button-size-large"},ee.Z.t("立即下载"))):null;return o.createElement("div",{className:"form-blank-page-wrap"},o.createElement("div",{className:r,draggable:"false"}),o.createElement("div",{className:"form-blank-page-content-wrap"},o.createElement("p",{className:"loading"!==n.type?"form-blank-page-content":"form-blank-page-loading-content"},n.content),i,s,l,a))}}BlankPage.propTypes={blankType:Ge().string,updateAuthState:Ge().func,gotoResubmit:Ge().func};var Ye=n(16095);function core_base_mixin_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function core_base_mixin_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?core_base_mixin_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):core_base_mixin_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ze=(0,Le.Z)(je.dJ),Xe=(0,Le.Z)(je.lU);var Je=n(33108);var et=n(31542),tt=n(26338),nt=n(20635),ot=n(7038),rt=n(35548),it=n(82170),st=n(27565),at=n(47064),lt=n(69870),ct=n(82047),dt=n(7887),ut=n(75615),pt=n(70740);var mt=n(39160),ht=n(58628);const ft="show-fill-number",show_fill_number=e=>{let{totalFillNumber:t,selfFillNumber:n,isPc:r,canCheckResults:i,recordsLimit:s,gotoResult:a,i18nextAsync:l,isPeriodic:c,periodicPattern:d,periodicDays:u,showRight:p=!0}=e;const m=l||ee.Z,h=(0,o.useMemo)((()=>s>0?m.t("限量{{recordsLimit}}份",{recordsLimit:s}):c?(0,ht.$E)(!0,d,u):""),[m,c,s,d,u]),f=(0,o.useMemo)((()=>!i&&n>0?m.t("你已提交{{selfFillNumber}}份",{selfFillNumber:n}):t?c?m.t("本次已收集{{totalFillNumber}}份结果",{totalFillNumber:t}):m.t("已收集{{totalFillNumber}}份结果",{totalFillNumber:t}):m.t("暂无人提交")),[m,c,i,n,t]),g=(0,o.useMemo)((()=>p?n?o.createElement("div",{className:`${ft}-right`,onClick:a},i&&o.createElement("div",{className:"self-fill-number"},m.t("你已提交{{selfFillNumber}}份",{selfFillNumber:n})),o.createElement("div",{className:me()("arrow",{"is-pc":r})})):t>0&&c?o.createElement("div",{className:`${ft}-right`,onClick:a},o.createElement("div",{className:"self-fill-number"},m.t("你未提交")),o.createElement("div",{className:me()("arrow",{"is-pc":r})})):null:null),[a,m,c,i,r,n,t,p]);return i||0!==n?o.createElement("div",{className:me()(ft,{"is-pc":r})},o.createElement("div",{className:`${ft}-left`},h&&o.createElement("div",{className:"total-fill-limit"},h),o.createElement("div",{className:"total-fill-number"},f)),g):null};var gt=n(42923);const _t={content:ee.Z.t("你的修改将会替换之前填写的结果"),title:ee.Z.t("确认提交修改的结果吗？")},yt={cancelText:Ce.OS,content:ee.Z.t("确认提交你的结果吗？"),okText:Ce._3,title:""};var bt=n(75645),Et=n(32944),vt=n(15530),Tt=n(42341);function getGlobalPadId(){var e,t,n;if(null!==(e=window.basicClientVars)&&void 0!==e&&null!==(t=e.docInfo)&&void 0!==t&&t.padInfo){const{padId:e,domainId:t}=window.basicClientVars.docInfo.padInfo;return`${t}$${e}`}return(null===(n=window.clientVars)||void 0===n?void 0:n.globalPadId)||""}var St=n(35421),Ot=n(6210),wt=n(66188);const It=new class TableTempDataManager{constructor(){this.member={},this.boundMembers=[]}get memberCache(){return this.member}setMemberCache(e){this.member=e}get boundMembersCache(){return this.boundMembers}setBoundMembersCache(e){this.boundMembers=e}};function base_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):base_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ct=(0,Le.Z)(je.lU);var Rt=n(3429),Pt=n(19541),At=n(85693),Dt=n(52304),Nt=n(83956);function base_mixin_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function base_mixin_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?base_mixin_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):base_mixin_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Lt=(0,o.lazy)((()=>n.e("framework_form_routes_fill_consumer_big-paper_footer_jsx").then(n.bind(n,2247)))),jt=(0,o.lazy)((()=>n.e("framework_form_routes_fill_consumer_big-paper_progress-bar_jsx").then(n.bind(n,52450)))),getMemberInfoByRosterType=(e,t)=>({[ot.r.COMMON]:e.member||!e.name?{}:{role:e},[ot.r.STUDENT]:e.member||{}}[t]),Mt=o.lazy((()=>n.e("framework_form_routes_fill_consumer_question-props_table_table-subform_pc_tsx").then(n.bind(n,73349))));var xt=n(47028),Ft=n(25687);const goEditAgainstCollaboration=()=>({type:"formInfo/goEditAgainstCollaboration"});var kt=n(26348);function map_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Zt,Bt,Ut,Gt,Ht,Vt,qt,Qt,Kt,Wt;const $t=(0,o.lazy)((()=>n.e("js_components_roster_verify_mask_pc_tsx").then(n.bind(n,40609)))),Yt=(0,o.lazy)((()=>Promise.resolve().then(n.bind(n,39221)))),zt=(0,o.lazy)((()=>n.e("js_components_periodic-fill-notification_pc_tsx").then(n.bind(n,40312))));let Xt=(Zt=(0,a.connect)((e=>{var t,n,o,r,i,s,a,l;const{serverTimeDifference:c,collection:{endTime:d,anonymous:u,startTime:p,isClosed:m,recordsLimit:h},fillerConfig:{canCheckPaperScore:f,canMultiSubmit:g,canCheckResults:_,canModifyRecords:y,canDeleteRecords:b},notifyConfig:{canReceivePeriodicNotify:E},conclusion:v,relatedPeriodic:T}=e.setting;return{anonymous:u,endTime:d,startTime:p,isClosed:m,recordsLimit:h,canMultiSubmit:g,canCheckResults:_,canCheckPaperScore:f,canModifyRecords:y,canDeleteRecords:b,conclusion:v,relatedPeriodic:T,canReceivePeriodicNotify:E,serverTimeDifference:c,detail:e.detail,fill:e.fill,formData:e.formInfo.formData,formInfo:e.formInfo,result:e.result,selfList:e.detail.sidList,toggle:e.toggle,userInfo:e.user.userInfo,padId:e.formInfo.data.padId,bigPaperStopped:e.formInfo.data.isStop,hasShowSharePage:e.fill.hasShowSharePage,isSubmited:!(null===(t=e.detail.sidList)||void 0===t||!t.length),selectedRosters:e.roster.selectedRosters,windowRosterData:{selectedRosters:xt.d.roster.type<ot.r.COMMON?null:[{type:xt.d.roster.type,columnHeader:xt.d.roster.columnHeader}],rosterMembers:xt.d.roster.members,hasSubmitted:!!xt.d.latestRecord},selfFillNumber:e.result.totalSelf,hasEverSubmitted:e.result.hasEverSubmitted,taskConfig:e.formInfo.formData.taskConfig,totalFillNumber:e.result.total,totalFillNumberInLatestCycle:e.result.totalFillNumberInLatestCycle,selfFillNumberInLatestCycle:e.result.selfFillNumberInLatestCycle,uid:e.user.userInfo.uid,userName:e.user.userInfo.userName,userPic:e.user.userInfo.userPic,qlist:null===(n=e.formInfo.formData.sections)||void 0===n?void 0:n[0].qlist,currentUserTinyId:(null===(o=e.formInfo.data)||void 0===o?void 0:o.tinyId)||(null===(r=e.formInfo.data)||void 0===r?void 0:r.tinyid),qqRelated:e.user.qqRelated,deleteRecordsList:e.result.deleteRecordsList,lastSelfSid:e.detail.lastestSubmitSid,canPrivateCopyOut:!D.pg.TOC&&!(null!==(i=null===(s=e.formInfo.data.privilegeAttribute)||void 0===s?void 0:s.canCopyOut)&&void 0!==i?i:null===(a=e.formInfo.data.privilegeAttribute)||void 0===a?void 0:a.can_copy_out),corpId:null===(l=e.formInfo.data)||void 0===l?void 0:l.creatorCorpId}}),(e=>function map_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?map_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):map_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({resetDetailAnswer(){e({type:"detail/setAnswerdataReducer",payload:{answerData:[]}})},getRecord(t){e({type:"detail/updateSidReducer",payload:{sid:t}}),e({type:"fill/getAnswerData",payload:{sid:t}})},onAnswerQuestion(t){e({type:"fill/answerQuestion",payload:t})},reSetResubmitToastStatus(){e({type:"fill/setShowResubmitToastStatus",payload:{showResubmitToastStatus:!1}})},checkName(t){e({type:"fill/checkName",payload:t})},getLastRecord(t){e({type:"fill/getAnswerData",payload:t})},getMatchedAnswerList(t){e({type:"fill/getMatchedAnswerList",payload:t})},resetBigPaperPassStatus(){e({type:"detail/setPassInfoReducer",payload:{pass:null}})},updateHasShowSharePage(t){return new Promise((n=>{e({type:"fill/setHasShowSharePage",payload:{hasShowSharePage:t}}),n()}))},updateMatchedAnswerList(t){return e({type:"fill/updateMatchedAnswerList",payload:t})},checkVersionUpdate(t){e({type:"formInfo/checkVersionUpdate",payload:t})},submitAnswer(t,n,o,r){e({type:"fill/setAnswerData",payload:{answerData:t}}),F.l.info("~~[SubmitAnwser] Enter (fill/submitAnswerData)~~"),e({type:"fill/submitAnswerData",payload:r}),F.l.info("~~[SubmitAnwser] Enter (fill/updateMatchedAnswerData)~~"),e({type:"fill/updateMatchedAnswerData",payload:{submitArray:t,questions:o,roleInfo:r.roleInfo}}),F.l.info("~~[SubmitAnwser] Enter (fill/updateAutoFillStatus)~~"),e({type:"fill/updateAutoFillStatus",payload:{answerObj:n,questions:o}});const i=(0,h.pm)("qqzy");if(U.isPC&&i){var s,a,l,c;const e={data:JSON.stringify({courseName:r.title,id:window.clientVars.globalPadId}),domains:D._P.QUN,eventName:"homeworkSubmitted",handler:"__client_callback__"};"function"==typeof(null===(s=window)||void 0===s||null===(a=s.ntQQApi)||void 0===a?void 0:a.invoke)?window.ntQQApi.invoke("notifyWindow",JSON.stringify(e)):"function"==typeof(null===(l=window)||void 0===l||null===(c=l.external)||void 0===c?void 0:c.notifyWindow)&&window.external.notifyWindow(JSON.stringify(e))}},viewDetailWithSid(t){e(r.routerRedux.push(`/detail/${t}`))},pushHistory(t){e(r.routerRedux.push(`/${t}`)),"result"===t&&(0,M.G)("edit","clk_result")},replaceHistory(t){e(r.routerRedux.replace(`/${t}`))},gobackHistory(){e(r.routerRedux.go(-1))},setAnswerData(t){e({type:"fill/setAnswerData",payload:{answerData:t}})},setTableQuestionRowIndex(t){e({type:"fill/setTableQuestionRowIndex",payload:{tableQuestionRowIndex:t}})},setTableSubFormDisabled(t){e({type:"fill/setTableSubFormDisabled",payload:{tableSubFormDisabled:t}})},setTableSubFormFromPage(t){e({type:"fill/setTableSubFormFromPage",payload:{tableSubFormFromPage:t}})},getDeleteRecords(t){let{since:n,startTime:o=0,endTime:r=0,type:i=""}=t;e({type:"result/fetchPageResults",payload:{since:n,fetchType:2,startTime:o,endTime:r,type:i,selfOnly:!1,descending_order:!0,orderBy:2,status:201}})},updateUidList(t){e({type:"detail/updateUidListReducer",payload:t})},deleteRecord(t){e({type:"result/deleteRecord",payload:t})},setCycleData(t){e({type:"roster/setCycleData",payload:t})},queryLatestSettingsAndStatistics(){e((0,Ft.oO)()),e({type:"result/queryOverallStatistics"})}},(0,V.bindActionCreators)({setTopTitleBarVisible:q.l3,setTopBarTitle:q.x5,setScrollDistance:q.M0,updatePeriodicSubmitNotify:Ft.wm,goEditAgainstCollaboration,getSelectedRosters:kt.T},e)))),Bt=Reflect.metadata("design:type",Function),Ut=Reflect.metadata("design:paramtypes",[void 0]),Gt=Reflect.metadata("design:type",Function),Ht=Reflect.metadata("design:paramtypes",[]),Vt=(0,J.k)(),qt=Reflect.metadata("design:type",Function),Qt=Reflect.metadata("design:paramtypes",[]),Zt(Kt=(e=>{var t,r,s,a,l,c,d,u,p,m,h,f,g,_,y,b,E,v,T,S,O,w,I,C,R,P,A,D;let N=(t=(0,J.k)({props:["fill.showResubmitToastStatus","fill.isReSubmit"]}),r=Reflect.metadata("design:type",Function),s=Reflect.metadata("design:paramtypes",[]),a=(0,J.k)(),l=Reflect.metadata("design:type",Function),c=Reflect.metadata("design:paramtypes",[void 0,void 0,void 0]),d=(0,J.k)(),u=Reflect.metadata("design:type",Function),p=Reflect.metadata("design:paramtypes",[]),m=Reflect.metadata("design:type",Function),h=Reflect.metadata("design:paramtypes",[]),f=Reflect.metadata("design:type",Function),g=Reflect.metadata("design:paramtypes",[void 0,void 0]),_=Reflect.metadata("design:type",Function),y=Reflect.metadata("design:paramtypes",[void 0]),b=Reflect.metadata("design:type",Function),E=Reflect.metadata("design:paramtypes",[]),v=Reflect.metadata("design:type",Function),T=Reflect.metadata("design:paramtypes",[]),S=Reflect.metadata("design:type",Function),O=Reflect.metadata("design:paramtypes",[void 0]),w=Reflect.metadata("design:type",Function),I=Reflect.metadata("design:paramtypes",[void 0]),C=Reflect.metadata("design:type",Function),R=Reflect.metadata("design:paramtypes",[void 0,void 0]),P=Reflect.metadata("design:type",Function),A=Reflect.metadata("design:paramtypes",[]),D=class FillCoreBase extends e{static getDerivedStateFromError(){return{formCrashed:!0}}static getDerivedStateFromProps(e,t){return e.formData!==t.formData?{formData:e.formData,formDataImmutable:!1}:{formDataImmutable:!0}}constructor(e){super(e),this.state=core_base_mixin_objectSpread({currentSectionIndex:0,formCrashed:!1,isSoftKeyboardUp:!1,submitting:!1,isAgainFill:!1,i18next:{t:ee.Q}},this.state),this.formFillContainerRef=o.createRef(),this.formFillRef=o.createRef(),this.hasSetTitle=!1,this.uploadingQuestionSet=new Set,this.inFillModified=(0,Z.dU)(),this.recognizeQuestionDescMap=new Map,"sid"in e&&e.changeSid(e.sid)}get isOwner(){var e,t;return!(null===(e=this.props.formInfo)||void 0===e||null===(t=e.data)||void 0===t||!t.isOwner)}get isAdmin(){var e,t;return!(null===(e=this.props.formInfo)||void 0===e||null===(t=e.data)||void 0===t||!t.isAdmin)}get sid(){if((0,Z.dU)())return function getHashPage(e){const t=location.hash.split("/");return null==t?void 0:t[e]}(2)}get isModify(){return!!this.sid}get questionList(){const{formData:e}=this.props;return ze(e.sections||[])}get questionMap(){const{formData:e}=this.props;return Xe(e.questions||[])}get rosterInfoBarTitle(){const{selectedRosters:e}=this;return(0,Ye.m)(e)}get shouldShowPage(){const{fill:e,formData:t,formInfo:n}=this.props,{formDataLoaded:o,isDeleted:r,isUnloginPreview:i,permission:s}=n;return o&&!r&&(s||i)&&!e.isLoadingAnswerData&&Object.keys(t).length>0}get isClosed(){const{isClosed:e}=this.props;return e}get disabled(){const{formData:{questions:e},serverTimeDifference:t}=this.props,{startTime:n,endTime:o}=this;if(!e||e.every((e=>e.type===Me.c.SEGMENTATION)))return!0;const r=t+Date.now();return!!this.isClosed||(!!(n&&r<n||o&&r>o)||this.getDisabledStatus())}componentDidMount(){var e,t;null===(e=this.doAutoFillLogic)||void 0===e||e.call(this),this.dealWithAnswerBySid(),this.props.result.totalSelf&&(0,M.G)("fill","exp_filled",{abtest:"1"}),(0,M.G)("tab","view_fill",{abtest:"1"}),document.addEventListener("restoreSubmitButtonStatus",this.restoreSubmitButtonStatus),this.scrollFillPageToLastScrollPosition(),this.resetTitle(),this.lazyLoadI18(),null===(t=super.componentDidMount)||void 0===t||t.call(this)}componentDidUpdate(e,t,n){var o;!e.isClosed&&this.props.isClosed&&this.resetErrorState(),null===(o=super.componentDidUpdate)||void 0===o||o.call(this,e,t,n)}componentWillUnmount(){var e;const{fill:t,formData:n,reSetResubmitToastStatus:o}=this.props;this.hasSetTitle&&this.setTitle(n.title),t.showResubmitToastStatus&&o(),this.setFillPageScrollDistance(),document.removeEventListener("restoreSubmitButtonStatus",this.restoreSubmitButtonStatus),null===(e=super.componentWillUnmount)||void 0===e||e.call(this)}dealWithAnswerBySid(){const{sid:e}=this;if(e)this.props.getRecord(Number(e));else if(!(0,Z.JV)()){var t,n;null===(t=(n=this.props).resetDetailAnswer)||void 0===t||t.call(n)}}resetTitle(){const{i18next:e}=this.state;this.inFillModified&&(this.hasSetTitle=!0,this.setTitle(e.t("修改填写结果")))}async lazyLoadI18(){const{i18nextService:e}=await Promise.resolve().then(n.bind(n,62438));this.setState({i18next:e.start()})}shouldHideSettingsInRefill(){const{result:e}=this.props;return this.inFillModified||e.totalSelf>0&&(0,Z.P0)()}handleAnswerQuestion(e,t){var n;const o=null===(n=super.handleAnswerQuestion)||void 0===n?void 0:n.call(this,e,t);this.props.onAnswerQuestion(null!=o?o:e),this.handleAfterAnswerQuestion(e,t)}handleAfterAnswerQuestion(e){if([Me.c.IMAGE,Me.c.RECOGNITION].includes(e.type)&&this.uploadingQuestionSet.delete(e.id),e.type!==Me.c.RECOGNITION||e.content.length||this.recognizeQuestionDescMap.set(e.id,core_base_mixin_objectSpread(core_base_mixin_objectSpread({},this.recognizeQuestionDescMap.get(e.id)),{},{isDeleted:!0})),this.answerQuestionReported)return;this.answerQuestionReported=!0;const{formData:t}=this.props;(0,M.G)("edit","edit_text",{opername:"doc_core",id:this.reportEditTextId,obj2:t.title||"",ver5:2}),this.isAdmin&&(0,M.G)("owner","fill_edit")}handleGoToClosingRemarkPage(){const{pushHistory:e}=this.props;e(xe.G.EDIT_CLOSING_REMARK)}handleImageUploadStart(e){this.uploadingQuestionSet.add(e)}gotoResult(){const{result:{totalSelf:e},detail:{sid:t}}=this.props;if(!e)return;const n=1===e;this.props.setCycleData({cycleUids:null}),n?(this.props.updateUidList({uidList:[t]}),(0,M.G)("edit_result","clk_selfde",{abtest:"1"})):(0,M.G)("edit_result","clk_selflist"),this.jumpAgainstSelfSubmission(n)}jumpAgainstSelfSubmission(e){const{detail:t,pushHistory:n,viewDetailWithSid:o}=this.props;e?o(t.sidList[t.sidList.length-1]):(window.dispatchEvent(new CustomEvent("changeToResult")),n(xe.G.FILL_LIST))}async handleReport(e){const t={afterSubtitleImageLoaded:{module:"contents",action:"view_pic",extra:{ver6:2}},afterChoiceOptionImageLoaded:{module:"contents",action:"view_pic",extra:{ver6:3}},afterChoiceOptionImagePreview:{module:"contents",action:"clk_pic",extra:{ver6:3}},afterRichTextImageClick:{module:"contents",action:"clk_pic",extra:{ver6:{"question-subtitle":2,option:3}[e.detail.source]}},afterRichEditorLinkRendered:{module:"contents",action:"view_link",extra:{ver6:2}},afterRichEditorOpenLink:{module:"contents",action:"clk_link",extra:{ver6:2}},afterrichEditorLinkCopy:{module:"lp_link_menu",action:"click_copy",extra:{ver6:2}},afterClickScanIcon:{module:"scan",action:"button_clk",extra:{ver5:await(async e=>{if(e){const t=await e;return t?t/1e3:0}return 0})(e.detail.retValue)}},afterSortByClick:{module:"sort",action:"sort_item",extra:{ver5:1}},afterSortByDrag:{module:"sort",action:"sort_item",extra:{ver5:0}}};(0,M.g)(e,t)}handleSectionChange(e){this.setState({currentSectionIndex:e}),window.scrollTo(0,0),this.formFillContainerRef.current.scrollTop=0}handleValidateAnswer(e,t){return super.handleValidateAnswer(e,t)}handleSubmitAnswerCommon(e){var t,n;let{data:o,hideIds:r,otherInfo:i,questions:s,rawAnswer:a}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function.prototype;if(this.setState({submitting:!0}),this.shouldRestoreWhenUploading())return;if(null!==(t=this.checkInexistFileKey)&&void 0!==t&&t.call(this,o))return void setTimeout(this.restoreSubmitButtonStatus,0);null===(n=this.checkFileImageObjkey)||void 0===n||n.call(this,o);const c=core_base_mixin_objectSpread({title:this.props.formData.title,hideIds:r},i),{sid:d}=this;d&&(c.sid=Number(d));const{selfList:u}=this.props;this.doSubmitAnswer(o,a,s,c),l(),d?(0,M.G)("result_change","submit_suc",{ver5:Number(u.length>1)}):(0,M.G)("fill","submit_again",{abtest:"1"})}doSubmitAnswer(e,t,n,o){const{docStatus:r,submitAnswer:i}=this.props;i(e,t,n,o,r)}getAddonParams(){const{creatorId:e,globalPadId:t,padType:n}=this.props.formInfo.data,{uid:o}=this.props.userInfo;return F.l.debug("getAddonParams",{extra:{docID:t,creatorID:e,uid:o,docType:n}}),{docID:t,creatorID:e,uid:o,docType:n}}resetErrorState(){if(!this.formFillRef.current)return;const e=this.formFillRef.current.props.form.getFieldsValue();this.formFillRef.current.props.form.setFieldsValue(e)}restoreSubmitButtonStatus(){this.setState({submitting:!1})}scrollFillPageToLastScrollPosition(){const{scrollContainerRef:e,scrollDistance:{result:t},showTab:n}=this.props.toggle;n&&e.current&&(e.current.scrollTop=t)}setFillPageScrollDistance(){var e;const{setScrollDistance:t,toggle:n}=this.props,{scrollContainerRef:o}=n;t({result:null===(e=o.current)||void 0===e?void 0:e.scrollTop})}setTitle(e){var t;document.title=e,null===(t=this.setTitleCustom)||void 0===t||t.call(this,e)}shouldRestoreWhenUploading(){return!!this.uploadingQuestionSet.size&&(setTimeout(this.restoreSubmitButtonStatus,0),(0,de.IG)(this.state.i18next.t("请等待上传完成后再提交")),!0)}getDisabledStatus(){const{taskConfig:e,detail:t}=this.props,{lastestSubmitSid:n}=t,{currentSectionIndex:o}=this.state;return!!(Z.v1&&n&&null!=e&&e.fixedInfo&&0===o)}renderCaptionCard(){const{endTime:e,formData:t,conclusion:n,canPrivateCopyOut:r,corpId:i}=this.props,{FormHeader:s}=this,{richSubtitle:a,subtitle:l,title:c}=t;return o.createElement(s,(0,K.Z)({anonymous:this.anonymous,conclusion:n,endTime:e,formTitle:c,formSubTitle:l,isClosed:this.isClosed,isAdmin:this.isAdmin,isOwner:this.isOwner,isEditable:!1,isShowReadOnlyTitle:!0,isReadOnly:!0,onGoToClosingRemarkPage:this.handleGoToClosingRemarkPage,readOnlyWithDiv:!0,richSubtitle:a||l,shouldHideSettingsInRefill:this.shouldHideSettingsInRefill,canPrivateCopyOut:r,corpId:i},this.formHeaderProps))}renderTopPicture(){const{TopPicture:e}=this;return o.createElement(e,{canEdit:!1})}renderPureFill(){const{formData:e,onFormItemBlur:t,onFormItemChange:n,onFormItemFocus:r,formInfo:{data:{globalPadId:i}},canPrivateCopyOut:s,corpId:a}=this.props,{formCrashed:l,formDataImmutable:c,submitting:d,i18next:u}=this.state,{FormFill:p,isOwner:m}=this;return l?o.createElement("div",{style:{color:"#5C5C5C",fontSize:16,marginTop:30,textAlign:"center"}},u.t("表单数据异常"),m?u.t(", 请尝试以下步骤修复数据"):u.t(", 请联系创建者重新发布"),m?o.createElement("ol",{style:{margin:"20px auto 0",textAlign:"left",width:"fit-content"}},o.createElement("li",null,u.t("点击编辑收集表")),o.createElement("li",null,u.t("点击发布")),o.createElement("li",null,u.t("修复完成"))):null):o.createElement(p,(0,K.Z)({canPrivateCopyOut:s,corpId:a,anonymous:this.anonymous,componentProps:this.componentProps,formData:core_base_mixin_objectSpread(core_base_mixin_objectSpread({},e),{},{globalPadId:i}),formDataImmutable:c,getPopupContainer:this.getPopupContainer,lang:window.__LANG__,onAnswerQuestion:this.handleAnswerQuestion,onFormItemBlur:t,onFormItemChange:n,onFormItemFocus:r,onReport:this.handleReport,onSectionChange:this.handleSectionChange,onValidate:this.handleValidateAnswer,readOnly:this.readOnly,showSubmitBtn:this.shouldShowSubmitBtn,showSubmitBtnOnReadonly:!0,submitting:d,submitBtnText:this.submitBtnText,value:this.answerData,useRichEditor:!0,wrappedComponentRef:this.formFillRef},this.formFillProps,{disabled:this.disabled,key:this.state.isAgainFill}))}render(){var e,t,n,r,s,a,l;const{FormFillWrapper:c}=this,{formData:d}=this.props,{currentSectionIndex:u,showRosterVerify:p,showTableSubform:m}=this.state;return(0,Fe.Sd)(d)?o.createElement(BlankPage,{blankType:"not_start_collecting"}):this.shouldShowPage?p?o.createElement(i.Z,{title:"form-fill render complete",report007:null===(h=this.getReport007Key)||void 0===h?void 0:h.call(this)},null===(f=this.renderRosterVerifyMask)||void 0===f?void 0:f.call(this)):m?o.createElement(o.Fragment,null,this.renderTableFillSubform()):o.createElement(o.Fragment,null,null===(e=this.renderExamProgressBar)||void 0===e?void 0:e.call(this),this.renderTopPicture(),o.createElement("div",{className:me()("form-fill",this.containerClassName),style:{userSelect:"text"},onTouchEnd:this.handleOnTouchEnd},0===u?o.createElement(o.Fragment,null,null===(t=this.renderCaptionTip)||void 0===t?void 0:t.call(this),null===(n=this.renderCaptionCard)||void 0===n?void 0:n.call(this)):null,null===(r=this.renderRosterInfoBar)||void 0===r?void 0:r.call(this),o.createElement(i.Z,{title:"form-fill render complete",report007:null===(s=this.getReport007Key)||void 0===s?void 0:s.call(this)},o.createElement("div",{className:"form-fill-container",ref:this.formFillContainerRef},o.createElement(c,this.formFillWrapperProps,this.renderPureFill()),null===(a=this.renderOperateBar)||void 0===a?void 0:a.call(this))),null===(l=this.renderExamFooter)||void 0===l?void 0:l.call(this))):null;var h,f}},(0,W.Z)(D.prototype,"componentDidMount",[t,r,s],Object.getOwnPropertyDescriptor(D.prototype,"componentDidMount"),D.prototype),(0,W.Z)(D.prototype,"componentDidUpdate",[a,l,c],Object.getOwnPropertyDescriptor(D.prototype,"componentDidUpdate"),D.prototype),(0,W.Z)(D.prototype,"componentWillUnmount",[d,u,p],Object.getOwnPropertyDescriptor(D.prototype,"componentWillUnmount"),D.prototype),(0,W.Z)(D.prototype,"shouldHideSettingsInRefill",[z.xB,m,h],Object.getOwnPropertyDescriptor(D.prototype,"shouldHideSettingsInRefill"),D.prototype),(0,W.Z)(D.prototype,"handleAnswerQuestion",[z.xB,f,g],Object.getOwnPropertyDescriptor(D.prototype,"handleAnswerQuestion"),D.prototype),(0,W.Z)(D.prototype,"handleAfterAnswerQuestion",[z.xB,_,y],Object.getOwnPropertyDescriptor(D.prototype,"handleAfterAnswerQuestion"),D.prototype),(0,W.Z)(D.prototype,"handleGoToClosingRemarkPage",[z.xB,b,E],Object.getOwnPropertyDescriptor(D.prototype,"handleGoToClosingRemarkPage"),D.prototype),(0,W.Z)(D.prototype,"gotoResult",[z.xB,v,T],Object.getOwnPropertyDescriptor(D.prototype,"gotoResult"),D.prototype),(0,W.Z)(D.prototype,"handleReport",[z.xB,S,O],Object.getOwnPropertyDescriptor(D.prototype,"handleReport"),D.prototype),(0,W.Z)(D.prototype,"handleSectionChange",[z.xB,w,I],Object.getOwnPropertyDescriptor(D.prototype,"handleSectionChange"),D.prototype),(0,W.Z)(D.prototype,"handleValidateAnswer",[z.xB,C,R],Object.getOwnPropertyDescriptor(D.prototype,"handleValidateAnswer"),D.prototype),(0,W.Z)(D.prototype,"restoreSubmitButtonStatus",[z.xB,P,A],Object.getOwnPropertyDescriptor(D.prototype,"restoreSubmitButtonStatus"),D.prototype),D);return N.displayName=e.displayName||e.name,N})(Kt=(e=>{class FillCorePC extends e{constructor(){super(...arguments),this.FormFill=Je.Z,this.formRootSelector=".form-root-wrap",this.getPopupContainer=()=>document.querySelector(".form-root-wrap")}componentDidMount(){var e;const{setTopTitleBarVisible:t,setTopBarTitle:n}=this.props;this.inFillModified&&(t(!0),n(this.state.i18next.t("修改我的结果"))),null===(e=super.componentDidMount)||void 0===e||e.call(this)}componentWillUnmount(){var e;const{setTopTitleBarVisible:t,setTopBarTitle:n}=this.props;this.inFillModified&&(t(!1),n("")),null===(e=super.componentWillUnmount)||void 0===e||e.call(this)}}return FillCorePC.displayName=e.displayName||e.name,FillCorePC})(Kt=(e=>{var t,r,i,s,a,l,c,d,u,p,m,g,_,y,b,E,v,S,O,w,I,C,R,P,A,N,L,j,x,k,B,G,H,V,q,Q,$,Y,X,J,ee,te,ne,oe,re,ie,se,ae,ue,pe,me,he,fe,ge,_e,ye,be,Ee,ve,Te,Se,Oe,we,Ie,Ce,Pe,Ae,De,Ne,Le;let Fe=(t=Reflect.metadata("design:type",Function),r=Reflect.metadata("design:paramtypes",[void 0]),i=Reflect.metadata("design:type",Function),s=Reflect.metadata("design:paramtypes",[]),a=Reflect.metadata("design:type",Function),l=Reflect.metadata("design:paramtypes",[]),c=Reflect.metadata("design:type",Function),d=Reflect.metadata("design:paramtypes",[]),u=Reflect.metadata("design:type",Function),p=Reflect.metadata("design:paramtypes",[]),m=Reflect.metadata("design:type",Function),g=Reflect.metadata("design:paramtypes",[]),_=Reflect.metadata("design:type",Function),y=Reflect.metadata("design:paramtypes",[void 0,void 0]),b=Reflect.metadata("design:type",Function),E=Reflect.metadata("design:paramtypes",[void 0]),v=Reflect.metadata("design:type",Function),S=Reflect.metadata("design:paramtypes",[]),O=Reflect.metadata("design:type",Function),w=Reflect.metadata("design:paramtypes",[void 0,void 0]),I=Reflect.metadata("design:type",Function),C=Reflect.metadata("design:paramtypes",[void 0]),R=Reflect.metadata("design:type",Function),P=Reflect.metadata("design:paramtypes",[void 0,void 0]),A=Reflect.metadata("design:type",Function),N=Reflect.metadata("design:paramtypes",[]),L=Reflect.metadata("design:type",Function),j=Reflect.metadata("design:paramtypes",[void 0,void 0]),x=Reflect.metadata("design:type",Function),k=Reflect.metadata("design:paramtypes",[void 0]),B=Reflect.metadata("design:type",Function),G=Reflect.metadata("design:paramtypes",[void 0]),H=Reflect.metadata("design:type",Function),V=Reflect.metadata("design:paramtypes",[void 0]),q=Reflect.metadata("design:type",Function),Q=Reflect.metadata("design:paramtypes",[]),$=Reflect.metadata("design:type",Function),Y=Reflect.metadata("design:paramtypes",[void 0]),X=Reflect.metadata("design:type",Function),J=Reflect.metadata("design:paramtypes",[void 0]),ee=Reflect.metadata("design:type",Function),te=Reflect.metadata("design:paramtypes",[void 0]),ne=Reflect.metadata("design:type",Function),oe=Reflect.metadata("design:paramtypes",[void 0]),re=Reflect.metadata("design:type",Function),ie=Reflect.metadata("design:paramtypes",[void 0]),se=Reflect.metadata("design:type",Function),ae=Reflect.metadata("design:paramtypes",[void 0]),ue=Reflect.metadata("design:type",Function),pe=Reflect.metadata("design:paramtypes",[void 0]),me=Reflect.metadata("design:type",Function),he=Reflect.metadata("design:paramtypes",[]),fe=Reflect.metadata("design:type",Function),ge=Reflect.metadata("design:paramtypes",[void 0,void 0]),_e=Reflect.metadata("design:type",Function),ye=Reflect.metadata("design:paramtypes",[void 0]),be=Reflect.metadata("design:type",Function),Ee=Reflect.metadata("design:paramtypes",[void 0]),ve=Reflect.metadata("design:type",Function),Te=Reflect.metadata("design:paramtypes",[void 0]),Se=Reflect.metadata("design:type",Function),Oe=Reflect.metadata("design:paramtypes",[void 0]),we=Reflect.metadata("design:type",Function),Ie=Reflect.metadata("design:paramtypes",[void 0]),Ce=Reflect.metadata("design:type",Function),Pe=Reflect.metadata("design:paramtypes",[void 0]),Ae=Reflect.metadata("design:type",Function),De=Reflect.metadata("design:paramtypes",[]),function tableBaseMixin(e){var t,n,r;let i=(t=Reflect.metadata("design:type",Function),n=Reflect.metadata("design:paramtypes",[Number,Number,"undefined"==typeof IQuestion?Object:IQuestion]),r=class MixedComponentBase extends e{constructor(){super(...arguments),this.state=base_objectSpread(base_objectSpread({},this.state),{},{showTableSubform:!!this.currentTableQuestion})}get tableQuestionId(){return(0,Z.JV)()?location.hash.split("/")[2]:""}get currentTableQuestion(){var e;const{formData:t}=this.props;return null===(e=t.questions)||void 0===e?void 0:e.find((e=>e.id===this.tableQuestionId))}get subQuestionMap(){var e;return Ct((null===(e=this.currentTableQuestion)||void 0===e?void 0:e.qdata.tableQuestionData.questions)||[])}getAnswerDataByFieldsValue(e,t){return e?Object.keys(e).filter((n=>!(0,je.tr)({type:t[n].type,content:e[n]})||t[n].type===Me.c.TABLE)).map((n=>({id:n,type:t[n].type,content:e[n]}))):[]}async handleFillTableQuestion(e,t,n){const o=this.getAnswerDataByFieldsValue(this.fieldsValue,this.questionMap);Re.y.uploadAllSuccess?(It.setMemberCache(this.state.member),It.setBoundMembersCache(this.boundMembers),this.setTempAnswerData(o),this.setTableQuestionRowIndex(e),this.setTableSubFormDisabled(!1),this.handleToTableSubForm(n.id)):(0,de.IG)(this.state.i18next.t("文件（图片）正在上传中或上传失败。"))}renderTableFillSubform(){const{TableFillSubForm:e,formFillRef:t}=this,{formDataImmutable:n,i18next:r}=this.state;return o.createElement(o.Suspense,{fallback:null},o.createElement(e,(0,K.Z)({},this.props,{answerData:this.answerData,currentTableQuestion:this.currentTableQuestion,componentProps:this.componentProps,disabled:this.disabled||this.tableSubFormDisabled,formDataImmutable:n,getAnswerDataByFieldsValue:this.getAnswerDataByFieldsValue,getPopupContainer:this.getPopupContainer,gobackHistory:this.handleBackToForm,handleAnswerQuestion:this.handleAnswerQuestion,handleAfterAnswerQuestion:this.handleAfterAnswerQuestion,handleBeforeDeleteAttachments:this.handleBeforeDeleteAttachments,handleFormItemBlur:this.handleFormItemBlur,handleFormItemFocus:this.handleFormItemFocus,handleReport:this.handleReport,handleValidateAnswer:this.handleValidateAnswer,i18next:r,readOnly:this.readOnly,setTableQuestionRowIndex:this.setTableQuestionRowIndex,setTempAnswerData:this.setTempAnswerData,subQuestionMap:this.subQuestionMap,tableQuestionId:this.tableQuestionId,tableQuestionRowIndex:this.tableQuestionRowIndex,tableSubFormFillRef:t})))}},(0,W.Z)(r.prototype,"handleFillTableQuestion",[z.xB,t,n],Object.getOwnPropertyDescriptor(r.prototype,"handleFillTableQuestion"),r.prototype),r);return i.displayName=e.displayName||e.name,i}(Ne=t(Ne=r((Le=class MixedComponent extends e{constructor(e){var t,r;super(e),this.FormFillWrapper=mt.Z,this.reportPage=()=>{const e=(0,Z.P0)()?"fill":"",t=(0,Z.dU)()?"fill-modify":"",n=e||t,o=!!this.isPeriodic,r=!!this.selectedRosters.length;F.l.info(`[form-page]-${n}`,`isPeriodic: ${o}, isRoster: ${r}, selfFillNumber: ${this.props.selfFillNumber}`),(0,M.G)("form-page",`${n}`,{ver6:(new Date).toLocaleString(),ver7:o,ver8:r,ver9:this.props.selfFillNumber})},this.checkContentNoObjkey=e=>e.find((e=>!e.key&&!e.objKey)),this.doAutoFillLogic=()=>{const{fill:e,getLastRecord:t,reSetResubmitToastStatus:n}=this.props,{isReSubmit:o,showResubmitToastStatus:r}=e;(r&&o||(0,h.zf)()||gt.E.formSetting.state.showResubmitToast)&&((0,de.IG)(this.state.i18next.t("你曾填写过此收集表，填入上次内容"),{duration:5e3,action:this.state.i18next.t("填写"),onClickAction:()=>{(0,M.G)("fill","clk_quick_fill"),this.isClickFillAgain=!0,t({type:"fillAgain"})}}),n())},this.renderRosterVerifyMask=()=>{var e;const{i18next:t}=this.state,{RosterVerifyMask:n,selectedRosters:r,rosterInfoBarTitle:i}=this,{data:{creatorNick:s,globalPadId:a,ownerAvatar:l,ownerNick:c,title:d}}=this.props.formInfo,u={title:i,value:""},p=null!==(e=r[0].type)&&void 0!==e?e:ot.r.COMMON;return o.createElement(o.Suspense,{fallback:null},o.createElement(n,(0,K.Z)({buttonText:t.t("进入填写"),disabled:!(0,T.isLogin)()||this.isClosed,isClosed:this.isClosed,formTitle:d,globalPadId:a,primaryContent:u,rosterType:p,ownerAvatar:l,ownerNick:c||s,onClickButton:e=>{if(p===ot.r.STUDENT){const t=e.role;(0,M.G)("fill_class_list","uid_binding",{ver5:1,ver6:t>0?ut.go[t-1]:"default"})}this.setState({showRosterVerify:!1,member:e})}},this.formFillWrapperProps)))},this.boundMembers=It.boundMembersCache.length?It.boundMembersCache:(null===(t=this.props.windowRosterData)||void 0===t?void 0:t.rosterMembers)||[],this.state=base_mixin_objectSpread({currentPageAnswered:!1,focusedSensitiveSimpleId:"",paperResult:[],paperResultMap:{},showOperationBar:!1,canReceivePeriodicNotify:!0,member:null!==(r=It.memberCache)&&void 0!==r&&r.role?It.memberCache:this.boundMembers[0]||{},submitWithNoName:!1,showRosterVerify:this.shouldShowRosterVerify,selectedRostersForLite:[],canSubmitByPeriodic:!0},this.state),this.componentProps={canvas:()=>({addonParams:this.getAddonParams(),uploadUrl:`/v1/image/upload?usage=4&globalPadId=${this.props.formInfo.data.globalPadId}`}),file:()=>({beforeDeleteAttachments:this.handleBeforeDeleteAttachments,getAttachmentsComponent:async()=>await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("js_components_attachments-uploader_water-mark_sticker_less-js_components_common-list_index_le-44de81"),n.e("js_components_attachments-uploader_components_index_ts-js_components_result-components_statis-86889c")]).then(n.bind(n,47476)),maxCount:1}),fileimage:e=>{const t=this.props.userInfo||this.props.formInfo.data.userInfo;return{beforeAddAttachments:()=>{var t;return null===(t=this.handleBeforeAddAttachments)||void 0===t?void 0:t.call(this,e)},beforeDeleteAttachments:this.handleBeforeDeleteAttachments,getAttachmentsComponent:async()=>await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("js_components_attachments-uploader_water-mark_sticker_less-js_components_common-list_index_le-44de81"),n.e("js_components_attachments-uploader_components_index_ts-js_components_result-components_statis-86889c")]).then(n.bind(n,47476)),userInfo:this.anonymous?{}:{avatar:t.avatar||t.userPic,nickname:t.nick||t.userName}}},canvas_image:e=>{const t=this.props.userInfo||this.props.formInfo.data.userInfo;return{padId:this.props.formInfo.data.padId,type:Me.c.CANVAS_IMAGE,addonParams:this.getAddonParams(),beforeAddAttachments:()=>{var t;return null===(t=this.handleBeforeAddAttachments)||void 0===t?void 0:t.call(this,e)},beforeDeleteAttachments:this.handleBeforeDeleteAttachments,getAttachmentsComponent:async()=>await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("js_components_attachments-uploader_water-mark_sticker_less-js_components_common-list_index_le-44de81"),n.e("js_components_attachments-uploader_components_index_ts-js_components_result-components_statis-86889c")]).then(n.bind(n,47476)),userInfo:this.anonymous?{}:{avatar:t.avatar||t.userPic,nickname:t.nick||t.userName}}},image:e=>{let{id:t}=e;const{formData:n,data:o}=this.props.formInfo;return{onImageUploadStart:this.handleImageUploadStart.bind(this,t),uploadUrl:`/v1/image/upload?${2===n.version?"shouldAddToDriver=1&":""}globalPadId=${o.globalPadId}&usage=4`}},recognition:e=>({onImageUploadStart:this.handleImageUploadStart.bind(this,e.id)}),location:e=>({className:Z.v1?"big-paper":"",mapKey:at.K,mapReferer:at.k,dataType:e.dataType,onSelectPosition:async t=>{await async function showLocationMap(e){const{default:t,LOCATION_MAP:n}=await(0,ce.f)(),o=await t.getExtension(n.name);null==o||o.show(e)}({container:null,source:"form",onClose:()=>{F.l.info("location map close")},handleInsert:n=>{Rt.v[e.id]=n,t(n)},mode:"write"})},onAutoPositionFailed:()=>{var e;return null===(e=this.handleAutoPositionFailed)||void 0===e?void 0:e.call(this)}}),simple:e=>{const{title:t,subtitle:n,id:r}=e,i=this.isSensitiveQuestion(e)||this.sensitiveWordManager.containsSensitiveWords([t,n],1);return{getDesc:e=>i&&(null==e||!e.length)||r===this.state.focusedSensitiveSimpleId?o.createElement("div",{style:{marginTop:"6px"}},this.state.i18next.t("此题涉及隐私信息，请注意核实收集者身份。")):null}},table:e=>({onFillTableQuestion:(t,n)=>{this.setTableSubFormFromPage(location.hash),this.handleFillTableQuestion(t,n,e)}}),scan:()=>{const{isEnabled:e}=Dt.hx[Nt.Td.QQ_SCAN_API]();return{showQrCodeModal:At.BX,useMqqApi:e}}},this.attachmentFiles={},this.attachmentUploadInstance=null,this.files={},this.isBigForm=Z.v1||!!(0,h.pm)("big"),this.sensitiveWordManager=lt.ct,this.timer=null,this.submissionLimitTimer=null,this.rosterInfoBarRef=o.createRef()}get reportEditTextId(){const{formInfo:e}=this.props;return e.globalPadId||""}get i18next(){}get shouldShowGoToEditBtn(){const{formInfo:{isAdmin:e}}=this.props;return e}get anonymous(){return this.props.anonymous}get nickInQQChannel(){const{qqRelated:e}=this.props;return null==e?void 0:e.nicknameInQqChannel}get shouldShowRosterVerify(){var e,t;return!(this.shouldShowGoToEditBtn||!this.hasSelectedRosters)&&!(this.boundMembers.length||null!==(e=this.state)&&void 0!==e&&null!==(t=e.member)&&void 0!==t&&t.role||this.props.windowRosterData.hasSubmitted||this.props.result.totalSelf)}get canMultiSubmit(){const{canMultiSubmit:e}=this.props;return e}get showChangeInfoTag(){var e,t,n;if(this.isClosed)return!1;return(null!==(e=null===(t=this.selectedRosters)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.type)&&void 0!==e?e:ot.r.COMMON)===ot.r.STUDENT&&this.boundMembers.length?this.isInFill:this.isInFill&&(this.canMultiSubmit||this.shouldShowGoToEditBtn)}get isInFill(){return!0}isSensitiveQuestion(e){if(e.type!==Me.c.SIMPLE)return!1;const t=[1,2,3,5,10],n=[14];return!!e.validate.some((e=>t.includes(e.ruletype)))||!!e.validate.some((e=>n.includes(e.type)))}async componentDidMount(){var e;if((0,T.isLogin)()||"1"===(0,h.pm)("big")||document.querySelector(this.formRootSelector).addEventListener("click",this.showNoLoginNotification),document.addEventListener("visibilitychange",this.handleVisibilitychange),Z.v1&&this.doBigPaperLogic(),this.sensitiveWordManager.setNeedCheck(!this.isAdmin),this.sensitiveWordManager.setSensitiveWords(),this.submissionLimitTimer=setTimeout((()=>this.handleSubmissionNotice()),1500),this.timer=setTimeout((()=>{this.showSharePage(),this.state.showOperationBar||this.setState({showOperationBar:!0})})),this.reportPage(),this.selectedRosters.length){let e;if(this.props.detail.sid){var t,n;const{detail:{role:o}}=this.props,r=null!==(t=null===(n=this.selectedRosters[0])||void 0===n?void 0:n.type)&&void 0!==t?t:ot.r.COMMON;e=getMemberInfoByRosterType(o,r)}this.setMembers(e)}this.calcFillCostStart(),this.props.getSelectedRosters(),this.initStartAndEndTimeChecker(),null===(e=super.componentDidMount)||void 0===e||e.call(this)}async componentDidUpdate(e,t,n){var o,r,i,s;Z.v1&&this.doBigPaperUpdateLogic(e,t);const{detail:a,selectedRosters:l,result:c}=this.props,{role:d,sidList:u}=a,p=null!==(o=null==l||null===(r=l[0])||void 0===r?void 0:r.type)&&void 0!==o?o:ot.r.COMMON;if(!(0,tt.default)(d,e.detail.role)){const e=getMemberInfoByRosterType(d,p);await this.updateBoundMember(p,e)}if((null==l?void 0:l.length)===(null===(i=e.selectedRosters)||void 0===i?void 0:i.length)&&c.totalSelf===e.result.totalSelf||this.setMembers(),!(0,tt.default)(u,e.detail.sidList)){const{updateUidList:e}=this.props;e({uidList:u})}null===(s=super.componentDidUpdate)||void 0===s||s.call(this,e,t,n)}componentWillUnmount(){var e,t;(0,T.isLogin)()||"1"===(0,h.pm)("big")||document.querySelector(this.formRootSelector).removeEventListener("click",this.showNoLoginNotification),document.removeEventListener("visibilitychange",this.handleVisibilitychange),Re.y.clearListeners(),clearTimeout(this.timer),clearTimeout(this.submissionLimitTimer),null===(e=this.attachmentUploadInstance)||void 0===e||e.destroy(),this.clearStartTimeChecker(),this.clearEndTimeChecker(),this.calcFillCostPause(),null===(t=super.componentWillUnmount)||void 0===t||t.call(this)}calcFillCostStart(){const{lastLeaveTime:e}=wt.Z.getCache(),{updateTime:t}=this.props.formData;t>e&&wt.Z.resetCalc(),wt.Z.startCalc()}calcFillCostPause(){wt.Z.pauseCalc()}initStartAndEndTimeChecker(){this.startTime&&!this.isStarted()&&(this.clearStartTimeChecker(),this.startTimeChecker=setInterval((()=>{this.isStarted()&&(this.forceUpdate(),this.clearStartTimeChecker())}),100)),this.endTime&&!this.isEndUp()&&(this.clearEndTimeChecker(),this.endTimeChecker=setInterval((()=>{this.isEndUp()&&(this.forceUpdate(),this.clearEndTimeChecker())}),100))}clearStartTimeChecker(){this.startTimeChecker&&(clearInterval(this.startTimeChecker),this.startTimeChecker=null)}clearEndTimeChecker(){this.endTimeChecker&&(clearInterval(this.endTimeChecker),this.endTimeChecker=null)}isStarted(){const{startTime:e}=this;if(e){const{serverTimeDifference:t}=this.props;return t+Date.now()>=e}return!0}isEndUp(){const{endTime:e}=this;if(e){const{serverTimeDifference:t}=this.props;return t+Date.now()>=e}return!1}handleVisibilitychange(){document.hidden?wt.Z.pauseCalc():wt.Z.startCalc(),this.props.checkVersionUpdate()}get needShowScore(){const{canCheckPaperScore:e}=this.props;return e}get detail(){return this.props.detail}get answerData(){var e;const{detail:t}=this,{fill:n}=this.props,o=(0,Z.JV)()&&(this.disabled||this.tableSubFormDisabled);if(null!==(e=n.answerData)&&void 0!==e&&e.length&&!o)return n.answerData;const{answerData:r=[]}=t;return r.length&&((0,Z.dU)()||(0,Z.JV)()||this.isClickFillAgain)?r:void 0}get hasReachSubmissionLimit(){const{totalFillCount:e,recordsLimit:t}=this;return t>0&&e>=t&&!(0,Z.dU)()}get hasEverSubmitted(){return this.props.hasEverSubmitted}get operateButtonProps(){return{hasReachSubmissionLimit:this.hasReachSubmissionLimit,boundMembers:this.boundMembers}}get periodicNotifyDisabled(){const{isPeriodic:e,notifyPattern:t,canSubmitByPeriodic:n}=this;return!(0,St.q)(e,t)||!n||(0,it.ms)()}get formFillProps(){const{fill:e,formData:t,result:n}=this.props,{currentPageAnswered:o,paperResult:r,wxConfig:i}=this.state,{isBigForm:s,isModify:a,isTask:l}=this,c=this.isClosed||this.hasReachSubmissionLimit||!this.canSubmitByPeriodic;return{canSubmit:s||!c&&!n.needTotalTips,className:!s&&c?"disabled no-opacity":"",confirmModalConfig:!l&&a?_t:yt,onFormItemBlur:this.handleFormItemBlur,onFormItemChange:this.handleFormItemChange,onFormItemFocus:this.handleFormItemFocus,onSubmit:this.handleSubmitAnswer,paperResult:r,questionNumberOffset:Z.v1?-t.sections[0].qlist.length:0,showAnswer:o,showConfirmModal:!s,showPaperResult:Z.v1,showScore:!Z.v1&&this.needShowScore,showSubmitRememberCheckbox:n=>!s&&-1===e.autoFillStatus&&(0,rt.t)(e.smartMatchList,n,t.questions),useRichEditor:!0,wxConfig:i,renderFooter:this.renderFillNotification}}get formFillWrapperProps(){const{getMatchedAnswerList:e}=this.props;return{getHistoryList:e,onClear:this.handleHistoryClear,onItemClick:this.handleHistoryClick,onItemDelete:this.handleHistoryDelete}}get collectTimeFormHeaderProps(){return{startTime:this.startTime,isPeriodic:this.isPeriodic,periodicPattern:this.periodicPattern,periodicDays:this.periodicDays}}get canReceivePeriodicNotify(){return this.props.canReceivePeriodicNotify}get isPeriodic(){const{isPeriodic:e}=this.props.relatedPeriodic;return e}get isInCurrPeriodic(){const{isInCurrPeriodic:e}=this.props.relatedPeriodic;return e}get notifyPattern(){const{notifyPattern:e}=this.props.relatedPeriodic;return e}get periodicPattern(){const{periodicPattern:e}=this.props.relatedPeriodic;return e}get periodicDays(){const{periodicDays:e}=this.props.relatedPeriodic;return e}get selfFillCount(){const{selfFillNumber:e,selfFillNumberInLatestCycle:t}=this.props;return this.isPeriodic?t:e}get totalFillCount(){const{totalFillNumber:e,totalFillNumberInLatestCycle:t}=this.props;return this.isPeriodic?t:e}get finalScore(){const{detail:{paperTotalScore:e}}=this.props;return e}get recordsLimit(){return this.props.recordsLimit}get canSubmitByPeriodic(){return!this.isPeriodic||this.props.relatedPeriodic.canSubmitByPeriodic}get startTime(){return this.props.startTime}get endTime(){return this.props.endTime}get isSubmitted(){return this.props.isSubmited}get formHeaderProps(){const{formData:e,formInfo:t,canCheckResults:n}=this.props,{wxConfig:o}=this.state,{totalScore:r=0}=t;return base_mixin_objectSpread({hasReachSubmissionLimit:this.hasReachSubmissionLimit,canCheckResults:n,isShowScore:Z.v1||this.isTask&&this.needShowScore,isSubmited:this.isSubmitted,isShowMemberSet:!1,score:r,scoreTemplate:Z.v1?this.state.i18next.t("共{{numberOfQuestions}}题，总分{{totalScore}}分",{numberOfQuestions:e.sections.length-1,totalScore:r}):void 0,finalScore:this.finalScore,showTotalScore:this.isTask,wxConfig:o},this.collectTimeFormHeaderProps)}get selectedRosters(){return this.props.windowRosterData.selectedRosters?this.props.windowRosterData.selectedRosters:this.props.selectedRosters}get hasSelectedRosters(){var e;return!(null===(e=this.selectedRosters)||void 0===e||!e.length)}get isTask(){const{formData:e}=this.props;return!!e.taskConfig}get readOnly(){const{isBigForm:e,isPeriodic:t,isInCurrPeriodic:n}=this,{currentPageAnswered:o}=this.state,{bigPaperStopped:r}=this.props,i=(0,T.isLogin)();if(Z.v1)return o||!i||r;if(e)return!1;const s=this.isClosed||this.hasReachSubmissionLimit||!this.canSubmitByPeriodic;return!i||s||t&&!n}get shouldShowSubmitBtn(){const{canModifyRecords:e,formInfo:t}=this.props,{hasCommited:n}=t;return this.isClosed?!n:!Z.v1&&(!!this.isBigForm||(!n||!(!this.canMultiSubmit&&!e&&this.boundMembers.length<=1||this.isTask))&&(!!(0,T.isLogin)()&&(!this.isPeriodic||this.isInCurrPeriodic)))}get submitBtnText(){const{isBigForm:e}=this;return this.isStarted()?this.isEndUp()?this.state.i18next.t("收集已结束"):!e&&this.isClosed?this.state.i18next.t("收集已暂停"):this.hasReachSubmissionLimit?this.state.i18next.t("已达收集上限"):this.isPeriodic&&!this.canSubmitByPeriodic?this.state.i18next.t("收集暂未开始"):(this.anonymous&&this.state.i18next.t("匿名提交"),this.state.i18next.t("提交")):this.state.i18next.t("收集暂未开始")}get fieldsValue(){var e,t;return null===(e=this.formFillRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.props.form.getFieldsValue()}async updatePeriodicSubmitNotify(e){let{showNotice:t=!0,forceUpdated:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.props.updatePeriodicSubmitNotify(base_mixin_objectSpread({canReceivePeriodicNotify:e,forceUpdated:n},t?{successCb:()=>this.handleFillNotificationNotice(e,!0),failureCb:()=>this.handleFillNotificationNotice(e,!1)}:null))}async updatePeriodicSubmitNotifyLite(e){const{canReceivePeriodicNotify:t}=e,n=await async function updatePeriodicSubmitNotifyLite(e){try{const s=`//${D._P.DOMAIN_NAME}${vt.pU.SET_FILL_REMINDER}`,a=JSON.stringify({form_id:getGlobalPadId(),uid:(null==t||null===(n=t.userInfo)||void 0===n?void 0:n.uid)||(null===(o=window.clientVars)||void 0===o||null===(r=o.userInfo)||void 0===r?void 0:r.uid)||(null===(i=window.clientVars)||void 0===i?void 0:i.tinyId),enabled:e}),l=await fetch(s,{body:a,method:"post",credentials:"include",headers:Tt.o}),{retcode:c,result:d}=await l.json();return 0!==c?null:d}catch(s){return null}var t,n,o,r,i}(t)||{};this.setState({canReceivePeriodicNotify:t}),this.handleFillNotificationNotice(t,n)}handleBeforeDeleteAttachments(e){if(!((0,Z.dU)()||(0,Z.JV)()&&/fill\//.test(this.tableSubFormFromPage)))return(0,M.G)("attachmentUploader","deleteFilesInFill",{ver7:e.key}),!0;const getAllFileKey=e=>e.reduce(((e,t)=>[Me.c.FILE,Me.c.FILEIMAGE,Me.c.CANVAS_IMAGE].includes(t.type)?e.concat(t.content.map((e=>{let{key:t}=e;return t}))):t.type===Me.c.TABLE?e.concat(t.content.reduce(((e,t)=>e.concat(getAllFileKey(t))),[])):e),[]),{answerData:t}=this.props.detail,n=!getAllFileKey(t).includes(e.key);return(0,M.G)("attachmentUploader","deleteFilesInModify",{ver7:e.key,ver8:Number(n)}),n}handleFillNotificationNotice(e,t){const n=e?this.state.i18next.t("开启"):this.state.i18next.t("关闭");if(!t){const e=this.state.i18next.t("{{conditionText}}填写提醒失败",{conditionText:n});return void(0,de.IG)(e,{zIndex:100001,type:Pt.g.ERROR})}const o=this.state.i18next.t("已{{conditionText}}填写提醒",{conditionText:n});(0,de.IG)(o,{zIndex:100001,type:Pt.g.SUCCESS}),(0,M.G)("fill_cycle","subscribe_clk",{ver5:1})}handleSubmissionNotice(){this.startTime>Date.now()&&this.invokeNotStartedConfirm(),this.isClosed||this.hasReachSubmissionLimit&&this.invokeSubmissionLimitConfirm()}invokeNotStartedConfirm(){const e=(0,Ot.xz)(this.startTime,!1);(0,de.N4)({title:this.state.i18next.t("收集暂未开始"),content:this.state.i18next.t("本次收集暂未开始，开始时间为: {{timeText}}",{timeText:e}),cancelText:null,okText:this.state.i18next.t("好的")}),(0,M.G)("fill_quantity_limit","alert")}invokeSubmissionLimitConfirm(){(0,de.N4)({title:this.state.i18next.t("达到填写份数限制"),content:this.state.i18next.t("当前达到填写份数限制，已停止收集。如有疑惑，可联系创建者。"),cancelText:null,okText:this.state.i18next.t("好的")}),(0,M.G)("fill_quantity_limit","alert")}renderFillNotification(){var e;if(this.periodicNotifyDisabled)return null;const{PeriodicFillNotification:t,canReceivePeriodicNotify:n,updatePeriodicSubmitNotify:r}=this,{creatorNick:i}=null!==(e=this.props.formInfo.data)&&void 0!==e?e:{};return o.createElement(o.Suspense,{fallback:null},o.createElement(t,{creatorName:i,isChecked:n,onSwitchChange:r}))}handleValidateAnswer(e,t){if([Me.c.FILEIMAGE,Me.c.FILE,Me.c.CANVAS_IMAGE].includes(e.type)){const e=t.find((e=>{let{status:t}=e;return[ct.On.FileRead,ct.On.Process].includes(t)})),n=t.find((e=>{let{status:t}=e;return t===ct.On.Fail}));if(e)return this.state.i18next.t("正在上传中，请稍后");if(n)return this.state.i18next.t("附件上传失败")}}handleAnswerQuestion(e,t){const{type:n,dataType:o,id:r}=e,i=base_mixin_objectSpread({},e);if(n===Me.c.IMAGE&&"delete"===t.changeType){const{formData:e,data:{localPadId:n}}=this.props.formInfo;if(2===e.version){var s;const e=null===(s=t.changeItem)||void 0===s?void 0:s.map((e=>e.src.split("?")[0]));(0,Et.st)(n,e)}}return n===Me.c.LOCATION&&o===nt.g.POSITION&&(i.content=Rt.v[r]),(0,dt.F)(i)}async updateBoundMember(e,t){var n;if(this.props.windowRosterData.selectedRosters||It.boundMembersCache.length||It.memberCache.role)return;const{formInfo:{data:{globalPadId:o}}}=this.props,{data:r}=await(0,bt.dB)({globalPadId:o,rosterTemplate:e});this.boundMembers=(null==r||null===(n=r.result)||void 0===n?void 0:n.members)||[],this.setState({member:null!=t?t:this.boundMembers[0]})}async setMembers(e){var t;const{selectedRosters:n}=this;await this.updateBoundMember((null===(t=n[0])||void 0===t?void 0:t.type)||ot.r.COMMON,e),this.setState({showRosterVerify:this.shouldShowRosterVerify})}handleFormItemBlur(e,t){t.type===Me.c.SIMPLE&&(window.dispatchEvent(new CustomEvent("simpleQuestionBlur:softKeyBoard")),this.updateSensitiveStateWhenNeeded(t))}async handleFormItemChange(){if(!Z.v1)return;const{getBigPaperInfo:e,setBigPaperInfo:t,BIGPAPER_STATE:o}=await Promise.resolve().then(n.bind(n,64619)),r=e();r.status===o.UNFILL&&(r.status=o.FILLING,t(r))}handleFormItemFocus(e,t){t.type===Me.c.SIMPLE&&(window.dispatchEvent(new CustomEvent("simpleQuestionFocus:softKeyBoard")),this.hadCheckPrimarySensitive||this.checkPrimarySensitiveWords(t),this.updateSensitiveStateWhenNeeded(t,t.id))}handleHistoryClear(e){let{title:t,callback:n}=e;const{updateMatchedAnswerList:o,formInfo:{formData:r}}=this.props;(0,M.G)("smart_fill","delete_fill",{obj2:r.formName,ver5:2}),o({title:t,value:[]}).then(n)}handleHistoryClick(e){let{title:t,value:n,list:o}=e;const{formInfo:{formData:r}}=this.props;(0,M.G)("smart_fill","suc_fill",{obj2:r.formName,ver5:2});const{updateMatchedAnswerList:i}=this.props;i({title:t,value:o[0]===n?o:Array.from(new Set([n,...o]))})}handleHistoryDelete(e){let{title:t,value:n,list:o,callback:r}=e;const{updateMatchedAnswerList:i,formInfo:{formData:s}}=this.props;(0,M.G)("smart_fill","delete_fill",{obj2:s.formName,ver5:2});const a=o.findIndex((e=>e===n)),l=[...o];l.splice(a,1),i({title:t,value:l}).then(r)}async handleShareForm(){const{uid:e,userName:t,userPic:o,formInfo:{data:r}}=this.props,{creatorDomain:i,domainId:s,isOwner:a,padId:l,padType:c,title:d}=r,{shareForm:u}=await Promise.resolve().then(n.bind(n,67010));u({creatorDomain:i,domainId:s,isAuthExpExpire:!1,isOwner:a,ownerAvatar:o,ownerUid:e,ownerUsername:t,padId:l,padType:c,resultUrl:(0,le.getShareLink)(),title:d,type:c})}handleStateChange(e){this.setState(e)}handleSubmissionOverLimit(){this.props.queryLatestSettingsAndStatistics()}handleSubmissionErrorCode(e){var t;const n={[pt.oY.OVER_LIMIT]:()=>{this.invokeSubmissionLimitConfirm(),this.handleSubmissionOverLimit()},[pt.oY.NOT_IN_CYCLE]:()=>{const e=this.state.i18next.t("收集表不在可填写时间范围内，请刷新重试");(0,de.IG)(e,{action:this.state.i18next.t("刷新"),onClickAction:()=>{window.location.reload()}})}};null===(t=n[e])||void 0===t||t.call(n)}handleSubmitAnswer(e){let{data:t,rawAnswer:o,questions:r,hideIds:i}=e;this.setState({submitting:!0});let s=this.compatibleFileValue(t);s=this.transformPositionValueToAnswerData(s);const a=this.nickInQQChannel,l={retcodeErrorCallback:this.handleSubmissionErrorCode,user_info:base_mixin_objectSpread(base_mixin_objectSpread({type:0},a?{type:1,nick:a}:null),this.anonymous?{type:2}:null)},{fill:c}=this.props;if(this.hasSelectedRosters){var d;const{member:e}=this.state;if(null==e||!e.role)return setTimeout(this.restoreSubmitButtonStatus,200),(0,et.findDOMNode)(this.rosterInfoBarRef.current).scrollIntoView({block:"center"}),void this.setState({submitWithNoName:!0});const t=null!==(d=this.selectedRosters[0].type)&&void 0!==d?d:ot.r.COMMON;t===ot.r.COMMON?l.name=e.role.name:t===ot.r.STUDENT&&(l.member=e,l.member.uid=Number(e.uid))}this.handleSubmitAnswerCommon({data:Z.v1&&c.isReSubmit?this.getBigPaperFirstPageAnswer(s):s,hideIds:i,otherInfo:l,questions:r,rawAnswer:o,rowInfo:this.hasMemberList?{[this.rosterInfoBarTitle]:this.state.role}:void 0},(async()=>{var e,t;if(Re.y.deleteFileInCache(),!this.isTask)return;(0,M.G)("homework-fill","fill-success");const{formData:o,resetBigPaperPassStatus:i}=this.props;if(((null===(e=o.sections)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.qlist)||[]).some((e=>{const t=null==r?void 0:r.find((t=>(null==t?void 0:t.id)===e));return[Me.c.RADIO,Me.c.CHECKBOX].includes(null==t?void 0:t.type)&&t.answerInfo.score>0}))&&(0,M.G)("homework","auto_score"),Z.v1){i();const{bigPaperTDW:e}=await n.e("js_utils_report_tdw-exam_ts").then(n.bind(n,220));e("exam_fill","clk_sumbit")}})),(0,St.q)(this.isPeriodic,this.notifyPattern)&&this.updatePeriodicSubmitNotify(this.canReceivePeriodicNotify,{showNotice:!1,forceUpdated:!0})}checkFileImageObjkey(e){const t=e.filter((e=>e.type===Me.c.FILEIMAGE)),n=[];t.forEach((e=>{var t;null!==(t=e.content)&&void 0!==t&&t.length&&e.content.forEach((t=>{t.key||n.push(e.id)}))})),(0,M.G)("checkFileImageObjkey","nullObjkeyLength",{ver7:n.length})}checkInexistFileKey(e){const t=e.find((e=>(e.type===Me.c.FILE||e.type===Me.c.FILEIMAGE||e.type===Me.c.CANVAS_IMAGE)&&e.content.length&&this.checkContentNoObjkey(e.content)));if(t){const e=this.state.i18next.t("存在附件或图片上传失败，请先删除重新上传提交或联系客服");(0,de.IG)(e,{duration:5e3,type:Pt.g.ERROR}),F.l.info("[fillBaseMixin] - checkInexistFileKey"),(0,M.G)("fillBaseMixin","existNullFileKey")}return t}compatibleFileValue(e){const t=this.formFillRef.current.props.form.getFieldsValue();return e.map((e=>{const{id:n,type:o,content:r}=e;return o!==Me.c.FILE||(0,tt.default)(r,t[n])?e:base_mixin_objectSpread(base_mixin_objectSpread({},e),{},{content:t[n]})}))}transformPositionValueToAnswerData(e){return e.map((e=>{const{id:t,type:n,dataType:o,content:r}=e;return n!==Me.c.LOCATION||o!==nt.g.POSITION||null!=r&&r.value||!Rt.v[t]?n===Me.c.TABLE?base_mixin_objectSpread(base_mixin_objectSpread({},e),{},{content:r.map((e=>this.transformPositionValueToAnswerData(e)))}):e:base_mixin_objectSpread(base_mixin_objectSpread({},e),{},{content:Rt.v[t]})}))}transformPositionValueToFormFill(e){return e.map((e=>{const{id:t,type:n,dataType:o}=e;return n===Me.c.LOCATION&&o===nt.g.POSITION?(Rt.v[t]=e.content,base_mixin_objectSpread(base_mixin_objectSpread({},e),{},{content:e.content.value})):e}))}getBigPaperFirstPageAnswer(e){const{data:{globalPadId:t,tinyid:n,tinyId:o},formData:{sections:r}}=this.props.formInfo,i=`${null!=o?o:n}_${t}`,s=(0,st.FY)(i),[{qlist:a}]=r,l=[...e];return a.forEach((e=>{if(l.some((t=>t.id===e)))return;const t=s.find((t=>t.id===e));t&&l.push(t)})),l}checkBigPaperStopped(){const{bigPaperStopped:e}=this.props;return!!e&&((0,de.IG)(this.state.i18next.t("活动已结束"),{autoClose:!1,action:this.state.i18next.t("确定")}),!0)}checkPrimarySensitiveWords(e){const{title:t,subtitle:n}=e,o=[t,n];this.sensitiveWordManager.containsSensitiveWords(o,0)&&(document.activeElement.blur(),(0,M.G)("privacy","view_alert"),this.hadCheckPrimarySensitive=!0,(0,de.N4)({className:"sensitive-warning-modal",title:this.renderSensitiveWarningModalTitle(),content:this.renderSensitiveWarningModalContext(),cancelText:this.state.i18next.t("继续填写"),okText:this.state.i18next.t("举报"),onOk:this.goToReport}))}async doBigPaperLogic(){if(this.checkBigPaperStopped())return;const{getBigPaperInfo:e}=await Promise.resolve().then(n.bind(n,64619)),t=e(),o=null==t?void 0:t.index;o&&(this.setState({currentSectionIndex:o,currentPageAnswered:!1}),this.formFillRef.current.updateSectionIndex({page:parseInt(o,10)}));const r=document.querySelector(".form-fill");r&&(r.style.paddingBottom=0),this.prepareFieldsAndVerifyAnswer(o)}async doBigPaperUpdateLogic(e,t){const{sections:o}=this.props.formInfo.formData,{currentSectionIndex:r}=this.state;if(this.state.currentPageAnswered&&!t.currentPageAnswered&&o.length-1>r){const{getBigPaperInfo:e,setBigPaperInfo:t}=await Promise.resolve().then(n.bind(n,64619)),o=e();o.index=r+1,t(o)}this.props.fill.answerData!==e.fill.answerData&&this.props.fill.answerData.length&&this.prepareFieldsAndVerifyAnswer(this.state.currentSectionIndex)}goToEdit(){this.props.goEditAgainstCollaboration()}prepareFieldsAndVerifyAnswer(e){var t,n;const{sections:o}=this.props.formInfo.formData,r=null===(t=o[e])||void 0===t||null===(n=t.qlist)||void 0===n?void 0:n[0],i=this.props.fill.answerData.reduce(((e,t)=>base_mixin_objectSpread(base_mixin_objectSpread({},e),t.id!==r?{[t.id]:t.content}:{})),{});this.verifyAnswer(i,!0)}showSharePage(){const{hasShowSharePage:e,updateHasShowSharePage:t}=this.props,n=(0,h.pm)(f.ZV.ACTIVE_AREA);e||n!==f.m3.SHARE_SHEET||t(!e).then(this.handleShareForm)}updateSensitiveStateWhenNeeded(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{title:n,subtitle:o}=e;(this.isSensitiveQuestion(e)||this.sensitiveWordManager.containsSensitiveWords([n,o],1))&&(t&&(0,M.G)("privacy","view_tips"),this.setState({focusedSensitiveSimpleId:t}))}async verifyAnswer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{verifyAnswer:o}=await Promise.resolve().then(n.bind(n,80203)),{currentSectionIndex:r,paperResultMap:i}=this.state,{formData:s}=this.props,[a]=s.sections[r].qlist,l=t?e:{[a]:e[a]},{paperResultMap:c,paperResult:d}=o(s,l);this.setState({paperResult:d,paperResultMap:base_mixin_objectSpread(base_mixin_objectSpread({},i),c)})}shouldShowOperateBar(){const{result:{totalSelf:e,selfSubmittedList:t}}=this.props;return!(this.state.isSoftKeyboardUp||this.inFillModified||!e&&!this.isAdmin||(null==t?void 0:t.length)>0&&(0,Z.P0)())}renderExamFooter(){var e;const{current:t}=this.formFillRef;if(!Z.v1||!t||!(0,T.isLogin)())return null;const{bigPaperStopped:n,checkName:r,formData:i}=this.props,{currentPageAnswered:s,currentSectionIndex:a}=this.state,{questions:l,sections:c}=i,[d]=c[a].qlist,u=s||(null===(e=t.props.form.getFieldValue(d))||void 0===e?void 0:e.length)>0;return o.createElement(o.Suspense,{fallback:null},o.createElement(Lt,{checkName:r,currentPageAnswered:s,currentSectionIndex:a,formFillContainerRef:this.formFillContainerRef.current,formFillRef:t,hasAnswer:u,isStopped:n,onStateChange:this.handleStateChange,questions:l,sections:c,verifyAnswer:this.verifyAnswer}))}renderCaptionTip(){const{canCheckResults:e,isSubmited:t}=this.props;return e||t?o.createElement(show_fill_number,{recordsLimit:this.recordsLimit,canCheckResults:e,isPc:U.isPC,isPeriodic:this.isPeriodic,periodicDays:this.periodicDays,periodicPattern:this.periodicPattern,selfFillNumber:this.selfFillCount,totalFillNumber:this.totalFillCount,gotoResult:this.gotoResult,i18nextAsync:this.i18next}):null}renderOperateBar(){const{OperationBar:e}=this,{showOperationBar:t}=this.state;return this.shouldShowOperateBar()?o.createElement(e,{show:t,operationBarList:this.operationBarList}):null}renderExamProgressBar(){const{currentPageAnswered:e,currentSectionIndex:t,paperResultMap:n}=this.state;if(!Z.v1||t<=0)return null;const{formData:r}=this.props;return o.createElement(o.Suspense,{fallback:null},o.createElement(jt,{currentPageAnswered:e,currentSectionIndex:t,paperResultMap:n,totalPage:r.sections.length-1}))}renderRosterInfoBar(){var e;if(!this.hasSelectedRosters)return null;const{RosterInfoBar:t,selectedRosters:n}=this,{formData:{globalPadId:r,title:i},result:{totalSelf:s},formInfo:{data:{creatorNick:a,ownerNick:l,ownerAvatar:c}}}=this.props,{submitWithNoName:d,member:u}=this.state;return o.createElement(o.Suspense,{fallback:null},o.createElement(t,(0,K.Z)({error:d,ref:this.rosterInfoBarRef,formTitle:i,title:this.rosterInfoBarTitle,totalSelf:s,globalPadId:r,member:u,isEdit:!1,showChangeInfoTag:this.showChangeInfoTag,ownerAvatar:c,ownerNick:l||a,canMultiSubmit:this.canMultiSubmit,isFill:this.isInFill,boundMembers:this.boundMembers},this.formFillWrapperProps,{rosterType:null!==(e=n[0].type)&&void 0!==e?e:ot.r.COMMON,changeRosterInfo:this.handleChangeRosterInfo,handleRosterVerifyConfirm:this.handleRosterVerifyConfirm})))}handleRosterVerifyConfirm(e){var t;if((null!==(t=this.selectedRosters[0].type)&&void 0!==t?t:ot.r.COMMON)===ot.r.STUDENT){const t=e.role;(0,M.G)("fill_class_list","uid_binding",{ver5:2,ver6:t>0?ut.go[t-1]:"default"})}this.setState({member:e,submitWithNoName:!1})}handleChangeRosterInfo(e){this.setState({member:e,submitWithNoName:!1}),(0,M.G)("fill","switch_list_role",{ver6:{[ot.r.STUDENT]:1,[ot.r.EMPLOYEE]:2,[ot.r.COMMON]:3}[this.rosterType]})}setTempAnswerData(e){const{setAnswerData:t}=this.props;t(e)}setTableQuestionRowIndex(e){const{setTableQuestionRowIndex:t}=this.props;t(e)}setTableSubFormDisabled(e){const{setTableSubFormDisabled:t}=this.props;t(e)}setTableSubFormFromPage(e){const{setTableSubFormFromPage:t}=this.props;t(e)}get tableQuestionRowIndex(){return this.props.fill.tableQuestionRowIndex}get tableSubFormDisabled(){return this.props.fill.tableSubFormDisabled}get tableSubFormFromPage(){return this.props.fill.tableSubFormFromPage}handleToTableSubForm(e){const{pushHistory:t}=this.props;t(`${xe.G.FILL_TABLE}/${e}`)}handleBackToForm(){const{gobackHistory:e}=this.props;e()}},(0,W.Z)(Le.prototype,"clearStartTimeChecker",[z.xB,i,s],Object.getOwnPropertyDescriptor(Le.prototype,"clearStartTimeChecker"),Le.prototype),(0,W.Z)(Le.prototype,"clearEndTimeChecker",[z.xB,a,l],Object.getOwnPropertyDescriptor(Le.prototype,"clearEndTimeChecker"),Le.prototype),(0,W.Z)(Le.prototype,"isStarted",[z.xB,c,d],Object.getOwnPropertyDescriptor(Le.prototype,"isStarted"),Le.prototype),(0,W.Z)(Le.prototype,"isEndUp",[z.xB,u,p],Object.getOwnPropertyDescriptor(Le.prototype,"isEndUp"),Le.prototype),(0,W.Z)(Le.prototype,"handleVisibilitychange",[z.xB,m,g],Object.getOwnPropertyDescriptor(Le.prototype,"handleVisibilitychange"),Le.prototype),(0,W.Z)(Le.prototype,"updatePeriodicSubmitNotify",[z.xB,_,y],Object.getOwnPropertyDescriptor(Le.prototype,"updatePeriodicSubmitNotify"),Le.prototype),(0,W.Z)(Le.prototype,"handleBeforeDeleteAttachments",[z.xB,b,E],Object.getOwnPropertyDescriptor(Le.prototype,"handleBeforeDeleteAttachments"),Le.prototype),(0,W.Z)(Le.prototype,"renderFillNotification",[z.xB,v,S],Object.getOwnPropertyDescriptor(Le.prototype,"renderFillNotification"),Le.prototype),(0,W.Z)(Le.prototype,"updateBoundMember",[z.xB,O,w],Object.getOwnPropertyDescriptor(Le.prototype,"updateBoundMember"),Le.prototype),(0,W.Z)(Le.prototype,"setMembers",[z.xB,I,C],Object.getOwnPropertyDescriptor(Le.prototype,"setMembers"),Le.prototype),(0,W.Z)(Le.prototype,"handleFormItemBlur",[z.xB,R,P],Object.getOwnPropertyDescriptor(Le.prototype,"handleFormItemBlur"),Le.prototype),(0,W.Z)(Le.prototype,"handleFormItemChange",[z.xB,A,N],Object.getOwnPropertyDescriptor(Le.prototype,"handleFormItemChange"),Le.prototype),(0,W.Z)(Le.prototype,"handleFormItemFocus",[z.xB,L,j],Object.getOwnPropertyDescriptor(Le.prototype,"handleFormItemFocus"),Le.prototype),(0,W.Z)(Le.prototype,"handleHistoryClear",[z.xB,x,k],Object.getOwnPropertyDescriptor(Le.prototype,"handleHistoryClear"),Le.prototype),(0,W.Z)(Le.prototype,"handleHistoryClick",[z.xB,B,G],Object.getOwnPropertyDescriptor(Le.prototype,"handleHistoryClick"),Le.prototype),(0,W.Z)(Le.prototype,"handleHistoryDelete",[z.xB,H,V],Object.getOwnPropertyDescriptor(Le.prototype,"handleHistoryDelete"),Le.prototype),(0,W.Z)(Le.prototype,"handleShareForm",[z.xB,q,Q],Object.getOwnPropertyDescriptor(Le.prototype,"handleShareForm"),Le.prototype),(0,W.Z)(Le.prototype,"handleStateChange",[z.xB,$,Y],Object.getOwnPropertyDescriptor(Le.prototype,"handleStateChange"),Le.prototype),(0,W.Z)(Le.prototype,"handleSubmissionErrorCode",[z.xB,X,J],Object.getOwnPropertyDescriptor(Le.prototype,"handleSubmissionErrorCode"),Le.prototype),(0,W.Z)(Le.prototype,"handleSubmitAnswer",[z.xB,ee,te],Object.getOwnPropertyDescriptor(Le.prototype,"handleSubmitAnswer"),Le.prototype),(0,W.Z)(Le.prototype,"checkInexistFileKey",[z.xB,ne,oe],Object.getOwnPropertyDescriptor(Le.prototype,"checkInexistFileKey"),Le.prototype),(0,W.Z)(Le.prototype,"compatibleFileValue",[z.xB,re,ie],Object.getOwnPropertyDescriptor(Le.prototype,"compatibleFileValue"),Le.prototype),(0,W.Z)(Le.prototype,"transformPositionValueToAnswerData",[z.xB,se,ae],Object.getOwnPropertyDescriptor(Le.prototype,"transformPositionValueToAnswerData"),Le.prototype),(0,W.Z)(Le.prototype,"transformPositionValueToFormFill",[z.xB,ue,pe],Object.getOwnPropertyDescriptor(Le.prototype,"transformPositionValueToFormFill"),Le.prototype),(0,W.Z)(Le.prototype,"goToEdit",[z.xB,me,he],Object.getOwnPropertyDescriptor(Le.prototype,"goToEdit"),Le.prototype),(0,W.Z)(Le.prototype,"verifyAnswer",[z.xB,fe,ge],Object.getOwnPropertyDescriptor(Le.prototype,"verifyAnswer"),Le.prototype),(0,W.Z)(Le.prototype,"handleRosterVerifyConfirm",[z.xB,_e,ye],Object.getOwnPropertyDescriptor(Le.prototype,"handleRosterVerifyConfirm"),Le.prototype),(0,W.Z)(Le.prototype,"handleChangeRosterInfo",[z.xB,be,Ee],Object.getOwnPropertyDescriptor(Le.prototype,"handleChangeRosterInfo"),Le.prototype),(0,W.Z)(Le.prototype,"setTempAnswerData",[z.xB,ve,Te],Object.getOwnPropertyDescriptor(Le.prototype,"setTempAnswerData"),Le.prototype),(0,W.Z)(Le.prototype,"setTableQuestionRowIndex",[z.xB,Se,Oe],Object.getOwnPropertyDescriptor(Le.prototype,"setTableQuestionRowIndex"),Le.prototype),(0,W.Z)(Le.prototype,"setTableSubFormDisabled",[z.xB,we,Ie],Object.getOwnPropertyDescriptor(Le.prototype,"setTableSubFormDisabled"),Le.prototype),(0,W.Z)(Le.prototype,"handleToTableSubForm",[z.xB,Ce,Pe],Object.getOwnPropertyDescriptor(Le.prototype,"handleToTableSubForm"),Le.prototype),(0,W.Z)(Le.prototype,"handleBackToForm",[z.xB,Ae,De],Object.getOwnPropertyDescriptor(Le.prototype,"handleBackToForm"),Le.prototype),Ne=Le))||Ne)||Ne)||Ne);return Fe.displayName=e.displayName||e.name,Fe})(Kt=function tablePCMixin(e){class MixedComponent extends e{constructor(){super(...arguments),this.TableFillSubForm=Mt}}return MixedComponent.displayName=e.displayName||e.name,MixedComponent}((Wt=class FillPC extends o.Component{constructor(){super(...arguments),this.FormHeader=ue.Z,this.Loading=Y.default,this.OperationBar=OperationBarPC,this.RosterVerifyMask=$t,this.PeriodicFillNotification=zt,this.RosterInfoBar=Yt,this.TopPicture=Ne.Z}componentDidMount(){var e;null===(e=super.componentDidMount)||void 0===e||e.call(this);const{formInfo:{data:{isOwner:t,isAdmin:n}},detail:{sidList:o},formData:{questions:r,sections:i}}=this.props,s=!t&&!n,a=t&&!(null==o||!o.length);if(s||a)if(this.currentTableQuestion){const{questions:e,sections:t}=this.currentTableQuestion.qdata.tableQuestionData;(0,At.Dn)(e,t)}else(0,At.Dn)(r,i)}handleBeforeAddAttachments(e){if(this.isOnlyCamera(e))return(0,At.K4)(),!1}handleAutoPositionFailed(){if(U.isElectronTencentDocsClient)return;const e=this.state.i18next.t("获取定位失败，可尝试使用腾讯文档APP");(0,de.IG)(e,{type:"warning",autoClose:!1,closable:!0,action:this.state.i18next.t("打开APP"),onClickAction:ie.td})}get operationBarList(){return[{show:this.shouldShowGoToEditBtn,text:se.EDIT(),icon:ae.EDIT,onClick:this.goToEdit},{show:this.isAdmin,text:se.QR_CODE,icon:ae.QR_CODE,onClick:generateQrCode}]}async goToReport(){const{reportDoc:e}=await n.e("js_components_pc_header_menu-components_doc-report_index_tsx").then(n.bind(n,86198));e()}isOnlyCamera(e){return!!e.qdata.onlyCamera}reportCamera(e){(0,M.G)("file_image_fill","only_camera",{ver5:this.isOnlyCamera(e),ver6:"pc"})}showNoLoginNotification(){(0,T.isLogin)()||(0,de.IG)(ee.Z.t("你只能查看此文档，若要填写或编辑，请先登录。"),{id:"pc-not-login-notification",duration:5e3,action:ee.Z.t("立即登录"),onClickAction:X.TX})}renderSensitiveWarningModalContext(){return o.createElement("div",{className:"sensitive-warning-context"},o.createElement("img",{className:"sensitive-warning-icon",src:$}),o.createElement("div",null,ee.Z.t("该收集表内容涉及你的重要敏感信息，请注意核实收集者身份，谨防骗局。")))}renderSensitiveWarningModalTitle(){return ee.Z.t("重要提示")}renderCaptionCard(){const{endTime:e,isClosed:t,anonymous:n,formData:r,conclusion:i,canPrivateCopyOut:s,corpId:a}=this.props,{FormHeader:l}=this,{richSubtitle:c,subtitle:d,title:u}=r;return o.createElement(l,(0,K.Z)({anonymous:n,conclusion:i,endTime:e,formTitle:u,formSubTitle:d,isClosed:t,isAdmin:this.isAdmin,isOwner:this.isOwner,isEditable:!1,isShowReadOnlyTitle:!0,isReadOnly:!0,onGoToClosingRemarkPage:this.handleGoToClosingRemarkPage,readOnlyWithDiv:!0,richSubtitle:c||d,shouldHideSettingsInRefill:this.shouldHideSettingsInRefill,canPrivateCopyOut:s,corpId:a},this.formHeaderProps))}},(0,W.Z)(Wt.prototype,"handleBeforeAddAttachments",[z.xB,Bt,Ut],Object.getOwnPropertyDescriptor(Wt.prototype,"handleBeforeAddAttachments"),Wt.prototype),(0,W.Z)(Wt.prototype,"handleAutoPositionFailed",[z.xB,Gt,Ht],Object.getOwnPropertyDescriptor(Wt.prototype,"handleAutoPositionFailed"),Wt.prototype),(0,W.Z)(Wt.prototype,"showNoLoginNotification",[Vt,z.xB,qt,Qt],Object.getOwnPropertyDescriptor(Wt.prototype,"showNoLoginNotification"),Wt.prototype),Kt=Wt))||Kt)||Kt)||Kt)||Kt)||Kt);const Jt=Xt;var en=n(39221);function fill_detail_core_base_mixin_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fill_detail_core_base_mixin_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fill_detail_core_base_mixin_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fill_detail_core_base_mixin_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let tn;!function(e){e[e.ONLY_WRONG=1]="ONLY_WRONG",e[e.ALL=3]="ALL"}(tn||(tn={}));var nn=n(28446),on=n(30103);function consumer_base_mixin_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function consumer_base_mixin_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?consumer_base_mixin_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):consumer_base_mixin_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rn=(0,Le.Z)((e=>Array.from(e.slice(1),(e=>e.qlist)).flat())),sn=(0,Le.Z)(((e,t)=>consumer_base_mixin_objectSpread(consumer_base_mixin_objectSpread({},e),{},{sections:[{qlist:t}]}))),an=(0,Le.Z)(((e,t)=>{const n=e.reduce(((e,t)=>{let{question_id:n,result:o}=t;return o===pt.oY.EXAM.ERROR?consumer_base_mixin_objectSpread(consumer_base_mixin_objectSpread({},e),{},{[n]:!0}):e}),{});return t.filter((e=>!!n[e]))})),queryVoteResults=()=>({type:"result/queryVoteResults"});function consumer_map_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var ln,cn;let dn=(ln=(0,a.connect)((function consumer_map_mapStateToProps(e){var t,n,o,r;const{detail:i,formInfo:s,result:a,roster:l,setting:c}=e,{sidList:d,lastestSubmitSid:u}=i,{formData:p,data:{isOwner:m,isAdmin:h}}=s,{total:f,totalSelf:g,selfFillNumberInLatestCycle:_,totalFillNumberInLatestCycle:y,voteResultsMap:b}=a,{taskConfig:E,updateTime:v}=p,{selectedRosters:T}=l,{collection:{isClosed:S,startTime:O,endTime:w,anonymous:I,recordsLimit:C},fillerConfig:{canModifyRecords:R,canMultiSubmit:P,canCheckResults:A,canCheckPaperScore:N,canDeleteRecords:L},conclusion:j,relatedPeriodic:M}=c;return{detail:i,formData:p,formInfo:s,isClosed:S,isOwner:m,result:a,endTime:w,startTime:O,anonymous:I,canModifyRecords:R,canMultiSubmit:P,canDeleteRecords:L,recordsLimit:C,conclusion:j,isAdmin:h,canCheckResults:A,canCheckPaperScore:N,isSubmited:!(null==d||!d.length),isTask:!!E,lastSelfSid:u,selectedRosters:T,selfFillNumber:g,totalFillNumber:f,updateTime:v,relatedPeriodic:M,selfFillNumberInLatestCycle:_,totalFillNumberInLatestCycle:y,currentUserTinyId:(null===(t=s.data)||void 0===t?void 0:t.tinyId)||(null===(n=s.data)||void 0===n?void 0:n.tinyid),padId:s.data.padId,voteResultsMap:b,canPrivateCopyOut:!D.pg.TOC&&!(null!==(o=e.formInfo.data.privilegeAttribute.canCopyOut)&&void 0!==o?o:e.formInfo.data.privilegeAttribute.can_copy_out),corpId:null===(r=e.formInfo.data)||void 0===r?void 0:r.creatorCorpId}}),(e=>function consumer_map_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?consumer_map_ownKeys(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):consumer_map_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({getAnswerData(){e({type:"fill/getAnswerData"})},pushHistory(t){e(r.routerRedux.push(`/${t}`)),"result"===location&&(0,M.G)("edit","clk_result")},viewDetailWithSid(t){e(r.routerRedux.push(`/${xe.G.DETAIL}/${t}`))},modifySubmitRecord(t){e(r.routerRedux.push(`/${xe.G.FILL}/${t}`)),e({type:"fill/reSubmitRecord"}),e({type:"fill/getFormData"}),e({type:"detail/updateIsLoadingAnswerData",payload:!1})},reSubmitRecord(){e(r.routerRedux.push(`/${xe.G.FILL}`)),e({type:"fill/reSubmitRecord"}),e({type:"fill/getFormData"}),e({type:"detail/setAnswerdataReducer",payload:{answerData:[]}}),e({type:"detail/updateIsLoadingAnswerData",payload:!1})},reSubmitRecordWithLastRecord(){e(r.routerRedux.push(`/${xe.G.FILL}`)),e({type:"fill/reSubmitRecord"}),e({type:"fill/getFormData"}),e({type:"detail/setAnswerdataReducer",payload:{answerData:[]}}),e({type:"detail/updateIsLoadingAnswerData",payload:!1}),e({type:"fill/setShowResubmitToastStatus",payload:{showResubmitToastStatus:!0}})},checkVersionUpdate(t){e({type:"formInfo/checkVersionUpdate",payload:t})},setTableSubFormDisabled(t){e({type:"fill/setTableSubFormDisabled",payload:{tableSubFormDisabled:t}})},setTableQuestionRowIndex(t){e({type:"fill/setTableQuestionRowIndex",payload:{tableQuestionRowIndex:t}})},deleteRecord(t){e({type:"result/deleteRecord",payload:t})},updateUidList(t){e({type:"detail/updateUidListReducer",payload:t})},setCycleData(t){e({type:"roster/setCycleData",payload:t})}},(0,V.bindActionCreators)({getSelectedRosters:kt.T,queryVoteResults,goEditAgainstCollaboration},e)))),ln(cn=(e=>{var t,n,r,s,a,l,c,d,u,p,m,h;let f=(t=(0,J.k)(),n=Reflect.metadata("design:type",Function),r=Reflect.metadata("design:paramtypes",[]),s=(0,J.k)(),a=Reflect.metadata("design:type",Function),l=Reflect.metadata("design:paramtypes",[]),c=Reflect.metadata("design:type",Function),d=Reflect.metadata("design:paramtypes",[void 0]),u=(0,J.k)(),p=Reflect.metadata("design:type",Function),m=Reflect.metadata("design:paramtypes",[]),h=class FillDetailCoreBase extends e{constructor(e){super(e),this.containerRef=o.createRef(),this.formRef=o.createRef()}componentDidMount(){var e;const{detail:t,formData:n}=this.props;if(Object.keys(n).length>0&&!this.firstAnswerDataLoaded&&0!==t.lastestSubmitSid){this.handleLastRecordInfoLoaded();const{sidList:e}=t,{updateUidList:n}=this.props;n({uidList:e})}null===(e=super.componentDidMount)||void 0===e||e.call(this)}componentWillUnmount(){var e;null===(e=super.componentWillUnmount)||void 0===e||e.call(this)}componentDidUpdate(e,t,n){var o;const{formData:r}=this.props,{lastestSubmitSid:i,sidList:s}=this.props.detail,{lastestSubmitSid:a,sidList:l}=e.detail;if(Object.keys(r).length>0&&!this.firstAnswerDataLoaded&&i!==a&&0!==i&&this.handleLastRecordInfoLoaded(),!(0,tt.default)(s,l)){const{updateUidList:e}=this.props;e({uidList:s})}null===(o=super.componentDidUpdate)||void 0===o||o.call(this,e,t,n)}handleGoToClosingRemarkPage(){this.props.pushHistory(xe.G.EDIT_CLOSING_REMARK)}compatiblePositionValue(e){return e.map((e=>{const{type:t,dataType:n}=e;return t===Me.c.LOCATION&&n===nt.g.POSITION?fill_detail_core_base_mixin_objectSpread(fill_detail_core_base_mixin_objectSpread({},e),{},{content:e.content.value}):e}))}get needShowRecordTips(){const{detail:e,result:t}=this.props;return t.totalSelf>0&&e.commitTime}gotoResult(){const{detail:{sid:e},pushHistory:t,viewDetailWithSid:n,result:o}=this.props;if(o.personal_valid_cnt||o.hasEverSubmitted){if(this.props.setCycleData({cycleUids:null}),1!==o.totalSelf)return window.dispatchEvent(new CustomEvent("changeToResult")),(0,M.G)("edit_result","clk_selflist"),t("fill-list");this.props.updateUidList({uidList:[e]}),n(e),(0,M.G)("edit_result","clk_selfde",{abtest:"1"})}}renderTopPicture(){const{TopPicture:e}=this;return o.createElement(e,{canEdit:!1})}render(){var e,t,n,r,s;const{conclusion:a,endTime:l,anonymous:c,detail:d,formInfo:u,isClosed:p,isOwner:m,isAdmin:h,canPrivateCopyOut:f,corpId:g}=this.props,{formDataLoaded:_}=u;if(!_)return null;let{answerData:y}=d;y=this.compatiblePositionValue(y);const{formData:b,needShowRecordTips:E,FormFill:v,FormHeader:T}=this,{richSubtitle:S,subtitle:O}=b;return o.createElement(o.Fragment,null,this.renderTopPicture(),o.createElement("div",{className:me()("form-fill",this.containerClassName),ref:this.containerRef},null===(e=this.renderBeforeHeaderNode)||void 0===e?void 0:e.call(this),o.createElement(T,(0,K.Z)({anonymous:c,conclusion:a,endTime:l,formTitle:(null==b?void 0:b.title)||(null===(t=u.data)||void 0===t?void 0:t.title),formSubTitle:O,isClosed:p,isAdmin:h,isOwner:m,isEditable:!1,isShowReadOnlyTitle:!0,isReadOnly:!0,onGoToClosingRemarkPage:this.handleGoToClosingRemarkPage,richSubtitle:S||O,canPrivateCopyOut:f,corpId:g},this.formHeaderProps)),null===(n=this.renderAfterHeaderNode)||void 0===n?void 0:n.call(this),null===(r=this.renderRosterInfoBar)||void 0===r?void 0:r.call(this),o.createElement(i.Z,{title:"fill-detail render complete"},o.createElement(v,(0,K.Z)({canPrivateCopyOut:f,corpId:g,className:E?"detail_form_padding":"",disabled:!0,formData:b,lang:window.__LANG__,readOnly:!0,showSubmitBtn:!1,useRichEditor:!0,value:y,wrappedComponentRef:this.formRef},this.formFillProps))),this.renderOperateBar()),null===(s=this.renderOuterBottom)||void 0===s?void 0:s.call(this))}},(0,W.Z)(h.prototype,"componentDidMount",[t,n,r],Object.getOwnPropertyDescriptor(h.prototype,"componentDidMount"),h.prototype),(0,W.Z)(h.prototype,"handleGoToClosingRemarkPage",[s,a,l],Object.getOwnPropertyDescriptor(h.prototype,"handleGoToClosingRemarkPage"),h.prototype),(0,W.Z)(h.prototype,"compatiblePositionValue",[z.xB,c,d],Object.getOwnPropertyDescriptor(h.prototype,"compatiblePositionValue"),h.prototype),(0,W.Z)(h.prototype,"gotoResult",[u,z.xB,p,m],Object.getOwnPropertyDescriptor(h.prototype,"gotoResult"),h.prototype),h);return f.displayName=e.displayName||e.name,f})(cn=(e=>{class FillDetailCorePC extends e{constructor(){super(...arguments),this.FormFill=Je.Z}}return FillDetailCorePC.displayName=e.displayName||e.name,FillDetailCorePC})(cn=(e=>{var t,r,i,s,a,l,c,d,u,p,m,h,f,g,_,y,b;let E=(t=Reflect.metadata("design:type",Function),r=Reflect.metadata("design:paramtypes",[]),i=Reflect.metadata("design:type",Function),s=Reflect.metadata("design:paramtypes",[void 0]),a=Reflect.metadata("design:type",Function),l=Reflect.metadata("design:paramtypes",[]),c=(0,J.k)(),d=Reflect.metadata("design:type",Function),u=Reflect.metadata("design:paramtypes",[]),p=Reflect.metadata("design:type",Function),m=Reflect.metadata("design:paramtypes",[]),h=Reflect.metadata("design:type",Function),f=Reflect.metadata("design:paramtypes",[void 0,void 0,void 0]),g=(0,J.k)(),_=Reflect.metadata("design:type",Function),y=Reflect.metadata("design:paramtypes",[]),b=class MixedComponent extends e{constructor(e){super(e),this.componentProps={file:{getAttachmentsComponent:async()=>await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("js_components_attachments-uploader_water-mark_sticker_less-js_components_common-list_index_le-44de81"),n.e("js_components_attachments-uploader_components_index_ts-js_components_result-components_statis-86889c")]).then(n.bind(n,47476))},fileimage:{padId:this.props.formInfo.data.padId,type:Me.c.CANVAS_IMAGE,getAttachmentsComponent:async()=>await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("js_components_attachments-uploader_water-mark_sticker_less-js_components_common-list_index_le-44de81"),n.e("js_components_attachments-uploader_components_index_ts-js_components_result-components_statis-86889c")]).then(n.bind(n,47476))},canvas_image:{getAttachmentsComponent:async()=>await Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("js_components_attachments-uploader_water-mark_sticker_less-js_components_common-list_index_le-44de81"),n.e("js_components_attachments-uploader_components_index_ts-js_components_result-components_statis-86889c")]).then(n.bind(n,47476))},table:e=>({onFillTableQuestion:(t,n)=>this.handleFillTableQuestion(t,n,e)}),vote:e=>({results:this.filterCurrVoteResults(e.id),userLimit:3})},this.state=consumer_base_mixin_objectSpread({bigPaperView:tn.ALL,boundMembers:[]},this.state)}componentDidMount(){var e;this.props.getSelectedRosters(),this.props.queryVoteResults(),this.updateBoundMember(),null===(e=super.componentDidMount)||void 0===e||e.call(this),F.l.info("[form-page]-fill-detail"),(0,M.G)("form-page","fill-detail",{ver6:(new Date).toLocaleString()}),on._.injectPrint("form-root-wrap")}componentWillUnmount(){var e;null===(e=super.componentWillUnmount)||void 0===e||e.call(this),on._.rejectPrint()}componentDidUpdate(e){var t;const{selectedRosters:n}=this.props;e.selectedRosters.length!==n.length&&this.updateBoundMember(),null===(t=super.componentDidUpdate)||void 0===t||t.call(this)}handleLastRecordInfoLoaded(){if(Z.v1||this.firstAnswerDataLoaded)return;const{getAnswerData:e}=this.props;e(),this.firstAnswerDataLoaded=!0}filterCurrVoteResults(e){var t,n;const{voteResultsMap:o,isAdmin:r,canCheckResults:i}=this.props,s=null!==(t=null===(n=o[e])||void 0===n?void 0:n.options)&&void 0!==t?t:[];if(r||i)return s.map((e=>consumer_base_mixin_objectSpread(consumer_base_mixin_objectSpread({},e),{},{rate:this.fixRateNum(e.rate)})))}fixRateNum(e){return Number.isInteger(e)?e:e.toFixed(2)}get shouldShowGoToEditBtn(){const{isAdmin:e}=this.props;return e}get commonOperationBarList(){const{isClosed:e,isTask:t,canModifyRecords:n,canDeleteRecords:o,canMultiSubmit:r,endTime:i,relatedPeriodic:{isPeriodic:s,isInCurrPeriodic:a},isAdmin:l}=this.props,c=!i||i>Number(new Date),d=!!s&&!a,u=!t&&!e&&!this.hasReachSubmissionLimit&&(r||this.state.boundMembers.length>1)&&c&&!d,p=!t&&(o||n||l);return[{show:this.shouldShowGoToEditBtn,text:"function"==typeof this.OperationText.EDIT?this.OperationText.EDIT():this.OperationText.EDIT,icon:this.OperationIcon.EDIT,onClick:this.goToEdit},{show:u,text:this.OperationText.RESUBMIT,icon:this.OperationIcon.RESUBMIT,onClick:this.reSubmitRecord},{show:p,text:this.OperationText.MODIFY,icon:this.OperationIcon.MODIFY,onClick:this.modifySubmitRecord}]}get hasReachSubmissionLimit(){const{recordsLimit:e,totalFillNumber:t}=this.props;return e>0&&t>=e}get formData(){const{formData:e,detail:{paperResults:t}}=this.props;if(!Z.v1)return e;const{bigPaperView:n}=this.state,{sections:o}=e,r=n===tn.ALL?rn(o):an(t,rn(o));return sn(e,r)}get isTask(){return!!this.props.formData.taskConfig}get formFillProps(){const{detail:e}=this.props,{paperResults:t}=e,{bigPaperView:n}=this.state;return{componentProps:this.componentProps,paperResult:t,showAnswer:Z.v1,showPaperResult:!0,showScore:this.showScore,useRichEditor:!0,key:n}}get formHeaderProps(){var e;const{detail:t,formInfo:n,isEnableSeeResult:o,isSubmited:r,startTime:i,relatedPeriodic:s}=this.props,{paperTotalScore:a}=t,{totalScore:l,formData:c}=n,{wxConfig:d}=this.state;return{hasReachSubmissionLimit:this.hasReachSubmissionLimit,finalScore:a,isEnableSeeResult:o,isShowScore:this.showScore,isSubmited:r,isShowMemberSet:!1,score:l,showTotalScore:this.isTask,scoreTemplate:Z.v1?ee.Z.t("共{{numberOfQuestions}}题, 总分{{totalScore}}分",{numberOfQuestions:(null===(e=c.sections)||void 0===e?void 0:e.length)-1,totalScore:l}):nn.Jm,wxConfig:d,startTime:i,relatedPeriodic:s}}get hasSelectedRosters(){const{selectedRosters:e}=this.props;return null==e?void 0:e.length}get showScore(){const{formInfo:{totalScore:e},isTask:t,canCheckPaperScore:n}=this.props;return t&&!Z.v1&&e>0&&n}get rosterInfoBarTitle(){const{selectedRosters:e}=this.props;return(0,Ye.m)(e)}get latestTotalFillNumber(){const{relatedPeriodic:e,totalFillNumberInLatestCycle:t,totalFillNumber:n}=this.props;return e.isPeriodic?t:n}get latestSelfFillNumber(){const{relatedPeriodic:e,selfFillNumberInLatestCycle:t,selfFillNumber:n}=this.props;return e.isPeriodic?t:n}get rosterType(){var e;const{selectedRosters:t}=this.props;if(t.length)return null!==(e=t[0].type)&&void 0!==e?e:ot.r.COMMON}get memberInfo(){const{detail:{role:e}}=this.props;return e?{[ot.r.COMMON]:{role:e},[ot.r.STUDENT]:e.member}[this.rosterType]:{}}get canDeleteRecord(){const{isAdmin:e,canDeleteRecords:t,relatedPeriodic:{isPeriodic:n,isInCurrPeriodic:o},isClosed:r,endTime:i}=this.props,s=!!n&&!o,a=!i||i>Number(new Date);return!!e||t&&!s&&a&&!r}get canModifyRecords(){const{isClosed:e,isTask:t,endTime:n,canModifyRecords:o,relatedPeriodic:{isPeriodic:r,isInCurrPeriodic:i}}=this.props,s=!n||n>Number(new Date);return!t&&!e&&s&&!(!!r&&!i)&&o}async updateBoundMember(){var e;if(this.rosterType!==ot.r.STUDENT)return;const{formInfo:{data:{globalPadId:t}}}=this.props,{data:n}=await(0,bt.dB)({globalPadId:t,rosterTemplate:this.rosterType}),o=(null==n||null===(e=n.result)||void 0===e?void 0:e.members)||[];this.setState({boundMembers:o})}goToEdit(){this.props.goEditAgainstCollaboration()}modifySubmitRecord(){const{lastSelfSid:e,modifySubmitRecord:t,pushHistory:n,selfFillNumber:o}=this.props;1===o?t(e):n(xe.G.RESULT_MODIFY)}handleDeleteRecord(){const{deleteRecord:e,detail:t}=this.props;t.sid&&e(consumer_base_mixin_objectSpread(consumer_base_mixin_objectSpread({},t),{},{data:JSON.stringify(t.answerData)}))}handleFillTableQuestion(e,t,n){const{pushHistory:o,setTableQuestionRowIndex:r,setTableSubFormDisabled:i}=this.props;r(e),i(!0),o(`${xe.G.FILL_TABLE}/${n.id}`)}reSubmitRecord(){wt.Z.resetCalc();const{detail:e,reSubmitRecord:t,reSubmitRecordWithLastRecord:n,updateTime:o}=this.props;e.commitTime>o/1e3?n():t(),(0,M.G)("fill","clk_again",{abtest:"1"})}renderBeforeHeaderNode(){const{canCheckResults:e,recordsLimit:t,relatedPeriodic:{isPeriodic:n,periodicDays:r,periodicPattern:i}}=this.props;return o.createElement(show_fill_number,{canCheckResults:e,recordsLimit:t,gotoResult:this.gotoResult,isPeriodic:n,periodicDays:r,periodicPattern:i,isPc:U.isPC,selfFillNumber:this.latestSelfFillNumber,totalFillNumber:this.latestTotalFillNumber})}renderOperateBar(){const{OperationBar:e}=this,{isTask:t,relatedPeriodic:{isPeriodic:n,isInCurrPeriodic:r}}=this.props,i=!!n&&!r;return o.createElement(o.Suspense,{fallback:null},o.createElement(e,{operationBarList:this.operationBarList,isTask:t,canDeleteRecords:this.canDeleteRecord,modifySubmitRecord:this.modifySubmitRecord,deleteRecord:this.handleDeleteRecord,canModifyRecords:this.canModifyRecords,isPrevPeriodic:i}))}renderRosterInfoBar(){const{RosterInfoBar:e}=this,{formData:{globalPadId:t}}=this.props;if(this.hasSelectedRosters)return o.createElement(o.Suspense,{fallback:null},o.createElement(e,{title:this.rosterInfoBarTitle,member:this.memberInfo,isEdit:!1,showChangeInfoTag:!1,isFill:!1,rosterType:this.rosterType,globalPadId:t}))}},(0,W.Z)(b.prototype,"handleLastRecordInfoLoaded",[z.xB,t,r],Object.getOwnPropertyDescriptor(b.prototype,"handleLastRecordInfoLoaded"),b.prototype),(0,W.Z)(b.prototype,"filterCurrVoteResults",[z.xB,i,s],Object.getOwnPropertyDescriptor(b.prototype,"filterCurrVoteResults"),b.prototype),(0,W.Z)(b.prototype,"goToEdit",[z.xB,a,l],Object.getOwnPropertyDescriptor(b.prototype,"goToEdit"),b.prototype),(0,W.Z)(b.prototype,"modifySubmitRecord",[c,z.xB,d,u],Object.getOwnPropertyDescriptor(b.prototype,"modifySubmitRecord"),b.prototype),(0,W.Z)(b.prototype,"handleDeleteRecord",[z.xB,p,m],Object.getOwnPropertyDescriptor(b.prototype,"handleDeleteRecord"),b.prototype),(0,W.Z)(b.prototype,"handleFillTableQuestion",[z.xB,h,f],Object.getOwnPropertyDescriptor(b.prototype,"handleFillTableQuestion"),b.prototype),(0,W.Z)(b.prototype,"reSubmitRecord",[g,z.xB,_,y],Object.getOwnPropertyDescriptor(b.prototype,"reSubmitRecord"),b.prototype),b);return E.displayName=e.displayName||e.name,E})(cn=class FillDetailPC extends o.Component{constructor(){super(...arguments),this.FormHeader=ue.Z,this.OperationBar=OperationBarPC,this.OperationIcon=ae,this.OperationText=se,this.RosterInfoBar=en.RosterInfoBarPC,this.TopPicture=Ne.Z}get operationBarList(){const e=Array.from(this.commonOperationBarList),{isAdmin:t}=this.props;return e.splice(1,0,{show:t,text:se.QR_CODE,icon:ae.QR_CODE,onClick:generateQrCode}),e}})||cn)||cn)||cn)||cn);dn.propTypes={isOwner:Ge().bool,isAdmin:Ge().bool,padId:Ge().string};var un=n(81721);function getFirstRedirectHash(e){const{formData:t={},data:n={}}=e._store.getState().formInfo,{isAdmin:o=!1}=n;let r="/fill";const i=0===n.pub||n.pub<n.rev;Object.keys(t).length&&o&&i&&(r="/edit");const s=(0,un.Tb)("hash");return s&&(r=atob(s)),r}var pn=n(73837);const mn=(0,o.lazy)((()=>n.e("framework_form_routes_detail_consumer_detail-pc_jsx").then(n.bind(n,25635)))),hn=(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_react-sortable-hoc_SortableCon-4fdb53"),n.e("vendors-node_modules_rc-motion_es_index_js-node_modules_rc-util_es_Dom_contains_js-node_modul-2a6042"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_input_input_js-node_modules_re-614929"),n.e("vendors-node_modules_tencent_form-ui-components_lib_utils_image-uploader_js"),n.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),n.e("vendors-node_modules_tencent_dui_esm_components_Tooltip_index_js-node_modules_tencent_dui_lib-bbe94d"),n.e("vendors-node_modules_tencent_docs-design-resources_icon_desktop_svg_file_doc_monolayer_24_svg-af5f3b"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_cascader_cascader-pc_js"),n.e("vendors-node_modules_tencent_docs-design-resources_mobile_png_2x_file_empty_924_2x_png-node_m-aa738e"),n.e("vendors-node_modules_tencent_dui_lib_components_SegmentedControl_index_js-node_modules_tencen-0ec7f4"),n.e("vendors-node_modules_tencent_ai-sdk-common_lib_esm_index_js-node_modules_tencent_dui-mobile_l-7c7a06"),n.e("js_components_roster_edit_pc_tsx-js_utils_constants_aid_ts-js_utils_dc_modal-to-pay_ts"),n.e("framework_form_routes_edit_consumer_edit-pc_jsx")]).then(n.bind(n,56914)))),fn=(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_form-ui-components_lib_components_input_input_js-node_modules_re-614929"),n.e("vendors-node_modules_tencent_dui_lib_components_SegmentedControl_index_js-node_modules_tencen-0ec7f4"),n.e("vendors-node_modules_tencent_dui_lib_components_Switch_index_js-node_modules_rc-input-number_-cee25a"),n.e("js_components_roster_edit_pc_tsx-js_utils_constants_aid_ts-js_utils_dc_modal-to-pay_ts"),n.e("framework_form_routes_setting_consumer_setting-pc_tsx")]).then(n.bind(n,41122)))),gn=(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_dui-mobile_lib_components_Modal_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_utils_image-uploader_js"),n.e("framework_form_routes_edit-closing-remark_consumer_ts")]).then(n.bind(n,83537)))),_n=(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_react-sortable-hoc_SortableCon-4fdb53"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_input_input_js-node_modules_re-614929"),n.e("vendors-node_modules_tencent_form-components_lib_components_file-image-setting_file-auto-rena-28cbe5"),n.e("vendors-node_modules_tencent_dui_esm_components_Loading_index_js-node_modules_tencent_dui_esm-b3cc86"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-a80fb9"),n.e("js_components_result-components_statistics-section_components_export-attachments_components_a-160bc9"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("framework_form_routes_result_new-layout_new-layout-pc_tsx-js_components_common-list_index_les-f22330")]).then(n.bind(n,67543)))),yn=(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_dui_lib_components_Preview_index_js"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_chart-map_index_js-node_module-e43b87"),n.e("js_components_result-components_statistics-list_components_result-summary_components_constant-c7ff81"),n.e("framework_form_routes_result-modify_consumer_result-modify-pc_tsx-js_components_result-compon-1614c7")]).then(n.bind(n,76986)))),bn={routeComponent:Jt,isLazy:!1,pathList:["/fill","/fill/:sid","/fill-table/:tableQuestionId"]},En={routeComponent:hn,isLazy:!0,pathList:["/edit","/edit-table/:tableQuestionId"]},vn={routeComponent:gn,isLazy:!0,pathList:["/edit-closing-remark"]},Tn={routeComponent:dn,isLazy:!1,pathList:["/fill-detail"]},Sn={routeComponent:mn,isLazy:!0,pathList:["/detail","/detail/:sid"]},On={routeComponent:(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_docs-design-resources_icon_desktop_svg_file_doc_monolayer_24_svg-af5f3b"),n.e("framework_form_routes_submit-result_pc_ts")]).then(n.bind(n,92124)))),isLazy:!0,pathList:["/submit-result"]},wn={routeComponent:_n,isLazy:!0,exact:!0,pathList:["/result"]},In={exact:!0,routeComponent:yn,isLazy:!0,pathList:["/result/modify"]},Cn={routeComponent:(0,o.lazy)((()=>n.e("js_components_blankpage_pc_index_tsx").then(n.bind(n,46572)))),isLazy:!0,pathList:["/blankpage"]},Rn={routeComponent:fn,isLazy:!0,pathList:["/setting"]},Pn={routeComponent:(0,o.lazy)((()=>n.e("framework_form_routes_preview_consumer_index_jsx").then(n.bind(n,86192)))),isLazy:!0,pathList:["/preview"]},An={routeComponent:(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_dui_lib_components_Preview_index_js"),n.e("framework_form_routes_fill-list_fill-list-pc_tsx")]).then(n.bind(n,80099)))),isLazy:!0,pathList:["/fill-list","/fill-list/:uid"]},Dn={routeComponent:(0,o.lazy)((()=>n.e("framework_form_routes_bigpaper-download-result_consumer_bigpaper-download-result-pc_tsx").then(n.bind(n,89953)))),isLazy:!0,pathList:["/bigpaper-download-result"]},Nn={routeComponent:(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_form-create-big-paper_lib_index_js"),n.e("framework_form_routes_create-bigpaper_consumer_create-bigpaper-pc_tsx-node_modules_tencent_fo-1d1cc5")]).then(n.bind(n,32731)))),isLazy:!0,pathList:["/create-bigpaper"]},Ln={routeComponent:(0,o.lazy)((()=>n.e("framework_form_routes_set-default-answer_pc_tsx").then(n.bind(n,1960)))),isLazy:!0,pathList:["/set-default-answer","/set-default-answer/:id"]},jn={routeComponent:(0,o.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_form-ui-components_lib_components_input_input_js-node_modules_re-614929"),n.e("vendors-node_modules_tencent_form-ui-components_lib_components_input_textarea_js-node_modules-0f99d9"),n.e("framework_form_routes_quick-create-form_index_tsx")]).then(n.bind(n,27337)))),isLazy:!0,pathList:["/quick-create"]};function FormRouterPC(e){let{history:t,app:n}=e;return function getRouterTemplate(e,t,n){const{history:s,app:a}=e,{Layout:l,AutoTestApp:c,getFirstRedirectHash:d,title:u,reportZzsKey:p}=t;return o.createElement(i.Z,{title:u,report007:p},o.createElement(r.Router,{history:s},o.createElement(l,null,o.createElement(r.Switch,null,o.createElement(r.Route,{path:"/",exact:!0,component:()=>o.createElement(r.Redirect,{to:d(a)})}),getRouteComponents(n,s),o.createElement(r.Redirect,{to:"/fill"})))),o.createElement(o.Suspense,{fallback:null},o.createElement(c,{app:a})))}({history:t,app:n},{Layout:Q,getFirstRedirectHash,AutoTestApp:pn.Z,title:"consumer-form-router",reportZzsKey:"form-pc"},[bn,Tn,En,vn,Sn,On,wn,In,Cn,Rn,Pn,An,Dn,Nn,Ln,jn])}},64619:(e,t,n)=>{n.r(t),n.d(t,{BIGPAPER_STATE:()=>a,getAllBigPaperInfo:()=>getAllBigPaperInfo,setBigPaperInfo:()=>setBigPaperInfo,getBigPaperInfo:()=>getBigPaperInfo,isUnFilledBigPaper:()=>isUnFilledBigPaper,isFillingBigPaper:()=>isFillingBigPaper,isFilledBigPaper:()=>isFilledBigPaper,shouldGetNewPaper:()=>shouldGetNewPaper,getBigPaperSectionIndex:()=>getBigPaperSectionIndex,dealBigPaperData:()=>dealBigPaperData,BIG_PAPER_POSTER_DATA:()=>l,getTotalNumOfQuestions:()=>getTotalNumOfQuestions,getNumOfQuestionPicked:()=>getNumOfQuestionPicked,isPickAllQuestions:()=>isPickAllQuestions,isPickQuestionCountValid:()=>isPickQuestionCountValid,assignPickedQuestionCount:()=>assignPickedQuestionCount});var o=n(64649),r=(n(11431),n(96806)),i=n(22082),s=n(67538);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a={UNFILL:0,FILLING:1,FILLED:2};function getAllBigPaperInfo(e){if(!(0,r.O)())return null;const t=`bigPaper_status_${e||window.clientVars.tinyId||window.clientVars.tinyid}`;window.localStorage.getItem(t)||window.localStorage.setItem(t,JSON.stringify({}));const{urlId:n}=(0,i.e)();return{bigPaperInfo:JSON.parse(window.localStorage.getItem(t)),key:t,urlId:n}}function setBigPaperInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!(0,r.O)())return;const{bigPaperInfo:n,urlId:o,key:i}=getAllBigPaperInfo(t);n[o]=e,window.localStorage.setItem(i,JSON.stringify(n))}function getBigPaperInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!(0,r.O)())return;let{bigPaperInfo:t,urlId:n}=getAllBigPaperInfo(e);return t[n]||(setBigPaperInfo({index:0,status:0},e),({bigPaperInfo:t,urlId:n}=getAllBigPaperInfo(e))),t[n]}function isUnFilledBigPaper(){if(!(0,r.O)())return!1;const{status:e}=getBigPaperInfo();return Number(e)===a.UNFILL}function isFillingBigPaper(){if(!(0,r.O)())return!1;const{status:e}=getBigPaperInfo();return Number(e)===a.FILLING}function isFilledBigPaper(){if(!(0,r.O)())return!1;const{status:e}=getBigPaperInfo();return Number(e)===a.FILLED}function shouldGetNewPaper(e,t){var n;if(!(0,r.O)())return!1;const{status:o}=getBigPaperInfo(t.tinyid);if(null===(n={[a.UNFILL]:!0,[a.FILLING]:!1,[a.FILLED]:!1}[o])||void 0===n||n)return!0;let i;try{i=JSON.parse(e)}catch(s){i={}}return i.pub!==t.pub||i.tinyid!==t.tinyid}function getBigPaperSectionIndex(){if(!(0,r.O)())return 0;const{index:e}=getBigPaperInfo();return e?Number(e):0}function shuffle(e){const t=e.length;for(let n=0;n<t-1;n++){const o=Math.floor(Math.random()*(t-n)),r=e[o];e[o]=e[t-n-1],e[t-n-1]=r}return e}function dealBigPaperData(e){const t=_objectSpread({},e),{data:{initialAttributedText:n}}=t,{encryptedText:o}=n;try{const e=JSON.parse(decodeURIComponent(escape(window.atob(o))));if(e.taskConfig.needShuffleOption){const{questions:t,sections:n}=e,o=n.slice(1).reduce(((e,t)=>e.concat(...t.qlist)),[]),r=t.map((e=>o.includes(e.id)?_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},e.qdata),{},{options:shuffle(e.qdata.options)})}):e));e.questions=r}n.text=JSON.stringify(e)}catch(r){s.l.error("bigPaper data error",r),n.text="{}"}return delete t.data.initialAttributedText.encryptedText,delete t.msg,t}const l={SCHOOL:"学校",NAME:"姓名",COLLEGE:"学院",MAJOR:"专业",CLASSNAME:"班级",STUDENT_UNION:"学生会组织",ID:"学号",USER_INPUT_NICK:"昵称"};function isNumberPickedOutOfBound(e,t,n){return e<t||e>n}function getPartNumberList(e,t,n,o){const r=e.map((e=>{const{qlist:r,partId:i}=e,s=(((null==r?void 0:r.length)||0)-1)/(t-n)*(o-n);return{ratio:1+Math.floor(s),partId:i}}));return function randomAssignToNumberList(e,t,n){const o=t.reduce(((e,t)=>e+(t.ratio||0)),0);if(o===n)return t;let r=n-o;const i=[...t];for(;r>0;){r-=assignListOneRound(e,i,r)}return i}(e,r,o)}function assignListOneRound(e,t,n){let o=0;return t.forEach(((t,r)=>{t.ratio<e[r].qlist.length&&o<n&&(t.ratio+=1,o+=1)})),o}function getTotalNumOfQuestions(e){return e?e.reduce(((e,t)=>{var n;return e+((null===(n=t.qlist)||void 0===n?void 0:n.length)||0)}),0):0}function getNumOfQuestionPicked(e){return e?e.reduce(((e,t)=>e+(t.pickQuestionCount||0)),0):0}function isPickAllQuestions(e,t){return getNumOfQuestionPicked(t)>=getTotalNumOfQuestions(e)}function isPickQuestionCountValid(e,t){if(!(!isNaN(t)&&Number.isInteger(t)))return!1;return!isNumberPickedOutOfBound(t,e.length,getTotalNumOfQuestions(e))}function assignPickedQuestionCount(e,t,n){if(!e||!t)return[];const o=e.length,r=getTotalNumOfQuestions(e);if(isNumberPickedOutOfBound(n,o,r))return t;const i=getPartNumberList(e,r,o,n),s=[...t];return s.forEach((e=>{const{partId:t}=e;e.pickQuestionCount=function findPartQuestionCountFromList(e,t){const[n]=e.filter((e=>e.partId===t));return null==n?void 0:n.ratio}(i,t)})),s}},61868:(e,t,n)=>{n.d(t,{kv:()=>r,Pl:()=>assignClock,RI:()=>assignForm,AA:()=>checkIsSequence,IP:()=>checkIsClock,RT:()=>addQueryFormType,oA:()=>checkCgicodeAndReplaceToBlankpage});var o=n(81893);const r="blankPageData",i={CLOCK:2,SEQUENCE:3,FORM:0};function assignClock(e){return e?e.indexOf("form/page/clockm-edit")>-1?((0,o.Oi)(window,e.replace(/\/form\/page\/clockm-edit\//,"/blankpage/")),1):e.indexOf("form/page/clockm-fill")>-1?((0,o.Oi)(window,e.replace(/\/form\/page\/clockm-fill\//,"/blankpage/")),2):e.indexOf("form/page/clock")>-1?((0,o.Oi)(window,e.replace(/\/form\/page\/clock\//,"/blankpage/")),3):0:0}function assignForm(e){return e?e.indexOf("form/edit")>-1?((0,o.Oi)(window,e.replace(/\/form\/edit\//,"/blankpage/")),1):e.indexOf("form/fill")>-1?((0,o.Oi)(window,e.replace(/\/form\/fill\//,"/blankpage/")),2):e.indexOf("form/page")>-1?((0,o.Oi)(window,e.replace(/\/form\/page\//,"/blankpage/")),3):0:0}function checkIsSequence(e){return!!e&&e.indexOf("form/page/sequence")>-1}function checkIsClock(e){return!!e&&(e.indexOf("form/page/clockm-edit")>-1||e.indexOf("form/page/clockm-fill")>-1||e.indexOf("form/page/clock")>-1)}function addQueryFormType(e,t){const{pathname:n,origin:o,hash:r,search:i,href:s}=e;if(function checkParams(e){if("string"==typeof e)return!0;const{search:t}=e;return!!t&&t.indexOf("fromtype")>-1}(e))return s;const a=!!r,l=!!i;return a&&l?`${o}${n}${i}&fromtype=form&subtype=${t}${r}`:a&&!l?`${o}${n}?fromtype=form&subtype=${t}${r}`:l?`${s}&fromtype=form&subtype=${t}`:`${s}?fromtype=form&subtype=${t}`}function checkCgicodeAndReplaceToBlankpage(e){const t=function getFormType(){return checkIsClock(location.href)?i.CLOCK:checkIsSequence(location.href)?i.SEQUENCE:i.FORM}();if(200207===e.cgicode){const n={docId:e.data.globalPadId,formType:t,sourcePadType:e.data&&e.data.padType||""};localStorage.setItem(r,JSON.stringify(n))}const{isOwner:n,isAdmin:s,isDeleted:a}=e.data,l=!(n||s)&&a;if(200204===e.retcode||200207===e.cgicode||l){const e=addQueryFormType(location,t);2===t?assignClock(e):3===t?(0,o.Oi)(window,e.replace(/\/form\/page\/sequence\//,"/blankpage/")):assignForm(e)}}},4222:(e,t,n)=>{var o,r,i,s,a,l,c,d,u,p,m,h,f,g,_,y,b,E,v,T,S,O,w,I,C,R,P,A,D,N,L,j,M;n.d(t,{pg:()=>F,_P:()=>k,Y3:()=>Z,Zj:()=>B,i0:()=>U,Fo:()=>G,nj:()=>H,kZ:()=>V,DO:()=>q});const x=n(26709).default.getInstance(),F={TOB:"wecom"===x.getConfig("domain"),TOC:"toc"===x.getConfig("domain"),PRIVATE:"private-tdocs"===x.getConfig("domain"),SAAS:"saas-tdocs"===x.getConfig("domain")},k={DOMAIN_NAME:x.getConfig("runtime.domainName"),API_ROOT:x.getConfig("runtime.apiRoot"),QUN:x.getConfig("runtime.qun"),DRIVE_DOMAIN_NAME:x.getConfig("runtime.driveDomainName")},Z={WX_JS_SDK_1_6_0:x.getConfig("runtime.library.TENCENT_DOCS_LIBRARY__jweixin_1_6_0"),QQ_JS_SDK_1_0_0:x.getConfig("runtime.library.TENCENT_DOCS_LIBRARY__qqjssdk_1_0_0"),MAP_QQ_SDK:x.getConfig("runtime.library.TENCENT_DOCS_LIBRARY__map_qq_sdk"),WEB_LOG_SDK:x.getConfig("runtime.library.TENCENT_DOCS_LIBRARY__weblog_proxy"),PRIVATE_WEB_LOG_SDK:x.getConfig("runtime.library.TENCENT_DOCS_LIBRARY__weblog_tdoc_browser")},B={HOME:x.getConfig("links.home"),HELP_CENTER:x.getConfig("links.helpCenter"),FEED_BACK:x.getConfig("links.feedback"),REPORT:x.getConfig("links.report"),PRIVACY_POLICY:x.getConfig("links.privacyPolicy"),THIRD_PARTY_SHARED_INFO:x.getConfig("links.thirdPartySharedInfo"),THIRD_PARTY_AUTH_MANAGE:x.getConfig("links.thirdPartyAuthManage"),PERSONAL_INFO_COLLECT:x.getConfig("links.personalInfoCollectionList"),INFRINGEMENT_GUIDE:x.getConfig("links.infringementGuidelines"),FEATURE_DESCRIPTION:x.getConfig("links.featureDescription"),COMMUNITY_CONVENTION:x.getConfig("links.communityConvention"),APPEAL_PAGE:x.getConfig("links.appealPage"),SHEET_TEMPLATE:x.getConfig("links.localSheetTemplate"),QQ_MAP_GEOCODER:x.getConfig("links.qqMapGeocoder"),BEIJING_HEALTH_KIT_MINI_PROGRAM_CODE:x.getConfig("links.healthKitMiniProgramCode.beijing"),SHANGHAI_HEALTH_KIT_MINI_PROGRAM_CODE:x.getConfig("links.healthKitMiniProgramCode.shanghai"),GUANGZHOU_HEALTH_KIT_MINI_PROGRAM_CODE:x.getConfig("links.healthKitMiniProgramCode.guangzhou"),GUANGDONG_HEALTH_KIT_MINI_PROGRAM_CODE:x.getConfig("links.healthKitMiniProgramCode.guangdong"),BEIJING_HEALTH_CODE_SNAPSHOT:x.getConfig("links.healthCodeSnapshot.beijing"),SHANGHAI_HEALTH_CODE_SNAPSHOT:x.getConfig("links.healthCodeSnapshot.shanghai"),GUANGZHOU_HEALTH_CODE_SNAPSHOT:x.getConfig("links.healthCodeSnapshot.guangzhou"),GUANGDONG_HEALTH_CODE_SNAPSHOT:x.getConfig("links.healthCodeSnapshot.guangdong"),BEIJING_HEALTH_TEST_SNAPSHOT:x.getConfig("links.healthTestSnapshot.beijing"),SHANGHAI_HEALTH_TEST_SNAPSHOT:x.getConfig("links.healthTestSnapshot.shanghai"),GUANGZHOU_HEALTH_TEST_SNAPSHOT:x.getConfig("links.healthTestSnapshot.guangzhou"),GUANGDONG_HEALTH_TEST_SNAPSHOT:x.getConfig("links.healthTestSnapshot.guangdong"),BIG_FORM_MAIN_URL:x.getConfig("links.bigFormMainUrl"),OPEN_WEIXIN_OAUTH2:x.getConfig("links.openWeixinOauth2"),USER_SPACE_SPECIFICATION:x.getConfig("links.userSpaceSpecification"),COVID19_HEALTH_CODE_OCR:x.getConfig("links.covid19HealthCodeOcr"),TENCENT_DOC_APP_DL_URL:x.getConfig("links.tencentDocAppDownloadLink"),QQ_AVATAR_MAIN_PATH:x.getConfig("links.qqAvatarMainPath"),QQ_GROUP_AVATAR_MAIN_PATH:x.getConfig("links.qqGroupAvatarMainPath"),QQ_MINI_AUTH_PERMISSION_PATH:x.getConfig("links.qqMiniAuthPermissionPath"),DRIVE_OPEN_DOC_PROTOCOLS:x.getConfig("links.driveOpenDocProtocols"),ROSTER_HELP:x.getConfig("links.rosterHelp"),QUICK_CREATE_HELP:x.getConfig("links.quickCreateHelp"),SHEET_TO_FORM_HELP:x.getConfig("links.sheetToFormHelp"),SHEET_TO_FORM_TEMPLATE_SHEET:x.getConfig("links.sheetToFormTemplateSheet")},U={BACK:null===(o=x.getConfig("titleBar.back"))||void 0===o||o,LOGO:null!==(r=x.getConfig("titleBar.logo"))&&void 0!==r&&r,TITLE:null===(i=x.getConfig("titleBar.title"))||void 0===i||i,SHARE:null!==(s=x.getConfig("titleBar.share"))&&void 0!==s&&s,GUIDE_TIPS:null===(a=x.getConfig("titleBar.guideTips"))||void 0===a||a,STAR:null===(l=x.getConfig("titleBar.star"))||void 0===l||l,SAVE_STATE:null===(c=x.getConfig("titleBar.saveState"))||void 0===c||c,ACCOUNT:null===(d=x.getConfig("titleBar.account"))||void 0===d||d,AUTH:null===(u=x.getConfig("titleBar.auth"))||void 0===u||u,FILE_MENU:null===(p=x.getConfig("titleBar.fileMenu"))||void 0===p||p,CHANGE_TITLE_TOAST_SHOW:null===(m=x.getConfig("titleBar.changeTitleToastShow"))||void 0===m||m},G=(h=x.getConfig("statusBar.helpCenter"),{BACK:null===(f=x.getConfig("blankPage.back"))||void 0===f||f}),H={LOGO_COLOR:x.getConfig("tenantConfig.tenantLogo.SVGColor"),LOGO_BLACK:x.getConfig("tenantConfig.tenantLogo.SVGBlack"),DOC_TEXT:x.getConfig("tenantConfig.tenantDocName"),NAME:x.getConfig("tenantConfig.tenantName")},V={NEED_VIP_RESTRICTION:null===(g=x.getConfig("privatization.needVipRestriction"))||void 0===g||g,QUESTION_RECOMMENDED:null===(_=x.getConfig("privatization.questionRecommended"))||void 0===_||_,AUTO_POSITION:null===(y=x.getConfig("privatization.autoPosition"))||void 0===y||y,QUESTION_FEEDBACK:null===(b=x.getConfig("privatization.feedback"))||void 0===b||b,PERIODIC_OFFICIAL_NOTIFY:null===(E=x.getConfig("privatization.periodicOfficialNotify"))||void 0===E||E,NEED_STUDENT_ROSTER:null===(v=x.getConfig("privatization.needStudentRoster"))||void 0===v||v,NEED_CANVAS_QUESTION:null===(T=x.getConfig("privatization.needCanvasQuestion"))||void 0===T||T,NEED_MINI_NATIVE:null===(S=x.getConfig("privatization.needMiniNative"))||void 0===S||S,SPECIAL_WORKBENCH_COMPONENTS:null!==(O=x.getConfig("privatization.specialWorkbenchComponents"))&&void 0!==O&&O,SPECIAL_ARK_EXTENSIONS:null!==(w=x.getConfig("privatization.specialArkExtensions"))&&void 0!==w&&w,HACK_REPLACE_PATTERN:null!==(I=x.getConfig("privatization.hackReplacePattern"))&&void 0!==I&&I,SPECIAL_COS_FUNCTION:null!==(C=x.getConfig("privatization.specialCosFunction"))&&void 0!==C&&C,SPECIAL_TELEMETRY_REPORT:null!==(R=x.getConfig("privatization.specialTelemetryReport"))&&void 0!==R&&R,SPECIAL_AUTH_INFO:null!==(P=x.getConfig("privatization.specialAuthInfo"))&&void 0!==P&&P,NEED_LOWER_RECORD_LIMIT:null!==(A=x.getConfig("privatization.needLowerRecordLimit"))&&void 0!==A&&A,SPECIAL_SPACE_ACCESSIBILITY:null!==(D=x.getConfig("privatization.specialSpaceAccessibility"))&&void 0!==D&&D,SPECIAL_LICENSE_VERIFY:null!==(N=x.getConfig("privatization.specialLicenseVerify"))&&void 0!==N&&N,SPECIAL_WEBLOG_EXPORT_FILE:null!==(L=x.getConfig("privatization.specialWeblogExportFile"))&&void 0!==L&&L,IGNORE_DOMAIN_DETECT:null!==(j=x.getConfig("privatization.ignoreDomainDetect"))&&void 0!==j&&j,BUY_LICENSE_PAGE:null!==(M=x.getConfig("privatization.buyLicensePage"))&&void 0!==M?M:""},q={DEFAULT:x.getConfig("resultTemplate.default"),DARKTILE:x.getConfig("resultTemplate.darktile"),FISH:x.getConfig("resultTemplate.fish"),FOCUS:x.getConfig("resultTemplate.focus"),SNOW:x.getConfig("resultTemplate.snow"),QRCODE:x.getConfig("resultTemplate.qrCode")}},51896:(e,t,n)=>{n.r(t),n.d(t,{showShareDialog:()=>showShareDialog});var o=n(67010),r=n(98297),i=n(4222);var s=n(80886);async function share_showShare(e,t){const{padId:n,domainId:a,creatorDomain:l,docId:c,isAdmin:d}=e,u={padId:null!=c?c:n,shareLink:(0,o.getShareLink)(),shareTitle:()=>{var t;let{title:n}=e;return null!==(t=window.clientVars)&&void 0!==t&&t.shareTitle&&(n=window.clientVars.shareTitle),n},shareDocType:"form",mimeType:s.HY.Form,invokeFrom:"Root",domainId:a,creatorDomain:l,havePermission:d,stopCollection:!(!e||!e.isClosed),canAuthAdmin:d,onClose:()=>{},onAuthUpdated(e){t&&t(e)}};await async function showShare(e){const{default:t,PRIVATE_SHARE:n,SHARE_EXTENSION:o}=await(0,r.f)(),{name:s}=i.kZ.SPECIAL_ARK_EXTENSIONS?n:o,a=await t.getExtension(s);null==a||a.show(e)}(u)}function showShareDialog(e,t){share_showShare(e,t)}},66188:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(64649),r=n(27565),i=n(22082);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{urlId:s}=(0,i.e)();const a=new class FillCost{constructor(){this.cacheKey=`formFillCost_${s}`}getCache(){return(0,r.FY)(this.cacheKey,{fallbackValue:{}})}pauseCalc(){const{prevCost:e,startTime:t}=this.getCache(),n=Date.now(),o=t?n-Number(t):0;this.setCache({lastLeaveTime:n.toString(),prevCost:(o+(Number(e)||0)).toString(),startTime:"0"})}resetCalc(){(0,r.Vr)(this.cacheKey)}startCalc(){this.setCache({startTime:Date.now().toString()})}setCache(e){const t=this.getCache();(0,r.H4)(this.cacheKey,_objectSpread(_objectSpread({},t),e))}}},42409:(e,t,n)=>{n.d(t,{ZP:()=>network,ef:()=>u});var o=n(64649),r=(n(11431),n(50608)),i=n.n(r),s=n(87768);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a="FORCE",l="TRY",c={PENDING:"PENDING",RESOLVE:"RESOLVE",REJECT:"REJECT"},d={},isHTTPError=e=>e>=400,getErrCodeIfNeeded=e=>{let t;return{hasError:["retcode","cgicode","code"].some((n=>n in e&&0!==Number(e[n])&&(t=e[n],!0))),errCode:t}},getFetchCache=e=>{const t=null==e?void 0:e.key;if(!(t in d))return Promise.reject(new TypeError("Failed to fetch"));const n=d[t];if((null==n?void 0:n.status)===c.PENDING)return new Promise(((e,t)=>{n.callbacks.push([e,t])}));if((null==n?void 0:n.status)===c.REJECT)return Promise.reject(new TypeError("Failed to fetch"));const respFunc=()=>Promise.resolve(n.result),o={json:respFunc,text:respFunc,blob:respFunc,formData:respFunc,arrayBuffer:respFunc,clone:()=>_objectSpread({},o)};return Promise.resolve(o)},setFetchCache=(e,t,n)=>{var o;if(null!==(o=d[e])&&void 0!==o||(d[e]={status:t,callbacks:[],result:n}),d[e].status=t,d[e].result=n,t===c.PENDING)return;let r=d[e].callbacks.shift();const respFunc=()=>Promise.resolve(n),i={json:respFunc,text:respFunc,blob:respFunc,formData:respFunc,arrayBuffer:respFunc,clone:()=>_objectSpread({},i)};for(;r;){const[n,o]=r;t===c.RESOLVE?n(i):o(new TypeError("Failed to fetch")),r=d[e].callbacks.shift()}},shouldUseCache=e=>{var t;if((null==e?void 0:e.strategy)===a)return!0;const n=null==e?void 0:e.key;return(null==e?void 0:e.strategy)===l&&n in d&&(null===(t=d[n])||void 0===t?void 0:t.status)!==c.REJECT};function network(e,t,n){var o;const r=(null==n?void 0:n.globalFetch)||window.fetch;return shouldUseCache(null!=n&&n.cacheConfig?_objectSpread(_objectSpread({},n.cacheConfig),{},{key:null!==(o=n.cacheConfig.key)&&void 0!==o?o:e}):null)?getFetchCache(null==n?void 0:n.cacheConfig):new Promise(((o,i)=>{null!=n&&n.cacheConfig&&setFetchCache(n.cacheConfig.key||e,c.PENDING,null),r(e,t).then((r=>{var a,l;o(r);const d=isHTTPError(r.status);var u,p;if(null!=n&&n.cacheConfig&&setFetchCache(n.cacheConfig.key||e,d?c.REJECT:c.RESOLVE,d?null:r.clone().json()),d)return void(null===(u=window.log)||void 0===u||null===(p=u.error)||void 0===p||p.call(u,`[HTTP ERROR:${r.status}]${e}`));-1!==`${null===(a=r.headers)||void 0===a||null===(l=a.get)||void 0===l?void 0:l.call(a,"content-type")}`.indexOf("json")&&r.clone().json().then((t=>{const{errCode:n,hasError:o}=getErrCodeIfNeeded(t);var r,i;o&&(null===(r=window.log)||void 0===r||null===(i=r.error)||void 0===i||i.call(r,`[CGI ERROR:${n}]${e}`))})).catch((o=>{var r,a;i(o),null===(r=window.log)||void 0===r||null===(a=r.error)||void 0===a||a.call(r,`[CGI JSON ERROR]${e}`),(0,s.G)("request_error","json_error",{ver5:e,obj1:t}),null!=n&&n.cacheConfig&&setFetchCache(n.cacheConfig.key||e,c.REJECT,null)}))})).catch((o=>{var r,a;i(o),null===(r=window.log)||void 0===r||null===(a=r.error)||void 0===a||a.call(r,`[NETWORK ERROR]${e}`),(0,s.G)("request_error","network_error",{ver5:e,obj1:t}),null!=n&&n.cacheConfig&&setFetchCache(n.cacheConfig.key||e,c.REJECT,null)}))}))}const u=_objectSpread(_objectSpread({},i()),{},{ajax(e){const t=_objectSpread(_objectSpread({},e),{},{success(t){var n;null===(n=e.success)||void 0===n||n.call(e,t);const{errCode:o,hasError:r}=getErrCodeIfNeeded(t);var i,s;r&&(null===(i=window.log)||void 0===i||null===(s=i.error)||void 0===s||s.call(i,`[CGI ERROR:${o}]${e.url}`))},error(t){var n,o,r;null===(n=e.error)||void 0===n||n.call(e,t),null===(o=window.log)||void 0===o||null===(r=o.error)||void 0===r||r.call(o,`[NET.AJAX ERROR:${t.errCode}]${e.url}`)}});return i().ajax(t)}})},4852:(e,t,n)=>{n.d(t,{J:()=>checkIfLoadWxJsSdk});var o=n(72870),r=n(4222);function checkIfLoadWxJsSdk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r.kZ.NEED_MINI_NATIVE&&(o.isWeChat||o.isMiniProgram))if(window.wx&&window.loadedWxSdk)e(n);else{const t=document.createElement("script");t.src=o.isQQMiniProgram?r.Y3.QQ_JS_SDK_1_0_0:r.Y3.WX_JS_SDK_1_6_0,t.onload=e,document.head.appendChild(t),window.loadedWxSdk=!0}else t(n)}o.isMiniProgram&&checkIfLoadWxJsSdk()},54734:(e,t,n)=>{function transformLanguageText(e,t){return t?e.replace(/{{(.*?)}}/g,((e,n)=>t[n.trim()])):e}n.d(t,{Q:()=>transformLanguageText,Z:()=>o});const o=function dynamicLoadI18n(){return window.__I18N__?window.__I18N__:{t:transformLanguageText}}()},90061:(e,t,n)=>{n.d(t,{Z:()=>RootConsume});var o=n(64649),r=n(27378),i=n(23615),s=n.n(i),a=n(86550),l=n(69841);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const c={"form-mobile":l.U.formMPage,"form-pad":l.U.formPadPage,"form-pc":l.U.formPCPage,"clock-mobile":l.U.clockMPage,"clock-pad":l.U.clockPadPage,"clock-pc":l.U.clockPCPage,"sequence-mobile":l.U.sequenceMPage,"sequence-pad":l.U.sequencePadPage,"sequence-pc":l.U.sequencePCPage};class RootConsume extends r.Component{constructor(e){super(e),this.componentDidMount=()=>{var e,t,n;const r=Date.now()-this.timeStamp,{title:i,data:s,report007:l}=this.props;null===(e=window)||void 0===e||null===(t=e.log)||void 0===t||null===(n=t.info)||void 0===n||n.call(t,i,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({timeConsuming:r},s)),window.brandLoading&&window.brandLoading.hide(),l&&(0,a.$)(c[l],{dimensions:[window.__globalRavenReleaseVersion],immediate:!0}),delete window.WHITE_SCREEN_FLAG},this.timeStamp=Date.now()}render(){return this.props.children}}RootConsume.propTypes={data:s().object,children:s().any,title:s().string,report007:s().string},RootConsume.defaultProps={data:{}}},82047:(e,t,n)=>{n.d(t,{On:()=>r,u4:()=>i,S4:()=>s,GV:()=>a,dd:()=>l,uY:()=>c,Bg:()=>d,SZ:()=>u,iH:()=>p});n(11431),n(13020);var o=n(80886);let r,i,s,a;!function(e){e[e.FileRead=0]="FileRead",e[e.Process=1]="Process",e[e.Success=2]="Success",e[e.Fail=3]="Fail"}(r||(r={})),function(e){e.Add="add",e.Delete="delete",e.Fail="fail",e.FileRead="fileread",e.Process="process",e.Update="update"}(i||(i={})),function(e){e.FILEREAD="fileRead",e.PROCESS="process",e.SUCCESS="success",e.ERROR="error"}(s||(s={})),function(e){e[e.Add=0]="Add",e[e.Update=1]="Update"}(a||(a={}));const l=1,c=6,d=20971520,u={TakePhoto:"take-photo",PhotoGallery:"photo-gallery"},p={audio:["audio/*"],doc:[...o.vY,...o.JH],image:["image/*"],pdf:[o.HY.Pdf],ppt:o.k6,sheet:o.J_,video:["video/*"]}},85693:(e,t,n)=>{n.d(t,{Dn:()=>showFillInMobileModal,K4:()=>showModal,BX:()=>showScanModal});n(11431);var o=n(27378),r=n(77900),i=n(14042),s=n(54734),a=n(87768),l=n(60250);let c=null,d=null;async function showFillInMobileModal(e,t){if(null==t||!t.length)return!1;const{qlist:n}=t[0];isMatchOnlyCamera(e,n)&&await showModal()}const isMatchOnlyCamera=(e,t)=>e.some((e=>{let{id:n,type:o,qdata:r}=e;if(o===i.c.FILEIMAGE)return t.includes(n)&&!!r.onlyCamera;if(o===i.c.TABLE){const{questions:e,sections:[{qlist:t}]}=r.tableQuestionData;return isMatchOnlyCamera(e,t)}return!1}));async function showModal(){d=await(0,l.N4)({title:s.Z.t("手机扫码填写"),content:renderFillInMobile(c),footer:o.createElement("div",{className:"close-btn",onClick:()=>{var e;return null===(e=d)||void 0===e?void 0:e.close()}},s.Z.t("继续查看题目"))}),getQRCode()}async function showScanModal(){(0,a.G)("scan","button_clk"),d=await(0,l.N4)({title:s.Z.t("手机扫码填写"),content:renderFillInMobileByScan(c),footer:o.createElement("div",{className:"close-btn",onClick:()=>{var e;return null===(e=d)||void 0===e?void 0:e.close()}},s.Z.t("继续填写"))}),getQRCode("scan")}async function getQRCode(e){if(c)return;const t=`${location.origin}${location.pathname}`,{default:o}=await n.e("vendors-node_modules_tencent_docs-qrcode_dist_index_js").then(n.t.bind(n,93503,23));c=await o.make(t),d.update({content:"scan"===e?renderFillInMobileByScan(c):renderFillInMobile(c)})}function renderFillInMobile(e){return o.createElement("div",{className:"fill-in-mobile"},!e&&o.createElement(r.Loading,{className:"fill-in-mobile-loading"}),e&&o.createElement("div",{className:"fill-in-mobile-qrcode",style:{backgroundImage:`url(${e})`}}),o.createElement("div",{className:"fill-in-mobile-tips"},o.createElement("p",null,s.Z.t("此收集表要求上传实时照片,")),o.createElement("p",null,s.Z.t("请用手机扫描二维码进入填写。"))))}function renderFillInMobileByScan(e){return o.createElement("div",{className:"fill-in-mobile"},!e&&o.createElement(r.Loading,{className:"fill-in-mobile-loading"}),e&&o.createElement("div",{className:"fill-in-mobile-qrcode",style:{backgroundImage:`url(${e})`}}),o.createElement("div",{className:"fill-in-mobile-tips"},o.createElement("p",null,s.Z.t("当前页面仅支持手动输入，")),o.createElement("p",null,s.Z.t("请使用手机扫描二维码进入移动端继续扫描。"))))}},67664:(e,t,n)=>{n.d(t,{y:()=>f});var o=n(64649),r=n(73428),i=(n(43521),n(11431),n(5735),n(32904),n(66040)),s=n(82047),a=n(52304),l=n(83956),c=n(98297);var d,u,p,m,h=n(26811);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f=new(d=Reflect.metadata("design:type",Function),u=Reflect.metadata("design:paramtypes",["undefined"==typeof IStatusChangeParams?Object:IStatusChangeParams]),m=class AttachmentsManager{constructor(){this.attachmentModule=null,this.deleteFileCache=[],this.listener=[],this.padId="",this.removeEvent=void 0,this.hasInit=!1}initPadId(e){this.padId=e}initDC(){this.attachmentModule||this.initDCComponents()}async addAttachments(e,t){var n;this.attachmentModule||await this.initDCComponents(),this.listener.includes(e)||this.listener.push(e);const o=await(null===(n=this.attachmentModule)||void 0===n?void 0:n.upload(t));if(null==o||!o.length)return[];return o.filter((e=>{let{id:t}=e;return!!t})).map((e=>{const t=URL.createObjectURL(e.file);return _objectSpread(_objectSpread({},e),{},{status:s.On.FileRead,uploadingUrl:t})}))}get uploadAllSuccess(){return this.listener.every((e=>e.uploadAllSuccess))}clearListeners(){return this.listener=[]}clearFileCache(){return this.deleteFileCache=[]}addDeleteFileCache(e){const t="string"==typeof e?[e]:e;this.deleteFileCache.push(...t)}async deleteFileInCache(){if(!this.attachmentModule)return"not has attachmentModule";this.deleteFileCache.length&&(await this.attachmentModule.deleteAttachment({objKeys:this.deleteFileCache,fileId:this.padId}),this.clearFileCache())}async deleteAttachment(e){if(!this.attachmentModule)return"not has attachmentModule";if(!this.checkDeleteFileValid(e))return;const{id:t,key:n}=e;try{const e=n?[n]:null;await this.attachmentModule.deleteAttachment({id:t,objKeys:e,fileId:this.padId}),(0,h.Hj)("dcComponentsAttachment","deleteFilesSuccess",{ver6:t,ver7:n},`id: ${t} key: ${n}`)}catch(o){(0,h.Hj)("dcComponentsAttachment","deleteFilesFailed",{ver6:t,ver7:n,ver8:JSON.stringify(o)},`id: ${t} key: ${n} error: ${JSON.stringify(o)}`)}}async deleteAttachments(e){if(null==e||!e.length)return;if(!this.attachmentModule)return"not has attachmentModule";const t=[],n=[];e.forEach((e=>{this.checkDeleteFileValid(e)&&(e.status===s.On.Success?t.push(e.key):n.push(e.id))}));try{await this.attachmentModule.deleteAttachment({objKeys:t,fileId:this.padId}),(0,h.Hj)("dcComponentsAttachment","deleteUploadedFilesSuccess",{ver7:t},`keys: ${t}`)}catch(o){(0,h.Hj)("dcComponentsAttachment","deleteUploadedFilesFailed",{ver7:t,ver8:JSON.stringify(o)},`keys: ${t} error: ${JSON.stringify(o)}`)}try{await Promise.all(n.map((e=>this.attachmentModule.deleteAttachment({id:e,fileId:this.padId})))),(0,h.Hj)("dcComponentsAttachment","deleteUploadingFilesSuccess",{ver6:n},`ids: ${n}`)}catch(o){(0,h.Hj)("dcComponentsAttachment","deleteUploadingFilesFailed",{ver6:n,ver8:JSON.stringify(o)},`ids: ${n} error: ${JSON.stringify(o)}`)}}destroy(){var e;null===(e=this.removeEvent)||void 0===e||e.dispose(),this.attachmentModule=null,this.listener=[],this.padId=""}checkDeleteFileValid(e){const{id:t,status:n,key:o}=e;return!(AttachmentsManager.unSuccessStatus.includes(n)&&!t)&&!(n===s.On.Success&&!t&&!o)}async initDCComponents(){if(this.hasInit)return;this.hasInit=!0;const e=await async function loadUploadComponent(){const{default:e,ATTACHMENT_UPLOADER:t}=await(0,c.f)();return e.getExtension(t.name)}();if(!e)return void(this.hasInit=!1);const t=this.getConfig();e.mount(t),this.removeEvent=e.onStatusChange(this.onStatusChange),this.attachmentModule=e}getConfig(){var e,t,n,o,r,i;const{dataset:c}=a.hx[l.Td.FORM_COMMON_CONFIG](),d=null!==(e=null==c||null===(t=c.setting)||void 0===t||null===(n=t.drive)||void 0===n?void 0:n.isMultipart)&&void 0!==e&&e,u=null!==(o=null==c||null===(r=c.setting)||void 0===r||null===(i=r.drive)||void 0===i?void 0:i.multipartLimitSize)&&void 0!==o?o:31457280;return{isMultipart:d,maxUploadNumber:s.dd,multiple:!1,multipartLimitSize:u,padId:this.padId}}onStatusChange(e){this.listener.forEach((t=>{t.onStatusChange(e)}))}},m.unSuccessStatus=[s.On.Process,s.On.FileRead,s.On.Fail],p=m,(0,r.Z)(p.prototype,"onStatusChange",[i.xB,d,u],Object.getOwnPropertyDescriptor(p.prototype,"onStatusChange"),p.prototype),p)},63881:(e,t,n)=>{n.d(t,{WP:()=>s,oz:()=>getFilesDetail,dd:()=>ImagesUrlsCache});n(13951),n(91117),n(41698),n(55294),n(9077),n(76999),n(91067),n(2126),n(18924),n(67699),n(18007),n(71675),n(99830),n(11431);var o=n(67538),r=n(87768),i=n(55515);let s;!function(e){e[e.Download=0]="Download",e[e.View=1]="View"}(s||(s={}));const a=new Map;class ImagesUrlsCache{static getInstance(e){return ImagesUrlsCache.ins||(ImagesUrlsCache.ins=new ImagesUrlsCache(e)),ImagesUrlsCache.ins}constructor(e){this.padId=void 0,this.padId=e}async get(e){const t=new Map,n=[];if(e.forEach((e=>{a.get(e)||n.push(e)})),n.length){(await getFilesDetail(n,this.padId)).forEach((e=>{const{objKey:t,previewUrl:n,thumbnailUrl:o,name:r,ext:i,errCode:s}=e;a.set(t,{previewUrl:n,thumbnailUrl:o,name:r,ext:i,errCode:s})}))}return e.forEach((e=>{const n=a.get(e);t.set(e,n)})),t}}ImagesUrlsCache.ins=void 0;const getFilesDetail=async(e,t)=>{const n=Array.isArray(e)?e:[e];try{var a,l;o.l.info("[attachmentUploader] - get download url");const{data:e,error:c}=await(0,i.rJ)(n,t,s.View);return null!=e&&e.cgicode||c||null==e||null===(a=e.result)||void 0===a||null===(l=a.detail)||void 0===l||!l.length?((0,r.G)("file","download_toast",{ver5:null==e?void 0:e.cgicode}),[]):e.result.detail}catch(c){return(0,r.G)("fill","get_download_url_fail",{obj1:c}),o.l.info("[attachmentUploader] - get download url failed"),[]}}},26811:(e,t,n)=>{n.d(t,{Sz:()=>getCurrentMaxCount,zy:()=>getCurrentAttachmentIndex,Hj:()=>report});var o=n(67538),r=n(87768),i=n(82047);function getCurrentMaxCount(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.uY)-e;return(arguments.length>2?arguments[2]:void 0)===i.GV.Add?t:t+1}function getCurrentAttachmentIndex(e,t){return t&&null!=e&&e.length?e.findIndex((e=>{let{id:n}=e;return n===t})):-1}function report(e,t,n,i){o.l.info(`[${e}] - ${t}`,i),(0,r.G)("attachmentUploader","updateFiles",n)}},7887:(e,t,n)=>{n.d(t,{F:()=>filterFileContent});var o=n(64649),r=n(14042),i=n(82047);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const filterFileContent=e=>[r.c.FILEIMAGE,r.c.FILE,r.c.CANVAS_IMAGE].includes(e.type)?_objectSpread(_objectSpread({},e),{},{content:e.content.filter((e=>{let{status:t}=e;return t===i.On.Success}))}):e.type===r.c.TABLE?_objectSpread(_objectSpread({},e),{},{content:e.content.map((e=>e.map((e=>filterFileContent(e)))))}):e},62378:(e,t,n)=>{n.d(t,{Jn:()=>getImageUrl,zv:()=>setAllFileImageQuestionAnswersUrl,B4:()=>setImageUrl});var o=n(64649),r=(n(11431),n(14042)),i=n(79195),s=n(63881);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}async function getImageUrl(e,t){var n;if(!e.key)return e;const{key:o}=e,r=s.dd.getInstance(t),i=await r.get([o]),{thumbnailUrl:a,previewUrl:l,errCode:c}=null!==(n=i.get(o))&&void 0!==n?n:{};return _objectSpread(_objectSpread({},e),{},{thumbnailUrl:a,previewUrl:l,errCode:c})}async function setAllFileImageQuestionAnswersUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Promise.all(e.map((async e=>{if([r.c.FILEIMAGE,r.c.CANVAS_IMAGE].includes(e.type))return _objectSpread(_objectSpread({},e),{},{content:await Promise.all((0,i.iB)(e.content,[]).map((async e=>{const o=await getImageUrl(e,t);return n?_objectSpread(_objectSpread({},o),{},{src:o.previewUrl||o.thumbnailUrl}):o})))});if(e.type===r.c.TABLE){const n="string"==typeof e.content?JSON.parse(e.content):e.content;return _objectSpread(_objectSpread({},e),{},{content:await Promise.all(n.map((e=>setAllFileImageQuestionAnswersUrl(e,t))))})}return e})))}async function setImageUrl(e,t){if(null==e||!e.length)return[];const n=e.map((e=>e.key)).filter(Boolean),o=await s.dd.getInstance(t).get(n);return e.map((e=>_objectSpread(_objectSpread({},e),o.get(e.key))))}},23545:(e,t,n)=>{n.d(t,{Z:()=>ErrorBoundary});var o=n(27378),r=n(23615),i=n.n(r);class ErrorBoundary extends o.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}render(){return this.state.hasError?o.createElement("div",null):this.props.children}}ErrorBoundary.propTypes={children:i().node}},83074:(e,t,n)=>{n.d(t,{Z:()=>Ae});n(11431);var o=n(51399),r=n(27378),i=n(54734),s=n(45607),a=n(93318),l=n(90005),c=n.n(l),d=n(28446);var u=n(73428),p=(n(43521),n(72870)),m=n(41589),h=n(66040),f=n(86727),g=n(56356),_=n(23380),y=n(63406);const b=255,E=1e3,v=["[^\r\n·]+ · "];i.Z.t("总分："),i.Z.t("分");var T,S,O,w,I,C,R,P,A;let D=(T=Reflect.metadata("design:type",Function),S=Reflect.metadata("design:paramtypes",[Object,Object]),O=Reflect.metadata("design:type",Function),w=Reflect.metadata("design:paramtypes",[Object]),I=Reflect.metadata("design:type",Function),C=Reflect.metadata("design:paramtypes",[String]),R=Reflect.metadata("design:type",Function),P=Reflect.metadata("design:paramtypes",[Object]),A=class HeaderTitle extends r.Component{constructor(e){super(e),this.formTitleRef=r.createRef(),this.isInCopyStatus=void 0,this.handleTitleChange=e=>{const{handleFormInfoChange:t}=this.props;null==t||t(e,"/title")},this.handleForbiddenKey=e=>{const{keyCode:t}=e;13===t&&e.preventDefault()},this.onTitleBlur=e=>{const t=e,{handleFormTitleBlur:n}=this.props;t.target.value=e.target.value.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,""),this.setState({isTitleOverLength:!1}),null==n||n(t,"/title")},this.handleOverStep=e=>{const{isTitleOverLength:t}=this.state;t!==e&&this.setState({isTitleOverLength:e})},this.onTitleFocus=e=>{const{handleFormTitleFocus:t,renderQuickTools:n}=this.props;null==n||n(),null==t||t(e)},this.state={isTitleOverLength:!1},this.handleWindowResize=(0,g.default)(this.handleWindowResize.bind(this),100),this.isInCopyStatus=!1}componentDidMount(){(0,m.qH)(this.formTitleRef.current,b)}componentDidUpdate(e){const{formTitle:t}=this.props;t!==e.formTitle&&(0,m.qH)(this.formTitleRef.current,b)}handleWindowResize(){(0,m.qH)(this.formTitleRef.current,b)}async handleCopy(e,t){const{canPrivateCopyOut:o,corpId:r}=this.props,{value:i}=e.target;if(o&&!this.isInCopyStatus){if(e.preventDefault(),e.clipboardData.clearData(),this.isInCopyStatus=!0,p.isPC){const{showClipboardProtectionModal:e}=await Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),n.e("vendors-node_modules_tencent_dui-mobile_esm_components_Modal_index_js"),n.e("node_modules_tencent_docs-scenario-component-common-service_dist_esm_index_js-_433d0")]).then(n.bind(n,71349));e()}else{const{showClipboardProtectionMobileModal:e}=await Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),n.e("vendors-node_modules_tencent_dui-mobile_esm_components_Modal_index_js"),n.e("node_modules_tencent_docs-scenario-component-common-service_dist_esm_index_js-_433d0")]).then(n.bind(n,71349));e()}const{html:o,plain:a}=(0,m.v2)();try{await(0,f.writeInClipBoard)({html:o,plain:a,event:e},{encrypt:!0,encryptKey:r}),this.isInCopyStatus=!1,null==t||t(i)}catch(s){this.isInCopyStatus=!1}}}handleCut(e){this.handleCopy(e,this.doCut)}doCut(e){const{canPrivateCopyOut:t}=this.props;if(this.formTitleRef.current&&t){const{selectionStart:t}=this.formTitleRef.current,{selectionEnd:n}=this.formTitleRef.current,o=e.substring(0,t),r=e.substring(n),{handleTitlePaste:i}=this.props;i(`${o}${r}`)}}async handlePaste(e){const{canPrivateCopyOut:t,corpId:n}=this.props,{value:o}=e.target;if(t){e.preventDefault();const{plain:t}=await(0,f.readInClipBoard)({event:e,encryptKey:n});t&&this.doPasteInPrivate(t,o)}}doPasteInPrivate(e,t){var n;if(null===(n=this.formTitleRef)||void 0===n||!n.current)return;const{handleTitlePaste:o}=this.props,{selectionStart:r}=this.formTitleRef.current,{selectionEnd:i}=this.formTitleRef.current;o(`${t.substring(0,r)}${e}${t.substring(i,t.length)}`)}render(){const{formTitle:e,isReadOnly:t,isNeedFocus:n,titlePlaceholder:o,isShowReadOnlyTitle:i}=this.props,{isTitleOverLength:s}=this.state,a=c()("form-header-title-content",{"form-header-title-error":s});return i?r.createElement("div",{className:a,onCopy:this.handleCopy},e):r.createElement("div",{className:c()("form-header-title","form-header-title-wrap",{empty:!e})},r.createElement(_.Z,{tabIndex:"-1",placeholder:o,maxLength:b,rows:"1",className:a,inputRef:this.formTitleRef,value:e,autoFocus:n,onChange:this.handleTitleChange,onOverstep:this.handleOverStep,onKeyDown:this.handleForbiddenKey,onBlur:this.onTitleBlur,onCopy:this.handleCopy,onPaste:this.handlePaste,onCut:this.handleCut,onFocus:this.onTitleFocus,readOnly:t}),this.showErrorTip(s,b))}showErrorTip(e,t){return e?r.createElement("div",{className:"form-header-title-error-tip"},i.Z.t("输入内容需不超过"),t,i.Z.t("个字符")):null}},(0,u.Z)(A.prototype,"handleCopy",[h.xB,T,S],Object.getOwnPropertyDescriptor(A.prototype,"handleCopy"),A.prototype),(0,u.Z)(A.prototype,"handleCut",[h.xB,O,w],Object.getOwnPropertyDescriptor(A.prototype,"handleCut"),A.prototype),(0,u.Z)(A.prototype,"doCut",[h.xB,I,C],Object.getOwnPropertyDescriptor(A.prototype,"doCut"),A.prototype),(0,u.Z)(A.prototype,"handlePaste",[h.xB,R,P],Object.getOwnPropertyDescriptor(A.prototype,"handlePaste"),A.prototype),A);var N=n(23615),L=n.n(N);function parseTags(){let{tagPatterns:e=[],text:t="",maxTagCount:n=1/0,flatten:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.length)return[];const r=Array.from({length:e.length},(()=>[]));if(n<=0||""===t)return o?[]:r;if(e.reduce(((e,t)=>(e.push(new RegExp(t,n>1?"g":"")),e)),[]).forEach(((e,o)=>{let i,s=0;do{i=e.exec(t),i&&(r[o].push({index:i.index,ruleIndex:o,tag:i[0]}),s+=1)}while(null!==i&&s<n)})),1===e.length)return o?r[0]:r;const i=((e,t)=>{if(e.length<2)return e;let n=-1;const o=[];e.every(((e,r)=>{let{index:i,tag:s}=e;return i<=n?(o.push(r),!0):(n=i+s.length-1,r+1-o<t)}));for(let r=0;r<o.length;r++)e.splice(o[r]-r,1);return e.length>t?e.slice(0,t):e})(r.flat().sort(((e,t)=>e.index-t.index)),n);return o?i:i.reduce(((e,t)=>{let{index:n,ruleIndex:o,tag:r}=t;return e[o].push({index:n,ruleIndex:o,tag:r}),e}),Array.from({length:e.length},(()=>[])))}const trimBr=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/^\n+/g,"").replace(/\n+$/g,"")};function getCursorPos(e){if(void 0===window.getSelection)return 0;const t=window.getSelection();if(t.rangeCount>0){const n=t.getRangeAt(0),o=n.cloneRange();return o.selectNodeContents(e),o.setEnd(n.endContainer,n.endOffset),o.toString().length}return 0}function getNodeLen(e){const t="[object Text]"===Object.prototype.toString.call(e),n=!t&&"[object HTMLBRElement]"===Object.prototype.toString.call(e);return(t?e.length:n?1:e.innerText.length)||0}function setCursorPos(e,t){if("function"!=typeof document.createRange||!e)return;const n=document.createRange();if(n.selectNodeContents(e),e.innerHTML.length>0){const{childNodes:o}=e;let i=0;const s=function getCaretPos(e,t){return void 0===t?e.innerText.length:t}(e,t);try{for(let e=0;e<o.length;e+=1){const t=o[e],r="[object Text]"===Object.prototype.toString.call(t),a=getNodeLen(t);if(i+=a,i>=s){n.setStart(r?t:t.childNodes[0],a-i+s);break}}}catch(r){return}}n.collapse(!0);const o=window.getSelection();o.removeAllRanges(),o.addRange(n)}var j,M,x,F,k,Z;const NOOP=()=>{},B={BACK:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,CAP:20,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INS:45,DEL:46},U=Object.keys(B).map((e=>B[e])),G=(()=>{let e=document.createElement("div");try{return e.contentEditable="plaintext-only","plaintext-only"===e.contentEditable}catch(t){return!1}finally{e=null}})();const H=(j=Reflect.metadata("design:type",Function),M=Reflect.metadata("design:paramtypes",[void 0]),x=Reflect.metadata("design:type",Function),F=Reflect.metadata("design:paramtypes",[void 0]),(Z=class ContentEditable extends r.Component{static getDerivedStateFromProps(e){return e.inputRef.current&&e.value===e.inputRef.current.value?null:{}}constructor(e){super(e);const t=e.checkEmpty(e.value);this.state={showPlaceHolder:!1,isEmpty:"boolean"==typeof t?t:!e.value||!e.value.length},this.isDirty=!1,this.tags=[],this.compositionStart=!1,this.compositionStartInfo={innerText:"",pos:0},this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleInput=this.handleInput.bind(this),this.handlePaste=this.handlePaste.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCompositionEnd=this.handleCompositionEnd.bind(this),this.handleCompositonStart=this.handleCompositonStart.bind(this)}componentDidMount(){this.setValueByProps()}shouldComponentUpdate(e,t){const{current:n}=e.inputRef,{innerText:o=""}=n||{};return e.value!==o||t.isEmpty!==this.state.isEmpty||e.readOnly!==this.props.readOnly}componentDidUpdate(e){const{value:t,inputRef:n}=this.props;e.value===t&&e.readOnly===this.props.readOnly||this.setValueByProps(),e.value!==t&&(this.isDirty?setCursorPos(n.current):this.handleInput({target:n.current}))}get hasTagPattern(){return this.props.tagPatterns.length>0}setValueByProps(){const{value:e,inputRef:t,tagPatterns:n,allowHTML:o}=this.props;if(o?t.current.innerHTML=e:t.current.innerText=e,t.current.value=e,!this.hasTagPattern||!e)return;if(this.tags=parseTags({text:e,tagPatterns:n,flatten:!0}),0===this.tags.length)return;const r=this.getHTMLWithTag(this.tags,e);t.current.innerHTML=r}checkLength(e){const{target:t,keyCode:n,ctrlKey:o,metaKey:r,altKey:i}=e,{innerText:s}=t,{maxLength:a,onOverstep:l}=this.props;if(!n){const e=s.length>a;return l(e),!e}const c=!!(o||r||i);return[B.DEL,B.BACK].includes(n)?(setTimeout((()=>{t.innerText.length<=a&&l(!1)})),!0):!!c||(U.includes(n)?(s.length<=a&&l(!1),!0):s.length<a?(l(!1),!0):(l(!0),!1))}handleFocus(e){const{onFocus:t,inputRef:n}=this.props,o=trimBr(n.current.innerText);n.current.value=o,t(e),this.checkLength(e)}handleBlur(e){const{onBlur:t}=this.props;t(e)}handleCopy(e){const{onCopy:t}=this.props;null==t||t(e)}handleKeyDown(e){this.checkLength(e)||e.preventDefault()}handleInput(e){const{target:t}=e,{innerText:n}=t;this.emptyCheck(n),this.isDirty=!0,this.compositionStart||this.triggerInputEvent(e)}async handlePaste(e){e.preventDefault();const{target:t}=e,{getPasteText:n,maxLength:o,onOverstep:r,inputRef:i}=this.props,s=await n(e),a=s.length?trimBr(s):"";if(!a.length)return;const l=t.value?t.value.length:(i.current.value||"").length;(Number(l)||0)+a.length>o?r(!0):document.execCommand("insertText",!1,a)}handleCut(e){const{canPrivateCopyOut:t}=this.props;if(!t)return;const{html:n,plain:o}=(0,m.v2)(),{onCopy:r,onCut:i}=this.props;null==r||r(e,{html:n,plain:o}),i(e),e.preventDefault(),document.execCommand("delete")}handleCompositonStart(e){this.compositionStart=!0,this.compositionStartInfo={innerText:e.target.innerText,pos:getCursorPos(e.target)}}handleCompositionEnd(e){this.compositionStart=!1;const{pos:t,innerText:n}=this.compositionStartInfo,{maxLength:o}=this.props,r=e.target.innerText;if(this.compositionStartInfo={innerText:"",pos:0},r.length>o){const i=o-n.length;if(!(i>0))return e.target.innerText=n,void setCursorPos(e.target,t);{const o=r.substring(t,t+i);e.target.innerText=`${n.substring(0,t)}${o}${n.substring(t)}`,setCursorPos(e.target,t+i)}}this.triggerInputEvent(e)}triggerInputEvent(e){const{target:t}=e,{innerText:n}=t,o=trimBr(n),{onChange:r,onInput:i,inputRef:s,tagPatterns:a}=this.props;s.current.value=o;const l=this.tags;if(this.tags=parseTags({text:o,tagPatterns:a,flatten:!0}),this.tags.length>0||l.length!==this.tags.length){const e=this.getHTMLWithTag(this.tags,n);if(e!==s.current.innerHTML){const t=getCursorPos(s.current);s.current.innerHTML=e,setCursorPos(s.current,t)}}i(e),r(e)}getHTMLWithTag(e,t){const n=[];let o=0;return e.forEach((e=>{let{index:r,tag:i,ruleIndex:s}=e;o<r&&n.push(t.substring(o,r)),n.push(`<span class="editable-input-tag" data-taggroup="${s}">${i}</span>`),o=r+i.length})),o<=t.length-1&&n.push(t.substring(o)),n.join("")}emptyCheck(e){const{checkEmpty:t,inputRef:n}=this.props,o=t(e),r=trimBr(e),i="boolean"==typeof o?o:0===r.length;this.setState({isEmpty:i}),0===r.length&&""!==n.current.innerHTML&&(n.current.innerHTML="")}render(){const{readOnly:e,className:t,placeholder:n,inputRef:o,placeholderType:i,value:s,tagPatterns:a}=this.props,{isEmpty:l}=this.state,d=!G||"plaintext-only";return r.createElement("div",{className:c()("editable-input",t,{empty:l,readonly:e})},r.createElement("div",{className:c()({"editable-input-content":!0,[`placeholder-type-${i}`]:!0,"has-placeholder":!!n}),ref:o,placeholder:n,contentEditable:!e&&d,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onInput:this.handleInput,onCopy:this.handleCopy,onCut:this.handleCut,onPaste:this.handlePaste,onCompositionStart:this.handleCompositonStart,onCompositionEnd:this.handleCompositionEnd,spellCheck:"false",dangerouslySetInnerHTML:e?{__html:this.getHTMLWithTag(parseTags({text:s,tagPatterns:a,flatten:!0}),s)}:null}))}}).propTypes={value:L().string,tagPatterns:L().arrayOf(L().string),maxTagCount:L().number,readOnly:L().bool,allowHTML:L().bool,maxLength:L().number,className:L().oneOfType([L().string,L().object]),placeholder:L().string,onChange:L().func,onBlur:L().func,onFocus:L().func,onInput:L().func,onOverstep:L().func,checkEmpty:L().func,placeholderType:L().oneOf(["normal","follow"]),inputRef:L().object,onCopy:L().func,getPasteText:L().func,onCut:L().func,canPrivateCopyOut:L().bool},Z.defaultProps={value:"",tagPatterns:[],maxTagCount:1/0,readOnly:!1,allowHTML:!1,maxLength:1/0,onChange:NOOP,onBlur:NOOP,onFocus:NOOP,onInput:NOOP,onOverstep:NOOP,checkEmpty:NOOP,onCopy:NOOP,onCut:NOOP,getPasteText:NOOP,placeholderType:"normal",inputRef:r.createRef()},k=Z,(0,u.Z)(k.prototype,"handleCopy",[h.xB,j,M],Object.getOwnPropertyDescriptor(k.prototype,"handleCopy"),k.prototype),(0,u.Z)(k.prototype,"handleCut",[h.xB,x,F],Object.getOwnPropertyDescriptor(k.prototype,"handleCut"),k.prototype),k);var V,q,Q,K,W,$,Y;let z=(V=Reflect.metadata("design:type",Function),q=Reflect.metadata("design:paramtypes",["undefined"==typeof Event?Object:Event,Object]),Q=Reflect.metadata("design:type",Function),K=Reflect.metadata("design:paramtypes",[Object]),W=Reflect.metadata("design:type",Function),$=Reflect.metadata("design:paramtypes",[Object]),Y=class HeaderSubtitle extends r.Component{constructor(e){super(e),this.isSubtitleDirty=!1,this.formSubTitleRef=r.createRef(),this.subTitleRef=r.createRef(),this.isInCopyStatus=void 0,this.checkSubTitleEmpty=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^[\r\n]*$/.test(e)||new RegExp(`^(${v.join("|")})$`).test(e)},this.handleSubTitleInput=()=>{this.isSubtitleDirty=!0},this.onSubFocus=e=>{const{handleFormSubFocus:t,renderQuickTools:n}=this.props;null==n||n(),null==t||t(e),this.isSubtitleDirty||(this.isSubtitleDirty=!0,this.forceUpdate())},this.handleSubChange=e=>{const{handleFormInfoChange:t}=this.props;t&&t(e,"/subtitle")},this.onSubBlur=()=>{this.setState({isSubTitleOverLength:!1})},this.handleSubOverStep=e=>{this.setState({isSubTitleOverLength:e})},this.handleSubTitleMaskClick=()=>{const{current:e}=this.formSubTitleRef;e&&(null==e||e.focus(),setCursorPos(e))},this.calcSubtitleFold=()=>{const{formSubtitleShouldFoldTemp:e}=this.props,t=this.subTitleRef.current,n=this.formSubTitleRef.current;if(t&&n){n.style.webkitLineClamp=e?"100":"6";const{height:o}=t.getBoundingClientRect(),{height:r}=n.getBoundingClientRect();this.setState({isShowSubTitleFoldBtn:r>o}),n.style.webkitLineClamp=""}},this.handleWindowResize=()=>{const{isEditable:e}=this.props;e||this.calcSubtitleFold()},this.handleSubTitleToggle=()=>{const{isSubTitleFold:e}=this.state;this.setState({isSubTitleFold:!e})},this.state={isSubTitleOverLength:!1,isSubTitleFold:!0,isShowSubTitleFoldBtn:!1},this.handleWindowResize=(0,g.default)(this.handleWindowResize.bind(this),100),this.isInCopyStatus=!1}componentDidMount(){window.addEventListener("resize",this.handleWindowResize,!1),this.handleWindowResize()}componentDidUpdate(e){const{formSubTitle:t,isEditable:n}=this.props;e.formSubTitle===t||n||this.calcSubtitleFold()}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize,!1)}async handleCopy(e,t){const{canPrivateCopyOut:o,corpId:r}=this.props;if(o&&!this.isInCopyStatus){if(e.preventDefault(),this.isInCopyStatus=!0,p.isPC){const{showClipboardProtectionModal:e}=await Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),n.e("vendors-node_modules_tencent_dui-mobile_esm_components_Modal_index_js"),n.e("node_modules_tencent_docs-scenario-component-common-service_dist_esm_index_js-_433d0")]).then(n.bind(n,71349));e()}else{const{showClipboardProtectionMobileModal:e}=await Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),n.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),n.e("vendors-node_modules_tencent_dui-mobile_esm_components_Modal_index_js"),n.e("node_modules_tencent_docs-scenario-component-common-service_dist_esm_index_js-_433d0")]).then(n.bind(n,71349));e()}let o="",s="";({html:o,plain:s}=t||(0,m.v2)());try{await(0,f.writeInClipBoard)({html:o,plain:s,event:e},{encrypt:!0,encryptKey:r}),this.isInCopyStatus=!1}catch(i){this.isInCopyStatus=!1}}}handleCut(e){this.handleCopy(e)}async getPasteText(e){const{canPrivateCopyOut:t,corpId:n}=this.props;if(t){const{plain:t}=await(0,f.readInClipBoard)({event:e,encryptKey:n});return t}const{clipboardData:o}=e;return o.getData("text/plain")}render(){const{formSubTitle:e,isEditable:t,subPlaceholder:n,defaultSubTitle:o,isNewQuestion:i,subtitleAllowHTML:s,isReadOnly:a,formSubtitleShouldFoldTemp:l,canPrivateCopyOut:d}=this.props,{isSubTitleOverLength:u,isSubTitleFold:p}=this.state,m=!t||this.isSubtitleDirty||e?e:o;return t||m?r.createElement(r.Fragment,null,r.createElement("div",{className:c()({"form-header-subtitle-wrap":!0,"show-all":!p||l,"new-question":!this.isSubtitleDirty&&i,editable:t}),ref:this.subTitleRef},r.createElement(H,{allowHTML:s,className:"form-header-subtitle",tabIndex:"-1",placeholder:n,maxLength:E,inputRef:this.formSubTitleRef,value:m,onOverstep:this.handleSubOverStep,onBlur:this.onSubBlur,onChange:this.handleSubChange,onFocus:this.onSubFocus,onInput:this.handleSubTitleInput,onCut:this.handleCut,onCopy:this.handleCopy,getPasteText:this.getPasteText,readOnly:a,tagPatterns:v,placeholderType:"follow",checkEmpty:this.checkSubTitleEmpty,canPrivateCopyOut:d}),this.renderFormHeaderSubtitleMask(),this.showErrorTip(u,E)),this.renderSubTitleFoldBtn()):r.createElement("div",{className:"form-header-subtitle-empty"})}showErrorTip(e,t){return e?r.createElement("div",{className:"form-header-title-error-tip"},i.Z.t("输入内容需不超过"),t,i.Z.t("个字符")):null}renderSubTitleFoldBtn(){const{formSubtitleShouldFoldTemp:e}=this.props,{isShowSubTitleFoldBtn:t,isSubTitleFold:n}=this.state;return!t||e?null:r.createElement("div",{className:c()("form-header-subtitle-fold",{fold:n,unfold:!n}),onClick:this.handleSubTitleToggle},n?i.Z.t("展开"):i.Z.t("收起"))}renderFormHeaderSubtitleMask(){return this.isSubtitleDirty||!this.props.isNewQuestion?null:r.createElement("div",{className:"form-header-subtitle-mask",onClick:this.handleSubTitleMaskClick})}},(0,u.Z)(Y.prototype,"handleCopy",[h.xB,V,q],Object.getOwnPropertyDescriptor(Y.prototype,"handleCopy"),Y.prototype),(0,u.Z)(Y.prototype,"handleCut",[h.xB,Q,K],Object.getOwnPropertyDescriptor(Y.prototype,"handleCut"),Y.prototype),(0,u.Z)(Y.prototype,"getPasteText",[h.xB,W,$],Object.getOwnPropertyDescriptor(Y.prototype,"getPasteText"),Y.prototype),Y);class HeaderBase extends r.Component{constructor(e){super(e),this.subTitleValue=void 0,this.isSubtitleDirty=void 0,this.state=d.m8,this.subTitleValue="",this.isSubtitleDirty=!1,this.handleMemberListSetting=this.handleMemberListSetting.bind(this)}render(){const{cardRef:e,canPrivateCopyOut:t,corpId:n,isEditable:o,isDisabled:i,isShowBottomBorder:s,formTitle:a,isReadOnly:l,isNeedFocus:d,titlePlaceholder:u,isShowReadOnlyTitle:p,handleFormInfoChange:m,handleFormTitleBlur:h,handleFormTitleFocus:f,handleTitlePaste:g}=this.props;return r.createElement("div",{className:c()("form-header",{"form-header-readonly":!o,"form-header-disabled":i,"form-header-nonebottomborder":!s}),ref:e},r.createElement(D,{formTitle:a,isReadOnly:l,isNeedFocus:d,titlePlaceholder:u,isShowReadOnlyTitle:p,handleFormInfoChange:m,handleFormTitleBlur:h,handleFormTitleFocus:f,renderQuickTools:this.renderQuickTools,canPrivateCopyOut:t,corpId:n,handleTitlePaste:g}),this.renderFormSubTitle(),this.renderFormSettingGroup())}renderFormSettingGroup(){const{showSettingGroup:e=!0}=this.props;if(!e)return null;const t="form-header-setting-group",n="form-header-setting-child",{isClosed:o,isEditable:i,hasReachSubmissionLimit:s}=this.props;if((o||s)&&!i)return r.createElement("div",{className:c()(t,n)},this.renderStopCollectionSetting());const a=this.renderAnonymousBtn(),l=this.renderScore(),d=this.renderTimeSetting(),u=this.renderMemberSetting(),p=this.renderClosingRemarkBtn();return a||l||d||u||p?r.createElement("div",{className:c()(t,n)},a,l,d,u,p):null}renderFormSubTitle(){const{isEditable:e,isReadOnly:t,formSubTitle:n,subPlaceholder:o,defaultSubTitle:i,isNewQuestion:s,subtitleAllowHTML:a,canPrivateCopyOut:l,corpId:c,handleFormInfoChange:d,handleFormSubFocus:u,formSubtitleShouldFoldTemp:p}=this.props;return r.createElement(z,{isEditable:e,formSubTitle:n,subPlaceholder:o,defaultSubTitle:i,isNewQuestion:s,subtitleAllowHTML:a,isReadOnly:t,formSubtitleShouldFoldTemp:p,handleFormSubFocus:u,handleFormInfoChange:d,renderQuickTools:this.renderQuickTools,canPrivateCopyOut:l,corpId:c})}renderMemberSettingBtn(){const e="form-header-member",{shouldHideSettingsInRefill:t,listTitle:n,selectedRosters:o,isReadOnly:i}=this.props,s=!(null==o||!o.length),a=null==t?void 0:t();return r.createElement("div",{onClick:a?()=>{}:this.handleMemberListSetting,className:c()(e,{[`${e}-hasSelectedRosters`]:s,"not-clickable":i})},r.createElement("div",{className:c()(`${e}-icon`,{noSet:!s,hasSet:s})}),r.createElement("div",{className:c()(`${e}-text`)},n||this.memberListTitle))}handleMemberListSetting(){const{handleSetMember:e}=this.props;e&&e()}get memberListTitle(){const{selectedRosters:e}=this.props;let t=i.Z.t("填写名单"),n=i.Z.t("参与名单："),o=0;return null!=e&&e.length&&(e.forEach((e=>{n+=`${e.title}、`,o+=(0,a.ez)(e)})),n.length&&(n=n.substring(0,n.length-1),n=function cutStringByCharacter(e,t){let n,o,r,i=0,s="";for(o=0,r=e.length;o<r;o++){if(n=e.codePointAt(o),i+=n>127?2:1,i>t)return s+="...",s;s+=e[o]}return s}(n,30)),t=`${n}(${o})`),t}}HeaderBase.defaultProps={handleFormInfoChange:Function.prototype,handleFormSubFocus:Function.prototype,shouldHideSettingsInRefill:Function.prototype,handleFormTitleFocus:Function.prototype,handleTitlePaste:Function.prototype,handleFormTitleBlur:Function.prototype,handleSetMember:Function.prototype,handleFormSubBlur:Function.prototype,scoreTemplate:d.Jm,formSubtitleShouldFoldTemp:!1};var X=n(87768);class HeaderAnonymousBtn extends r.Component{render(){const e="form-header-anonymous";return r.createElement("div",{className:`${e} ${e}-hasSet not-clickable`},r.createElement("div",{className:`${e}-icon hasSet`}),r.createElement("div",{className:`${e}-text`},i.Z.t("匿名填写")))}}class HeaderClosingRemarkBtn extends r.Component{constructor(){super(...arguments),this.handleClickClosingRemarkBtn=e=>{e.preventDefault(),e.stopPropagation(),(0,X.G)("edit","end_page",{abtest:"1"}),this.props.onGoToClosingRemarkPage()}}render(){const{isAdmin:e,isShowClosingRemark:t,isReadOnly:n}=this.props;if(!e)return null;const o="form-header-closing-remark",{title:i,hasSet:s}=this.hasSetTitleOfClosingRemark();return s||t?r.createElement("div",{className:c()(o,{[`${o}-hasSet`]:s,"not-clickable":n}),onClick:this.handleClickClosingRemarkBtn},r.createElement("div",{className:c()(`${o}-icon`,{noSet:!s,hasSet:s})}),r.createElement("div",{className:`${o}-text`},i)):null}hasSetTitleOfClosingRemark(){var e;let t=i.Z.t("结束页");const{conclusion:n}=this.props,o=!!(n&&(null!==(e=n.linkList)&&void 0!==e&&e.length||n.picSrc||n.remarkTitle));return o&&(t=`${t}: ${i.Z.t("已设置")}`),{title:t,hasSet:o}}}class HeaderScoreBtn extends r.Component{render(){const e="form-header-score",{score:t,isShowScore:n,finalScore:o,scoreTemplate:s,isSubmited:a,showTotalScore:l}=this.props;if(!l)return null;const d=(e=>{let t,{score:n,finalScore:o,scoreTemplate:r,isSubmited:s,isShowScore:a}=e;if(y.v1)return r;if("number"==typeof o&&s&&a){const e=parseFloat(o.toFixed(1));t=i.Z.t("本次得分{{receivedScore}}/总分{{score}}分",{receivedScore:e,score:n})}else t=null==r?void 0:r.replace(/\$\{score\}/g,n.toString());return t})({score:t,finalScore:o,scoreTemplate:s,isSubmited:a,isShowScore:n});return r.createElement("div",{className:c()(`${e}`,{[`${e}-hasScore`]:t&&"number"==typeof o})},r.createElement("div",{className:c()(`${e}-icon`,{hasSet:!0})}),r.createElement("div",{className:`${e}-text`},d))}}class FormHeaderBase extends HeaderBase{constructor(){super(...arguments),this.HeaderRichSubtitle=void 0,this.HeaderTimeSettingBtn=void 0,this.reportSubtitleChanged=()=>{const{topicTip:e}=this.props,{subTitleValue:t}=this;t.startsWith(e)||(0,X.G)("edit","del_subtitle")}}renderAnonymousBtn(){return this.props.anonymous?r.createElement(HeaderAnonymousBtn,null):null}renderMemberSetting(){const{isOwner:e,isShowMemberSet:t}=this.props;return e&&t?this.renderMemberSettingBtn():null}renderScore(){const{score:e,finalScore:t,isShowScore:n,scoreTemplate:o,isSubmited:i,showTotalScore:s}=this.props;return r.createElement(HeaderScoreBtn,{score:e,finalScore:t,isShowScore:n,scoreTemplate:o,isSubmited:i,showTotalScore:s})}renderTimeSetting(){const{isAdmin:e,endTime:t,isClosed:n,shouldHideSettingsInRefill:o,startTime:i,updateLocalSettings:s,updatePeriodicRelated:a,isPublished:l,isTask:c,relatedSheet:d,relatedPeriodic:u,formType:p}=this.props,{HeaderTimeSettingBtn:m}=this;return r.createElement(m,{isTask:c,formType:p,isPublished:l,endTime:t,startTime:i,isAdmin:e,isClosed:n,shouldHideSettingsInRefill:o,relatedPeriodic:u,relatedSheet:d,updatePeriodicRelated:a,updateLocalSettings:s})}renderStopCollectionSetting(){const{startTime:e}=this.props;return e&&e>Date.now()?this.renderTimeSetting():r.createElement("div",{className:"form-header-time-setting form-header-time-setting-isClosed"},i.Z.t("已暂停收集"))}renderClosingRemarkBtn(){const{isAdmin:e,isShowClosingRemark:t,conclusion:n,onGoToClosingRemarkPage:o,isReadOnly:i}=this.props;return r.createElement(HeaderClosingRemarkBtn,{isAdmin:e,isShowClosingRemark:t,conclusion:n,onGoToClosingRemarkPage:o,isReadOnly:i})}renderFormSubTitle(){const{isEditable:e,richSubtitle:t,handleUploadImage:n,onRichTextChange:o,isReadOnly:i,wxConfig:a,canPrivateCopyOut:l,corpId:c}=this.props,{HeaderRichSubtitle:d}=this;return r.createElement(d,{isEditable:e,richSubtitle:t,isReadOnly:i,handleUploadImage:n,onRichTextChange:o,insertTDocTitle:s.nQ,wxConfig:a,corpId:c,canPrivateCopyOut:l})}}var J=n(64649);n(54370),n(5153),n(80566),n(50870),n(75397),n(18829),n(51429),n(25376),n(95864),n(94565),n(95073),n(65204),n(47072),n(98391),n(22727),n(19647);const ee=0,te=1,ne=2,oe=4,re=90,ie=91,se=(i.Z.t("无标题文档"),i.Z.t("无标题表格"),i.Z.t("无标题收集表"),i.Z.t("无标题幻灯片"),i.Z.t("无标题思维导图"),i.Z.t("无标题流程图"),2),ae=new Set(["setMemberlist","setEndTime","notifyOwner","modiySubmit","multiSubmit","allowFillerSeeResults","collect-state-form","relation"]),le=new Set(["setMemberlist","setEndTime","notifyOwner","scoreUnVisible","allowFillerSeeResults","relation"]),ce=new Set(["setMemberlist","setEndTime","notifyOwner","scoreUnVisible","allowFillerSeeResults","relation","exerciseMode","oneQuestionPerPage","questionShuffle","randomQuestion"]),de=new Set(["setMemberlist","setEndTime","notifyOwner","modiySubmit","relation"]),ue=new Set(["setMemberlist","setEndTime","modiySubmit","multiSubmit","relation"]);var pe=n(79260),me=n(25687),he=n(4222);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,J.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const mapStateToProps=e=>{var t,n;const{data:o}=e.formInfo,{formData:r}=e.edit,{fillerConfig:{canMultiSubmit:i,canModifyRecords:s,canCheckResults:a,canCheckPaperScore:l},collection:{endTime:c,isClosed:d},notifyConfig:{canNotifyOwner:u}}=e.setting;let p={};const{cardConfig:m,sequenceConfig:h,taskConfig:f,sections:g,parts:_}=r;let y=ae;return m?y=ue:h?y=de:f&&(y=le,f.taskType===se&&(y=ce,p={referencedParts:_,targetParts:f.parts,isOneQuestionPerPage:f.isOneQuestionPerPage,shouldShuffle:f.shouldShuffle,isExerciseMode:f.isExerciseMode})),_objectSpread({canNotifyOwner:u,canCheckPaperScore:l,canModifyRecords:s,canMultiSubmit:i,canCheckResults:a,isClosed:d,sections:g,endTime:c,isClock:!!m,isTask:!!f,pub:o.pub,selectedRosters:e.roster.selectedRosters,weChatBinded:!!e.user.userInfo.wxOpenid,validKeySet:y,canPrivateCopyOut:!he.pg.TOC&&!(null!==(t=e.formInfo.data.privilegeAttribute.canCopyOut)&&void 0!==t?t:e.formInfo.data.privilegeAttribute.can_copy_out),corpId:null===(n=e.formInfo.data)||void 0===n?void 0:n.creatorCorpId},p)},mapDispatchToProps=e=>_objectSpread({setExamSetting(t){e({type:"edit/setExamSetting",payload:t})}},(0,pe.bindActionCreators)({unbindSheet:me.Vj},e));class HeaderRichSubtitleBase extends r.Component{constructor(){super(...arguments),this.RichTextEditor=void 0,this.EditorReadonly=void 0}render(){const{isReadOnly:e}=this.props;return e?this.renderReadonlyEditor():this.renderRichEditor()}renderRichEditor(){const{richSubtitle:e,handleUploadImage:t,isReadOnly:n,onRichTextChange:o,wxConfig:a,canPrivateCopyOut:l,corpId:c}=this.props,{RichTextEditor:d}=this;return r.createElement(r.Suspense,{fallback:this.renderReadonlyEditor()},r.createElement(d,{lang:window.__LANG__,richTextValue:e,readOnly:n,placeholder:i.Z.t("添加描述：文字、图片或链接"),onChange:o,onReport:this.handleReport,onUploadImage:t,insertTDocTitle:s.nQ,wxConfig:a,onFocus:this.handleFocus,canPrivateCopyOut:l,corpId:c}))}renderReadonlyEditor(){const{EditorReadonly:e}=this,{richSubtitle:t,canPrivateCopyOut:n,corpId:o}=this.props;return r.createElement(e,{richTextValue:t,onReport:this.handleReport,canPrivateCopyOut:n,corpId:o})}handleReport(e){const{isReadOnly:t}=this.props,n={afterRichEditorInsertLink:{module:"rich_text",action:"link_count",extra:{ver6:1}},afterUploadImage:{module:"rich_text",action:"pic_count",extra:{ver6:1}},afterRichEditorLinkRendered:{module:"contents",action:"view_link",extra:{ver6:1},disable:!t},afterRichEditorOpenLink:{module:t?"contents":"lp_link_menu",action:t?"clk_link":"click_link",extra:{ver6:1}},afterRichEditorImagePreview:{module:t?"contents":"lp_pic_menu",action:t?"clk_pic":"click_pic",extra:{ver6:1}},afterRichEditorImageLoaded:{disable:!t,module:"contents",action:"view_pic",extra:{ver6:1}},afterImageGalleryPopoverVisibleChange:{module:"lp_pic_menu",action:"view",extra:{ver6:1}},afterRichEditorImageDelete:{module:"lp_pic_menu",action:"click_delete",extra:{ver6:1}},afterRichEditorImageReplace:{module:"lp_pic_menu",action:"click_replace",extra:{ver6:1}},afterRichEditorLinkPopoverShow:{module:"lp_link_menu",action:"view",extra:{ver6:1}},afterRichEditorEditLink:{module:"lp_link_menu",action:"click_replace",extra:{ver6:1}},afterRichEditorLinkCanceled:{module:"lp_link_menu",action:"click_cancel",extra:{ver6:1}},afterRichEditorLinkDeleted:{module:"lp_link_menu",action:"click_delete",extra:{ver6:1}},afterrichEditorLinkCopy:{module:"lp_link_menu",action:"click_copy",extra:{ver6:1}}};(0,X.g)(e,n)}}var fe,ge,_e,ye=n(78194),be=n(84850),Ee=n(60250);let ve=(fe=Reflect.metadata("design:type",Function),ge=Reflect.metadata("design:paramtypes",[]),_e=class HeaderRichSubtitlePC extends HeaderRichSubtitleBase{constructor(){super(...arguments),this.RichTextEditor=ye.Z,this.EditorReadonly=be.Z,this.showTips=!0,this.handleReport=e=>{super.handleReport(e);(0,X.g)(e,{afterRichEditorInsertLinkClicked:{module:"pc_toolbar",action:"clk_link",extra:{ver6:1}},afterRichEditorAddTdocClicked:{module:"pc_toolbar",action:"clk_tdoc",extra:{ver6:1}},afterRichEditorPCToolMenuClick:{module:"pc_toolbar",action:"clk_add",extra:{ver6:1}},afterRichEditorAddImageClick:{module:"pc_toolbar",action:"clk_pic",extra:{ver6:1}},afterRichEditorHoveringToolbarShow:{module:"lp_text_menu",action:"view",extra:{ver6:1}},afterRichEditorHoveringToolbarInsertLink:{module:"lp_text_menu",action:"add_link",extra:{ver6:1}},afterRichEditorHoveringToolbarHighlight:{module:"lp_text_menu",action:"clk_highlight",extra:{ver6:1,ver5:1}},afterRichEditorHoveringToolbarCancelHighlight:{module:"lp_text_menu",action:"clk_highlight",extra:{ver6:1,ver5:0}}})}}handleFocus(){this.showTips&&p.isWindows&&p.isWxMiniProgram&&((0,Ee.IG)(i.Z.t("建议在腾讯文档网页版或客户端进行编辑，体验更佳。"),{id:"editorFocusTips"}),this.showTips=!1)}},(0,u.Z)(_e.prototype,"handleFocus",[h.xB,fe,ge],Object.getOwnPropertyDescriptor(_e.prototype,"handleFocus"),_e.prototype),_e);var Te,Se,Oe,we=n(49628),Ie=n(98494);let Ce=(Te=Reflect.metadata("design:type",Function),Se=Reflect.metadata("design:paramtypes",[]),Oe=class HeaderTimeSettingBtn extends r.Component{constructor(){super(...arguments),this.openCollectionTimeSetting=void 0,this.getEndTimeStatusBtnEdit=e=>{const t=this.isCollectionTimeBtnActive(),n="form-header-time-setting";return r.createElement("div",{onClick:this.handleCollectionTimeBtnClick,className:c()(n,{[`${n}-hasEndTime`]:t})},r.createElement("div",{className:c()(`${n}-icon`,{hasSet:t,noSet:!t})}),r.createElement("div",{className:`${n}-text`},e))},this.getEndTimeStatusBtnFillPage=e=>this.isCollectionTimeBtnActive()?r.createElement("div",{className:c()("form-header-time-setting form-header-time-setting-hasEndTime not-clickable")},r.createElement("div",{className:"form-header-time-setting-icon hasSet"}),r.createElement("div",null,e)):null}render(){const e=this.renderPeriodicSettingBtn();return e||null}renderPeriodicSettingBtn(){var e,t,n;const{startTime:o,endTime:r,formType:i,relatedPeriodic:{isPeriodic:s,periodicPattern:a,periodicDays:l}}=this.props,c=null!==(e=null===(t=(0,Ie.n)(i))||void 0===t||null===(n=t.edit)||void 0===n?void 0:n.headerTimeDefText)&&void 0!==e?e:"",d=(0,we.cg)({startTime:o,endTime:r,isPeriodic:s,periodicPattern:a,periodicDays:l,defaultText:c});let u=null;return"#/edit"===location.hash?u=this.getEndTimeStatusBtnEdit(d):["#/fill","#/fill-detail","#/preview"].includes(location.hash)&&(u=this.getEndTimeStatusBtnFillPage(d)),u}handleCollectionTimeBtnClick(){const{isAdmin:e,startTime:t,endTime:n,isPublished:o,isClosed:r,isTask:i,relatedSheet:s,relatedPeriodic:a,formType:l,updatePeriodicRelated:c,updateLocalSettings:d}=this.props;e&&this.openCollectionTimeSetting({isTask:i,startTime:t,endTime:n,isPublished:o,isClosed:r,updatePeriodicRelated:c,updateLocalSettings:d,relatedPeriodic:a,relatedSheet:s,formType:l})}isCollectionTimeBtnActive(){const{startTime:e,endTime:t,relatedPeriodic:{isPeriodic:n}}=this.props;return e||t||n}},(0,u.Z)(Oe.prototype,"handleCollectionTimeBtnClick",[h.xB,Te,Se],Object.getOwnPropertyDescriptor(Oe.prototype,"handleCollectionTimeBtnClick"),Oe.prototype),Oe);var Re,Pe=n(57926);class HeaderTimeSettingBtnPC extends Ce{constructor(){super(...arguments),this.openCollectionTimeSetting=Pe.Y}}let Ae=(0,o.connect)((e=>{const{relatedPeriodic:t}=e.setting;return{formSetting:mapStateToProps(e),relatedPeriodic:t}}),(e=>({formSettingDispatches:mapDispatchToProps(e)})),void 0,{withRef:!0})(Re=class FormHeaderPC extends FormHeaderBase{constructor(){super(...arguments),this.HeaderRichSubtitle=ve,this.HeaderTimeSettingBtn=HeaderTimeSettingBtnPC}renderQuickTools(){return null}})||Re},28446:(e,t,n)=>{n.d(t,{Jm:()=>r,m8:()=>i});var o=n(54734);const r=`${o.Z.t("总分：")}\${score}${o.Z.t("分")}`,i={isTitleOverLength:!1,isSubTitleOverLength:!1,isTitleFocus:!1,isSubFocus:!1,isSubTitleFold:!0,isShowSubTitleFoldBtn:!1}},39160:(e,t,n)=>{n.d(t,{Z:()=>FormWithHistoryRecord});var o=n(64649),r=(n(11431),n(27378)),i=n(14042),s=n(23615),a=n.n(s),l=n(72870),c=n(25773),d=n(54734);const NOOP=()=>{},u=(()=>{let e=document.createElement("div");const t="ontouchstart"in e?"onTouchStart":"onClick";return e=null,(e,n)=>({[t]:e.bind(n)})})();class HistoryRecord extends r.Component{constructor(){super(...arguments),this.onClickClear=e=>{this.props.onClickClear(e)},this.onClickDelete=(e,t)=>{this.props.onClickDelete(e,t)},this.onItemClick=(e,t)=>{this.props.onItemClick(e,t)},this.renderItem=(e,t)=>r.createElement("div",(0,c.Z)({key:t,className:"question-history-record-item"},u((t=>this.onItemClick(t,e)),this)),r.createElement("span",{className:"question-history-record-item-text"},e.value||e),r.createElement("span",(0,c.Z)({className:"question-history-record-item-delete"},u((t=>this.onClickDelete(t,e)),this))))}render(){const{list:e}=this.props;return e.length?r.createElement("div",{className:"question-history-record"},r.createElement("div",{className:"question-history-record-list"},e.slice(0,10).map(this.renderItem)),r.createElement("div",(0,c.Z)({className:"question-history-record-clear"},u(this.onClickClear,this)),d.Z.t("清空历史记录"))):null}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}HistoryRecord.propTypes={list:a().array,onClickClear:a().func,onClickDelete:a().func,onItemClick:a().func,onTouchStartDelete:a().func,onTouchStartClear:a().func,onTouchStartItem:a().func},HistoryRecord.defaultProps={list:[],onClickClear:NOOP,onClickDelete:NOOP,onItemClick:NOOP,onTouchStartDelete:NOOP,onTouchStartClear:NOOP,onTouchStartItem:NOOP};const arrFilter=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?t.filter((t=>0===String(t).indexOf(e))):t},form_with_history_record_NOOP=()=>{};class FormWithHistoryRecord extends r.Component{constructor(e){var t;super(e),t=this,this.setContainerRef=e=>{this.containerRef=e},this.setHistoryRecordRef=e=>{this.historyRecordRef=e},this.showHistoryRecord=e=>{this.historyRecordRef&&Object.assign(this.historyRecordRef.style,_objectSpread(_objectSpread({},e),{},{display:""}))},this.hideHistoryRecord=()=>{this.historyRecordRef&&(Object.assign(this.historyRecordRef.style,{display:"none"}),this.setState({list:[]}),this.form=null,this.question=null,this.currentValue=null)},this.genHistoryRecordStyle=e=>{const t=this.containerRef.getBoundingClientRect(),n=e.parentElement.parentElement.getBoundingClientRect(),o=n.bottom-t.top,r=n.left-t.left,{width:i}=n;return{top:`${o}px`,left:`${r}px`,width:`${i}px`}},this.onClickBody=e=>{setTimeout((()=>{e.target!==this.cacheFormItemEle&&(null===this.cacheDeleteEle||e.target!==this.cacheDeleteEle?this.hideHistoryRecord():this.cacheDeleteEle=null)}),0)},this.onFormItemFocus=(e,t,n)=>{const{children:o}=this.props;if("function"==typeof o.props.onFormItemFocus&&o.props.onFormItemFocus(e,t,n),this.question=t,this.form=n,!t||t.type!==i.c.SIMPLE||this.clickDelete)return void(this.clickDelete=!1);const{target:r}=e,s=this.genHistoryRecordStyle(r);this.cacheFormItemEle=r,this.showHistoryRecord(s),this.getList(),this.setState({filterKeyWord:""}),this.clickDelete=!1,this.currentValue=r.value},this.onFormItemChange=e=>{let{target:{value:t}}=e;t!==this.state.filterKeyWord&&t!==this.currentValue&&(this.currentValue=t,this.setState({filterKeyWord:t}))},this.onFormItemBlur=function(){const{list:e}=t.state,{children:n}=t.props;"function"==typeof n.props.onFormItemBlur&&n.props.onFormItemBlur(...arguments),l.isMobile&&e.length&&t.hideHistoryRecord()},this.onClickClear=()=>{const{onClear:e}=this.props;e({title:this.question.title,callback:()=>this.cacheFormItemEle.focus()})},this.onClickDelete=(e,t)=>{const{onItemDelete:n}=this.props,{list:o}=this.state;e.stopPropagation(),this.cacheDeleteEle=e.target,n({title:this.question.title,value:t,list:o,callback:()=>{this.clickDelete=!0,this.cacheFormItemEle.focus(),this.getList()}})},this.onItemClick=(e,t)=>{if(!this.form||!this.question)return;const{onItemClick:n}=this.props;this.form.setFieldsValue({[this.question.id]:t});const{list:o}=this.state;n({title:this.question.title,value:t,list:o})},this.containerRef=null,this.historyRecordRef=null,this.cacheFormItemEle=null,this.cacheDeleteEle=null,this.question=null,this.form=null,this.currentValue=null,this.clickDelete=!1,this.state={filterKeyWord:"",list:[]},this.handleFormItemChange=this.handleFormItemChange.bind(this)}componentDidMount(){document.body.addEventListener("click",this.onClickBody,!1)}componentWillUnmount(){document.body.removeEventListener("click",this.onClickBody,!1)}handleFormItemChange(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[o]=t,{children:r}=this.props,{list:i}=this.state;"function"==typeof r.props.onFormItemChange&&r.props.onFormItemChange(...t),i.length&&o&&o.target&&this.onFormItemChange(o)}getList(){const{getHistoryList:e}=this.props;e({id:this.question.id,title:this.question.title,callback:e=>{let{id:t,value:n}=e;this.question&&t===this.question.id&&this.setState({list:n})}})}render(){const{children:e}=this.props,{filterKeyWord:t,list:n}=this.state;return e?r.createElement("div",{className:"form-with-history-record fill-area",ref:this.setContainerRef},(0,r.cloneElement)(e,{onFormItemFocus:this.onFormItemFocus,onFormItemBlur:this.onFormItemBlur,onFormItemChange:this.handleFormItemChange}),r.createElement("div",{className:"history-record-container",ref:this.setHistoryRecordRef},r.createElement(HistoryRecord,{list:arrFilter(t,n),onClickClear:this.onClickClear,onClickDelete:this.onClickDelete,onItemClick:this.onItemClick}))):null}}FormWithHistoryRecord.propTypes={getHistoryList:a().func,onItemClick:a().func,onItemDelete:a().func,onClear:a().func,children:a().node},FormWithHistoryRecord.defaultProps={getHistoryList:form_with_history_record_NOOP,onItemClick:form_with_history_record_NOOP,onItemDelete:form_with_history_record_NOOP,onClear:form_with_history_record_NOOP}},23380:(e,t,n)=>{n.d(t,{Z:()=>CTextarea});var o=n(25773),r=n(27378),i=n(23615),s=n.n(i),a=n(53782),l=n(72870);const c=["inputRef","autoFocus","htmlTag","nodeClass","onBlur","onOverstep","maxLength","offComposition","readOnly"],d=Function.prototype;class CInput extends r.Component{constructor(e){super(e),this.checkLength=e=>{const{maxLength:t}=this.props;return e.length<=t},this.handleComposition=e=>{const{nodeClass:t,onOverstep:n,maxLength:o}=this.props,{type:r,target:i}=e;if("compositionend"!==r)return void(this.isOnComposition=!0);if(this.isOnComposition=!1,!(i instanceof t))return;const{value:s}=i;this.checkLength(s)?this.props.onChange(e):n&&(e.target.value=e.target.value.slice(0,o),this.props.onChange(e),n(!0))},this.handleChange=e=>{const{onOverstep:t,maxLength:n,onChange:o}=this.props,r=e.target.value,i=this.checkLength(r),{value:s}=this.state;if(!i&&r.length>s.length&&!this.isOnComposition){const i=r.slice(0,n);if(i.length>s.length){this.setState({value:i});const t=e;t.target.value=i,o(t)}t(!0)}else this.setState({value:r}),this.isOnComposition||o(e),-1!==e.target.className.indexOf("option-cell-text")&&this.setState({currentSelectedValue:e.target.value}),t(!1)},this.setTabindex=e=>{const t=document.querySelectorAll("input,textarea");if(t){Array.from(t).forEach((t=>{t.setAttribute("tabindex",e)}))}},this.handleFocus=e=>{const{onFocus:t,nodeClass:n,readOnly:o}=this.props;if(o)return void e.target.blur();if(e.target.classList.contains("option-cell-text")&&this.setState({currentSelectedValue:e.target.value}),e.target.value.length>3&&"选项"===e.target.value.slice(0,2)&&(e.target.value=""),e.target instanceof n&&!this.isOnComposition&&this.props.onChange(e),l.isIOS){const t=document.querySelectorAll("input,textarea");Array.from(t).forEach((t=>{t!==e.target&&t.setAttribute("tabindex","-1")}))}t&&t(e)},this.handleBlur=e=>{e.target.classList.contains("option-cell-text")&&this.state.currentSelectedValue.length>3&&"选项"===this.state.currentSelectedValue.slice(0,2)&&(e.target.value=this.state.currentSelectedValue);const t=e.target.value,{onBlur:n}=this.props;if(this.isOnComposition=!1,l.isIOS){const e=document.querySelectorAll("input,textarea");Array.from(e).forEach((e=>{e.removeAttribute("tabindex","0")}))}n&&n(e),t!==this.state.value&&(this.setState({value:t}),this.props.onChange(e))};const{value:t=""}=this.props;this.isOnComposition=!1,this.state={value:t,currentSelectedValue:""}}componentWillReceiveProps(e){const{value:t}=e;this.setState({value:t})}render(){const{value:e}=this.state,t=this.props,{inputRef:n,autoFocus:i,htmlTag:s,nodeClass:l,onBlur:d,onOverstep:u,maxLength:p,offComposition:m,readOnly:h}=t,f=(0,a.Z)(t,c),g=h?{unselectable:"on"}:{};return m?r.createElement(s,(0,o.Z)({},f,g,{readOnly:h,spellCheck:"false",value:e,ref:n,autoFocus:i,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus})):r.createElement(s,(0,o.Z)({},f,g,{readOnly:h,value:this.state.value,ref:n,spellCheck:"false",autoFocus:i,onCompositionStart:this.handleComposition,onCompositionUpdate:this.handleComposition,onCompositionEnd:this.handleComposition,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus,style:/^选项 \d{1,}$/.test(e)?{color:"rgba(0, 0, 0, 0.32)"}:{color:""}}))}}CInput.propTypes={value:s().string,nodeClass:s().func,htmlTag:s().oneOf(["input","textarea"]),inputRef:s().oneOfType([s().object,s().func]),autoFocus:s().bool,onBlur:s().func,onOverstep:s().func,maxLength:s().any,offComposition:s().bool,onChange:s().func,onFocus:s().func,readOnly:s().bool},CInput.defaultProps={value:"",nodeClass:HTMLInputElement,htmlTag:"input",readOnly:!1,maxLength:100,onOverstep:d,onChange:d};class CTextarea extends r.Component{componentDidMount(){this.props.didMountCallback&&this.props.didMountCallback()}render(){return r.createElement(CInput,(0,o.Z)({},this.props,{nodeClass:HTMLTextAreaElement,htmlTag:"textarea"}))}}CTextarea.propTypes={didMountCallback:s().func}},26706:(e,t,n)=>{n.d(t,{n:()=>DropdownCustomSelector});var o=n(25773),r=n(53782),i=n(27378),s=n(26725);const a=["content","dropContent","keepDropDown"],DropdownCustomSelector=e=>{const{content:t,dropContent:n,keepDropDown:l=!1}=e,c=(0,r.Z)(e,a),d=l?i.createElement(s.default.Keep,null,n):n;return i.createElement(s.default,(0,o.Z)({},c,{dropContent:d}),i.createElement("div",{className:"dropdown-container"},i.createElement("div",{className:"dropdown-selector"},i.createElement("div",{className:"dropdown-selector-text"},t),i.createElement("span",{className:"dropdown-selector-arrow"}))))}},96433:(e,t,n)=>{n.d(t,{Z:()=>modal_selector_item});var o=n(27378),r=n(90005),i=n.n(r),s=n(97729),a=n(19199);const modal_selector_item=e=>{const{leftText:t,className:n,subComponent:r,value:l,customComponent:c,selectorOptions:d=[],onChange:u,shouldDisableSelect:p=!1,disableSelectTooltip:m="",disableOptionTooltip:h=""}=e,wrapComponentWithTooltip=(e,t,n)=>n?o.createElement(a.default,{key:t,title:n},e):e,f=(0,o.useCallback)((e=>{l!==e&&(null==u||u(e))}),[l,u]),g=(0,o.useMemo)((()=>{const e=o.createElement(s.default,{disabled:p,className:"model-selector-input",value:l,onChange:f},null==d?void 0:d.map(((e,t)=>{const{value:n,text:r,disabled:i}=e,a=o.createElement(s.default.Option,{key:t,disabled:i,value:n},r);return wrapComponentWithTooltip(a,t,i?h:"")})));return wrapComponentWithTooltip(e,-1,p?m:"")}),[h,m,f,d,p,l]);return o.createElement("div",{className:i()(n,"modal-selector-item",{"has-subcomponent":r})},o.createElement("div",{className:"modal-selector-text"},t),o.createElement("div",{className:"modal-selector-component"},c,!c&&g,r&&o.createElement("div",{className:"modal-selector-component-subcomponent"},r)))}},30103:(e,t,n)=>{n.d(t,{_:()=>y});var o,r,i,s,a,l,c,d,u,p,m,h,f,g=n(73428),_=(n(43521),n(66040));const y=new(o=Reflect.metadata("design:type",Function),r=Reflect.metadata("design:paramtypes",[]),i=Reflect.metadata("design:type",Function),s=Reflect.metadata("design:paramtypes",[]),a=Reflect.metadata("design:type",Function),l=Reflect.metadata("design:paramtypes",[]),c=Reflect.metadata("design:type",Function),d=Reflect.metadata("design:paramtypes",[]),u=Reflect.metadata("design:type",Function),p=Reflect.metadata("design:paramtypes",[void 0]),m=Reflect.metadata("design:type",Function),h=Reflect.metadata("design:paramtypes",[]),f=class PagePrint{constructor(){this.targetClassName="",this.style=void 0,this.container=void 0,this.initPrint=!1}injectPrint(e){this.rejectPrint(),this.targetClassName=e,this.initPrint=!0,window.addEventListener("beforeprint",this.setPrintMainHTML),window.addEventListener("afterprint",this.removePrintMainHTML)}rejectPrint(){this.initPrint=!1,window.removeEventListener("beforeprint",this.setPrintMainHTML),window.removeEventListener("afterprint",this.removePrintMainHTML)}print(){this.initPrint&&window.print()}setPrintMainHTML(){var e;const t=null===(e=document.querySelector(`.${this.targetClassName}`))||void 0===e?void 0:e.innerHTML;this.style=this.getStyle(),this.container=this.getContainer(t),document.body.appendChild(this.style),document.body.appendChild(this.container)}removePrintMainHTML(){this.style&&document.body.removeChild(this.style),this.container&&document.body.removeChild(this.container)}getStyle(){const e=document.createElement("style");return e.innerHTML="#print-container {\n      width: 100%;\n      display: none;\n    }\n    @media print {\n      body > :not(#print-container) {\n        display: none;\n      }\n      html,\n      body {\n        height: auto !important;\n        background-color: #F3F5F7;\n        display: block !important;\n        -webkit-print-color-adjust: exact; /* Chrome, Safari */\n        color-adjust: exact; /* Firefox */\n      }\n      #print-container {\n        display: block;\n        overflow: visible;\n      }\n      .print-hide {\n        display: none !important;\n      }\n    }",e}getContainer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.cleanPrint();const t=document.createElement("div");return t.setAttribute("id","print-container"),t.innerHTML=e,t}cleanPrint(){const e=document.getElementById("print-container");var t;e&&(null===(t=document.querySelector("body"))||void 0===t||t.removeChild(e))}},(0,g.Z)(f.prototype,"print",[_.xB,o,r],Object.getOwnPropertyDescriptor(f.prototype,"print"),f.prototype),(0,g.Z)(f.prototype,"setPrintMainHTML",[_.xB,i,s],Object.getOwnPropertyDescriptor(f.prototype,"setPrintMainHTML"),f.prototype),(0,g.Z)(f.prototype,"removePrintMainHTML",[_.xB,a,l],Object.getOwnPropertyDescriptor(f.prototype,"removePrintMainHTML"),f.prototype),(0,g.Z)(f.prototype,"getStyle",[_.xB,c,d],Object.getOwnPropertyDescriptor(f.prototype,"getStyle"),f.prototype),(0,g.Z)(f.prototype,"getContainer",[_.xB,u,p],Object.getOwnPropertyDescriptor(f.prototype,"getContainer"),f.prototype),(0,g.Z)(f.prototype,"cleanPrint",[_.xB,m,h],Object.getOwnPropertyDescriptor(f.prototype,"cleanPrint"),f.prototype),f)},70863:(e,t,n)=>{n.d(t,{D:()=>PCSelector});var o=n(64649),r=n(90005),i=n.n(r),s=n(27378),a=n(19199);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const PCSelector=e=>{const{content:t,className:n,style:o,disabled:r,needToolTipWhenDisabled:l,tooltipTitle:c}=e,d=s.createElement("div",{className:i()("selector-container",n,{disabled:r}),style:_objectSpread({},o)},s.createElement("div",{className:"selector-container-text"},t),s.createElement("div",{className:"selector-container-arrow"}));return r&&l?s.createElement(a.default,{title:c},d):d}},57926:(e,t,n)=>{n.d(t,{Y:()=>openCollectionTimeSettingModal});var o=n(25773),r=n(27378),i=n(78984),s=n(54734),a=n(45607),l=n(60250),c=n(98494),d=n(35047),u=n(28772),p=n(87768),m=n(22501),h=n(49628),f=n(4222),g=n(48620);n(11431);function getObjectValue(e,t){return"string"==typeof t?e[t]:"function"==typeof t?t(e):e}var _=n(90005),y=n.n(_);const SelectableItem=e=>{const{selected:t,onSelectedChange:n,children:o,className:i}=e,s=(0,r.useCallback)((()=>{n(!t)}),[t,n]);return r.createElement("div",{onClick:s,className:y()("weekday-picker-item",i,{selected:t})},o)},b=[{text:s.Z.t("日"),value:0},{text:s.Z.t("一"),value:1},{text:s.Z.t("二"),value:2},{text:s.Z.t("三"),value:3},{text:s.Z.t("四"),value:4},{text:s.Z.t("五"),value:5},{text:s.Z.t("六"),value:6}],pc=e=>{const{value:t=[],onChange:n,className:o,itemClassName:i}=e,{toggle:s}=function useSelection(e,t,n){const o=(0,r.useCallback)((t=>e.findIndex((e=>getObjectValue(e,n)===getObjectValue(t,n)))),[e,n]),i=(0,r.useCallback)((e=>o(e)>-1),[o]),s=(0,r.useCallback)((n=>{const r=o(n),i=[...e];r>-1?i.splice(r,1):i.push(n),null==t||t(i)}),[e,t,o]),a=(0,r.useCallback)((n=>{const r=[...e];o(n)>-1||(r.push(n),null==t||t(r))}),[o,e,t]);return{toggle:s,selected:e,select:a,isSelected:i}}(t,n),a=function useMemoMap(e,t){return(0,r.useMemo)((()=>(0,g.$9)(e,t)),[e,t])}(t,(e=>e.toString()));return(0,r.useEffect)((()=>{var e;null===(e=document.querySelector(".weekday-picker"))||void 0===e||e.scrollIntoView()}),[]),r.createElement("div",{className:y()("weekday-picker",o)},b.map((e=>r.createElement(SelectableItem,{className:i,key:e.value,selected:void 0!==a[e.value],onSelectedChange:()=>{1===t.length&&a[e.value]||s(e.value)}},e.text))))};var E=n(96433),v=n(26706),T=n(5338),S=n(26725),O=n(27693),w=n.n(O),I=n(70863);const time_picker_pc=e=>{const{startTimeValue:t,endTimeValue:n,onStartTimeOk:o,onEndTimeOk:i}=e,a=(0,r.useCallback)((e=>e<=w()(n).hour()),[n]),l=(0,r.useCallback)((e=>e>=w()(t).hour()),[t]);return r.createElement("div",{className:"periodic-time-picker"},r.createElement(S.default,{dropContent:r.createElement(T.ZP,{className:"periodic-time-picker-selector",value:w()(t),onChange:o,embedded:!0,shouldEnableHour:a,showSecond:!1})},r.createElement(I.D,{className:"periodic-time-picker-item",content:w()(t).format("HH:mm")})),r.createElement("span",{className:"periodic-time-picker-text"},s.Z.t("至")),r.createElement(S.default,{dropContent:r.createElement(T.ZP,{className:"periodic-time-picker-selector",value:w()(n),onChange:i,embedded:!0,shouldEnableHour:l,showSecond:!1})},r.createElement(I.D,{className:"periodic-time-picker-item",content:w()(n).format("HH:mm")})))},fake_calendar_pc=e=>{const{value:t,onChange:n,className:o,itemClassName:i}=e,s=(0,r.useMemo)((()=>{const e=[];let t=[];for(let n=1;n<=31;n++)t.push(n),n%7==0&&(e.push(t),t=[]);return t=[...t,NaN,NaN,NaN,NaN],e.push(t),t=[],e}),[]);return(0,r.useEffect)((()=>{var e;null===(e=document.querySelector(".fake-calander"))||void 0===e||e.scrollIntoView()}),[]),r.createElement("div",{className:y()("fake-calander",o)},s.map(((e,o)=>{const s=e.map(((e,o)=>r.createElement("div",{onClick:()=>{isNaN(e)||null==n||n(e)},key:o,className:y()("calander-row-item",i,"flex-and-center",{active:t===e})},isNaN(e)?"":e)));return r.createElement("div",{className:"calander-row",key:o},s)})))};var C=n(53345),R=n(62995);const P={[C.CR.DEFAULT]:"repeat-type-default",[C.CR.DAILY]:"repeat-type-daily",[C.CR.WEEKLY]:"repeat-type-weekly",[C.CR.MONTHLY]:"repeat-type-monthly"},A={"repeat-type-default":C.CR.DEFAULT,"repeat-type-daily":C.CR.DAILY,"repeat-type-weekly":C.CR.WEEKLY,"repeat-type-monthly":C.CR.MONTHLY},repeat_type_picker_pc=e=>{let{isPublished:t,periodicPattern:n,onChange:o}=e;const i=(0,r.useMemo)((()=>t&&n!==C.CR.DEFAULT),[t,n]),c=(0,r.useMemo)((()=>t&&n===C.CR.DEFAULT),[t,n]),d=(0,r.useCallback)((()=>{(0,R.e)({padId:window.clientVars.padId,domainId:window.clientVars.domainId,title:window.clientVars.title,loadingCallback:()=>{(0,l.IG)(a.c3)}})}),[]),u=(0,r.useMemo)((()=>r.createElement("div",{className:"repeat-type-disabled-tips"},r.createElement("div",null,s.Z.t("因设置后会影响统计方式等，发布后无法更改。")),r.createElement("div",null,s.Z.t("如想添加定时重复，可将此文档"),r.createElement("span",{className:"repeat-type-disabled-tips-link",onClick:d},s.Z.t("复制为新收集表")),s.Z.t("后再进行设置。")))),[d]);return r.createElement(E.Z,{className:"periodic-repeat-type",leftText:s.Z.t("重复周期"),value:P[n],selectorOptions:[{value:P[C.CR.DAILY],text:s.Z.t("每日")},{value:P[C.CR.WEEKLY],text:s.Z.t("每周")},{value:P[C.CR.MONTHLY],text:s.Z.t("每月")},{value:P[C.CR.DEFAULT],text:s.Z.t("不重复"),disabled:i}],disableOptionTooltip:s.Z.t("因定时重复后会影响数据统计等，首次发布后不可关闭，仅可更改周期等设置。"),disableSelectTooltip:u,shouldDisableSelect:c,onChange:o})};var D=n(63406),N=n(50460);const L="::",j=[{notifyPattern:C.$S.NONE,notifyBefore:0},{notifyPattern:C.$S.START,notifyBefore:0},{notifyPattern:C.$S.BEFORE,notifyBefore:10},{notifyPattern:C.$S.BEFORE,notifyBefore:15},{notifyPattern:C.$S.BEFORE,notifyBefore:30}];function getNotifyTypePair(e,t){return e===C.$S.START?{text:s.Z.t("开始时"),value:"notify-at-start"}:e===C.$S.BEFORE&&t?{text:s.Z.t("开始前{{notifyBefore}}分钟",{notifyBefore:t}),value:`notify-before${L}${t}`}:{text:s.Z.t("不提醒"),value:"notify-none"}}function getNotifyTypeItemIndex(e,t){const n=j.map((e=>e.notifyPattern)).indexOf(e),o=j.filter((e=>e.notifyBefore>0)).map((e=>e.notifyBefore)).indexOf(t);return-1===o?n:n+o+1}const timed_repeat_panel_group_pc=e=>{let{onSelectionChange:t,isPublished:n,periodicPattern:o,periodicDays:i,allowedStartTime:s,allowedEndTime:a,notifyPattern:l,notifyBefore:c}=e;const{dayOfMonth:d,daysOfWeek:u}=((e,t)=>(0,r.useMemo)((()=>{let n=1,o=[1,2,3,4,5];return e===C.CR.MONTHLY&&t?[n]=t:e===C.CR.WEEKLY&&t&&(o=t),{dayOfMonth:n,daysOfWeek:o}}),[e,t]))(o,i),g=(0,r.useCallback)((e=>{const o=new Date,r=e.hour(),i=e.minute(),s=o.getFullYear(),l=o.getMonth(),c=o.getDate(),d=Number(new Date(s,l,c,r,i)),u=(0,N.qT)(d);null==t||t({type:C.VK.ALLOWED_START_TIME,value:u}),(0,p.G)("edit_cycle","set_time",{ver5:u,ver6:a,ver9:n?6:1})}),[a,n,t]),_=(0,r.useCallback)((e=>{const o=new Date,r=e.hour(),i=e.minute(),a=o.getFullYear(),l=o.getMonth(),c=o.getDate(),d=Number(new Date(a,l,c,r,i)),u=(0,N.qT)(d);null==t||t({type:C.VK.ALLOWED_END_TIME,value:u}),(0,p.G)("edit_cycle","set_time",{ver5:s,ver6:u,ver9:n?6:1})}),[s,n,t]),y=(0,r.useCallback)((e=>{null==t||t({type:C.VK.PERIODIC_DAYS,value:e}),(0,p.G)("edit_cycle","set_type",{ver5:C.CR.WEEKLY,ver6:(0,h.BL)(C.CR.WEEKLY,i||[]),ver9:n?5:1})}),[i,n,t]),b=(0,r.useCallback)((e=>{const o=[e];null==t||t({type:C.VK.PERIODIC_DAYS,value:o}),(0,p.G)("edit_cycle","set_type",{ver5:C.CR.MONTHLY,ver6:(0,h.BL)(C.CR.MONTHLY,o),ver9:n?5:1})}),[n,t]),T=(0,r.useCallback)((e=>{const r=A[e];t({type:C.VK.PERIODIC_PATTERN,value:r}),r===C.CR.DEFAULT&&o!==C.CR.DEFAULT||r!==C.CR.DEFAULT&&o===C.CR.DEFAULT?(0,p.G)("edit_cycle","button_clk",{ver5:r!==C.CR.DEFAULT?1:2,ver6:(0,D.YY)()?1:2,ver9:n?4:1}):(0,p.G)("edit_cycle","set_type",{ver5:r,ver6:(0,h.BL)(r,i||[]),ver9:n?5:1})}),[i,n,t,o]),S=(0,r.useCallback)((e=>{const{notifyBefore:o,notifyPattern:r}=function getNotifyTypeFromText(e){const t={"notify-at-start":C.$S.START,"notify-none":C.$S.NONE}[e];if(t)return{notifyPattern:t,notifyBefore:0};const n=Number(e.split(L)[1]);return{notifyPattern:C.$S.BEFORE,notifyBefore:n}}(e);null==t||t({type:C.VK.NOTIFY_PATTERN,value:r}),null==t||t({type:C.VK.NOTIFY_BEFORE,value:o}),(0,p.G)("edit_cycle","set_remind",{ver5:getNotifyTypeItemIndex(r,o),ver9:n?7:1})}),[n,t]),O=(0,r.useMemo)((()=>o===C.CR.WEEKLY?r.createElement(pc,{value:u,onChange:y}):r.createElement(v.n,{dropContent:r.createElement(fake_calendar_pc,{value:d,onChange:b}),content:m.ZP.t("每月{{dayOfMonth}}日",{dayOfMonth:d})})),[d,u,b,y,o]),w=(0,r.useMemo)((()=>r.createElement(time_picker_pc,{startTimeValue:(0,N.NY)(s),endTimeValue:(0,N.NY)(a),onStartTimeOk:g,onEndTimeOk:_})),[s,a,_,g]),I=(0,r.useMemo)((()=>[C.$S.START,C.$S.BEFORE].includes(a)||!f.kZ.PERIODIC_OFFICIAL_NOTIFY?null:r.createElement("div",{className:"collection-time-notify-notes"},m.ZP.t("默认提醒上一次参与填写的人，他们将在微信或QQ收到腾讯文档的服务号通知。"))),[a]);return r.createElement("div",null,r.createElement(repeat_type_picker_pc,{isPublished:n,periodicPattern:o,onChange:T}),o!==C.CR.DEFAULT&&r.createElement(r.Fragment,null,[C.CR.MONTHLY,C.CR.WEEKLY].includes(o)&&r.createElement(E.Z,{className:"periodic-fill-date",leftText:m.ZP.t("填写日期"),customComponent:O}),r.createElement(E.Z,{className:"periodic-allowed-time",leftText:m.ZP.t("允许填写时间"),customComponent:w}),r.createElement(E.Z,{className:"periodic-notify",leftText:m.ZP.t("提醒填写人"),value:getNotifyTypePair(l,c).value,selectorOptions:j.map((e=>{let{notifyPattern:t,notifyBefore:n}=e;const{text:o,value:r}=getNotifyTypePair(t,n);return{text:o,value:r}})),onChange:S,subComponent:I})))};var M=n(73428),x=(n(43521),n(6210)),F=n(8164);const k=864e13,Z=0;function getDateDetailFromDayjs(e){return{year:e.year(),month:e.month(),day:e.date(),hour:e.hour(),minute:e.minute()}}function checkIsDateInRange(e,t,n){const{year:o}=getDateDetailFromDayjs(e),{year:r}=getDateDetailFromDayjs(w()(t)),{year:i}=getDateDetailFromDayjs(w()(n));if(!(o>=r&&o<=i))return!1;const s=function checkIsMonthValidHelper(e,t,n){const{year:o,month:r}=getDateDetailFromDayjs(e),{year:i,month:s}=getDateDetailFromDayjs(w()(t)),{year:a,month:l}=getDateDetailFromDayjs(w()(n)),c=o===i,d=o===a;let u=!0;c&&d?u=r>=s&&r<=l:d?u=r<=l:c&&(u=r>=s);return u}(e,t,n);return!!s&&function checkIsDayValidHelper(e,t,n){const{year:o,month:r,day:i}=getDateDetailFromDayjs(e),{year:s,month:a,day:l}=getDateDetailFromDayjs(w()(t)),{year:c,month:d,day:u}=getDateDetailFromDayjs(w()(n)),p=o===s,m=o===c,h=p&&r===a,f=m&&r===d;let g=!0;h&&f?g=i>=l&&i<=u:f?g=i<=u:h&&(g=i>=l);return g}(e,t,n)}const calendar_date_picker=e=>{const{time:t,minTime:n=Z,maxTime:o=k,onTimeChange:i}=e,[c,d]=(0,r.useState)(t||0);(0,r.useEffect)((()=>{d(t)}),[t]);const p=(0,r.useMemo)((()=>c>=n&&c<=o),[c,o,n]),m=(0,r.useCallback)((()=>{p?null==i||i(c):(0,l.IG)(s.Z.t("时间设置不合法"))}),[c,p,i]),h=(0,r.useCallback)((()=>{null==i||i(0)}),[i]),f=(0,r.useCallback)((e=>{const{year:t,month:n,day:o}=getDateDetailFromDayjs(e),{hour:r,minute:i}=getDateDetailFromDayjs(w()(c)),s=new Date(t,n,o,r,i);d(Number(s))}),[c]),g=(0,r.useCallback)((e=>{const{year:t,month:n,day:o}=getDateDetailFromDayjs(w()(c)),{hour:r,minute:i}=getDateDetailFromDayjs(e),s=new Date(t,n,o,r,i);d(Number(s))}),[c]),_=(0,r.useCallback)((e=>checkIsDateInRange(e,w()(n),w()(o))),[o,n]);return r.createElement("div",{className:"calendar-date-picker"},r.createElement("div",{className:"calendar-date-picker-operators"},r.createElement(F.ZP,{value:w()(c),showFooter:!1,shouldEnableDate:_,onChange:f}),r.createElement("div",{className:"calendar-date-picker-operators-time"},r.createElement("div",{className:"calendar-date-picker-operators-text"},w()(c).format("HH:mm")),r.createElement(T.ZP,{value:w()(c),onChange:g,embedded:!0,showFooter:!1,showSecond:!1}))),r.createElement("div",{className:"calendar-date-picker-buttons"},r.createElement("div",{className:"calendar-date-picker-buttons-cancel",onClick:h},r.createElement("div",{className:"calendar-date-picker-buttons-cancel-icon"}),r.createElement("div",{className:"calendar-date-picker-buttons-cancel-text"},s.Z.t("移除"))),r.createElement(u.default,{size:"small",type:"primary",disabled:!p,onClick:m},a.z7)))};class EndTimeSettingItemBase extends r.Component{constructor(e){super(e),this.state={isTimePickerVisible:!1}}get defaultEndTime(){const{endTime:e,startTime:t}=this.props;return e||(t?Math.max(Number((0,h.Wy)(t)),Number(w()())):Number((0,h.Wy)()))}get minLimitedDate(){const{startTime:e}=this.props,t=w()();if(!e)return t;const n=w()(e);return n<t?t:n}}const B=EndTimeSettingItemBase;var U,G,H,V,q,Q=n(66040);let K=(U=Reflect.metadata("design:type",Function),G=Reflect.metadata("design:paramtypes",[Boolean]),H=Reflect.metadata("design:type",Function),V=Reflect.metadata("design:paramtypes",[Number]),q=class EndTimeSettingItemPC extends B{render(){const{endTime:e}=this.props,{isTimePickerVisible:t}=this.state;return r.createElement(v.n,{keepDropDown:!0,visible:t,onVisibleChange:this.handleDropdownVisiblityChange,dropContent:r.createElement(calendar_date_picker,{time:this.defaultEndTime,minTime:Number(this.minLimitedDate),onTimeChange:this.handleTimeChange}),content:(0,x.u6)(e)})}handleDropdownVisiblityChange(e){this.setState({isTimePickerVisible:e})}handleTimeChange(e){const{startTime:t,onTimeChange:n}=this.props;this.setState({isTimePickerVisible:!1}),e&&e<=Math.max(t,Date.now())||n(e)}},(0,M.Z)(q.prototype,"handleDropdownVisiblityChange",[Q.xB,U,G],Object.getOwnPropertyDescriptor(q.prototype,"handleDropdownVisiblityChange"),q.prototype),(0,M.Z)(q.prototype,"handleTimeChange",[Q.xB,H,V],Object.getOwnPropertyDescriptor(q.prototype,"handleTimeChange"),q.prototype),q);class StartTimeSettingItemBase extends r.Component{constructor(e){super(e),this.state={isTimePickerVisible:!1}}get defaultStartTime(){const{startTime:e}=this.props;return e||Date.now()}}const W=StartTimeSettingItemBase;var $,Y,z,X,J;let ee=($=Reflect.metadata("design:type",Function),Y=Reflect.metadata("design:paramtypes",[Boolean]),z=Reflect.metadata("design:type",Function),X=Reflect.metadata("design:paramtypes",[Number]),J=class StartTimeSettingItemPC extends W{render(){const{startTime:e,endTime:t}=this.props,{isTimePickerVisible:n}=this.state;return r.createElement(v.n,{keepDropDown:!0,visible:n,onVisibleChange:this.handleDropdownVisibilityChanged,dropContent:r.createElement(calendar_date_picker,{time:this.defaultStartTime,maxTime:t||void 0,onTimeChange:this.handleTimeChange}),content:(0,x.u6)(e)})}handleDropdownVisibilityChanged(e){this.setState({isTimePickerVisible:e})}handleTimeChange(e){const{endTime:t,onTimeChange:n}=this.props;this.setState({isTimePickerVisible:!1}),t&&e>=t||n(e)}},(0,M.Z)(J.prototype,"handleDropdownVisibilityChanged",[Q.xB,$,Y],Object.getOwnPropertyDescriptor(J.prototype,"handleDropdownVisibilityChanged"),J.prototype),(0,M.Z)(J.prototype,"handleTimeChange",[Q.xB,z,X],Object.getOwnPropertyDescriptor(J.prototype,"handleTimeChange"),J.prototype),J);var te=n(64649),ne=n(26338);const oe={start:324e5,end:648e5};let re;!function(e){e[e.Repeat=0]="Repeat",e[e.FillDate=1]="FillDate",e[e.FillTime=2]="FillTime",e[e.Notify=3]="Notify"}(re||(re={}));C.CR.DEFAULT,C.CR.DAILY,s.Z.t("每日"),C.CR.WEEKLY,s.Z.t("每周"),C.CR.MONTHLY,s.Z.t("每月");let ie;!function(e){e.Start="start-picker-time",e.End="end-picker-time"}(ie||(ie={}));s.Z.t("日"),s.Z.t("一"),s.Z.t("二"),s.Z.t("三"),s.Z.t("四"),s.Z.t("五"),s.Z.t("六");var se,ae,le,ce,de,ue,pe,me,he,fe=n(19541);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,te.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let ge=(se=Reflect.metadata("design:type",Function),ae=Reflect.metadata("design:paramtypes",[]),le=Reflect.metadata("design:type",Function),ce=Reflect.metadata("design:paramtypes",[Object]),de=Reflect.metadata("design:type",Function),ue=Reflect.metadata("design:paramtypes",[Number]),pe=Reflect.metadata("design:type",Function),me=Reflect.metadata("design:paramtypes",[Number]),he=class CollectionTimeBase extends r.Component{constructor(e){super(e);const{startTime:t,endTime:n,relatedPeriodic:{isPeriodic:o,periodicPattern:r,notifyBefore:i,notifyPattern:s,periodicDays:a,allowedStartTime:l,allowedEndTime:c}}=e;this.state={innerIsPeriodic:o,innerStartTime:t,innerEndTime:n,innerPeriodicPattern:r,innerNotifyBefore:i,innerNotifyPattern:s,innerPeriodicDays:a,innerAllowedStartTime:l,innerAllowedEndTime:c}}get shouldRenderPeriodicCollection(){var e,t;const{formType:n}=this.props;return!(null===(e=(0,c.n)(n))||void 0===e||null===(t=e.setting)||void 0===t||!t.usePeriodic)}get tdwDaysDetail(){const{innerPeriodicPattern:e,innerPeriodicDays:t}=this.state;let n=String(0);return e===C.CR.WEEKLY?n=t.join(", "):e===C.CR.MONTHLY&&(n=String(t[0])),n}get hasIsPeriodicChanged(){const{relatedPeriodic:{isPeriodic:e}}=this.props,{innerIsPeriodic:t}=this.state;return t!==e}get hasTimeSettingsChanged(){const{innerStartTime:e,innerEndTime:t}=this.state,{startTime:n,endTime:o}=this.props;return e!==n||t!==o}get hasPeriodicSettingsChanged(){const{innerPeriodicPattern:e,innerNotifyPattern:t,innerNotifyBefore:n,innerAllowedStartTime:o,innerAllowedEndTime:r,innerPeriodicDays:i}=this.state,{relatedPeriodic:{periodicPattern:s,notifyPattern:a,notifyBefore:l,allowedStartTime:c,allowedEndTime:d,periodicDays:u}}=this.props;return e!==s||t!==a||n!==l||o!==c||r!==d||!(0,ne.default)(i,u)}get isTimeSettingInvalid(){const{innerEndTime:e,innerStartTime:t}=this.state,n=Date.now();return!(!e||!(e<=n||e<=t))}get isAllowedTimeInvalid(){const{innerAllowedStartTime:e,innerAllowedEndTime:t}=this.state;return e>=t}handleOk(){const{innerStartTime:e}=this.state;if(this.isTimeSettingInvalid){const t=e<Date.now()?s.Z.t("当前时间"):s.Z.t("开始时间");return(0,l.IG)(s.Z.t("截止时间需大于{{limitTimeText}}，请重新设置",{limitTimeText:t})),void this.setState({innerEndTime:0})}if(this.isAllowedTimeInvalid){const{relatedPeriodic:{allowedStartTime:e,allowedEndTime:t}}=this.props;return(0,l.IG)(s.Z.t("请保证允许填写开始时间早于允许填写截止时间")),void this.setState({innerAllowedStartTime:e,innerAllowedEndTime:t})}this.props.onClose(),this.updatePeriodicSettings()}handlePeriodicSelectionOk(e){let{type:t,value:n}=e;const{innerNotifyPattern:o,innerAllowedStartTime:r,innerAllowedEndTime:i}=this.state,s={[C.VK.PERIODIC_PATTERN]:"innerPeriodicPattern",[C.VK.NOTIFY_PATTERN]:"innerNotifyPattern",[C.VK.NOTIFY_BEFORE]:"innerNotifyBefore",[C.VK.ALLOWED_START_TIME]:"innerAllowedStartTime",[C.VK.ALLOWED_END_TIME]:"innerAllowedEndTime",[C.VK.PERIODIC_DAYS]:"innerPeriodicDays"},a={[s[t]]:n};if(this.setState(a),t===C.VK.PERIODIC_PATTERN)if(n===C.CR.DEFAULT){const{relatedPeriodic:{notifyPattern:e,notifyBefore:t,periodicDays:n,allowedStartTime:o,allowedEndTime:r}}=this.props;this.setState({innerIsPeriodic:!1,innerPeriodicPattern:C.CR.DEFAULT,innerNotifyBefore:t,innerPeriodicDays:n,innerAllowedStartTime:o,innerAllowedEndTime:r,innerNotifyPattern:e})}else{let e=[];n===C.CR.WEEKLY?e=[1,2,3,4,5]:n===C.CR.MONTHLY&&(e=[1]),this.setState({innerPeriodicDays:e,innerIsPeriodic:!0}),o===C.$S.DEFAULT&&this.setState({innerNotifyPattern:C.$S.NONE}),r||i||this.setState({innerAllowedStartTime:oe.start,innerAllowedEndTime:oe.end})}}handleInnerStartTimeChanged(e){this.setState({innerStartTime:e})}handleInnerEndTimeChanged(e){this.setState({innerEndTime:e})}updatePeriodicSettings(){const{innerStartTime:e,innerEndTime:t,innerIsPeriodic:n,innerPeriodicPattern:o,innerNotifyPattern:r,innerNotifyBefore:i,innerAllowedStartTime:c,innerAllowedEndTime:d,innerPeriodicDays:u}=this.state,{startTime:m,endTime:f,isClosed:g,isPublished:_,updatePeriodicRelated:y}=this.props,{hasIsPeriodicChanged:b,hasTimeSettingsChanged:E,hasPeriodicSettingsChanged:v}=this;if(!E&&!b&&!v)return;const T={startTime:e,endTime:t},S={periodicPattern:o,notifyPattern:r,notifyBefore:i,allowedStartTime:c,allowedEndTime:d,periodicDays:u},O={};if(!_)return E&&(O.collection=T),b&&(O.relatedPeriodic=_objectSpread(_objectSpread({},O.relatedPeriodic),{},{isPeriodic:n})),n&&v&&(O.relatedPeriodic=_objectSpread(_objectSpread(_objectSpread({},O.relatedPeriodic),S),{},{isPeriodic:!0})),y(O,{successCb:()=>{(0,l.IG)(s.Z.t("设置成功"),{type:fe.g.SUCCESS}),e!==m&&(0,p.G)("edit_cycle","turn_on",{ver5:e,ver9:_?2:1}),n&&(0,p.G)("edit_cycle","success",{ver5:o,ver6:(0,h.BL)(o,u),ver7:c,ver8:d,ver9:_?8:1,ver10:getNotifyTypeItemIndex(r,i)})}});if(E&&(O.collection=T),v&&(O.relatedPeriodic=S),!E)return y(O);if((0,x.xv)(e,t,g))(0,l.N4)({title:s.Z.t("提示"),content:s.Z.t("当前已处于暂停收集状态，修改时间后不会开启收集"),cancelText:null,okText:a.CS,onOk:()=>{y(O,{successCb:()=>{e!==m&&(0,p.G)("edit_cycle","turn_on",{ver5:e,ver9:_?2:1}),t!==f&&(0,D.YY)()&&(0,p.G)("edit","set_ddl"),(0,l.IG)(s.Z.t("设置时间成功"),{type:fe.g.SUCCESS})},failureCb:()=>{(0,l.IG)(s.Z.t("设置时间失败"))}})}});else{const handleOK=()=>{y(O,{successCb:()=>{(0,l.IG)(s.Z.t("设置成功"),{type:fe.g.SUCCESS}),e!==m&&(0,p.G)("edit_cycle","turn_on",{ver5:e,ver9:_?2:1})}})};if(!g&&e>Date.now())return void(0,l.N4)({title:s.Z.t("提示"),content:s.Z.t("当前已处于收集状态，修改时间后不会暂停收集"),cancelText:null,okText:a.CS,onOk:handleOK});handleOK()}}},(0,M.Z)(he.prototype,"handleOk",[Q.xB,se,ae],Object.getOwnPropertyDescriptor(he.prototype,"handleOk"),he.prototype),(0,M.Z)(he.prototype,"handlePeriodicSelectionOk",[Q.xB,le,ce],Object.getOwnPropertyDescriptor(he.prototype,"handlePeriodicSelectionOk"),he.prototype),(0,M.Z)(he.prototype,"handleInnerStartTimeChanged",[Q.xB,de,ue],Object.getOwnPropertyDescriptor(he.prototype,"handleInnerStartTimeChanged"),he.prototype),(0,M.Z)(he.prototype,"handleInnerEndTimeChanged",[Q.xB,pe,me],Object.getOwnPropertyDescriptor(he.prototype,"handleInnerEndTimeChanged"),he.prototype),he);async function openCollectionTimeSettingModal(e){var t,n,s;const a=null!==(t=null===(n=(0,c.n)(e.formType))||void 0===n||null===(s=n.setting)||void 0===s?void 0:s.timeDefMainTitle)&&void 0!==t?t:"",{close:d}=await(0,l.N4)({className:"collection-time-modal",title:a,footer:null,content:r.createElement(CollectionTimePC,(0,o.Z)({},e,{onClose:()=>d()}))});[i.c.TASK].includes(e.formType)||(0,p.G)("edit_cycle","button_view",{ver9:e.isPublished?3:1})}class CollectionTimePC extends ge{render(){const{onClose:e}=this.props,{innerStartTime:t,innerEndTime:n}=this.state;return r.createElement("div",{className:"collection-time"},r.createElement("div",{className:"collection-time-content"},r.createElement("div",{className:"collection-time-content-tips"},s.Z.t("有效时间限制")),r.createElement("div",{className:"collection-time-content-main"},r.createElement(E.Z,{leftText:s.Z.t("定时开始"),customComponent:r.createElement(ee,{startTime:t,endTime:n,onTimeChange:this.handleInnerStartTimeChanged})}),r.createElement(E.Z,{leftText:s.Z.t("自动截止时间"),customComponent:r.createElement(K,{startTime:t,endTime:n,onTimeChange:this.handleInnerEndTimeChanged})})),this.shouldRenderPeriodicCollection&&this.renderPeriodicCollection()),r.createElement("div",{className:"collection-time-btns"},r.createElement(u.default,{onClick:e},a.OS),r.createElement(u.default,{className:"collection-time-btns-confirm",type:"primary",onClick:this.handleOk},a.z7)))}renderPeriodicCollection(){const{isPublished:e,relatedSheet:{globalPadId:t,subType:n}}=this.props,{innerPeriodicPattern:o,innerNotifyPattern:i,innerAllowedStartTime:a,innerAllowedEndTime:l,innerPeriodicDays:c,innerNotifyBefore:u}=this.state;return r.createElement(r.Fragment,null,r.createElement(d.ZP,{className:"collection-time-content-divider"}),r.createElement("div",{className:"collection-time-content-tips"},s.Z.t("定时重复")),r.createElement("div",{className:"collection-time-content-main"},r.createElement(timed_repeat_panel_group_pc,{isPublished:e,relatedSheetGlobalPadId:t,relatedSheetType:n,periodicPattern:o,notifyPattern:i,periodicDays:c,allowedStartTime:a,allowedEndTime:l,notifyBefore:u,onSelectionChange:this.handlePeriodicSelectionOk})))}}},49628:(e,t,n)=>{n.d(t,{Wy:()=>getDefaultDate,cg:()=>getCollectTimeDescription,BL:()=>getReportDaysDetail});n(11431);var o=n(27693),r=n.n(o),i=n(54734),s=n(53345),a=n(58628),l=n(6210);function getDefaultDate(e){const t=e?new Date(e):new Date,n=t.getFullYear(),o=t.getMonth(),r=t.getDate(),i=t.getHours(),s=t.getMinutes();return new Date(n,o,r+7,i,s)}function getTimeStringDate(e,t){const n=new Date(e),o=n.getFullYear(),[r,i]=[n.getMonth()+1,n.getDate()].map((e=>`${e}`.padStart(2,"0"))),s=`${r}-${i}`;return t?`${o}-${s}`:s}function getDescriptionForTime(e,t,n){if(!e&&!t)return"";if(e&&t){const n=function checkIsCrossYear(e,t){const n=new Date(t).getFullYear(),o=new Date(e).getFullYear(),r=(new Date).getFullYear();return r!==o||r!==n}(e,t),o=getTimeStringDate(e,n),s=getTimeStringDate(t,n);return r()(e).isSame(r()(t),"day")?`${o} ${r()(e).format("HH:mm")}-${r()(t).format("HH:mm")}`:i.Z.t("{{startString}}至{{endString}}",{startString:o,endString:s})}if(e){const t=(0,l.u6)(e,n);return i.Z.t("{{dateStr}}开始",{dateStr:t})}const o=(0,l.u6)(t,n);return i.Z.t("{{dateStr}}截止",{dateStr:o})}function getCollectTimeDescription(e){let{startTime:t,endTime:n,periodicPattern:o,isPeriodic:r,periodicDays:l,defaultText:c=i.Z.t("未设置")}=e;if(!(t||n||r&&o!==s.CR.DEFAULT))return c;let d="";r&&(d=(0,a.$E)(r,o,l));const u=getDescriptionForTime(t,n,!!d);return d&&u?`${d}, ${u}`:d||u}function getReportDaysDetail(e,t){let n=String(0);return e===s.CR.WEEKLY?n=t.join(", "):e===s.CR.MONTHLY&&(n=String(t[0])),n}},65162:(e,t,n)=>{n.d(t,{_u:()=>getSubmitRoleName,L:()=>hasFilters,AC:()=>filterConfigToReport,t9:()=>transFilterConfig,Lv:()=>transFilterConfigSetting,g1:()=>inverseTransFilterConfig,OQ:()=>getTimeRange});var o=n(64649),r=n(54734);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getSubmitRoleName=(e,t)=>{var n;const o=(e=>{var t;return e&&1!==(null===(t=e.role)||void 0===t?void 0:t.role)?r.Z.t("家长："):r.Z.t("昵称：")})(e);return`${o}${(null==e||null===(n=e.role)||void 0===n?void 0:n.name)||t}`};function hasFilters(e){var t,n;return e.startTime||e.endTime||e.searchText||(null===(t=e.questionFilter)||void 0===t?void 0:t.length)||(null===(n=e.questionIds)||void 0===n?void 0:n.length)}const filterConfigToReport=e=>{var t,n;return e?{ver5:e.startTime||e.endTime?"1":"0",ver6:e.searchText?"1":"0",ver7:null!==(t=e.questionFilter)&&void 0!==t&&t.length?"1":"0",ver8:null!==(n=e.questionIds)&&void 0!==n&&n.length?"1":"0"}:{ver5:"0",ver6:"0",ver7:"0",ver8:"0"}},transFilterConfig=e=>e?_objectSpread(_objectSpread(_objectSpread(_objectSpread({},e.startTime||e.endTime?{time_range:getTimeRange(e)}:null),e.searchText?{search_text:e.searchText}:null),e.questionFilter?{question_filters:e.questionFilter}:null),e.questionIds?{question_ids:e.questionIds.map((e=>({id:e})))}:null):{},transFilterConfigSetting=e=>_objectSpread({time_range:_objectSpread(_objectSpread({},e.startTime?{since:new Date(e.startTime).toISOString()}:null),e.endTime?{until:new Date(e.endTime).toISOString()}:null),cost_range:_objectSpread(_objectSpread({},e.costRangeMin?{gt:e.costRangeMin}:null),e.costRangeMax?{lt:e.costRangeMax}:null),search_text:e.searchText,question_filters:e.questionFilter||[]},e.questionIds?{viewable_questions:{questions:e.questionIds}}:null),inverseTransFilterConfig=e=>{var t,n,o,r;return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},null!=e&&null!==(t=e.cost_range)&&void 0!==t&&t.lt?{costRangeMax:e.cost_range.lt}:{}),null!=e&&null!==(n=e.cost_range)&&void 0!==n&&n.gt?{costRangeMin:e.cost_range.gt}:{}),null!=e&&null!==(o=e.time_range)&&void 0!==o&&o.since?{startTime:new Date(e.time_range.since).getTime()}:{}),null!=e&&null!==(r=e.time_range)&&void 0!==r&&r.until?{endTime:new Date(e.time_range.until).getTime()}:{}),null!=e&&e.search_text?{searchText:e.search_text}:{}),null!=e&&e.question_filters?{questionFilter:e.question_filters}:{}),null!=e&&e.viewable_questions?{questionIds:e.viewable_questions.questions}:{})};function getTimeRange(e){const{startTime:t,endTime:n}=e;return t||n?t&&!n?{since:new Date(t).toISOString(),range_type:0}:!t&&n?{since:new Date(n).toISOString(),range_type:1}:{since:new Date(t).toISOString(),until:new Date(n).toISOString(),range_type:2}:{}}},39221:(e,t,n)=>{n.r(t),n.d(t,{RosterInfoBarPC:()=>R,default:()=>P});var o=n(64649),r=n(73428),i=(n(43521),n(27378)),s=n(90005),a=n.n(s),l=n(26725),c=n(80617),d=n(35047),u=n(60250),p=n(66040),m=n(7038),h=n(54734),f=n(87768),g=(n(11431),n(26338)),_=n(75645),y=n(75615),b=n(45607);class RosterInfoBar extends i.Component{constructor(){super(...arguments),this.sumbittedMember=[]}componentDidMount(){const{member:e}=this.props;e&&this.verifyInfoHasSubmitted()}componentDidUpdate(e){const{member:t}=this.props;t&&!(0,g.default)(t,e.member)&&this.verifyInfoHasSubmitted()}get roleName(){var e,t;const{member:n,rosterType:o}=this.props;return n?{[m.r.COMMON]:(null===(e=n.role)||void 0===e?void 0:e.name)||"",[m.r.STUDENT]:(null===(t=n.child)||void 0===t?void 0:t.name)||""}[o]:""}get selectedIndex(){const{rosterType:e,boundMembers:t,member:n}=this.props;return e===m.r.COMMON?t.findIndex((e=>{var t;return(null===(t=e.role)||void 0===t?void 0:t.name)===this.roleName})):e===m.r.STUDENT?t.findIndex((e=>e.identity_id===n.identity_id)):0}get validatedRoleText(){const{isEdit:e,error:t,isFill:n}=this.props;return t?h.Z.t("请填写"):e?h.Z.t("预览"):n?this.roleName||h.Z.t("去完成"):this.roleName||h.Z.t("未完成")}renderTag(){const{showChangeInfoTag:e}=this.props;if(!e||!this.roleName)return null;const{isEdit:t}=this.props;return i.createElement("div",{className:a()("roster-tag",{"more-icon":t,"change-icon":!t,"in-left":!!this.roleName})})}renderRosterVerifyInfo(){const{error:e}=this.props;return i.createElement("div",{className:"roster-extra-info"},i.createElement("span",{className:a()("roster-value",{"roster-error":e})},i.createElement("span",{className:"roster-role"},this.validatedRoleText)))}renderRosterInfoIcon(){return i.createElement("div",{className:a()("roster-info-icon",{"mini-roster-icon":!!this.roleName})})}renderRosterInfoBarTitle(){if(this.roleName)return i.createElement("div",{className:"roster-info-title"},h.Z.t("填写身份"));const{error:e,showChangeInfoTag:t}=this.props;return i.createElement("div",{className:"roster-info-bar-verify-tips"},i.createElement("span",{className:"add-roster"},h.Z.t("加入名单")),i.createElement("span",{className:a()("tips",{"roster-error":e,"show-change-tag":t})},this.validatedRoleText))}renderRosterVerifyTitle(){return i.createElement("div",{className:"roster-info-bar-left"},this.renderVerifyTitleWithValue())}renderVerifyTitleWithValue(){const{title:e}=this.props;return i.createElement("span",{className:"roster-info-bar-verify"},i.createElement("span",{className:"roster-info-bar-verify-title"},i.createElement("span",null,e.slice(0,e.length-2))),i.createElement("span",{className:"roster-info-bar-verify-extra-title"},`${e.slice(e.length-2)}：`))}async getSubmittedList(){var e,t;const{member:n,globalPadId:o}=this.props;if(!o||!n)return[];const{identity_id:r,roster_id:i}=n;if(!r||!i)return[];const s={globalPadId:o,member:n},{data:a,error:l}=await(0,_.Hv)(s);return l||null!=a&&a.retcode||0===(null==a||null===(e=a.result)||void 0===e||null===(t=e.members)||void 0===t?void 0:t.length)?[]:null==a?void 0:a.result.members}submittedModal(){var e,t;const{canMultiSubmit:n}=this.props,o=y.go[(null===(e=this.sumbittedMember[0])||void 0===e?void 0:e.role.role)-1],r=(null===(t=this.sumbittedMember[0])||void 0===t?void 0:t.role.role)-1==0?"":h.Z.t("的"),i=n?"":h.Z.t("，您无需填写");(0,f.G)("fill_class_list","multi_parents_view"),(0,u.N4)({title:h.Z.t("其他家长已提交"),content:h.Z.t("收集表已由{{childInfo}}{{tag}}{{roleType}}完成{{tips}}",{childInfo:this.roleName,tag:r,roleType:o,tips:i}),okText:b.ce,cancelText:null,onOk:()=>{(0,f.G)("fill_class_list","multi_parents_clk",{ver5:n?2:1})}})}async verifyInfoHasSubmitted(){var e;const{rosterType:t,isClosed:n,member:o}=this.props;if(t!==m.r.STUDENT||n)return;this.sumbittedMember=await this.getSubmittedList();const r=null!==(e=o.identity_id)&&void 0!==e?e:"",i=this.sumbittedMember.findIndex((e=>(null==e?void 0:e.identity_id)===r));return 0!==this.sumbittedMember.length&&-1===i?this.submittedModal():void 0}}RosterInfoBar.defaultProps={showChangeInfoTag:!0,rosterType:m.r.COMMON,boundMembers:[],isClosed:!1};const E=RosterInfoBar;var v=n(25773),T=n(83845);const RosterVerifyModalContent=e=>i.createElement(T.Z,(0,v.Z)({showTitle:!1,showButton:e.showButton||"modalFill"},e)),modal=e=>({content:i.createElement(RosterVerifyModalContent,e),title:e.modalTitle,footer:null,className:"roster-verify-modal"});var S,O,w,I,C;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let R=(S=Reflect.metadata("design:type",Function),O=Reflect.metadata("design:paramtypes",[String,Boolean]),w=Reflect.metadata("design:type",Function),I=Reflect.metadata("design:paramtypes",[String,String]),C=class RosterInfoBarPC extends E{render(){const{isEdit:e,showChangeInfoTag:t,boundMembers:n,ref:o}=this.props;return i.createElement("div",{ref:o,className:a()("roster-info",{"roster-default-info":e,"show-change-tag":t}),onClick:()=>this.handleChangeInfoTagClicked()},this.renderRosterInfoIcon(),i.createElement(l.default,{dropContent:this.renderChangeVerifyMenu(),placement:"bottom",className:"change-list-dropdown",disabled:e||!(null!=n&&n.length)||!t},this.renderRosterInfoBarTitle(),this.roleName&&i.createElement("div",{className:"roster-info-bar-content"},i.createElement("div",{className:a()("roster-info-bar-content-top",{"contain-change-tag":t})},this.renderRosterVerifyTitle(),this.renderRosterVerifyInfo()),this.renderTag())))}async handleChangeInfoTagClicked(e,t){const{showChangeInfoTag:n,isEdit:o,value:r,boundMembers:i}=this.props;if(!n||!t&&!o&&(r||null!=i&&i.length))return;const{formTitle:s,globalPadId:a,title:l,ownerAvatar:c,ownerNick:d,handleRosterVerifyConfirm:p,getHistoryList:g,onClear:_,onItemDelete:y,rosterType:b}=this.props,E={title:l,value:e||""},{close:v}=await(0,u.N4)(modal(_objectSpread(_objectSpread({primaryContent:E,formTitle:s,globalPadId:a,ownerAvatar:c,ownerNick:d,showTitle:!1,rosterType:b,modalTitle:o?h.Z.t("名单填写预览"):h.Z.t("加入名单"),onClickButton:e=>{null==p||p(e),(0,f.G)("fill","add_list_role",{ver6:{[m.r.STUDENT]:1,[m.r.EMPLOYEE]:2,[m.r.COMMON]:3,[m.r.DEFAULT]:0,[m.r.NOT_SET]:0}[b]}),v()},onClose:()=>v()},o?{disabled:!0,showButton:"modalEdit",inputPlaceholder:h.Z.t("待填写人完成")}:{disabled:!1,showButton:"modalFill",inputPlaceholder:h.Z.t("请输入")}),{},{getHistoryList:g,onClear:_,onItemDelete:y})))}rosterVerifyName(e){var t,n,o;const{rosterType:r}=this.props;return null!==(t={[m.r.STUDENT]:null===(n=e.child)||void 0===n?void 0:n.name,[m.r.COMMON]:null===(o=e.role)||void 0===o?void 0:o.name}[r])&&void 0!==t?t:""}renderReviseVerifyInfo(e){const{rosterType:t}=this.props;if(t===m.r.COMMON)return i.createElement(c.default,{onClick:t=>this.handleMenuClick(t.toString(),e),itemStyle:{padding:"8px 16px"},type:"with-icon"},i.createElement(c.default.Item,{id:"reviseVerifyInfo"},h.Z.t("修改身份信息")))}renderChangeVerifyTitle(){return i.createElement(c.default.Item,{style:{padding:"9px 16px"},key:"title",disabled:!0},h.Z.t("切换填写身份"))}renderChangeVerifyList(){const{boundMembers:e}=this.props;return e&&e.length?e.map(((e,t)=>i.createElement(c.default.Item,{id:t.toString(),key:t,selected:this.selectedIndex===t,action:this.renderReviseVerifyInfo(this.rosterVerifyName(e)),className:"roster-change-info-list"},i.createElement("span",{className:"text"},this.rosterVerifyName(e))))):null}renderAddVerifyInfo(){return i.createElement(c.default.Item,{style:{padding:"9px 16px",width:"100%"},id:"addNewVerifyInfo"},i.createElement("div",{className:"create-new-roster-info"},i.createElement("span",{className:"add"},h.Z.t("添加"))))}renderChangeVerifyMenu(){return i.createElement(c.default,{onClick:e=>this.handleMenuClick(e.toString()),itemStyle:{width:"200px"}},this.renderChangeVerifyTitle(),this.renderChangeVerifyList(),i.createElement(d.ZP,null),this.renderAddVerifyInfo())}handleMenuClick(e,t){if("reviseVerifyInfo"===e||"addNewVerifyInfo"===e)return void this.handleChangeInfoTagClicked(t,!0);const n=parseInt(e,10);this.handleSelect(n)}handleSelect(e){const{changeRosterInfo:t,boundMembers:n}=this.props;null!=n&&n.length&&e>-1&&(null==t||t(n[e]))}},(0,r.Z)(C.prototype,"handleChangeInfoTagClicked",[p.xB,S,O],Object.getOwnPropertyDescriptor(C.prototype,"handleChangeInfoTagClicked"),C.prototype),(0,r.Z)(C.prototype,"handleMenuClick",[p.xB,w,I],Object.getOwnPropertyDescriptor(C.prototype,"handleMenuClick"),C.prototype),C);const P=R},16095:(e,t,n)=>{n.d(t,{m:()=>getRosterPrimaryKeyTitle});n(11431),n(54370),n(5153),n(80566),n(50870),n(75397),n(18829),n(51429),n(25376),n(95864),n(94565),n(95073),n(65204),n(47072),n(98391),n(22727),n(19647);var o=n(54734),r=n(75615),i=n(7038);function getRosterPrimaryKeyTitle(e){var t,n,s;const a=null!==(t=null==e||null===(n=e[0])||void 0===n?void 0:n.type)&&void 0!==t?t:i.r.COMMON,l=o.Z.t("姓名");if(a===i.r.COMMON){const t=o.Z.t("填写身份"),n=[...new Set(null==e?void 0:e.map((e=>{let{columnHeader:t}=e;return t||l})))];return[l,n[0]][n.length]||t}return null!==(s={[i.r.STUDENT]:r.BY.NAME}[a])&&void 0!==s?s:l}},83845:(e,t,n)=>{n.d(t,{Z:()=>z});var o=n(73428),r=(n(43521),n(11431),n(27378)),i=n(28772),s=n(35047),a=n(66040),l=n(45607),c=n(64649),d=n(90005),u=n.n(d),p=n(56356),m=n(7387),h=n(14042),f=n(75615),g=n(60250),_=n(54734),y=n(70740),b=n(75645),E=n(87768),v=n(7038),T=n(25773),S=n(53782),O=n(11753),w=n(39160);const I=["label","key","className","getHistoryList","onClear","onItemDelete","onItemClick","showHistory"];function InputWithLabel(e){const{label:t,key:n,className:o,getHistoryList:i,onClear:s,onItemDelete:a,onItemClick:l,showHistory:c}=e,d=(0,S.Z)(e,I);return r.createElement("div",{className:o,key:n},r.createElement("div",{className:"label"},t),c?r.createElement(w.Z,{getHistoryList:i,onClear:s,onItemDelete:a,onItemClick:l},r.createElement(O.default,(0,T.Z)({ref:e.inputLabelRef,className:"input"},d))):r.createElement(O.default,(0,T.Z)({ref:e.inputLabelRef,className:"input"},d)))}n(54370),n(5153),n(80566),n(50870),n(75397),n(18829),n(51429),n(25376),n(95864),n(94565),n(95073),n(65204),n(47072),n(98391),n(22727),n(19647);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const calcRoleWithSearchMember=(e,t,n)=>{var o;let r={};return(null!==(o={[v.r.STUDENT]:()=>{const o={title:f.BY.NAME,value:e[f.BY.NAME].value};r=initRole(n,o,!1);const i=[],s=[];t.forEach((e=>{i.push(e.child.number),s.push(e.child.group)}));const a=[...new Set(i.filter(Boolean))],l=[...new Set(s.filter(Boolean))];r[f.BY.NUMBER]=_objectSpread(_objectSpread({},r[f.BY.NUMBER]),{},{options:a},1===a.length?{value:a[0],disable:!0}:{}),r[f.BY.GROUP]=_objectSpread(_objectSpread({},r[f.BY.GROUP]),{},{options:l},1===l.length?{value:l[0],disable:!0}:{})}}[n])&&void 0!==o?o:()=>{})(),r},initRole=function(e,t){let{title:n,value:o=""}=t,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i={[n]:{value:o,options:[],primary:!0,hide:!1,disable:!1}};if(e!==v.r.COMMON){var s;(null!==(s={[v.r.STUDENT]:Object.values(f.BY)}[e])&&void 0!==s?s:[]).slice(1).forEach((e=>{i[e]={value:"",options:e===f.BY.ROLE_TYPE?f.go:[],primary:!1,hide:r,disable:!1}}))}return i};var C,R,P,A,D,N,L,j,M,x,F,k,Z,B,U,G;function base_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):base_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const NOOP=()=>{},getStringWithMaxLen=(e,t)=>e.length>t?`${e.slice(0,t)}...`:e;let H=(C=Reflect.metadata("design:type",Function),R=Reflect.metadata("design:paramtypes",[]),P=Reflect.metadata("design:type",Function),A=Reflect.metadata("design:paramtypes",[Object]),D=Reflect.metadata("design:type",Function),N=Reflect.metadata("design:paramtypes",[Object]),L=Reflect.metadata("design:type",Function),j=Reflect.metadata("design:paramtypes",[Object]),M=Reflect.metadata("design:type",Function),x=Reflect.metadata("design:paramtypes",[Object]),F=Reflect.metadata("design:type",Function),k=Reflect.metadata("design:paramtypes",[String,String]),Z=Reflect.metadata("design:type",Function),B=Reflect.metadata("design:paramtypes",[]),G=class RosterVerify extends r.Component{constructor(e){super(e),this.state={errorTip:"",role:initRole(this.props.rosterType,this.props.primaryContent)},this.checking=!1,this.hadShowIsClosedModal=!1,this.inputRef=r.createRef(),this.members=[],this.maxErrorTipNameLen=10,this.button=void 0,this.divider=void 0,this.showHistory=void 0,this.selectWithLabel=void 0,this.handlePrimaryChange=(0,p.default)(this.handlePrimaryChange,1e3)}componentDidMount(){const{isClosed:e}=this.props;e&&this.showIsClosedModalOnce()}componentDidUpdate(e){this.props.isClosed&&!e.isClosed&&this.showIsClosedModalOnce()}render(){const{classNamePrefix:e}=RosterVerify,{divider:t}=this,{className:n,showTitle:o,showButton:i}=this.props;return r.createElement("div",{className:u()(e,n)},o?r.createElement(r.Fragment,null,this.renderRosterVerifyTitle()):null,this.renderRosterVerifyOwnerInfo(),r.createElement(t,{className:`${e}-divider`}),this.renderRosterVerifyInfo(),this.renderRosterVerifyContent(),i?this.renderRosterVerifyButton():null)}handleClickButton(){if(this.checking)return;this.checking=!0;const{role:e}=this.state;this.handleConfirm(e)}renderRosterVerifyButton(){const{classNamePrefix:e}=RosterVerify,{button:t}=this,{buttonText:n,disabled:o}=this.props;return r.createElement("div",{className:`${e}-button`},r.createElement(t,{size:"large",type:"primary",onClick:o?NOOP:this.handleClickButton},n))}checkNotEmpty(e){return Object.values(e).every((e=>{let{value:t,hide:n}=e;return n||!!t}))}checkForStudentInFrontEnd(e){const t=e[f.BY.NUMBER].value,n=e[f.BY.GROUP].value,o=this.members.find((e=>{let{child:o}=e;const r=!o.number||t===o.number,i=!o.group||n===o.group;return r&&i}));if(!o)return;const r=e[f.BY.NAME].value.trim(),i=e[f.BY.ROLE_TYPE].value,s=e[f.BY.ROLE_NAME].hide?"":e[f.BY.ROLE_NAME].value,a=base_objectSpread({},o);return a.child={name:r,number:t,group:n},a.role={role:f.go.indexOf(i)+1,name:s},a}async checkForStudent(e){var t,n;const o=this.checkForStudentInFrontEnd(e);if(void 0===o)return{errorTip:_.Z.t("填写的信息有误")};const{globalPadId:r}=this.props,{data:i,error:s}=await(0,b.Sb)({member:o,globalPadId:r});return{errorTip:{0:_.Z.t("校验身份失败，请重试"),1:null!==(t={[y.oY.SUCCESS]:"",[y.oY.SERVICE_BUSY]:_.Z.t("服务器繁忙，请稍后重试"),[y.oY.ROSTER_HAS_BOUND]:_.Z.t("已经绑定过该孩子")}[i.retcode])&&void 0!==t?t:_.Z.t("填写的信息不在名单内")}[s?0:1],member:null==i||null===(n=i.result)||void 0===n?void 0:n.member}}async checkForCommon(e){var t;const{globalPadId:n,primaryContent:{title:o}}=this.props,{value:r}=e[o],{data:i,error:s}=await(0,b.Ml)({name:r,globalPadId:n});return{errorTip:{0:_.Z.t("校验身份失败，请重试"),1:null!==(t={[y.oY.SUCCESS]:"",[y.oY.SUBMIT_NAME_REPEATED]:_.Z.t("{{value}}已经提交过",{value:getStringWithMaxLen(r,this.maxErrorTipNameLen)}),[y.oY.MEMBER_NOT_IN_ROSTER]:_.Z.t("{{value}}不在名单内",{value:getStringWithMaxLen(r,this.maxErrorTipNameLen)})}[i.retcode])&&void 0!==t?t:_.Z.t("校验身份失败，请重试")}[s?0:1]}}async handleConfirm(e){const{primaryContent:{title:t},onClickButton:n,rosterType:o}=this.props,{value:r}=e[t];let i,s="";if(r)if(this.checkNotEmpty(e)){var a;const t=null!==(a={[v.r.STUDENT]:this.checkForStudent,[v.r.COMMON]:this.checkForCommon}[o])&&void 0!==a?a:()=>({errorTip:""}),n=await t(e);s=n.errorTip,i=n.member}else s=_.Z.t("请输入所有信息");else s=_.Z.t("请输入{{title}}",{title:t});this.checking=!1,s?this.setState({errorTip:s}):((0,E.G)("fill","fill_list"),n(o===v.r.COMMON?{role:{name:r}}:i))}async handlePrimaryChange(e){var t,n;const{globalPadId:o,rosterType:r}=this.props;if(r===v.r.COMMON)return;const i=e.trim(),{data:s}=await(0,b.g9)({globalPadId:o,name:i});if((null==s?void 0:s.retcode)===y.oY.SUCCESS&&null!=s&&null!==(t=s.result)&&void 0!==t&&null!==(n=t.members)&&void 0!==n&&n.length){const{role:e}=this.state,{members:t}=s.result;this.members=t,this.setState({role:calcRoleWithSearchMember(e,t,r),errorTip:""})}else this.setState({errorTip:_.Z.t("{{value}}不在名单内",{value:getStringWithMaxLen(i,this.maxErrorTipNameLen)})})}handleRoleInfoChange(e,t){const{role:n}=this.state,o=base_objectSpread({},n);o[t]=base_objectSpread(base_objectSpread({},n[t]),{},{value:e}),this.setState({role:o},(()=>this.handleStudentRosterSetSelf(e,t)))}handleStudentRosterSetSelf(e,t){const{rosterType:n}=this.props;if(n!==v.r.STUDENT||t!==f.BY.ROLE_TYPE)return;const{role:o}=this.state,r=base_objectSpread({},o);r[f.BY.ROLE_NAME]=base_objectSpread(base_objectSpread({},o[f.BY.ROLE_NAME]),e===f.go[0]?{hide:!0,value:""}:{hide:!1}),this.setState({role:r})}renderRosterVerifyContent(){const{classNamePrefix:e}=RosterVerify;return r.createElement("div",{className:`${e}-content`},this.renderRosterVerifyContentPrimary(),this.renderRosterVerifyContentExtra())}renderRosterVerifyContentPrimary(){const{classNamePrefix:e}=RosterVerify,{primaryContent:t,disabled:n,inputPlaceholder:o,getHistoryList:i,onClear:s,onItemDelete:a}=this.props,{errorTip:l,role:c}=this.state;return r.createElement(r.Fragment,null,r.createElement(InputWithLabel,{key:t.title,inputLabelRef:this.inputRef,className:u()(`${e}-content-input-with-label`,{"with-error-tip":l}),defaultValue:t.value,disabled:n,errorTip:l,value:c[t.title].value,label:t.title,placeholder:o,showClear:!0,showHistory:this.showHistory,onChange:e=>{this.handleRoleInfoChange(e,t.title),this.handlePrimaryChange(e)},onFocus:e=>{var n,o,r;null===(n=this.inputRef.current)||void 0===n||null===(o=(r=n.props).onFormItemFocus)||void 0===o||o.call(r,e,{type:h.c.SIMPLE,title:t.title},{setFieldsValue:NOOP})},getHistoryList:i,onClear:s,onItemDelete:a,onItemClick:e=>{let{value:n}=e;this.handleRoleInfoChange(n,t.title),this.handlePrimaryChange(n)}}))}renderRosterVerifyContentExtra(){const{classNamePrefix:e}=RosterVerify,{inputPlaceholder:t}=this.props,{role:n}=this.state,{selectWithLabel:o}=this;return r.createElement("div",{className:`${e}-content`},Object.keys(n).filter((e=>!n[e].hide&&!n[e].primary)).map((i=>n[i].options.length<=1?r.createElement(InputWithLabel,{key:`${i}`,className:`${e}-content-input-with-label`,value:n[i].value,disabled:n[i].disable,label:i,placeholder:t,showClear:!0,onChange:e=>this.handleRoleInfoChange(e,i)}):r.createElement(o,{key:`${i}`,className:`${e}-content-input-with-label`,value:n[i].value,label:i,options:n[i].options,onChange:e=>this.handleRoleInfoChange(e,i)}))))}renderRosterVerifyInfo(){var e;const{classNamePrefix:t}=RosterVerify,{formTitle:n,rosterType:o}=this.props,i=null!==(e={[v.r.STUDENT]:_.Z.t("班级")}[o])&&void 0!==e?e:"";return r.createElement("div",{className:`${t}-info`},r.createElement("div",null,_.Z.t("填写收集表{{formTitle}}前，发布者邀请你加入{{rosterText}}名单，方便后续统计。以下信息仅发布者可见。",{formTitle:n?`《${n}》`:"",rosterText:i})))}renderRosterVerifyTitle(){var e;const{classNamePrefix:t}=RosterVerify,{rosterType:n}=this.props,o=null!==(e={[v.r.STUDENT]:_.Z.t("班级")}[n])&&void 0!==e?e:"";return r.createElement("div",{className:`${t}-title`},_.Z.t("加入{{rosterText}}名单",{rosterText:o}))}renderRosterVerifyOwnerInfo(){const{classNamePrefix:e}=RosterVerify,{ownerAvatar:t,ownerNick:n}=this.props;return r.createElement("div",{className:`${e}-owner-info`},r.createElement("img",{className:`${e}-owner-info-avatar`,src:t||m}),r.createElement("div",{className:`${e}-owner-info-nick`},_.Z.t("发布者：{{ownerNick}}",{ownerNick:n})))}showIsClosedModalOnce(){if(this.hadShowIsClosedModal)return;const{ownerNick:e}=this.props;(0,g.N4)({title:_.Z.t("收集表已暂停收集"),content:_.Z.t("当前已暂停收集。如需填写，请联系发布者{{ownerNick}}。",{ownerNick:e}),okText:l.ce,cancelText:""}),this.hadShowIsClosedModal=!0}},G.classNamePrefix="roster-verify",G.title=_.Z.t("填写身份"),G.defaultProps={buttonText:l.z7,globalPadId:"",inputPlaceholder:_.Z.t("请输入"),primaryContent:{title:_.Z.t("填写身份"),value:""},rosterType:v.r.COMMON,showButton:"default",showTitle:!0,onClickButton:()=>{},onClose:()=>{},getHistoryList:NOOP,onClear:NOOP,onItemDelete:NOOP},U=G,(0,o.Z)(U.prototype,"handleClickButton",[a.xB,C,R],Object.getOwnPropertyDescriptor(U.prototype,"handleClickButton"),U.prototype),(0,o.Z)(U.prototype,"checkForStudentInFrontEnd",[a.xB,P,A],Object.getOwnPropertyDescriptor(U.prototype,"checkForStudentInFrontEnd"),U.prototype),(0,o.Z)(U.prototype,"checkForStudent",[a.xB,D,N],Object.getOwnPropertyDescriptor(U.prototype,"checkForStudent"),U.prototype),(0,o.Z)(U.prototype,"checkForCommon",[a.xB,L,j],Object.getOwnPropertyDescriptor(U.prototype,"checkForCommon"),U.prototype),(0,o.Z)(U.prototype,"handleConfirm",[a.xB,M,x],Object.getOwnPropertyDescriptor(U.prototype,"handleConfirm"),U.prototype),(0,o.Z)(U.prototype,"handleStudentRosterSetSelf",[a.xB,F,k],Object.getOwnPropertyDescriptor(U.prototype,"handleStudentRosterSetSelf"),U.prototype),(0,o.Z)(U.prototype,"showIsClosedModalOnce",[a.xB,Z,B],Object.getOwnPropertyDescriptor(U.prototype,"showIsClosedModalOnce"),U.prototype),U);var V=n(97729);const q=["label","key","className","options"];function SelectWithLabel(e){const{label:t,key:n,className:o,options:i}=e,s=(0,S.Z)(e,q);return r.createElement("div",{className:o,key:n},r.createElement("div",{className:"label"},t),r.createElement(V.default,(0,T.Z)({className:"select",containerClassName:"select-container"},s),i.map((e=>r.createElement(V.default.Option,{value:e,key:e},e)))))}var Q,K,W,$,Y;let z=(Q=Reflect.metadata("design:type",Function),K=Reflect.metadata("design:paramtypes",[]),W=Reflect.metadata("design:type",Function),$=Reflect.metadata("design:paramtypes",[]),Y=class RosterVerifyPC extends H{constructor(){super(...arguments),this.button=i.default,this.divider=s.ZP,this.selectWithLabel=SelectWithLabel,this.showHistory=!0}renderRosterVerifyButton(){const{showButton:e}=this.props;return["modalEdit","modalFill"].includes(e)?this.renderRosterVerifyButtonForModal(e):super.renderRosterVerifyButton()}renderButtonModalEdit(){const{onClose:e}=this.props;return r.createElement(r.Fragment,null,r.createElement(i.default,{type:"primary",onClick:e},l.z7))}renderButtonModalFill(){const{onClose:e,disabled:t}=this.props;return r.createElement(r.Fragment,null,r.createElement(i.default,{onClick:e},l.OS),r.createElement(i.default,{type:"primary",onClick:t?e:this.handleClickButton},l.z7))}renderRosterVerifyButtonForModal(e){const{classNamePrefix:t}=H,n={modalEdit:this.renderButtonModalEdit,modalFill:this.renderButtonModalFill}[e];return r.createElement("div",{className:`${t}-button-modal`},n())}},(0,o.Z)(Y.prototype,"renderButtonModalEdit",[a.xB,Q,K],Object.getOwnPropertyDescriptor(Y.prototype,"renderButtonModalEdit"),Y.prototype),(0,o.Z)(Y.prototype,"renderButtonModalFill",[a.xB,W,$],Object.getOwnPropertyDescriptor(Y.prototype,"renderButtonModalFill"),Y.prototype),Y)},58536:(e,t,n)=>{n.r(t),n.d(t,{mask:()=>l,getActions:()=>getActions,default:()=>d});var o=n(51734),r=n(81893),i=n(86432),s=n(54734);const a="form-lazy-prevention-mask",l={open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(document.getElementById(e))return;const n=document.createElement("div");n.id=e,n.style.position="fixed",n.style.zIndex="9999",n.style.left="0px",n.style.right="0px",n.style.top="0px",n.style.bottom="0px",t?(n.style.background="#000",n.style.opacity="0"):n.style.backgroundColor="rgba(255, 255, 255, 0.65)",document.body.appendChild(n),document.activeElement&&document.activeElement.blur()},close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;const t=document.getElementById(e);t&&document.body.removeChild(t)}},getActions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[{text:s.Z.t("刷新"),onClick:()=>{(0,r.Oi)(window,(0,i.Vm)())}},{text:s.Z.t("联系我们"),onClick:()=>{(0,o.c)(e)}}]};let c;c=n(78076);const d=c.Snackbar},68565:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var o=n(64649),r=n(27378),i=n(31542),s=n(90005),a=n.n(s),l=n(23615),c=n.n(l),d=n(56356);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(95968);class StickyFooter extends r.Component{constructor(e){super(e),this.state={container:e.getContainer()},this.iframeRef=r.createRef(),this.resizeHandleBinded=!1,this.handleResize=(0,d.default)(this.handleResize.bind(this),30)}componentDidMount(){const{container:e}=this.state;if(!e)return void setTimeout((()=>{const{getContainer:e}=this.props,t=e();t&&this.setState({container:t})}),0);const t=this.iframeRef.current;t&&(this.resizeHandleBinded=!0,t.contentWindow.addEventListener("resize",this.handleResize,!1),window.addEventListener("resize",this.handleResize,!1))}componentDidUpdate(){const e=this.iframeRef.current;!this.resizeHandleBinded&&e&&(this.resizeHandleBinded=!0,e.contentWindow.addEventListener("resize",this.handleResize,!1),window.addEventListener("resize",this.handleResize,!1))}componentWillUnmount(){const e=this.iframeRef.current;e&&(e.contentWindow.removeEventListener("resize",this.handleResize,!1),window.removeEventListener("resize",this.handleResize,!1))}handleResize(){this.forceUpdate()}getMainStyle(e){const{mainStyle:t}=this.props,{width:n,left:o}=e.getBoundingClientRect();return _objectSpread({width:this.props.paddingWidth>0?n-this.props.paddingWidth:n,left:o,zIndex:2},t)}getItemStyle(){const{itemStyle:e}=this.props;return _objectSpread({},e)}render(){const{className:e,btns:t,type:n,usePlaceholderMargin:o,needPlaceholder:s,showStickyFooter:l,customRender:c}=this.props;if(0===t.length&&!c)return null;if(!l)return null;const{container:d}=this.state;if(!d)return null;const u=this.getMainStyle(d),p=this.getItemStyle(),m=null==c?void 0:c(),h=r.createElement("div",{className:a()("sticky-footer",n,e),style:u},m||t.map(((e,n)=>r.createElement("div",{className:a()("sticky-footer-item",{"sticky-footer-only-one":1===t.length}),key:n,style:p},e)))),f=document.getElementById("root");return"follow"===n?h:r.createElement("div",{className:a()("sticky-footer-placeholder",e,{"ph-extra-margin":o}),style:{height:s?u.height:0}},r.createElement("iframe",{ref:this.iframeRef}),i.createPortal(h,f))}}StickyFooter.propTypes={btns:c().array,mainStyle:c().object,itemStyle:c().object,getContainer:c().func,type:c().oneOf(["bottom","follow"]),usePlaceholderMargin:c().bool,needPlaceholder:c().bool,showStickyFooter:c().bool,paddingWidth:c().number,className:c().string,customRender:c().func},StickyFooter.defaultProps={btns:[],mainStyle:{},itemStyle:{},getContainer:()=>document.body,type:"bottom",usePlaceholderMargin:!1,needPlaceholder:!0,showStickyFooter:!0,className:""};const u=StickyFooter},74699:(e,t,n)=>{n.d(t,{Z:()=>U});var o=n(73428),r=(n(11431),n(43521),n(27378)),i=n(31542),s=n(51399),a=n(26725),l=n(80617),c=n(66040),d=n(54734),u=n(23545),p=n(98297);var m,h,f,g,_,y,b,E,v,T=n(90005),S=n.n(T),O=n(81086);let w=(m=Reflect.metadata("design:type",Function),h=Reflect.metadata("design:paramtypes",[]),f=Reflect.metadata("design:type",Function),g=Reflect.metadata("design:paramtypes",[]),_=Reflect.metadata("design:type",Function),y=Reflect.metadata("design:paramtypes",[Object]),b=Reflect.metadata("design:type",Function),E=Reflect.metadata("design:paramtypes",["undefined"==typeof File?Object:File]),v=class TopPictureBase extends r.PureComponent{render(){const{canEdit:e}=this.props;return e?this.renderTopPictureWithEdit():this.renderSingleTopPicture()}clearTopPictureCropData(){const{setTopPictureCropData:e}=this.props;e({topPictureCropData:{}})}handleDeleteTopPicture(){const{setHeaderImage:e}=this.props;e({headerImg:""})}handlePreviewTopPicture(){var e,t;const{headerImg:n}=this.props,o=null==n||null===(e=n.split)||void 0===e||null===(t=e.call(n,"?"))||void 0===t?void 0:t[0];o&&this.previewShow([o])}handleSelectBase(e){let{cover:t}=e;!function getImageFileFromURL(e,t){const n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0,n.width,n.height),e.toBlob((e=>{t(new File([e],"image.png",{type:"image/png"}))}),"image/png")},n.src=e}(t,(e=>{const{setTopPictureCropData:t}=this.props;t({topPictureCropData:{file:e}})}))}handleUploadBase(e){const{setTopPictureCropData:t}=this.props;t({topPictureCropData:{file:e}})}renderSingleTopPicture(){let{onClick:e=(()=>{}),slot:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{headerImg:n,className:o}=this.props;return n?r.createElement("div",{className:S()("top-picture-container",o),onClick:e},r.createElement("div",{className:"form-header-img"},r.createElement(O.Z,{src:n})),t):null}renderTopPictureWithEdit(){const{headerImg:e}=this.props;return e?this.renderUpdateTopPicture():this.renderAddTopPicture()}},(0,o.Z)(v.prototype,"handleDeleteTopPicture",[c.xB,m,h],Object.getOwnPropertyDescriptor(v.prototype,"handleDeleteTopPicture"),v.prototype),(0,o.Z)(v.prototype,"handlePreviewTopPicture",[c.xB,f,g],Object.getOwnPropertyDescriptor(v.prototype,"handlePreviewTopPicture"),v.prototype),(0,o.Z)(v.prototype,"handleSelectBase",[c.xB,_,y],Object.getOwnPropertyDescriptor(v.prototype,"handleSelectBase"),v.prototype),(0,o.Z)(v.prototype,"handleUploadBase",[c.xB,b,E],Object.getOwnPropertyDescriptor(v.prototype,"handleUploadBase"),v.prototype),v);var I=n(52851);var C=n(45607);const R={CHANGE:{ID:"change",TITLE:d.Z.t("更换封面")},PREVIEW:{ID:"preview",TITLE:d.Z.t("查看原图")},DELETE:{ID:"delete",TITLE:C.H6}};var P,A,D,N,L,j,M,x,F;const k=(0,r.lazy)((()=>Promise.all([n.e("vendors-node_modules_tencent_dui-mobile_lib_components_Button_index_js-node_modules_tencent_i-8a5f21"),n.e("js_components_crop_consumer_tsx")]).then(n.bind(n,73492)))),Z=(0,r.lazy)((()=>n.e("js_components_top-picture-new_header-image-uploader_pc_tsx").then(n.bind(n,24081))));let B=(P=Reflect.metadata("design:type",Function),A=Reflect.metadata("design:paramtypes",[]),D=Reflect.metadata("design:type",Function),N=Reflect.metadata("design:paramtypes",[Object]),L=Reflect.metadata("design:type",Function),j=Reflect.metadata("design:paramtypes",[]),M=Reflect.metadata("design:type",Function),x=Reflect.metadata("design:paramtypes",[]),F=class TopPicturePC extends w{constructor(){super(...arguments),this.coverPicker=null}previewShow(e){n.e("vendors-node_modules_tencent_dui_lib_components_Preview_index_js").then(n.bind(n,81643)).then((t=>{let{Preview:n}=t;n.show({urlList:e})}))}renderUpdateTopPicture(){const e=this.renderPCSetTopPictureIcon();return r.createElement(r.Fragment,null,this.renderPCCrop(),this.renderSingleTopPicture({slot:e}))}renderAddTopPicture(){const{title:e}=this.props;return r.createElement(r.Fragment,null,this.renderPCCrop(),r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(Z,{title:e||d.Z.t("添加封面"),onClick:()=>{this.handleUploadTopPicture()}})))}async handleUploadTopPicture(){this.coverPicker=await async function showCoverPicker(e){const{default:t,COVER_PICKER:n}=await(0,p.f)(),o=await t.getExtension(n.name);return null==o||o.show(e),o}({onSelect:this.handleSelect,onUpload:this.handleUploadBase,uploadImgTips:""})}handleSelect(e){var t;let{cover:n}=e;null===(t=this.coverPicker)||void 0===t||t.onDispose(),this.handleSelectBase({cover:n})}handleCloseCrop(){this.clearTopPictureCropData()}handleReChooseImg(){this.handleCloseCrop(),this.handleUploadTopPicture()}renderPCCrop(){const{topPictureCropData:e}=this.props;return null!=e&&e.coverImage||null!=e&&e.file?i.createPortal(r.createElement(u.Z,null,r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(k,{onCloseCrop:this.handleCloseCrop,onReChooseImg:this.handleReChooseImg}))),document.body):null}renderMenu(){return r.createElement("div",{style:{display:"flex"}},r.createElement(l.default,{selectable:!1,itemStyle:{width:"166px"}},r.createElement(l.default.Item,{onClick:this.handleUploadTopPicture},R.CHANGE.TITLE),r.createElement(l.default.Item,{onClick:this.handlePreviewTopPicture},R.PREVIEW.TITLE),r.createElement(l.default.Item,{onClick:this.handleDeleteTopPicture},R.DELETE.TITLE)))}renderPCSetTopPictureIcon(){return r.createElement(a.default,{dropContent:this.renderMenu(),className:"pc-top-picture-dropdown",alignment:"right"},r.createElement("div",{className:"top-picture-show-more-menu"}),r.createElement("div",{className:"show-more-icon"}))}},(0,o.Z)(F.prototype,"handleUploadTopPicture",[c.xB,P,A],Object.getOwnPropertyDescriptor(F.prototype,"handleUploadTopPicture"),F.prototype),(0,o.Z)(F.prototype,"handleSelect",[c.xB,D,N],Object.getOwnPropertyDescriptor(F.prototype,"handleSelect"),F.prototype),(0,o.Z)(F.prototype,"handleCloseCrop",[c.xB,L,j],Object.getOwnPropertyDescriptor(F.prototype,"handleCloseCrop"),F.prototype),(0,o.Z)(F.prototype,"handleReChooseImg",[c.xB,M,x],Object.getOwnPropertyDescriptor(F.prototype,"handleReChooseImg"),F.prototype),F);const U=(0,s.connect)((e=>{const{isOwner:t,isAdmin:n}=e.formInfo,o=t||n;return{hasAdmin:o,headerImg:(o?e.edit.formData:e.formInfo.formData).headerImg,topPictureCropData:e.toggle.topPictureCropData}}),(e=>({setHeaderImage(t){e({type:"edit/setHeaderImage",payload:t})},setTopPictureCropData(t){e({type:"toggle/setTopPictureCropData",payload:t})},replaceHistory(t){e(I.routerRedux.replace(`/${t}`))}})))(B)},48620:(e,t,n)=>{function array2Map(e,t,n){const o={};return e.forEach(((e,r)=>{const i=((e,t)=>void 0===n?e:"function"==typeof n?n(e,t):"string"==typeof n?e[n]:e)(e,r);if(void 0!==t)if("function"==typeof t)o[t(e)]=i;else{const n=e[t];o[n]=i}else o[r]=i})),o}n.d(t,{$9:()=>array2Map,G6:()=>numAddZero});const numAddZero=e=>e>=10?`${e}`:`0${e}`},83110:(e,t,n)=>{n.d(t,{B:()=>AbstractStartUpNode});class AbstractStartUpNode{constructor(e){var t;this.nodePriority=void 0,this.nodePriority=null!==(t=null==e?void 0:e.priority)&&void 0!==t?t:0}get priority(){return this.nodePriority}}},44187:(e,t,n)=>{n.d(t,{Z:()=>StartUpNodeManager});class StartUpNodeManager{constructor(){this.startedInstance=null}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>{var t;this.startedInstance=null!==(t=e.execute())&&void 0!==t?t:this.startedInstance})),this}model(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>{var t;return null===(t=this.startedInstance)||void 0===t?void 0:t.model(e)})),this}router(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>{var t;return null===(t=this.startedInstance)||void 0===t?void 0:t.router(e)})),this}start(e){var t;return null===(t=this.startedInstance)||void 0===t||t.start(e),this.startedInstance}getDvaInstance(){return this.startedInstance}}},25742:(e,t,n)=>{n.d(t,{Z:()=>s});n(11431);var o=n(4869),r=n(98297),i=n(83110);class LoginStartUpNode extends i.B{constructor(){super(...arguments),this.wxWorkLoginFlag="WX_WORK_REFRESH_FLAG",this.maxLoginCnt=2}execute(){return(0,o.isLogin)()||(0,o.autoLogin)({extensionService:()=>(0,r.f)().then((e=>e.default))}),null}}const s=new LoginStartUpNode},86571:(e,t,n)=>{n.d(t,{Z:()=>d});n(11431);var o=n(81893),r=n(86432),i=n(60250),s=n(74957),a=n(54734),l=n(83110),c=n(87768);class PcLoginStartUpNode extends l.B{execute(){return this.runMsgCenter(),null}async runMsgCenter(){const{default:e}=await Promise.all([n.e("vendors-node_modules_tencent_docs-scenario-components-message-center_dist_index_js"),n.e("node_modules_babel_runtime_regenerator_index_js")]).then(n.t.bind(n,49781,23));e.setCallback((e=>{"number"==typeof(null==e?void 0:e.code)&&this.notifyByCode(e.code)}))}async notifyByCode(e){(0,c.G)("account_info","log_expired",{opername:"doc_account_web",ver6:e}),1e4===e?await(0,i.IG)(a.Z.t("帐号信息变化，点击"),{id:"checkIfAccountSwitched-1",action:a.Z.t("刷新"),autoClose:!1,onClickAction:()=>{(0,o.Oi)(window,(0,r.Vm)())}}):10001===e&&await(0,i.IG)(a.Z.t("登录过期"),{id:"login-expired-tips",action:a.Z.t("重新登录"),autoClose:!1,onClickAction:()=>{(0,s.e1)(!0)}})}}const d=new PcLoginStartUpNode},43525:(e,t,n)=>{n.d(t,{Z:()=>d});n(11431);var o=n(83110),r=n(86550),i=n(67538),s=n(69841),a=n(72870),l=n(87768);const c=["playBackgroundMusic","setKeyboardHeight is not defined","WeixinJSBridge is not defined","__WeixinJSBridge__ is not defined","openCooperationMobile is not defined","captured exception, need break and refresh","Can't find variable: getFirstImage","Can't find variable: ZhihuiOS","Can't find variable: isInterceptColseEvent","Can't find variable: _bdbox_js_315","Can't find variable: WebViewJavascriptBridge","Can't find variable: WeixinJSBridge","Can't find variable: cloudwisePreMonitor","Can't find variable: CloudwiseAddEvent","Can't find variable: CloudHubJSBridge","Can't find variable: getAbstract","reLocateForNative is not defined","x5onSkinSwitch is not defined","URI malformed","Cannot read property 'useToast' of undefined","readyToInsertImageForNativeJSBridge is not defined","ExecuteJsInterface is not defined","onLocalDBCallback is not defined","Can't find variable: $","OnReceiveTransparentMsg is not defined","window.SosJSApi.onHtmlContentReport is not a function","vivoNewsDetailPage.getNewsReadStatus4Vivo is not a function","vivoNewsDetailPage","Cannot read property 'customQbMenuShareInfo' of undefined","removeDownloadTip is not defined","getShareObj is not defined","mag is not defined","_mz_getNextLink is not defined","onLayoutChanged is not defined","__wx._ready is not a function","window.mttLongPressVar.tagName","UpdateToken is not defined","OnRoleTypeChange is not defined","a is not defined","Cannot read property 'get' of undefined","$ is not defined","No default value","ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications.",/Symbol\(Symbol.iterator\)/,"this.componentsWidth.get is not a function or its return value is not iterable","Uncaught TypeError: this._lastLog.groupEnd is not a function","Script error.","Timeout",/Failed to export with XHR \(status: 0\)/,/Failed to export with XHR \(status: 400\)/,"JSON Parse error: Unexpected EOF","Request failed with status code 404","Uncaught Error: [MobX] minified error nr: 35. Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts","Uncaught (in promise) DOMException: The user aborted a request.","failed to connect to database 'TencentDocs'"];class InitMonitorError extends o.B{constructor(){super(...arguments),this.isProduction=!0}execute(){return this.initMonitorError(),null}initMonitorError(){this.monitorError()}checkNonEditError(e){if(e){const t=e.split("\n    at ");if(null!=t&&t[1]){if(t[1].indexOf("tim/docs/components")>=0)return!0;if(t[1].indexOf("chrome-extension")>=0)return!0}}return!1}checkInjectError(e){if(e){const t=e.split("\n    at ");if(t&&t.length>1){if(!t.slice(1).some((e=>!e.startsWith("<anonymous>:"))))return!0}}return!1}monitorError(){if(this.isProduction){let e=!1,t=!1;((a.isMiniProgram||a.isWeChat||a.isTencentDocsApp||a.isTim||a.isQQ)&&window.APPINFO.isMobile||window.APPINFO.isPC)&&(t=!0);const doJsReport=function(t,n){e||((0,l.G)("page","js_error",{opername:"quality_form",ver5:"js-error",ver6:t,ver12:null==n?void 0:n.replace(/\n/g,"")}),(0,r.$)(s.U.jsError,{dimensions:[t]}),e=!0)},errorHandler=e=>{var n,o,r,s,a;const l=null==e?void 0:e.message,d=null==e||null===(n=e.reason)||void 0===n?void 0:n.message,u=l||d||"";if(i.l.error(u),!t)return;const p=null==e||null===(o=e.error)||void 0===o?void 0:o.stack,m=null==e||null===(r=e.reason)||void 0===r?void 0:r.stack,h=p||m;if(this.checkNonEditError(h)||this.checkInjectError(h))return;for(const t of c)if(u&&u.match(t))return;(null===(s=window)||void 0===s||null===(a=s.navigator)||void 0===a?void 0:a.userAgent.match("MicroMessenger/7.0.5 WindowsWechat"))||doJsReport(u,h)};window.addEventListener("error",errorHandler,!1),window.addEventListener("unhandledrejection",errorHandler,!1)}}}const d=new InitMonitorError},79871:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(83110),r=n(39458);function getRootNode(e){return"object"==typeof e&&Boolean(e.composed)?getShadowIncludingRoot(this):getRoot(this)}function getShadowIncludingRoot(e){const t=getRoot(e);return function isShadowRoot(e){return"#document-fragment"===e.nodeName&&"ShadowRoot"===e.constructor.name}(t)?getShadowIncludingRoot(t.host):t}function getRoot(e){return e.parentNode?getRoot(e.parentNode):e}n(62659),n(78305),n(21413);class PolyfillStartUpNode extends o.B{execute(){return this.polyfill4PadStartAndPadEnd(),this.polyfill4GetRootNode(),null}polyfill4PadStartAndPadEnd(){navigator.userAgent.indexOf("iPhone OS 10_")>0&&(String.prototype.padStart=function(e,t){return(0,r.start)(this,e,null!=t?t:void 0)},String.prototype.padEnd=function(e,t){return(0,r.end)(this,e,null!=t?t:void 0)})}polyfill4GetRootNode(){Object.prototype.hasOwnProperty.call(Node.prototype,"getRootNode")||Object.defineProperty(Node.prototype,"getRootNode",{enumerable:!1,configurable:!1,value:getRootNode})}}const i=new PolyfillStartUpNode},90894:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(27378),r=n(31542),i=n(83110);class WindowReactStartUpNode extends i.B{execute(){return window.React=o,window.ReactDOM=r,null}}const s=new WindowReactStartUpNode},31924:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(87768),r=n(69841),i=n(67538),s=n(86550),a=n(51399),l=n(65495),c=n(83110);class DvaAppStartUpNodeBase extends c.B{execute(){const e=(0,a.default)({onError:this.handleDvaError.bind(this)});return e.use((0,l.Z)()),e}}const d=new class DvaAppStartUpNode extends DvaAppStartUpNodeBase{handleDvaError(e){var t,n;if(!e)return;null===(t=e.preventDefault)||void 0===t||t.call(e);const{message:a}=e;a&&(i.l.error(a),(0,s.$)(r.U.dvaError,{dimensions:[a]}),(0,o.G)("page","js_error",{opername:"quality_form",ver5:"dva-error",ver6:a,ver12:null===(n=e.sagaStack)||void 0===n?void 0:n.replace(/\n/g,"")}))}}},6078:(e,t,n)=>{n.d(t,{Z:()=>l});n(11431);var o=n(31774),r=n(72870),i=n(83110),s=n(4222),a=n(67538);class ConfigStartUpNode extends i.B{execute(){return this.addTelemetry(),this.addJsSdk(),this.addReportInit(),null}addTelemetry(){(0,o.ed)({serviceName:"form",tenantConfig:s.kZ.SPECIAL_TELEMETRY_REPORT?{TRACE_URL:`https://${s._P.DOMAIN_NAME}/tpstelemetry/v1/traces`}:{}})}addJsSdk(){const e=window.location.href.indexOf("__wxjs_environment=miniprogram")>-1,t=window.location.href.indexOf("__wxjs_environment=qqminiprogram")>-1,o=e||t;if(s.kZ.NEED_MINI_NATIVE&&o){const e=document.createElement("script");e.onload=function(){window.loadedWxSdk=!0},e.src=t?s.Y3.QQ_JS_SDK_1_0_0:s.Y3.WX_JS_SDK_1_6_0,document.head.appendChild(e)}r.isTencentDocsApp&&n.e("vendors-node_modules_tencent_tdoc-database_lib_index_js").then(n.bind(n,21663)).then((()=>{}))}addReportInit(){a.l.init()}}const l=new ConfigStartUpNode},92614:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(64649),r=(n(11431),n(11380)),i=n(63406),s=n(22082),a=n(64619),l=n(61868),c=n(83110);class DataGetStartUpNodeBase extends c.B{constructor(){super(...arguments),this.maxDataGetCnt=3,this.currDataGetCnt=0}execute(){return this.getFormInfo(),null}dispatchPreloaded(e){try{if(window.preData.formInfo){const t=new CustomEvent("predataLoaded",{detail:e});document.dispatchEvent(t)}if(window.preData.editFormInfo){const t=new CustomEvent("predataLoadedForEdit",{detail:e});document.dispatchEvent(t)}}catch(t){}}}var d=n(71800);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=new class DataGetStartUpNode extends DataGetStartUpNodeBase{constructor(){super(...arguments),this.maxDataGetCnt=3,this.currDataGetCnt=0}execute(){return this.currDataGetCnt>=this.maxDataGetCnt&&!window.preData?(document.dispatchEvent(new CustomEvent("predataLoadFail")),null):((!window.preData||(0,i.at)()||i.v1)&&(this.currDataGetCnt+=1,this.getFormInfo()),null)}getFormInfo(){window.preData={};const e=(0,s._)(),t=new XMLHttpRequest;t.onreadystatechange=async()=>{if(t.readyState===XMLHttpRequest.DONE){let n,o;if(this.setServerTime(t),200===t.status)try{if(n=JSON.parse(t.responseText),i.v1){const{urlId:e}=(0,s.e)(),t=await(0,r.U2)(e);(0,a.shouldGetNewPaper)(t,n.data)?(n=(0,a.dealBigPaperData)(n),(0,a.setBigPaperInfo)({index:0,status:0},n.data.tinyid),localStorage.removeItem(`${n.data.tinyid}_${n.data.globalPadId}`),(0,r.t8)(e,JSON.stringify(n.data))):n={data:JSON.parse(t),retcode:0}}if((0,l.oA)(n),n&&0===n.retcode){if(this.handlePubAndHeadLogic(n),"object"==typeof n.data){const e=window.clientVars||{};window.clientVars=_objectSpread(_objectSpread({},e),n.data),this.currDataGetCnt=this.maxDataGetCnt}}else{window.preData.retcode=n.retcode;const e=new CustomEvent("predataLoadFail");document.dispatchEvent(e)}}catch(e){o=e}else o=t.status;window.preData.error=o,this.dispatchPreloaded(n)}},t.open("GET",e),t.send()}handlePubAndHeadLogic(e){if("object"==typeof e.data){const{isOwner:t,isAdmin:n,pos:o,rev:r,pub:i}=e.data;d.Q.setRevAndPos(r,o),t||n?(r===i||0===i?window.preData.formInfo=e:this.getPubInfo(),window.preData.editFormInfo=e):window.preData.formInfo=e}else window.preData.error="server data error"}getPubInfo(){const e=new XMLHttpRequest,t=(0,s._)("pub");e.onreadystatechange=()=>{if(e.readyState===XMLHttpRequest.DONE){let n,o;if(this.setServerTime(e),200===e.status)try{if(n=JSON.parse(e.responseText),n&&0===n.retcode&&(window.preData.formInfo=n,"object"==typeof n.data)){const e=window.clientVars||{};window.clientVars=_objectSpread(_objectSpread({},e),n.data)}}catch(t){o=t}else o=e.status;window.preData.error=o;try{const e=new CustomEvent("predataLoaded",{detail:n});document.dispatchEvent(e)}catch(t){}}},e.open("GET",t),e.send()}setServerTime(e){window.serverDate=(0,i.at)()?new Date:new Date(e.getResponseHeader("Date"))}}},87856:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(83110),r=n(43041);class EventStartUpNode extends o.B{execute(){return window[r.a]={hideInfo:[],showInfo:[]},window[r.V]=()=>{window[r.a][{visible:"showInfo",hidden:"hideInfo"}[document.visibilityState]].push(Date.now())},document.addEventListener("visibilitychange",window[r.V],!1),null}}const i=new EventStartUpNode},84554:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(64649),r=(n(11431),n(83110));function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class LogStartUpNode extends r.B{constructor(){super(...arguments),this.overriddenMethods=["log","error","warn","debug","info","group"],this.specialShowLogToken="showLog=1"}execute(){const e=window;void 0===e.console&&(e.console=this.overriddenMethods.reduce(((e,t)=>_objectSpread(_objectSpread({},e),{},{[t]:()=>{}})),{}));return e.location.href.indexOf(this.specialShowLogToken)>=0||this.overriddenMethods.forEach((t=>{Object.defineProperty(e.console,t,_objectSpread(_objectSpread({},Object.getOwnPropertyDescriptor(e.console,t)),{},{value(){},writable:!0}))})),null}}const i=new LogStartUpNode},85717:(e,t,n)=>{n.d(t,{Z:()=>p});n(11431),n(32904);var o=n(64649),r=n(42409),i=n(15530),s=n(4222);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a=["/cgi-bin/online_docs/user_info","/cgi-bin/online_docs/notify_getnum","/form/collect/getstatus","/cgi-bin/redirect/300000000/ep/api/getpadinfo","/cgi-bin/online_docs/auth_apply/check","/form/data/post","/fcg-bin/fcg_get_multiple_strategy","/form/collect/recordcnt","/cgi-bin/online_docs/doc_info","/cgi-go/can/move","/v2/user/attribute/get","/cgi-bin/online_docs/user_info/check","/form/collect/get_conf","/cgi-bin/redirect/undefined/ep/api/getpadinfo","/form/data/getpubrev","/form/collect/getrecord","/api/form/read/record","/form/collect/record_page","/api/form/read/records","/v2/util/wechat/signature",i.pU.OVERALL_COUNT],l=[],c=[["^(.*?)/form/data/get\\?id=([^&]+).*$",`${s.Zj.BIG_FORM_MAIN_URL}/$2.json`,"GET"],["^(.*?)/form/collect/submit","$1/form/collect/bigform/submit"],["^(.*?)/api/form/write/submit","$1/form/collect/bigform/submit"]];function NetFilter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"deny",{denyURLs:t=a,allowURLs:n=l,replaceURLs:o=c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const getNewRequest=(e,t)=>{let n=t,r=e||"GET";return o.some((e=>{let[o,i,s]=e;const a=new RegExp(o);return!!a.test(t)&&(n=t.replace(a,i),s&&(r=s),!0)})),{newURL:n,newMethod:r}},shouldSend=o=>{if("deny"===e){return!t.some((e=>new RegExp(e).test(o)))}if("allow"===e){return!!n.some((e=>new RegExp(e).test(o)))}return!0};XMLHttpRequest.prototype.nativeOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.nativeSetRequestHeader=XMLHttpRequest.prototype.setRequestHeader,XMLHttpRequest.prototype.nativeSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=function hookedRequestOpen(e,t,n){if(!shouldSend(t))return;const{newMethod:o,newURL:r}=getNewRequest(e,t);for(var i=arguments.length,s=new Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];return this.nativeOpen(o,r,null==n||n,...s)},XMLHttpRequest.prototype.setRequestHeader=function hookedSetRequestHeader(){if(this.readyState===XMLHttpRequest.OPENED)return this.nativeSetRequestHeader(...arguments)},XMLHttpRequest.prototype.send=function hookedSend(){if(this.readyState===XMLHttpRequest.OPENED)return this.nativeSend(...arguments)};const i=window.fetch,s=r.ZP;window.fetch=function hookedFetch(e,t){if("string"!=typeof e)return s(e,t);if(!shouldSend(e))return Promise.resolve(new Response("{}"));const{newURL:n,newMethod:o}=getNewRequest(null==t?void 0:t.method,e);return s(n,t?_objectSpread(_objectSpread({},t),{},{method:o}):{method:o},{globalFetch:i})}}var d=n(83110);const u=["/cgi-bin/online_docs/notify_getnum","/form/collect/getstatus","/cgi-bin/online_docs/auth_apply/check","/form/data/post","/fcg-bin/fcg_get_multiple_strategy","/form/collect/recordcnt","/cgi-go/can/move","/v2/extra/roster/get_my","/v2/user/attribute/get","/form/collect/get_conf","/cgi-bin/redirect/undefined/ep/api/getpadinfo","/form/data/getpubrev","/form/collect/getrecord","/api/form/read/record","/form/collect/record_page","/api/form/read/records",i.pU.OVERALL_COUNT];class NetFilterStartUpNode extends d.B{execute(){if(location.pathname.indexOf("/exam/")>-1)return NetFilter("deny",{denyURLs:u,allowURLs:[],replaceURLs:[]}),null;return"1"===new URLSearchParams(location.search).get("big")?(NetFilter(),null):null}}const p=new NetFilterStartUpNode},83309:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(64649),r=n(58294),i=n(42409),s=n(4222);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}s.pg.TOB,s._P.DOMAIN_NAME;function emptyFunc(){}function CustomEvent(e,t){const n=t||{bubbles:!1,cancelable:!1,detail:null},o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),o}function customEventPolyfill(){return"function"!=typeof window.CustomEvent&&(CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent,!0)}function isUndefined(e){return void 0===e}const a=(0,r.A)(),l=a.getRetryCountLimit();var c=n(83110);class ScriptLoaderStartUpNode extends c.B{execute(){const e=function getScriptLoaderInstance(e){const t={metadata:null,firstLoaded:{},asset:null,assetLoaded:!1,cache:{},evtArr:[],fetchAsset(e,t,n){const o=`${e}?_t=${Date.now()}`;i.ef.ajax({url:o,xhrFields:{withCredentials:!1},success:e=>{const t=_objectSpread({},e);this.metadata=t.metadata,delete t.metadata,delete t.ScriptLoader,Object.keys(t).forEach((e=>{if(this.asset[e]={url:t[e].js||null,state:-1},t[e].dependency){const n=t[e].dependency;this.asset[e].dep=n,Object.keys(n).forEach((e=>{this.asset[e]={url:n[e],state:-1}}))}})),this.assetLoaded=!0,this.dispatch("SL-INIT"),n(),this.evtArr.forEach((e=>{this.dispatch(e.eventName,e.detail)}))},error:async o=>{let{errCode:r}=o;const i=await this.init(e,t+1);n(i)}})},init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(((n,o)=>{t<0?n({code:-1,msg:"reTry err"}):(t||(this.asset=this.asset||{}),t<3?this.fetchAsset(e,t,n):n({code:1,msg:"load error"}))}))},async handleInit(t){if(!this.assetLoaded){let n=await this.init(e);if(n)return void t(n)}},handleDep(e,t,n,o){const{asset:r,cache:i}=this;r[e].dep&&Object.keys(r[e].dep).forEach((s=>{window[s]?(i[s]=window[s],r[s].state=0):isUndefined(i[s])&&this.loadScriptProcess({asset:r,cache:i,module:s,parentModule:e},t,n,o)}))},handleAsset(e,t,n,o){const{asset:r,cache:i}=this;isUndefined(r[e])?"function"==typeof n&&n({code:1,msg:`${e} is not found.`}):isUndefined(i[e])&&o<=l?(this.handleDep(e,t,n,o),this.loadScriptProcess({asset:r,cache:i,module:e,parentModule:e},t,n,o)):i[e]&&this.firstLoaded[e]&&this.checkAllLoaded(r,e)&&(t(i[e],i),this.firstLoaded[e]=!0)},async load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:emptyFunc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:emptyFunc,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;await this.handleInit(n);try{this.handleAsset(e,t,n,o)}catch(r){n({code:2,msg:r})}},loadHandler(e,t,n,o,r,i,s){window[e]&&(a.emitLoadSuccessEvent(s,{resourceType:"JS",retryCount:i}),o[e]=window[e],n[e].state=0,!this.firstLoaded[r]&&this.checkAllLoaded(n,r)&&t(o[r],o))},errorHandler(e,t,n,o,r,i,s){a.emitLoadFailedEvent(s,{resourceType:"JS",retryCount:r}),o[e].state=r>=l?2:-1,o[e].url=s,this.load(e,t,n,r+1),i&&this.removeScript(i),"function"==typeof n&&n({code:3,msg:"load error"})},loadScriptProcess(e,t,n,o){let{asset:r,cache:i,module:s,parentModule:l}=e,c=null;if(-1===r[s].state){const e=_objectSpread({},r),d=a.findRequestUrl(e[s].url,o);c=this.createScript(e[s].url),e[s].state=1,c.addEventListener("load",(()=>{this.loadHandler(s,t,e,i,l,o,d)})),c.addEventListener("error",(()=>{this.errorHandler(s,t,n,e,o,c,d)}))}return c},checkAllLoaded(e,t){const n=e[t];if(0!==e[t].state)return!1;if(void 0!==n.dep){const e=Object.keys(n.dep);for(let t=0,n=e.length;t<n;t+=1)if(!window[e[t]])return!1}return this.firstLoaded[t]=!0,!0},createScript(e){const t=document.createElement("script");return t.src=e,t.async=!1,t.type="text/javascript",document.body.appendChild(t),t},removeScript(e){e&&e.parentNode&&e.parentNode.removeChild(e)},dispatch(e,t){if(!this.assetLoaded)return void this.evtArr.push({eventName:e,detail:t});customEventPolyfill();const n=new window.CustomEvent(e,{detail:t});window.dispatchEvent(n)},listen(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:emptyFunc;window.addEventListener(e,t)}};return t}(`//${s._P.DOMAIN_NAME}/components/feature/assets.v1.json`);return window.ScriptLoader=e,window.SLR=e,e.handleInit((()=>{})),null}}const d=new ScriptLoaderStartUpNode},28472:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(53782),r=n(64649),i=n(71800),s=n(86432),a=n(96806),l=n(83110);const c=["attribute","privilegeFlag","privilegeInfo","privilege","advPolicy"],d=["createTime"],u=["padId","padTitle","domainId","relative"],p=["dirty","ownerInfo","docStatus"],m=["pos","pubRev","text","attribs","dirty","rev","padId","padType"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class SSDInfoMappingStartUpNode extends l.B{execute(){var e,t;if(this.shouldFetchDataGetCgi())return window.preData=null,null;const{basicClientVars:n}=window,o={data:_objectSpread({},this.flatMergeBasicClientVars()),retcode:0};window.clientVars=_objectSpread(_objectSpread(_objectSpread({},window.clientVars),o.data),{},{padId:o.data.localPadId||""});const{isAdmin:r}=null!==(e=null===(t=n.authInfo)||void 0===t?void 0:t.attribute)&&void 0!==e?e:{};return r?(window.preData={formInfo:o,editFormInfo:o},null):(window.preData={formInfo:o},null)}shouldFetchDataGetCgi(){var e;return!(!(0,s.at)()&&!(0,a.O)())||(!window.basicClientVars||(null===(e=window.basicClientVars.padData)||void 0===e||!e.text))}flatMergeBasicClientVars(){return _objectSpread(_objectSpread(_objectSpread(_objectSpread({},this.treatAuthInfo()),this.treatDocInfo()),this.treatUserInfo()),this.treatPadData())}treatAuthInfo(){var e,t;const n=null===(e=window.basicClientVars)||void 0===e?void 0:e.authInfo;if(!n)return null;const{attribute:r,privilegeFlag:i,privilegeInfo:s,privilege:a,advPolicy:l}=n,d=(0,o.Z)(n,c);return a&&(r.canView=a.canView),_objectSpread({advPolicy:_objectSpread(_objectSpread(_objectSpread({},l),null==s?void 0:s.advPolicy),{},{reader_can_comment:null==s||null===(t=s.advPolicy)||void 0===t?void 0:t.readerCanComment}),rightFlag:i,privilegeAttribute:r},d)}treatDocInfo(){var e,t,n,r,i,s;const a=null===(e=window.basicClientVars)||void 0===e?void 0:e.docInfo;if(!a)return null;const{isOwner:l,isAdmin:c}=a,m=null!==(t=a.createInfo)&&void 0!==t?t:{},{createTime:h}=m,f=(0,o.Z)(m,d),{isAuth:g,isAdmin:_}=null!==(n=null===(r=window.basicClientVars)||void 0===r||null===(i=r.authInfo)||void 0===i?void 0:i.attribute)&&void 0!==n?n:{},y=null!==(s=a.padInfo)&&void 0!==s?s:{},{padId:b,padTitle:E,domainId:v,relative:T}=y,S=(0,o.Z)(y,u),{dirty:O,ownerInfo:w,docStatus:I}=a,C=(0,o.Z)(a,p);return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({createdDate:1e3*(null!=h?h:0),localPadId:b,domainId:v,creatorDomain:v,globalPadId:`${v}$${b}`,title:E},f),w),S),C),{},{official_auth_info:null==w?void 0:w.officialAuthInfo,docStatus:I,isDeleted:2===I,bad:O,dirty:O,relative:T,isDirty:Number(!(2===O)),isOwner:null!=g?g:l,isAdmin:null!=_?_:c})}treatUserInfo(){var e;return _objectSpread({},null===(e=window.basicClientVars)||void 0===e?void 0:e.userInfo)}treatPadData(){var e;const t=null===(e=window.basicClientVars)||void 0===e?void 0:e.padData;if(!t)return null;const{pos:n,pubRev:r,text:s,attribs:a,dirty:l,rev:c,padId:d,padType:u}=t,p=(0,o.Z)(t,m),h=Number(n),f=Number(r),g=Number(c);return i.Q.setRevAndPos(g,h),_objectSpread(_objectSpread({},p),{},{pos:h,pub:f,rev:g,initialAttributedText:{text:s,attribs:a},dirty:l,padId:d,padType:u})}}const h=new SSDInfoMappingStartUpNode},73017:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(76376),r=n(83110);class ToggleStartUpNode extends r.B{execute(){return o.Z.getInstance(),null}}const i=new ToggleStartUpNode},52304:(e,t,n)=>{n.d(t,{hx:()=>s});var o=n(76376),r=n(4222),i=n(83956);const s={[i.Td.FORM_COMMON_CONFIG]:e=>{var t;const{status:n,dataset:s}=o.Z.getInstance().getToggleByKey(i.Td.FORM_COMMON_CONFIG);return{isEnabled:!(!r.pg.PRIVATE&&!r.pg.SAAS)||!!n,dataset:null!==(t=null!=s?s:e)&&void 0!==t?t:i.gX}},[i.Td.FORM_COLLEGE_CHALLENGE_CUP]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!1};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.FORM_COLLEGE_CHALLENGE_CUP,!1)}},[i.Td.FORM_SUBMIT_RESULT_RECOMMENDATION]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!0};const{status:e,dataset:t}=o.Z.getInstance().getToggleByToggleId(i.Td.FORM_SUBMIT_RESULT_RECOMMENDATION);return{isEnabled:!!e,dataset:t}},[i.Td.FORM_FILE_PERIDO_EXPORT]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!0};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.FORM_FILE_PERIDO_EXPORT,!1)}},[i.Td.FORM_CREATE_QUESTION_BY_INTELLIGENT]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!1};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.FORM_CREATE_QUESTION_BY_INTELLIGENT,!1)}},[i.Td.FORM_CREATE_QUESTION_PATTERN_SETTING]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!1};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.FORM_CREATE_QUESTION_PATTERN_SETTING,!1)}},[i.Td.SIMPLE_SENSITIVE_WORDS]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!1};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.SIMPLE_SENSITIVE_WORDS,!1)}},[i.Td.FORM_CHART_MAP]:()=>{if(r.pg.SAAS||r.pg.PRIVATE)return{isEnabled:!0};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.FORM_CHART_MAP,!1)}},[i.Td.FORM_FILE_MANAGE]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!1};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.FORM_FILE_MANAGE,!1)}},[i.Td.QQ_SCAN_API]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!1};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.QQ_SCAN_API,!1)}},[i.Td.FORM_SORT_QUESTION]:()=>{if(r.pg.PRIVATE||r.pg.SAAS)return{isEnabled:!1};return{isEnabled:!!o.Z.getInstance().getStatusByKey(i.Td.FORM_SORT_QUESTION,!1)}}}},83956:(e,t,n)=>{let o;n.d(t,{Td:()=>o,z4:()=>r,gX:()=>i}),function(e){e.FORM_COMMON_CONFIG="27",e.FORM_COLLEGE_CHALLENGE_CUP="30",e.FORM_SUBMIT_RESULT_RECOMMENDATION="81",e.FORM_FILE_PERIDO_EXPORT="82",e.FORM_CREATE_QUESTION_BY_INTELLIGENT="107",e.FORM_CREATE_QUESTION_PATTERN_SETTING="108",e.SIMPLE_SENSITIVE_WORDS="121",e.FORM_CHART_MAP="127",e.FORM_FILE_MANAGE="164",e.QQ_SCAN_API="167",e.FORM_SORT_QUESTION="169"}(o||(o={}));const r={primary:["密码","蜜码","密保","口令","password","短信验证","短信校验","密꯭码","密꯭玛","密͢码͢","密͛码͛","秘码","密⁢⁢⁢⁢⁢⁢码","密碼","嘧码","密ོ码ོ","密꯭碼꯭","密.码","密.保","密-码","密 码","密玛","密：码","密ྀི码ྀི","蜜玛","蜜码","密꯭保꯭","嘧码","秘码","密匙","密马","密妈","密蚂","蔤碼","咪玛"],secondary:["银行卡","手机","身份证","电话","生日"]},i={sequenceLimit:{cnt:501,msg:"已超过接龙参与人数上限"},adWhiteDocIds:["DYXZCS21zSGpacWZ","DU0xxTnlIcUJMWGR1","DTUlWRERlQnZxVGdh","DZERtRXVIUHpSV21N","DRkF6RFlYdllrSGFE","DVldZY2RRRGpTUWt2","DSkNZUnJEQmhEcHJ6","DQVRzRXJ6a1NDV1F3","DQWNtZkFRcGp1SmVG","DQXd0QUFBamFtRnRn","DQW1qR0h4YkFmSHFW","DQWFsaEVpTnJFQk1P","DQUlTSUZ1UUhpeHRM","DQWNQQnRuTnFlamJE","DQXJSaXF0WlNWYlJ0","DQVl3WnVjSHV1Zm9K","DQWVCSUdKeXF5YlNQ"],sensitiveWords:{isEnabled:!0,primary:"密码|蜜码|密保|口令|password|短信验证|短信校验|密꯭码|密꯭玛|密͢码͢|密͛码͛|秘码|密⁢⁢⁢⁢⁢⁢码|密碼|嘧码|密ོ码ོ|密꯭碼꯭|密$dot$码|密$dot$保|密-码|密 码|密玛|密：码|密ྀི码ྀི|蜜玛|蜜码|密꯭保꯭|嘧码|秘码|密匙|密马|密妈|密蚂|蔤碼|咪玛",secondary:"银行卡|手机|身份证|电话|生日"},question:{canvas:{show:!0},recognition:{show:!1,ocr:!1,offlineTip:"健康码等识别题已于22年12月28日下线，已有题目可继续收集但不再提供识别服务。",travel:{show:!1}}},setting:{export:{isEnabled:!0},result:{cluster:!0},sheet:{bindLoopTimeout:10,bindLoopFailureLimit:60,bindLoopDelay:1,defaultSheetType:"grid"},drive:{isMultipart:!0,multipartLimitSize:31457280}},templateConfigUrl:"https://docpub1.docs.qq.com/bigform/template-tag-config.json",resultImageDPI:2,resultImageMaxQuestions:10}},82170:(e,t,n)=>{n.d(t,{OJ:()=>isWechatAccount,ms:()=>isWeworkAccount});var o=n(6554);function isWechatAccount(){return"wx"===(0,o.loginType)()}function isWeworkAccount(){return"ww"===(0,o.loginType)()}},72952:(e,t,n)=>{n.d(t,{MO:()=>getFormAdPageUrl,jB:()=>shouldGoToAdsPage,oW:()=>getClockAdPageUrl});n(11431);var o=n(52304),r=n(83956),i=n(72870),s=n(63406),a=n(96806);function getFormAdPageUrl(e,t){const[n]=window.location.href.split("#"),[o]=n.split("?");let r=`/packages/miniapp-open/form-result/form-result?url=${encodeURIComponent(o)}`;return e&&(r+="&isMultiSubmit=1"),t&&(r+=`&submitDelay=${t}`),r}function shouldGoToAdsPage(e,t){var n;const l=(0,a.L)(),{dataset:c}=o.hx[r.Td.FORM_COMMON_CONFIG](),d=!(null==c||null===(n=c.adWhiteDocIds)||void 0===n||!n.includes(l));return i.isMiniProgram&&!e&&!s.v1&&!t&&!d}function getClockAdPageUrl(e,t,n){const[o]=window.location.href.split("#"),[r]=o.split("?");let i="/packages/miniapp-open/form-result/form-result";return i+=`?url=${encodeURIComponent(r)}&clockCount=${t}&clockSubmitTime=${n}&isClock=true`,e&&(i+="&isMultiSubmit=1"),i}},50460:(e,t,n)=>{n.d(t,{wJ:()=>convertCalendarDateToServer,M:()=>getTimestampByCurrSelectedCalendarDate,NY:()=>transformAllowedTimeToTodayTime,qT:()=>transformTimeToAllowedTime});var o=n(27693),r=n.n(o),i=n(8760);function convertCalendarDateToServer(e){var t,n;return null!=e&&e.day?{year:e.year,month:e.month,cycle_time:{day:e.day,start:null!==(t=e.start)&&void 0!==t?t:i.J.START,end:null!==(n=e.end)&&void 0!==n?n:i.J.END}}:null}function getTimestampByCurrSelectedCalendarDate(e){var t,n;if(null==e||!e.day)return null;const{year:o,month:i,day:s}=e,a=r()().year(o).month(i-1).date(s).startOf("day").valueOf();return{startTime:a+1e3*(null!==(t=e.start)&&void 0!==t?t:0),endTime:a+1e3*(null!==(n=e.end)&&void 0!==n?n:0)}}function transformAllowedTimeToTodayTime(e){return Number(new Date((new Date).toLocaleDateString()))+1e3*(null!=e?e:0)}function transformTimeToAllowedTime(e){return~~((e-Number(new Date((new Date).toLocaleDateString())))/1e3)}},35421:(e,t,n)=>{n.d(t,{q:()=>checkDisplayFillReminder});var o=n(53345);function checkDisplayFillReminder(e,t){return e&&[o.$S.START,o.$S.BEFORE].includes(t)}},58628:(e,t,n)=>{n.d(t,{rw:()=>getStartDateTextOfNextCycle,$E:()=>getDescriptionForDate});n(11431),n(27693);var o=n(54734),r=n(53345);const i=[{key:0,name:o.Z.t("日")},{key:1,name:o.Z.t("一")},{key:2,name:o.Z.t("二")},{key:3,name:o.Z.t("三")},{key:4,name:o.Z.t("四")},{key:5,name:o.Z.t("五")},{key:6,name:o.Z.t("六")}];function getStartDateTextOfNextCycle(e,t){if(e===r.CR.DAILY)return o.Z.t("今日");if(e===r.CR.MONTHLY){const[e]=t;return o.Z.t("每月{{nextDayOfMonth}}日",{nextDayOfMonth:e})}if(e===r.CR.WEEKLY){var n;const e=Math.min(...t),r=null===(n=i.find((t=>e===t.key)))||void 0===n?void 0:n.name;return o.Z.t("每周{{nextDayOfWeekText}}",{nextDayOfWeekText:r})}return""}function getDescriptionForDate(e,t){var n,s,a;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e&&null!==(n=null===(s=(a={[r.CR.DEFAULT]:()=>"",[r.CR.DAILY]:()=>o.Z.t("每日收集"),[r.CR.MONTHLY]:()=>o.Z.t("每月{{dayOfMonth}}日收集",{dayOfMonth:l[0]}),[r.CR.WEEKLY]:()=>{if(1===l.length){const e=i.find((e=>e.key===l[0]));return o.Z.t("每周{{dayOfWeek}}收集",{dayOfWeek:null==e?void 0:e.name})}return o.Z.t("每周收集")}})[t])||void 0===s?void 0:s.call(a))&&void 0!==n?n:""}},6210:(e,t,n)=>{n.d(t,{xv:()=>checkShouldRestartForSetting,xz:()=>getFormattedTime,u6:()=>getTimeString,Li:()=>getLocalTime});var o=n(27693),r=n.n(o),i=n(54734);function checkShouldRestartForSetting(e,t,n){if(!n)return!1;const o=Date.now();return e<o&&t>0&&t>o}function getFormattedTime(e,t){if(!e)return"";const n=r()(e),o=n.year(),i=r()().year()!==o,s=t?n.format("MM-DD"):n.format("MM-DD HH:mm");return i?`${o}-${s}`:s}function getTimeString(e,t){return e?getFormattedTime(e,t):i.Z.t("未设置")}function getLocalTime(e){const t=new Date(1e3*e);return`${t.toLocaleDateString()} ${t.toTimeString().split(" ")[0]}`}},80203:(e,t,n)=>{n.r(t),n.d(t,{getAllBigPaperInfo:()=>getAllBigPaperInfo,getBigPaperInfo:()=>getBigPaperInfo,isFilledBigPaper:()=>isFilledBigPaper,isFillingBigPaper:()=>isFillingBigPaper,isUnFilledBigPaper:()=>isUnFilledBigPaper,setBigPaperInfo:()=>setBigPaperInfo,verifyAnswer:()=>verifyAnswer});var o=n(64649),r=(n(11431),n(14042));let i;!function(e){e[e.UN_FILL=0]="UN_FILL",e[e.FILLING=1]="FILLING",e[e.FILLED=2]="FILLED"}(i||(i={}));var s=n(96806),a=n(22082),l=n(27565),c=n(70740);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function getAllBigPaperInfo(e){if(!(0,s.O)())return null;const t=`bigPaper_status_${e||window.clientVars.tinyId||window.clientVars.tinyid}`,{urlId:n}=(0,a.e)();return{bigPaperInfo:(0,l.FY)(t,{useDeserialization:!0,fallbackValue:{}}),key:t,urlId:n}}function setBigPaperInfo(e,t){if(!(0,s.O)())return!1;const{bigPaperInfo:n,urlId:o,key:r}=getAllBigPaperInfo(t);return n[o]=e,(0,l.H4)(r,n)}function getBigPaperInfo(e){if(!(0,s.O)())return;const{bigPaperInfo:t,urlId:n}=getAllBigPaperInfo(e);return t[n]?t[n]:{index:0,status:0}}function isUnFilledBigPaper(){if(!(0,s.O)())return!1;const{status:e}=getBigPaperInfo();return Number(e)===i.UN_FILL}function isFillingBigPaper(){if(!(0,s.O)())return!1;const{status:e}=getBigPaperInfo();return Number(e)===i.FILLING}function isFilledBigPaper(){if(!(0,s.O)())return!1;const{status:e}=getBigPaperInfo();return Number(e)===i.FILLED}function verifyAnswer(e,t){const{questions:n,sections:o}=e,i=(()=>{const e={};return t=>e[t]||n.find((n=>{const{id:r}=n;return!o[0].qlist.includes(r)&&(e[r]=n,r===t)}))})(),{paperResultMap:s,paperResult:a}=Object.keys(t).reduce(((e,n)=>{var o;const s=i(n);if(!s||![r.c.RADIO,r.c.CHECKBOX].includes(s.type))return e;const a=Array.from(t[n].map((e=>{let{title:t}=e;return t})),(e=>{var t,n,o;return null===(t=s.qdata)||void 0===t||null===(n=t.options)||void 0===n||null===(o=n.find((t=>{let{title:n}=t;return n===e})))||void 0===o?void 0:o.id})).sort().toString()===Array.from(s.answerInfo.rightOptionIds).sort().toString()?1:2;return{paperResultMap:_objectSpread(_objectSpread({},e.paperResultMap),{},{[n]:a}),paperResult:[...e.paperResult,{question_id:n,result:a,score:a===c.oY.EXAM.RIGHT?Number(null===(o=s.answerInfo)||void 0===o?void 0:o.score):0}]}}),{paperResultMap:{},paperResult:[]});return{paperResult:a,paperResultMap:s}}},15530:(e,t,n)=>{n.d(t,{tL:()=>a,gD:()=>c,cb:()=>o,b3:()=>r,Jq:()=>l,_H:()=>d,bG:()=>u,ly:()=>p,pU:()=>i,BT:()=>m,cv:()=>h,Fo:()=>s,nI:()=>f,Bk:()=>g});const o={SHARE_QR_IMAGE:"/cgi-bin/online_docs/qrcode_form",GET_REPORT_TOKEN:"/cgi-bin/online_docs/support_gettoken",GET_PAD_META_INFO:"/cgi-bin/online_docs/doc_info",DOC_RECOVER:"/cgi-bin/online_docs/doc_recover",DOC_LIST:"/cgi-bin/online_docs/doclist",USER_INFO:"/cgi-bin/online_docs/user_info",GET_UNREAD_NUM:"/cgi-bin/online_docs/notify_getnum",CREATE_DOC_NEW:"/cgi-bin/online_docs/createdoc_new",AUTH_APPLY_CHECK:"/api/permission/apply_check",USER_CHECK:"/cgi-bin/online_docs/user_info/check",CHANGE_FORM_TITLE:"/cgi-bin/online_docs/doc_changetitle",DOC_HUMTRANS:"/cgi-bin/online_docs/doc_humtrans",AI_AUTO_COLUMN:"/cgi-bin/online_docs/ai_autocolumn",GET_RESULT_PVUV:"/cgi-bin/online_docs/browser_list"},r={DELETE_RECORD:"/api/form/write/del_record",SET_SIGN_ROLE:"/form/collect/set_sign_role",GET_SIGN_ROLE:"/form/collect/get_sign_role",PUBLISH:"/api/form/write/publish",RECORD_GET:"/api/form/read/record",PAPER_MARK:"/api/form/paper/mark",RECORD_PAGE:"/api/form/read/records",SIGN_RECORDS:"/api/form/read/own_sign_records",ROLE_CHECK:"/api/form/write/presubmit_check_role",SUBMIT:"/api/form/write/submit",GET_STATISTICAL_CHART:"/api/form/statistics/chart",GET_CROSS_ANALYSIS:"/api/form/statistics/cross_analysis",GET_RESULT_OVERVIEW:"/api/form/statistics/overview",GET_RESULT_SUBMITTED_LIST:"/api/form/statistics/submitted",GET_RESULT_UNSUBMITTED_LIST:"/api/form/statistics/unsubmitted",REMIND_UNSUBMIT:"/api/form/reminder/unsubmitted_users",GET_STATISTICAL_FILE_LIST:"/api/form/read/files",GET_RESULT_FILES_LIST:"/api/form/file/get",GET_RESULT_FILE_COUNT:"/api/form/file/count",RESULT_DELET_FILES:"/api/form/file/delete",RESULT_RENAME_FILES:"/api/form/file/rename",RESULT_REVERT_FILES:"/api/form/file/revert",GET_RESULT_DELET_FILES:"/api/form/file/get_delete_files"},i={WRITE_SETTING:"/api/form/write/settings",READ_SETTING:"/api/form/read/settings",OVERALL_COUNT:"/api/form/read/count",STATISTICS_SECURITY_CHECK:"/api/form/statistics/security/check",GET_EXPORTING_TASK:"/api/form/export/getexportingtask",GET_PROGRESS:"/api/form/export/getprogress",SET_FILL_REMINDER:"/api/form/reminder/cfg/set",GET_SUBMIT_USERS:"/api/form/roster/get_submit_users",GET_UNSUBMIT_USERS:"/api/form/roster/get_unsubmit_users",ROSTER_ADD:"/api/form/roster/manage/add",ROSTER_DELETE:"/api/form/roster/manage/delete",ROSTER_EDIT:"/api/form/roster/manage/edit",ROSTER_GET:"/api/form/roster/manage/get",ROSTER_RELATION_GET:"/api/form/roster/relation/get",ROSTER_RELATION_UPDATE:"/api/form/roster/relation/update",ROSTER_MEMBER_SEARCH:"/api/form/roster/member/search",ROSTER_MEMBER_BIND:"/api/form/roster/member/bind",ROSTER_MEMBER_GET:"/api/form/roster/member/get",ROSTER_MEMBER_SUBMITTED:"/api/form/roster/member/submited",EXPORT_LAST_RULE:"/api/form/export/getlastrule",GET_MATCHED_QUESTIONS:"/api/form/read/search/questions"},s={TAGS_BY_TEMPLATEID:"/api/mall/product/tags-by-itemid"},a={GET:"/form/data/get",SYNC:"/form/data/post",PUB_REV:"/form/data/getpubrev"},l={IS_BIG_PAPER_SUBMIT_FORM_API:"/bigform/collegetraning/answer/submit",GET_BIG_PAPER_DATA:"/bigform/collegetraning/questionnaire/get",GET_BIG_PAPER_RESULT:"/bigform/collegetraning/export/get_addr",GET_BIG_PAPER_SEQS:"/bigform/collegetraning/answer/getseqs",GET_BIG_PAPER_ANSWER:"/bigform/collegetraning/answer/get",CHECK_BIG_PAPER_ANSWER_SECURE:"/bigform/collegetraning/answer/checksecure",SUBMIT_BIG_PAPER_ANSWER:"/bigform/collegetraning/answer/submit"},c={GET_AUTH_INFO:"/cgi-bin/redirect/{creatorDomain}/ep/api/getpadinfo",GET_AUTH_INFO_PRIVATE:"/cgi-bin/online_docs/auth_info/get",SET_AUTH_INFO:"/cgi-bin/redirect/{creatorDomain}/ep/api/setpadinfo",BANNER_GET:"/cgi-bin/banner/banner_get",SAVE_AS_TEMPLATE:"/cgi-bin/template/mytemplate_add"},d={UPDATE:"/v2/user/attribute/update",QUERY:"/v2/user/attribute/get"},u={UPLOAD_THUMBNAIL:"/sdc/upload_thumbnail",USER_MARK:"/sdc/getcollabroomuserinfos"},p={OWNER_VIP_LEVEL:"/api/personalize/owner/viplevel",SELF_VIP_LEVEL:"/api/vipcenter/info/all",VIP_NEW_COMER:"/api/vipcenter/paying/is_new"},m={QQ_CHANNEL_PUSH:"/api/push/qq_channel",PUBLISH_TO_MINI:"/cgi-bin/online_docs/share_doc",SUBMIT_TO_MINI:"/cgi-go/notify/submit_form",QQ_GROUP_ADD_DOCS:"/cgi-bin/group_online_docs/doc_add",QQ_CHANNEL_NICK_NAME:"/api/guild-gateway/trpc.group_pro.bot_solitaire_svr.BotSolitaireSvr/GetUserInfo"},h={IMPORT_EXCEL_PARSE:"/v1/import/parse",IMPORT_EXCEL_PROGRESS:"/v1/import/query_parse_progress",SET_CERTIFICATION:"/v2/file/authenticate",GET_USER_SPACE:"/v2/file/suite/space",ATTACHMENT_DETAIL:"/v2/file/attachment/detail",EXPORT_CHECK_ATTACHMENT:"/v1/export/check",EXPORT_SHEET:"/v1/export/export_office",EXPORT_SHEET_PROGRESS:"/v1/export/query_progress",DELETE_FILE_CAPACITY:"/api/drive/third/delete",DELETE_FILE_IMAGE_CAPACITY:"/api/drive/attachment/delete",CURRENT_FORM_CAPACITY:"/v2/drive/file/desc"},f={BIND_START:"/api/form/sheet/start_bind",REBIND_START:"/api/form/sheet/start_rebind",BIND_RESULT:"/api/form/sheet/get_bind_result",UNBIND:"/api/form/sheet/unbind",EXPORT:"/api/form/export/export",EXPORT_PROCESS:"/form/collect/export_process",BIND_PATTERN:"/api/form/sheet/get_task_info"},g={SIGNATURE:"/v2/util/wechat/signature"}},42341:(e,t,n)=>{n.d(t,{o:()=>o,Q:()=>r});const o={"Content-Type":"application/json"},r={"Content-Type":"application/x-www-form-urlencoded"}},45607:(e,t,n)=>{n.d(t,{oj:()=>s,on:()=>a,i8:()=>l,ce:()=>c,vv:()=>d,_3:()=>u,z7:()=>p,OS:()=>m,mW:()=>h,H6:()=>f,CS:()=>g,nQ:()=>_,oJ:()=>y,c3:()=>b,TD:()=>E,cj:()=>v,Hg:()=>T,ti:()=>S,Vm:()=>O,HC:()=>w,lH:()=>I});var o,r=n(54734),i=n(4222);const s=r.Z.t("开始和截止"),a=r.Z.t("定时和重复"),l=r.Z.t("可设置截止时间、定时重复等"),c=(r.Z.t("编辑收集表"),r.Z.t("编辑打卡"),r.Z.t("编辑接龙"),r.Z.t("编辑投票"),r.Z.t("修改我的结果"),r.Z.t("修改结果"),r.Z.t("生成二维码"),r.Z.t("再填一份"),r.Z.t("好的")),d=r.Z.t("完成"),u=r.Z.t("确认"),p=r.Z.t("确定"),m=r.Z.t("取消"),h=r.Z.t("返回"),f=r.Z.t("删除"),g=r.Z.t("我知道了"),_=null!==(o=i.nj.DOC_TEXT)&&void 0!==o?o:r.Z.t("腾讯文档"),y=r.Z.t("生成副本"),b=r.Z.t("生成副本中，请稍候..."),E=r.Z.t("另存为我的模板"),v=r.Z.t("生成图片"),T=r.Z.t("已生成图片，请长按图片保存或分享"),S={CLARITY:r.Z.t("清晰度"),QUESTION:r.Z.t("题目"),THEME:r.Z.t("主题"),MODULE:r.Z.t("模块")},O={DEF:r.Z.t("默认"),DARK:r.Z.t("暗瓦"),FISH:r.Z.t("小鱼"),SNOW:r.Z.t("雪峰"),FOCUS:r.Z.t("聚焦")},w={DEF:r.Z.t("普通"),HD:r.Z.t("高清")},I={DEF:r.Z.t("默认"),NIL:r.Z.t("无")}},86202:(e,t,n)=>{n.d(t,{LE:()=>i,kD:()=>s,Yv:()=>a,tl:()=>l});var o=n(54734),r=n(14042);const i=[{matchText:o.Z.t("是否"),matchId:"optionKeyWords1"},{matchText:o.Z.t("年级"),matchId:"optionKeyWords2"},{matchText:o.Z.t("户口"),matchId:"optionKeyWords3"},{matchText:o.Z.t("承诺"),matchId:"optionKeyWords4"},{matchText:o.Z.t("交通方式"),matchId:"optionKeyWords5"},{matchText:o.Z.t("血型"),matchId:"optionKeyWords6"},{matchText:o.Z.t("性别"),matchId:"optionKeyWords7"},{matchText:o.Z.t("婚姻"),matchId:"optionKeyWords9"},{matchText:o.Z.t("工作年限"),matchId:"optionKeyWords10"},{matchText:o.Z.t("政治面貌"),matchId:"optionKeyWords11"},{matchText:o.Z.t("学历"),matchId:"optionKeyWords12"}],s={optionKeyWords1:{qdata:{options:[{title:o.Z.t("是")},{title:o.Z.t("否")}]},type:"RADIO"},optionKeyWords2:{qdata:{options:[{title:o.Z.t("一年级")},{title:o.Z.t("二年级")},{title:o.Z.t("三年级")},{title:o.Z.t("四年级")},{title:o.Z.t("五年级")},{title:o.Z.t("六年级")},{title:o.Z.t("初一")},{title:o.Z.t("初二")},{title:o.Z.t("初三")},{title:o.Z.t("高一")},{title:o.Z.t("高二")},{title:o.Z.t("高三")}]},type:r.c.RADIO},optionKeyWords3:{qdata:{options:[{title:o.Z.t("城市")},{title:o.Z.t("农村")}]}},optionKeyWords4:{qdata:{options:[{title:o.Z.t("我承诺")}]}},optionKeyWords5:{qdata:{options:[{title:o.Z.t("飞机")},{title:o.Z.t("高铁")},{title:o.Z.t("市内交通工具")},{id:"Other",title:o.Z.t("其他")}]}},optionKeyWords6:{qdata:{options:[{title:o.Z.t("A型")},{title:o.Z.t("B型")},{title:o.Z.t("AB型")},{title:o.Z.t("O型")}]}},optionKeyWords7:{qdata:{options:[{title:o.Z.t("男")},{title:o.Z.t("女")}]}},optionKeyWords8:{qdata:{options:[{title:o.Z.t("汉族")},{title:o.Z.t("壮族")},{title:o.Z.t("满族")},{title:o.Z.t("回族")},{title:o.Z.t("苗族")},{title:o.Z.t("维吾尔族")},{title:o.Z.t("土家族")},{title:o.Z.t("彝族")},{title:o.Z.t("蒙古族")},{title:o.Z.t("藏族")},{title:o.Z.t("布依族")},{title:o.Z.t("侗族")},{title:o.Z.t("瑶族")},{title:o.Z.t("朝鲜族")},{title:o.Z.t("白族")},{title:o.Z.t("哈尼族")},{title:o.Z.t("哈萨克族")},{title:o.Z.t("黎族")},{title:o.Z.t("傣族")},{title:o.Z.t("畲族")},{title:o.Z.t("傈僳族")},{title:o.Z.t("仡佬族")},{title:o.Z.t("东乡族")},{title:o.Z.t("高山族")},{title:o.Z.t("拉祜族")},{title:o.Z.t("水族")},{title:o.Z.t("佤族")},{title:o.Z.t("纳西族")},{title:o.Z.t("羌族")},{title:o.Z.t("土族")},{title:o.Z.t("仫佬族")},{title:o.Z.t("锡伯族")},{title:o.Z.t("柯尔克孜族")},{title:o.Z.t("达斡尔族")},{title:o.Z.t("景颇族")},{title:o.Z.t("毛南族")},{title:o.Z.t("撒拉族")},{title:o.Z.t("布朗族")},{title:o.Z.t("塔吉克族")},{title:o.Z.t("阿昌族")},{title:o.Z.t("普米族")},{title:o.Z.t("怒族")},{title:o.Z.t("京族")},{title:o.Z.t("基诺族")},{title:o.Z.t("德昂族")},{title:o.Z.t("保安族")},{title:o.Z.t("俄罗斯族")},{title:o.Z.t("裕固族")},{title:o.Z.t("乌孜别克族")},{title:o.Z.t("门巴族")},{title:o.Z.t("鄂伦春族")},{title:o.Z.t("独龙族")},{title:o.Z.t("塔塔尔族")},{title:o.Z.t("赫哲族")},{title:o.Z.t("珞巴族")}]},type:"SELECT"},optionKeyWords9:{qdata:{options:[{title:o.Z.t("未婚")},{title:o.Z.t("已婚")},{title:o.Z.t("离异")}]}},optionKeyWords10:{qdata:{options:[{title:o.Z.t("0-3年")},{title:o.Z.t("3-5年")},{title:o.Z.t("5-10年")},{title:o.Z.t("10年以上")}]}},optionKeyWords11:{qdata:{options:[{title:o.Z.t("中共党员")},{title:o.Z.t("民主党派")},{title:o.Z.t("群众")},{id:"Other",title:o.Z.t("其他")}]}},optionKeyWords12:{qdata:{options:[{title:o.Z.t("小学")},{title:o.Z.t("初中")},{title:o.Z.t("高中")},{title:o.Z.t("大专")},{title:o.Z.t("本科")},{title:o.Z.t("硕士")},{title:o.Z.t("博士及以上")},{id:"Other",title:o.Z.t("其他")}]}}},a=[{matchText:[o.Z.t("手机"),o.Z.t("联系方式")],matchId:"validateQuestion1"},{matchText:[o.Z.t("身份证")],matchId:"validateQuestion2"},{matchText:[o.Z.t("护照")],matchId:"validateQuestion3"},{matchText:[o.Z.t("银行卡")],matchId:"validateQuestion4"},{matchText:[o.Z.t("邮箱"),o.Z.t("邮件"),"email"],matchId:"validateQuestion5"},{matchText:[o.Z.t("电话")],matchId:"validateQuestion6"},{matchText:[o.Z.t("网址"),o.Z.t("网页"),o.Z.t("网站")],matchId:"validateQuestion7"}],l={validateQuestion1:{dataType:7,validate:[{type:13,rules:{},message:"",ruletype:2}],validateSetting:{type:5}},validateQuestion2:{dataType:6,validate:[{type:13,rules:{},message:"",ruletype:1}],validateSetting:{type:4}},validateQuestion3:{dataType:1,validate:[{type:13,rules:{},message:"",ruletype:10}],validateSetting:{type:7}},validateQuestion4:{dataType:1,validate:[{type:14,rules:{},message:"",ruletype:10}],validateSetting:{type:8}},validateQuestion5:{dataType:4,validate:[{type:13,rules:{},message:"",ruletype:5}],validateSetting:{type:2}},validateQuestion6:{dataType:7,validate:[{type:13,rules:{},message:"",ruletype:3}],validateSetting:{type:6}},validateQuestion7:{dataType:5,validate:[{type:13,rules:{},message:"",ruletype:4}],validateSetting:{type:3}}}},96601:(e,t,n)=>{n.d(t,{y:()=>r});var o=n(33716);const r={EDIT:`#/${o.G.EDIT}`,EDIT_CLOSING_REMARK:`#/${o.G.EDIT_CLOSING_REMARK}`,PREVIEW:`#/${o.G.PREVIEW}`,FILL:`#/${o.G.FILL}`,FILL_DETAIL:`#/${o.G.FILL_DETAIL}`,FILL_LIST:`#/${o.G.FILL_LIST}`,RESULT:`#/${o.G.RESULT}`,RESULT_MODIFY:`#/${o.G.RESULT_MODIFY}`,SETTING:`#/${o.G.SETTING}`,DETAIL:`#/${o.G.SETTING}`,BIGPAPER_DOWNLOAD_RESULT:`#/${o.G.BIGPAPER_DOWNLOAD_RESULT}`,FEEDBACK:`#/${o.G.FEEDBACK}`,SUBMIT_RESULT:`#/${o.G.SUBMIT_RESULT}`,QUICK_CREATE:`#/${o.G.QUICK_CREATE}`}},8760:(e,t,n)=>{n.d(t,{J:()=>o,v:()=>r});const o={START:32400,END:79200},r={START:32400,END:79200}},47064:(e,t,n)=>{n.d(t,{K:()=>o,k:()=>r});const o="2HCBZ-NXVCW-BNGRQ-OCTYD-3OJBJ-V5FQN",r="tencent-doc"},69842:(e,t,n)=>{n.d(t,{zJ:()=>i,YY:()=>s,Vj:()=>a,ZP:()=>l});var o=n(54734),r=n(14042);const i=[{title:o.Z.t("你的姓名"),subtitle:"",required:!1,dataType:1,type:r.c.SIMPLE,qdata:{placeholder:o.Z.t("请填写")}},{title:o.Z.t("你的手机号码"),subtitle:"",required:!1,type:r.c.SIMPLE,dataType:1,qdata:{placeholder:o.Z.t("请填写")},validate:[{ruletype:2,type:11,rules:{pattern:"^[1][2-9][0-9]{9}$"},message:o.Z.t("请输入有效的手机。")}]},{title:o.Z.t("你的身份证号码"),subtitle:"",required:!1,type:r.c.SIMPLE,dataType:1,qdata:{placeholder:o.Z.t("请填写")},validate:[{ruletype:1,type:11,rules:{pattern:"(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)"},message:o.Z.t("请输入有效的身份证。")}]},{title:o.Z.t("你的邮箱"),subtitle:"",required:!1,type:r.c.SIMPLE,dataType:1,qdata:{placeholder:o.Z.t("请填写")},validate:[{ruletype:5,type:11,rules:{pattern:"^([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+\\.[a-zA-Z]{2,3}$"},message:o.Z.t("请输入有效的邮箱。")}]},{title:o.Z.t("你的网址"),subtitle:"",required:!1,type:r.c.SIMPLE,dataType:1,qdata:{placeholder:o.Z.t("请填写")},validate:[{ruletype:4,type:11,rules:{pattern:"^(?=^.{3,255}$)(http(s)?:\\/\\/)?(www\\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\\d+)*(\\/\\w+\\.\\w+)*$"},message:o.Z.t("请输入有效的网址。")}]},{title:o.Z.t("你的性别"),subtitle:"",required:!1,type:r.c.RADIO,dataType:1,qdata:{options:[{id:1,title:o.Z.t("男")},{id:2,title:o.Z.t("女")}]}},{title:o.Z.t("你的出生年月"),subtitle:"",required:!1,type:r.c.DATE,dataType:3,qdata:{format:o.Z.t('yyyy"年"m"月"d"日"'),subType:o.Z.t('yyyy"年"m"月"d"日"')}},{title:o.Z.t("你的服装尺寸"),subtitle:"",required:!1,type:r.c.SELECT,dataType:1,qdata:{placeholder:o.Z.t("请选择"),options:[{id:1,title:"XS"},{id:2,title:"S"},{id:3,title:"M"},{id:4,title:"L"},{id:5,title:"XL"},{id:6,title:"2XL"},{id:7,title:"3XL"},{id:8,title:"4XL"}]}},{title:o.Z.t("你的学历"),subtitle:"",required:!1,type:r.c.SELECT,dataType:1,qdata:{placeholder:o.Z.t("请选择"),options:[{id:1,title:o.Z.t("小学")},{id:2,title:o.Z.t("中学")},{id:3,title:o.Z.t("大专")},{id:4,title:o.Z.t("本科")},{id:5,title:o.Z.t("研究生")},{id:6,title:o.Z.t("博士")}]}}],s=(o.Z.t("姓名"),r.c.SIMPLE,o.Z.t("请填写"),o.Z.t("打卡位置"),r.c.SIMPLE,o.Z.t("请填写"),o.Z.t("打卡时间"),r.c.SIMPLE,o.Z.t("请填写"),o.Z.t("图片"),r.c.IMAGE,o.Z.t("请填写"),o.Z.t("打卡选项"),r.c.SELECT,o.Z.t("请填写"),o.Z.t("选项1"),o.Z.t("选项2"),o.Z.t("选项3"),o.Z.t("打卡实名"),r.c.SIMPLE,o.Z.t("请填写"),o.Z.t("身份 ID"),r.c.SIMPLE,o.Z.t("请填写"),o.Z.t("出生年月日"),r.c.SIMPLE,o.Z.t("请填写"),o.Z.t("关系"),r.c.SIMPLE,o.Z.t("请填写"),{[r.c.AUTODEP]:o.Z.t("自动部门题"),[r.c.AUTONAME]:o.Z.t("自动姓名题"),[r.c.CANVAS]:o.Z.t("签名题"),[r.c.CASCADER]:o.Z.t("多级选项题"),[r.c.CHECKBOX]:o.Z.t("多选题"),[r.c.COMMODITY]:o.Z.t("商品题"),[r.c.DATE]:o.Z.t("日期题"),[r.c.FILE]:o.Z.t("文件题"),[r.c.FILLIN]:o.Z.t("填空题"),[r.c.FILEIMAGE]:o.Z.t("图片题"),[r.c.CANVAS_IMAGE]:o.Z.t("签名题"),[r.c.IMAGE]:o.Z.t("图片题"),[r.c.LOCATION]:o.Z.t("地理位置"),[r.c.MATRIX_CHECKBOX]:o.Z.t("矩阵题"),[r.c.MATRIX_RADIO]:o.Z.t("矩阵题"),[r.c.MATRIX_RATING]:o.Z.t("矩阵题"),[r.c.RADIO]:o.Z.t("单选题"),[r.c.RATING]:o.Z.t("评分题"),[r.c.RECOGNITION]:o.Z.t("识图题"),[r.c.SCALE]:o.Z.t("量表题"),[r.c.SCAN]:o.Z.t("扫码题"),[r.c.SELECT]:o.Z.t("下拉选择"),[r.c.SIMPLE]:o.Z.t("问答题"),[r.c.SORT]:o.Z.t("排序题"),[r.c.TABLE]:o.Z.t("表格题"),[r.c.TEMPERATURE]:o.Z.t("体温题"),[r.c.TIME]:o.Z.t("时间题"),[r.c.SEGMENTATION]:"",[r.c.RICH]:"",[r.c.INTELLIGENT_MATCH]:o.Z.t("智能匹配题"),[r.c.VOTE]:o.Z.t("投票题")}),a=[{matchText:o.Z.t("姓名"),matchId:"name"},{matchText:o.Z.t("是否"),matchId:"whether"},{matchText:o.Z.t("身份证"),matchId:"id"},{matchText:o.Z.t("联系方式"),matchId:"contact"},{matchText:o.Z.t("专业"),matchId:"major"},{matchText:o.Z.t("班级"),matchId:"class"},{matchText:o.Z.t("日期"),matchId:"date"},{matchText:o.Z.t("户口性质"),matchId:"hkxz"},{matchText:o.Z.t("户籍地"),matchId:"hjd"},{matchText:o.Z.t("评分"),matchId:"score"},{matchText:o.Z.t("NPS"),matchId:"nps"},{matchText:o.Z.t("校区"),matchId:"campus"},{matchText:o.Z.t("满意度"),matchId:"satisfaction"},{matchText:o.Z.t("部门"),matchId:"department"},{matchText:o.Z.t("微信号"),matchId:"wechat"},{matchText:o.Z.t("承诺申明"),matchId:"commitment"},{matchText:o.Z.t("手机号"),matchId:"phone"},{matchText:o.Z.t("温度"),matchId:"temperature"},{matchText:o.Z.t("出生日期"),matchId:"birth"},{matchText:o.Z.t("岗位"),matchId:"post"},{matchText:o.Z.t("自我评价"),matchId:"evaluation"},{matchText:o.Z.t("年级"),matchId:"grade"},{matchText:o.Z.t("交通方式"),matchId:"transportation"},{matchText:o.Z.t("血型"),matchId:"blood"},{matchText:o.Z.t("职业"),matchId:"occupation"},{matchText:o.Z.t("学号"),matchId:"student"},{matchText:o.Z.t("性别"),matchId:"gender"},{matchText:o.Z.t("QQ号"),matchId:"qq"},{matchText:o.Z.t("民族"),matchId:"nation"},{matchText:o.Z.t("毕业院校"),matchId:"uniersity"},{matchText:o.Z.t("院系"),matchId:"yx"},{matchText:o.Z.t("年龄"),matchId:"age"},{matchText:o.Z.t("邮箱"),matchId:"mail"},{matchText:o.Z.t("籍贯"),matchId:"native"},{matchText:o.Z.t("地址"),matchId:"address"},{matchText:o.Z.t("婚姻情况"),matchId:"hyqk"},{matchText:o.Z.t("工作单位"),matchId:"gzdw"},{matchText:o.Z.t("体重"),matchId:"weight"},{matchText:o.Z.t("工作年限"),matchId:"gznx"},{matchText:o.Z.t("身高"),matchId:"height"},{matchText:o.Z.t("政治面貌"),matchId:"zzmm"},{matchText:o.Z.t("学历"),matchId:"xl"}],l={name:{title:o.Z.t("请填写姓名"),btnText:o.Z.t("姓名")},whether:{title:o.Z.t("是否"),qdata:{options:[{title:o.Z.t("是")},{title:o.Z.t("否")}]},type:"RADIO",btnText:o.Z.t("是否")},id:{dataType:6,validate:[{type:13,rules:{},message:"",ruletype:1}],validateSetting:{type:4},title:o.Z.t("请填写身份证号"),btnText:o.Z.t("身份证")},contact:{title:o.Z.t("请填写联系方式"),btnText:o.Z.t("联系方式")},major:{title:o.Z.t("请填写专业"),btnText:o.Z.t("专业")},class:{title:o.Z.t("请填写班级"),btnText:o.Z.t("班级")},date:{title:o.Z.t("请选择日期"),type:"DATE",btnText:o.Z.t("日期")},hkxz:{type:"RADIO",title:o.Z.t("请选择户口性质"),qdata:{options:[{title:o.Z.t("城市")},{title:o.Z.t("农村")}]},btnText:o.Z.t("户口性质")},hjd:{title:o.Z.t("请填写户籍地"),btnText:o.Z.t("户籍地")},score:{title:o.Z.t("请评分"),type:"RATING",btnText:o.Z.t("评分")},nps:{title:o.Z.t("请评分"),type:"SCALE",btnText:"NPS"},campus:{title:o.Z.t("请填写校区"),btnText:o.Z.t("校区")},satisfaction:{type:"SCALE",title:o.Z.t("请选择满意度"),btnText:o.Z.t("满意度")},department:{title:o.Z.t("请填写部门"),btnText:o.Z.t("部门")},wechat:{title:o.Z.t("请填写微信号"),btnText:o.Z.t("微信号")},commitment:{title:o.Z.t("本人承诺，xxxxxx"),type:"RADIO",qdata:{options:[{title:o.Z.t("我承诺")}]},btnText:o.Z.t("承诺申明")},phone:{dataType:7,title:o.Z.t("请填写手机号"),validate:[{type:13,rules:{},message:"",ruletype:2}],validateSetting:{type:5},btnText:o.Z.t("手机号")},temperature:{qdata:{suffix:"℃"},validate:[{message:"",type:2,rules:{type:"number"}}],validateSetting:{type:1},dataType:2,title:o.Z.t("请填写温度"),btnText:o.Z.t("温度")},birth:{type:"DATE",title:o.Z.t("请选择出生日期"),btnText:o.Z.t("出生日期")},post:{title:o.Z.t("请填写岗位"),btnText:o.Z.t("岗位")},grade:{type:"RADIO",qdata:{options:[{title:o.Z.t("一年级")},{title:o.Z.t("二年级")},{title:o.Z.t("三年级")},{title:o.Z.t("四年级")},{title:o.Z.t("五年级")},{title:o.Z.t("六年级")},{title:o.Z.t("七年级")},{title:o.Z.t("八年级")},{title:o.Z.t("九年级")}]},title:o.Z.t("请选择年级"),btnText:o.Z.t("年级")},evaluation:{title:o.Z.t("请填写自我评价"),btnText:o.Z.t("自我评价")},transportation:{qdata:{options:[{title:o.Z.t("飞机")},{title:o.Z.t("高铁")},{title:o.Z.t("市内交通工具")},{id:"Other",title:o.Z.t("其他")}]},type:"RADIO",title:o.Z.t("请选择交通方式"),btnText:o.Z.t("交通方式")},blood:{title:o.Z.t("请选择血型"),type:"RADIO",qdata:{options:[{title:o.Z.t("A型")},{title:o.Z.t("B型")},{title:o.Z.t("AB型")},{title:o.Z.t("O型")}]},btnText:o.Z.t("血型")},occupation:{title:o.Z.t("请填写职业"),btnText:o.Z.t("职业")},student:{title:o.Z.t("请填写学号"),btnText:o.Z.t("学号")},gender:{type:"RADIO",qdata:{options:[{title:o.Z.t("男")},{title:o.Z.t("女")}]},title:o.Z.t("请选择性别"),btnText:o.Z.t("性别")},qq:{dataType:2,title:o.Z.t("请填写QQ号"),validate:[{message:"",type:2,rules:{type:"number"}}],validateSetting:{max:"",min:"",numberMode:3,numberRangeType:0,type:1},btnText:o.Z.t("QQ号")},nation:{title:o.Z.t("请填写民族"),btnText:o.Z.t("民族")},uniersity:{title:o.Z.t("请填写毕业院校"),btnText:o.Z.t("毕业院校")},yx:{title:o.Z.t("请填写院系"),btnText:o.Z.t("院系")},age:{title:o.Z.t("请填写年龄"),dataType:2,validate:[{type:3,rules:{min:0,open:!1},message:""}],validateSetting:{type:1,min:"0",numberRangeType:4},btnText:o.Z.t("年龄")},mail:{validateSetting:{type:2},title:o.Z.t("请填写邮箱"),validate:[{message:"",ruletype:5,type:13,rules:{}}],dataType:4,btnText:o.Z.t("邮箱")},native:{title:o.Z.t("请填写籍贯"),btnText:o.Z.t("籍贯")},address:{qdata:{subType:"DETAIL"},title:o.Z.t("请填写地址"),type:"LOCATION",btnText:o.Z.t("地址")},hyqk:{type:"RADIO",qdata:{options:[{title:o.Z.t("已婚")},{title:o.Z.t("未婚")},{title:o.Z.t("离异")}]},title:o.Z.t("请选择婚姻情况"),btnText:o.Z.t("婚姻情况")},gzdw:{title:o.Z.t("请填写工作单位"),btnText:o.Z.t("工作单位")},weight:{dataType:2,title:o.Z.t("请填写体重"),qdata:{suffix:o.Z.t("公斤")},validate:[{type:3,rules:{min:0,open:!0},message:""}],validateSetting:{numberRangeType:3,min:"0",type:1},btnText:o.Z.t("体重")},gznx:{qdata:{options:[{title:o.Z.t("0-3年")},{title:o.Z.t("3-5年")},{title:o.Z.t("5-10年")},{title:o.Z.t("10年以上")}]},title:o.Z.t("请选择工作年限"),type:"RADIO",btnText:o.Z.t("工作年限")},height:{qdata:{suffix:o.Z.t("厘米")},validateSetting:{min:"0",type:1,numberRangeType:3},title:o.Z.t("请填写身高"),validate:[{type:3,rules:{min:0,open:!0},message:""}],dataType:2,btnText:o.Z.t("身高")},zzmm:{title:o.Z.t("请选择政治面貌"),type:"RADIO",qdata:{options:[{title:o.Z.t("中共党员")},{title:o.Z.t("民主党派")},{title:o.Z.t("群众")},{id:"Other",title:o.Z.t("其他")}]},btnText:o.Z.t("政治面貌")},xl:{type:"RADIO",title:o.Z.t("请选择学历"),qdata:{options:[{title:o.Z.t("小学")},{title:o.Z.t("初中")},{title:o.Z.t("高中")},{title:o.Z.t("大专")},{title:o.Z.t("本科")},{title:o.Z.t("硕士")},{title:o.Z.t("博士及以上")},{id:"Other",title:o.Z.t("其他")}]},btnText:o.Z.t("学历")}}},74988:(e,t,n)=>{n.d(t,{U:()=>o});const o={MAX:1e6,NEAR_MAX:98e4}},70740:(e,t,n)=>{n.d(t,{oY:()=>o,Kg:()=>r,j_:()=>i,i8:()=>s});const o={ERROR:-1,SUCCESS:0,BEHIND_BASE_REV:540101,OIDB_PAD_COMMIT_ERR:200201,DIRTY_CHECK_ERR:200204,NO_PERMISSION:10003,NO_PERMISSION2:10004,NO_PERMISSION3:12607,NO_PERMISSION4:90236,FORM_PRO_META_ERROR:200203,FORM_DELETED_WHEN_EDIT:200205,EDIT_FORM_NOT_BY_OWNER:200206,NO_FILL_PERMISSION:200207,NOT_SAFE:90269,SHEET_NO_BIND:518502,HAS_RELATED:90288,HAS_RELATED2:518501,SUBMIT_WITHOUT_PERMISSION:3,STOP_COLLECTING:5,FORM_DELETED:9,MAX_LIMIT:15,RELATING:16,RELATING2:518504,SHEET_DELETED:11510,SHEET_DELETED2:518502,EXCEED_SUBMIT_TIMES:18,SUBMIT_NAME_REPEATED:19,MEMBER_NOT_IN_ROSTER:20,LOCKED_IN_CONCURRENCE:21,NOT_IN_PERIODIC:22,NO_MODIFY_RECORD_PRIV:90217,CKECK_PRIV_ERROR:90236,OVER_LIMIT:90246,SERVER_PREMISSIONS_ERROR:90236,SERVER_DATA_ERROR:90266,SERVER_TIMEOUT_ERROR:90245,SUBMIT_ILLEGAL_CONTENT:90269,OVER_SUBMIT_TIME:90218,NOT_IN_CYCLE:90299,NO_ROWS_IN_RESULT_SET:1e4,NEED_TRY_RELOGIN_11000:11e3,NEED_TRY_RELOGIN_10004:10004,DOC_HAS_BEEN_DELETE_10008:10008,QQ_LOGIN_FAILED:11640,LOGIN_FAILED:12100,LOGIN_FAILED_10095:10095,NEED_RELATE_AGAIN:90291,BIGPAPER_EMPTY_USER_INFO:91020,BIGPAPER_ERROR_USER_INFO:91021,BIGPAPER_NO_AUTH:91019,BIGPAPER_NO_GLOBALPADID:10001,BIGPAPER_GET_URL_FAIL:91017,ANONYMOUS_NOT_ENABLED:519914,ANONYMOUS_ENABLED:519915,NO_SUCH_STUDENT_MEMBER:519916,NO_SPACE:20010,NO_SPACE_ADMIN:20013,ROSTER_OVER_LIMIT:90289,ATTACHMENT_NO_AUTH:12607,SERVICE_BUSY:5e4,NOT_IN_ROSTER:514801,ROSTER_HAS_BOUND:514802,EXAM:{NOT_MARK:0,RIGHT:1,ERROR:2},QQ_GROUP:{DOC_HAS_EXISTED:10006},OOXML_UNSUPPORTED:518503,SYNC_FAILURE:40039,EMPTY_BIND_TYPE:518514,REQ_PAYLOAD_INCONFORMITY:11607,SUBMIT_WITHOUT_MEMBER_INFO:90270,META_NOT_FOUND:511508,RECORD_WAS_DELETED:511510,ILLEGAL_SECURITY_CHECK:519908,ILLEGAL_ATTACHMENT:519912,EXCEED_MAX_TABLE_ROW_COUNT:519925,GET_LOCK_FAILED:519913,EMPTY_RELATIVE_FILES:515204,XSRF_ERROR:10010,ERR_NO_SAAS_LICENSE:410807,ERR_SAAS_ADMIN_LICENSE_EXPIRED:410820,ERR_SAAS_ADMIN_POC_LICENSE_EXPIRED:410821,ERR_NON_SAAS_ADMIN_LICENSE_EXPIRED:410825,ERR_NON_SAAS_ADMIN_POC_LICENSE_EXPIRED:410826,NORMAL_USER_RECOVER_EXCEEDED_TIME_LIMIT:110805},r=[o.SUCCESS,o.STOP_COLLECTING,o.MAX_LIMIT,o.EXCEED_SUBMIT_TIMES,o.SUBMIT_NAME_REPEATED,o.MEMBER_NOT_IN_ROSTER,o.LOCKED_IN_CONCURRENCE,o.NOT_IN_PERIODIC,o.NO_PERMISSION,o.DOC_HAS_BEEN_DELETE_10008,o.NEED_TRY_RELOGIN_11000,o.REQ_PAYLOAD_INCONFORMITY,o.OVER_SUBMIT_TIME,o.OVER_LIMIT,o.SUBMIT_WITHOUT_MEMBER_INFO,o.BIGPAPER_ERROR_USER_INFO,o.META_NOT_FOUND,o.RECORD_WAS_DELETED,o.ILLEGAL_SECURITY_CHECK,o.ILLEGAL_ATTACHMENT,o.ANONYMOUS_NOT_ENABLED,o.ANONYMOUS_ENABLED,o.NO_SUCH_STUDENT_MEMBER,o.CKECK_PRIV_ERROR,o.NO_ROWS_IN_RESULT_SET,o.LOGIN_FAILED,o.NO_PERMISSION3,o.NEED_TRY_RELOGIN_10004,o.QQ_LOGIN_FAILED,o.LOGIN_FAILED_10095,o.EMPTY_RELATIVE_FILES,o.GET_LOCK_FAILED],i=[o.SUCCESS,o.OIDB_PAD_COMMIT_ERR,o.EDIT_FORM_NOT_BY_OWNER,o.XSRF_ERROR,o.FORM_DELETED_WHEN_EDIT,o.FORM_PRO_META_ERROR],s=[o.NO_SPACE,o.NO_SPACE_ADMIN]},75615:(e,t,n)=>{n.d(t,{hU:()=>r,go:()=>i,BY:()=>s});var o=n(54734);const r={COMMON:1e5,STUDENT:1e3},i=[o.Z.t("本人"),o.Z.t("爸爸"),o.Z.t("妈妈"),o.Z.t("爷爷"),o.Z.t("奶奶"),o.Z.t("外公"),o.Z.t("外婆"),o.Z.t("其他身份")],s={NAME:o.Z.t("学生姓名"),NUMBER:o.Z.t("学号"),GROUP:o.Z.t("班级"),ROLE_TYPE:o.Z.t("填写人身份"),ROLE_NAME:o.Z.t("家长姓名")}},45519:(e,t,n)=>{n.d(t,{YD:()=>c,Tk:()=>d,au:()=>p,fk:()=>m,CX:()=>h,xF:()=>f,gu:()=>g,_E:()=>_,iV:()=>y,fH:()=>b});var o=n(54734),r=n(4222),i=n(66127),s=n(466),a=n(89823),l=n(70740);const c={[i.jy.SMART]:{id:i.jy.SMART,text:o.Z.t("智能表"),description:o.Z.t("支持分组统计，多视图查看"),icon:s},[i.jy.GRID]:{id:i.jy.GRID,text:o.Z.t("工作表"),description:o.Z.t("支持公式与图表的传统体验"),icon:a}},d=[c[i.jy.SMART],c[i.jy.GRID]],u={[i.CL.NEW]:{id:i.CL.NEW,title:o.Z.t("新建表格"),description:o.Z.t("把收集结果关联到空白表格中")},[i.CL.EXISTED]:{id:i.CL.EXISTED,title:o.Z.t("已有表格"),description:o.Z.t("多个收集表的结果都可关联到已创建的表格")}},p=[u[i.CL.NEW],u[i.CL.EXISTED]],m=o.Z.t("收集结果中包含表格题内容，暂不支持切换表格类型。"),h=[{value:i.Ah.NORMAL,text:o.Z.t("合并同步到同一个表格"),show:!0},{value:i.JK.PERIODIC_COLLECTION,text:o.Z.t("按周期同步到不同表格"),menu:[{text:o.Z.t("按天同步到不同的表格"),value:i.Ah.BY_DAY},{text:o.Z.t("按周同步到不同的表格"),value:i.Ah.BY_WEEK},{text:o.Z.t("按月同步到不同的表格"),value:i.Ah.BY_MONTH}],show:!0,isVIP:r.pg.TOC}],f="$FORM_BIND_PATTERN$",g={GRID:4e4,SMART:1e5},_={[l.oY.SHEET_DELETED]:o.Z.t("无法关联到已经删除的表格。"),[l.oY.SHEET_DELETED2]:o.Z.t("无法关联到已经删除的表格。"),[l.oY.RELATING]:o.Z.t("正在生成到表格，请不要重复发起。"),[l.oY.RELATING2]:o.Z.t("正在生成到表格，请不要重复发起。"),[l.oY.HAS_RELATED]:o.Z.t("当前收集表已经关联表格，请尝试刷新页面。"),[l.oY.HAS_RELATED2]:o.Z.t("当前收集表已经关联表格，请尝试刷新页面。"),[l.oY.NO_SPACE]:o.Z.t("您的空间不足，暂无法关联到表格。"),[l.oY.OOXML_UNSUPPORTED]:o.Z.t("暂不支持关联到新版表格，请选择历史表格同步。"),[l.oY.SYNC_FAILURE]:o.Z.t("同步失败，请切换表格类型再重试，或下载到本地。"),[l.oY.EMPTY_BIND_TYPE]:o.Z.t("同步表格方式有误，请重新选择。")},y=[i.Ah.BY_DAY,i.Ah.BY_WEEK,i.Ah.BY_MONTH],b=[i.Ah.BY_DAY,i.Ah.BY_WEEK,i.Ah.BY_MONTH];i.Ah.BY_DAY,o.Z.t("日"),o.Z.t("按天同步到不同的表格"),i.Ah.BY_WEEK,o.Z.t("周"),o.Z.t("按周同步到不同的表格"),i.Ah.BY_MONTH,o.Z.t("月"),o.Z.t("按月同步到不同的表格")},14148:(e,t,n)=>{n.d(t,{d:()=>r});var o=n(54734);const r=[{title:o.Z.t("姓名"),match:[o.Z.t("姓名"),o.Z.t("名字"),o.Z.t("曾用名")]},{title:o.Z.t("出生日期"),match:[o.Z.t("出生日期"),o.Z.t("出生年月")]},{title:o.Z.t("电话"),match:[o.Z.t("电话号码"),o.Z.t("联系电话"),o.Z.t("手机号码"),o.Z.t("手机"),o.Z.t("短号"),o.Z.t("电话"),o.Z.t("联系方式")]},{title:o.Z.t("身份证"),match:[o.Z.t("身份证")]},{title:o.Z.t("邮箱"),match:[o.Z.t("邮箱"),o.Z.t("电子邮箱"),o.Z.t("邮箱地址")]},{title:o.Z.t("地址"),match:[o.Z.t("地址"),o.Z.t("住址")]},{title:o.Z.t("学号"),match:[o.Z.t("学号")]},{title:o.Z.t("籍贯"),match:[o.Z.t("籍贯")]},{title:o.Z.t("专业班级"),match:[o.Z.t("专业班级"),o.Z.t("专业"),o.Z.t("班级")]},{title:o.Z.t("学校学院"),match:[o.Z.t("学校学院"),o.Z.t("学校"),o.Z.t("学院")]}]},4169:(e,t,n)=>{n.d(t,{A2:()=>i,GE:()=>s,wT:()=>a,jD:()=>l,Sx:()=>c,GW:()=>d,gc:()=>u,g:()=>p});var o=n(54734),r=n(33716);const i=[{text:o.Z.t("填写"),id:r.G.FILL},{text:o.Z.t("统计"),id:r.G.RESULT},{text:o.Z.t("设置"),id:r.G.SETTING}],s=[{text:o.Z.t("填写"),id:r.G.FILL_DETAIL},{text:o.Z.t("统计"),id:r.G.RESULT},{text:o.Z.t("设置"),id:r.G.SETTING}],a=[{text:o.Z.t("编辑"),id:r.G.EDIT},{text:o.Z.t("统计"),id:r.G.RESULT},{text:o.Z.t("设置"),id:r.G.SETTING}],l=(o.Z.t("编辑"),r.G.EDIT,o.Z.t("设置"),r.G.SETTING,o.Z.t("打卡"),r.G.EDIT,o.Z.t("统计"),r.G.RESULT,o.Z.t("设置"),r.G.SETTING,o.Z.t("打卡"),r.G.FILL,o.Z.t("统计"),r.G.RESULT,o.Z.t("设置"),r.G.SETTING,o.Z.t("打卡"),r.G.FILL_DETAIL,o.Z.t("统计"),r.G.RESULT,o.Z.t("设置"),r.G.SETTING,[{text:o.Z.t("填写"),id:r.G.FILL_DETAIL},{text:o.Z.t("填写记录"),id:r.G.FILL_LIST}]),c=[{text:o.Z.t("填写"),id:r.G.FILL},{text:o.Z.t("填写记录"),id:r.G.FILL_LIST}],d=[{text:o.Z.t("填写"),id:r.G.FILL_DETAIL},{text:o.Z.t("统计"),id:r.G.RESULT}],u=[{text:o.Z.t("填写"),id:r.G.FILL},{text:o.Z.t("统计"),id:r.G.RESULT}],p=(o.Z.t("填写"),r.G.FILL,o.Z.t("统计"),r.G.RESULT,o.Z.t("接龙"),r.G.EDIT,o.Z.t("设置"),r.G.SETTING,o.Z.t("接龙"),r.G.FILL,o.Z.t("设置"),r.G.SETTING,o.Z.t("投票"),r.G.EDIT,o.Z.t("设置"),r.G.SETTING,o.Z.t("投票"),r.G.FILL,o.Z.t("设置"),r.G.SETTING,{[`/${r.G.EDIT}`]:{activeId:r.G.EDIT,showTab:!0},[`/${r.G.EDIT_TABLE}`]:{activeId:r.G.EDIT_TABLE,showTab:!0},[`/${r.G.FILL}`]:{activeId:r.G.FILL,showTab:!0},[`/${r.G.FILL_TABLE}`]:{activeId:r.G.FILL_TABLE,showTab:!0},[`/${r.G.FILL_DETAIL}`]:{activeId:r.G.FILL_DETAIL,showTab:!0},[`/${r.G.RESULT}`]:{activeId:r.G.RESULT,showTab:!0},[`/${r.G.SETTING}`]:{activeId:r.G.SETTING,showTab:!0},[`/${r.G.FEEDBACK}`]:{activeId:r.G.FEEDBACK,showTab:!0}})},88559:(e,t,n)=>{n.d(t,{_o:()=>s,V0:()=>a});var o=n(64649),r=n(4222),i=n(15342);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}i.FL.NO_VIP,i.uh.NO_EXPIRED,i.qu.NONE,i.uh.VIP_EXPIRED,i.qu.EXPIRED,i.uh.SVIP_EXPIRED,i.qu.EXPIRED,i.FL.VIP,i.uh.NO_EXPIRED,i.qu.NORMAL,i.uh.VIP_EXPIRED,i.qu.EXPIRED,i.uh.SVIP_EXPIRED,i.qu.EXPIRED,i.FL.SVIP,i.uh.NO_EXPIRED,i.qu.SUPER,i.uh.VIP_EXPIRED,i.qu.EXPIRED,i.uh.SVIP_EXPIRED,i.qu.EXPIRED,i.FL.SVIP_PLUS,i.uh.NO_EXPIRED,i.qu.SUPER_PLUS,i.uh.VIP_EXPIRED,i.qu.EXPIRED,i.uh.SVIP_EXPIRED,i.qu.EXPIRED;const s=r.kZ.NEED_VIP_RESTRICTION?{level:i.FL.NO_VIP,renewal:i.fN.NO_OPEN,avatarFrameUrl:"",expiredStatus:i.uh.VIP_EXPIRED}:{level:i.FL.SVIP,renewal:i.fN.OPENED,avatarFrameUrl:"",expiredStatus:i.uh.NO_EXPIRED},a=_objectSpread(_objectSpread({},s),{},{isNewVip:!r.kZ.NEED_VIP_RESTRICTION,endTime:0})},43041:(e,t,n)=>{n.d(t,{V:()=>o,a:()=>r});const o=Symbol.for("VISIBLECHANGE_EVENT_NAME"),r=Symbol.for("VISIBLECHANGE_RECORDS_NAME")},33358:(e,t,n)=>{n.d(t,{VQ:()=>getXSRF,Go:()=>getBkn});var o=n(65779);function getXSRF(){return(0,o.ej)("TOK")}function getBkn(){const e=(0,o.ej)("skey");let t=5381;if(e){for(let n=0,o=e.length;o>n;++n)t+=(t<<5)+e.charAt(n).charCodeAt(0);return 2147483647&t}}},54356:(e,t,n)=>{n.d(t,{ys:()=>setUidFromURL});var o=n(4222),r=n(65779),i=n(86432),s=n(72870);function setUidFromURL(){if(!s.isMiniProgram)return;const e=(0,r.ej)("uid"),t=(0,r.ej)("uid_key"),n=(0,i.pm)("uid"),a=decodeURIComponent((0,i.pm)("uid_key"));if(function isEqualUidFromCAndQ(e,t,n,o){return!!(e&&t&&n&&o&&n===e&&o===t)}(e,t,n,a))return;if(e&&t&&!n)return;const l=n||e,c=a||t;l&&c&&((0,r.d8)("uid",l,void 0,"/",`.${o._P.DOMAIN_NAME}`),(0,r.d8)("uid_key",c,void 0,"/",`.${o._P.DOMAIN_NAME}`))}},2001:(e,t,n)=>{n.d(t,{G:()=>getUserTinyId});var o=n(4869);function getUserTinyId(){var e;const{global_multi_user:t,clientVars:n,basicClientVars:r}=window,i=null==t?void 0:t.uid;if(i)return i;const s=null==r?void 0:r.userInfo.tinyId;if(s)return s;const a=null==n||null===(e=n.userInfo)||void 0===e?void 0:e.uid;if(a)return a;const l=(null==n?void 0:n.tinyId)||(null==n?void 0:n.tinyid);return l||(0,o.getUid)()}},98297:(e,t,n)=>{n.d(t,{f:()=>loadArkExtAsync});n(11431);function loadArkExtAsync(){return Promise.all([n.e("vendors-node_modules_axios_index_js"),n.e("vendors-node_modules_tencent_ark-request_lib_index_js"),n.e("vendors-node_modules_tencent_ark-storage_lib_index_js-node_modules_tencent_docs-scenario-comp-78000c"),n.e("vendors-node_modules_tencent_docs-scenario-components-message-center_dist_index_js"),n.e("vendors-node_modules_tencent_docs-qrcode_dist_index_js"),n.e("vendors-node_modules_tencent_ark-extensions_lib_index_js"),n.e("js_ark_ark-extensions_index_ts-node_modules_babel_runtime_regenerator_index_js")]).then(n.bind(n,98237))}},15995:(e,t,n)=>{n.d(t,{s:()=>overMemoOpenVipByDc});var o=n(64649),r=n(98297);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}async function overMemoOpenVipByDc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return;const{default:o,STORAGE_OVERFLOW_ALERT_EXTENSION:i}=await(0,r.f)();(await o.getExtension(i.name)).show({errorCode:e,aidOptions:_objectSpread({position:t,feature:"space"},n)})}},43802:(e,t,n)=>{n.d(t,{_:()=>showPrivateLicenseTip});var o=n(98297);async function showPrivateLicenseTip(){const{default:e,PRIVATE_LICENSE_TIP:t}=await(0,o.f)(),n=await e.getExtension(t.name);null==n||n.show()}},14130:(e,t,n)=>{n.d(t,{ue:()=>showVipPay,Mn:()=>showSpacePay,Xq:()=>showVipToast});var o=n(81893),r=n(72870),i=n(98297),s=n(4222);async function showVipPay(e){const{default:t,PAY_EXTENSION:n}=await(0,i.f)(),o=await t.getExtension(n.name);null==o||o.show(e)}async function showSpacePay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,o.lY)({url:`https://${s._P.DOMAIN_NAME}/vip/storage${e}`})}async function showVipToast(e){const{default:t,VIP_TOAST:n,VIP_TOAST_MOBILE:o}=await(0,i.f)(),{name:s}=r.isPC?n:o,a=await t.getExtension(s);return null==a?void 0:a.show(e)}},94929:(e,t,n)=>{let o;n.d(t,{S:()=>o}),function(e){e.LOADING="loading",e.DELETED="deleted",e.LOW_VERSION="lowversion",e.NOT_START="not_start_collecting",e.NOT_IN_RANGE="not_in_range",e.EXPIRED="expired",e.NOT_IN_INTERNAL_RANGE="not_in_internal_range"}(o||(o={}))},69841:(e,t,n)=>{let o;n.d(t,{U:()=>o}),function(e){e[e.createFSuccess=0]="createFSuccess",e[e.createFFailed=1]="createFFailed",e[e.createVSuccess=2]="createVSuccess",e[e.createVFailed=3]="createVFailed",e[e.createQSuccess=4]="createQSuccess",e[e.createQFailed=5]="createQFailed",e[e.modifyFSuccess=6]="modifyFSuccess",e[e.modifyFFailed=7]="modifyFFailed",e[e.fillFSuccess=8]="fillFSuccess",e[e.fillFFailed=9]="fillFFailed",e[e.serverError=10]="serverError",e[e.modifyAnswerSuccess=11]="modifyAnswerSuccess",e[e.modifyAnswerFail=12]="modifyAnswerFail",e[e.getDetailSuccess=13]="getDetailSuccess",e[e.getDetailFail=14]="getDetailFail",e[e.modifySettingSuccess=15]="modifySettingSuccess",e[e.modifySettingFail=16]="modifySettingFail",e[e.fillDateFromHtml=17]="fillDateFromHtml",e[e.publishSuccess=18]="publishSuccess",e[e.publishFailed=19]="publishFailed",e[e.editSuccess=20]="editSuccess",e[e.editFailed=21]="editFailed",e[e.submitSuccess=22]="submitSuccess",e[e.submitFailed=23]="submitFailed",e[e.exportSuccess=24]="exportSuccess",e[e.exportFailed=25]="exportFailed",e[e.loginFail=26]="loginFail",e[e.reloginFail=27]="reloginFail",e[e.pvForAll=28]="pvForAll",e[e.settingPage=29]="settingPage",e[e.formMPage=30]="formMPage",e[e.formMLitePage=31]="formMLitePage",e[e.formPCPage=32]="formPCPage",e[e.formPadPage=33]="formPadPage",e[e.editFPage=34]="editFPage",e[e.fillFPage=35]="fillFPage",e[e.statisticFPage=36]="statisticFPage",e[e.voteMPage=37]="voteMPage",e[e.votePCPage=38]="votePCPage",e[e.votePadPage=39]="votePadPage",e[e.editVPage=40]="editVPage",e[e.fillVPage=41]="fillVPage",e[e.sequenceMPage=42]="sequenceMPage",e[e.sequencePCPage=43]="sequencePCPage",e[e.sequencePadPage=44]="sequencePadPage",e[e.editQPage=45]="editQPage",e[e.fillQPage=46]="fillQPage",e[e.clockMPage=47]="clockMPage",e[e.clockPCPage=48]="clockPCPage",e[e.clockPadPage=49]="clockPadPage",e[e.homePage=50]="homePage",e[e.historyPage=51]="historyPage",e[e.managerPage=52]="managerPage",e[e.dvaError=53]="dvaError",e[e.jsError=54]="jsError",e[e.tti=55]="tti",e[e.ttiLessThan5s=56]="ttiLessThan5s",e[e.ttiMoreThan5s=57]="ttiMoreThan5s",e[e.fmp=58]="fmp",e[e.jankTime=59]="jankTime",e[e.publishSensitive=60]="publishSensitive",e[e.TTFB=61]="TTFB",e[e.jsDuration=62]="jsDuration"}(o||(o={}))},65158:(e,t,n)=>{let o;n.d(t,{F:()=>o}),function(e){e.TIMEOUT="TIMEOUT",e.CODE502="502-Bad Gateway"}(o||(o={}))},19541:(e,t,n)=>{let o,r;n.d(t,{g:()=>o,w:()=>r}),function(e){e.ERROR="error",e.INFO="info",e.SUCCESS="success",e.LOADING="loading",e.WARNING="warning"}(o||(o={})),function(e){e[e.NONE=1]="NONE",e[e.Instantly=2]="Instantly",e[e.Daily=3]="Daily"}(r||(r={}))},33716:(e,t,n)=>{let o;n.d(t,{G:()=>o}),function(e){e.EDIT="edit",e.EDIT_CLOSING_REMARK="edit-closing-remark",e.EDIT_TABLE="edit-table",e.PREVIEW="preview",e.FILL="fill",e.FILL_DETAIL="fill-detail",e.FILL_LIST="fill-list",e.FILL_TABLE="fill-table",e.RESULT="result",e.RESULT_MODIFY="result/modify",e.SETTING="setting",e.DETAIL="detail",e.BIGPAPER_DOWNLOAD_RESULT="bigpaper-download-result",e.FEEDBACK="feedback",e.SUBMIT_RESULT="submit-result",e.LOGIC_JUMP="logic-jump",e.SETTING_DEFAULT_ANSWER="set-default-answer",e.QUICK_CREATE="quick-create"}(o||(o={}))},53345:(e,t,n)=>{let o,r,i,s;n.d(t,{CR:()=>o,$S:()=>r,j5:()=>i,VK:()=>s}),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.DAILY=1]="DAILY",e[e.WEEKLY=2]="WEEKLY",e[e.MONTHLY=3]="MONTHLY"}(o||(o={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.NONE=1]="NONE",e[e.START=2]="START",e[e.BEFORE=3]="BEFORE"}(r||(r={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.FORBIDDEN=1]="FORBIDDEN",e[e.ALLOWED=2]="ALLOWED"}(i||(i={})),function(e){e.PERIODIC_PATTERN="periodicPattern",e.NOTIFY_PATTERN="notifyPattern",e.NOTIFY_BEFORE="notifyBefore",e.ALLOWED_START_TIME="allowedStartTime",e.ALLOWED_END_TIME="allowedEndTime",e.PERIODIC_DAYS="periodicDays"}(s||(s={}))},39834:(e,t,n)=>{let o;n.d(t,{x:()=>o}),function(e){e[e.Normal=0]="Normal",e[e.Delete=1]="Delete"}(o||(o={}))},7038:(e,t,n)=>{let o,r;n.d(t,{r:()=>o,Y:()=>r}),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.NOT_SET=1]="NOT_SET",e[e.COMMON=2]="COMMON",e[e.STUDENT=3]="STUDENT",e[e.EMPLOYEE=4]="EMPLOYEE"}(o||(o={})),function(e){e[e.NONE=0]="NONE",e[e.ADD=1]="ADD",e[e.EDIT=2]="EDIT",e[e.DELETE=3]="DELETE"}(r||(r={}))},66127:(e,t,n)=>{let o,r,i,s,a,l,c;n.d(t,{jy:()=>o,CL:()=>r,yO:()=>i,ZV:()=>s,m3:()=>a,Ah:()=>l,JK:()=>c}),function(e){e.GRID="grid",e.SMART="smartsheet"}(o||(o={})),function(e){e.NEW="new",e.EXISTED="existed"}(r||(r={})),function(e){e.RE_BIND="reBind",e.NEW_BIND="newBind"}(i||(i={})),function(e){e.ACTIVE_AREA="active_area",e.SHEET_ID="sheet_id",e.OPEN_FROM="openfrom"}(s||(s={})),function(e){e.SHARE_SHEET="shareSheet",e.SHEET_SHARE="sheet_share",e.SWITCH_TIPS="switch_tips"}(a||(a={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.BY_DAY=2]="BY_DAY",e[e.BY_WEEK=3]="BY_WEEK",e[e.BY_MONTH=4]="BY_MONTH"}(l||(l={})),function(e){e[e.DEFULT_COLLECTION=l.NORMAL]="DEFULT_COLLECTION",e.PERIODIC_COLLECTION="periodic"}(c||(c={}))},45382:(e,t,n)=>{n.d(t,{QH:()=>o,h$:()=>r,t0:()=>i,M0:()=>s});const o="addon1";let r,i,s;!function(e){e.LOCK="LOCK",e.UNLOCK="UNLOCK",e.GET_FULL_LOCK="GET_FULL_LOCK"}(r||(r={})),function(e){e.UNLOCK_INFO="UNLOCK_INFO",e.ALL_LOCK_INFO="ALL_LOCK_INFO",e.NEW_CHANGES="NEW_CHANGES",e.USER_NEWINFO="USER_NEWINFO",e.USER_LEAVE="USER_LEAVE",e.HANDLE_DELETE="HANDLE_DELETE"}(i||(i={})),function(e){e.DOWNSTREAM_REV="DOWNSTREAM_REV",e.CHECKING_REV="CHECKING_REV"}(s||(s={}))},54969:(e,t,n)=>{let o;n.d(t,{f:()=>o}),function(e){e[e.DOCS_NICK=0]="DOCS_NICK",e[e.QQ_CHANNEL_NICK=1]="QQ_CHANNEL_NICK",e[e.ANONYMOUS=2]="ANONYMOUS"}(o||(o={}))},5576:(e,t,n)=>{let o;n.d(t,{m:()=>o}),function(e){e.NORMAL="normal",e.INTELLIGENT="intelligent"}(o||(o={}))},15342:(e,t,n)=>{let o,r,i,s;n.d(t,{qu:()=>o,FL:()=>r,fN:()=>i,uh:()=>s}),function(e){e.NORMAL="NORMAL",e.SUPER="SUPER",e.SUPER_PLUS="SUPER_PLUS",e.NONE="NONE",e.EXPIRED="EXPIRED"}(o||(o={})),function(e){e[e.NO_VIP=1]="NO_VIP",e[e.VIP=2]="VIP",e[e.SVIP=3]="SVIP",e[e.SVIP_PLUS=4]="SVIP_PLUS"}(r||(r={})),function(e){e[e.NO_OPEN=0]="NO_OPEN",e[e.OPENED=1]="OPENED",e[e.OPENED_BUT_CLOSED=2]="OPENED_BUT_CLOSED"}(i||(i={})),function(e){e[e.NO_EXPIRED=0]="NO_EXPIRED",e[e.VIP_EXPIRED=1]="VIP_EXPIRED",e[e.SVIP_EXPIRED=2]="SVIP_EXPIRED"}(s||(s={}))},87311:(e,t,n)=>{n.d(t,{xW:()=>isLocalDebug,OZ:()=>getRouteId,RA:()=>getEnvName});var o=n(65779);function isLocalDebug(){return!1}function getRouteId(){return(0,o.ej)("dev_route_id")}function getEnvName(){const e=(0,o.ej)("env_id");return null==e?void 0:e.startsWith("sit")}},47028:(e,t,n)=>{n.d(t,{d:()=>a});n(11431);var o=n(7038),r=n(31556),i=n(79195);const treatTimeObj=e=>1e3*(Number(null==e?void 0:e.seconds)||0),s=[{propName:"statistics.totalCnt",jsonName:"totalCnt",fromJsonDef:0},{propName:"statistics.delCnt",jsonName:"delCnt",fromJsonDef:0},{propName:"statistics.personalTotalCnt",jsonName:"personalTotalCnt",fromJsonDef:0},{propName:"statistics.personalValidCnt",jsonName:"personalValidCnt",fromJsonDef:0},{propName:"settings.canModifyRecords",jsonName:"enableModifyRecords",fromJsonDef:!1},{propName:"settings.canCheckPaperScore",jsonName:"enableSeePaperScore",fromJsonDef:!1},{propName:"settings.canCheckResults",jsonName:"enableSeeCollectResults",fromJsonDef:!1},{propName:"settings.canDeleteRecords",jsonName:"enableDeleteRecords",fromJsonDef:!1},{propName:"settings.startTime",jsonName:"startTime",fromJsonDef:0,fromJson:treatTimeObj},{propName:"settings.endTime",jsonName:"endTime",fromJsonDef:0,fromJson:treatTimeObj},{propName:"settings.anonymous",jsonName:"anonymous",fromJsonDef:!1},{propName:"conclusion",jsonName:"conclusion",fromJsonDef:{picSrc:"",remarkTitle:"",linkList:[]}},{propName:"roster.type",jsonName:"rosterTemplate",fromJsonDef:o.r.NOT_SET,fromJson:e=>{var t;return"number"==typeof e?e:null!==(t={TEMPLATE_DEFAULT:o.r.DEFAULT,TEMPLATE_NONE:o.r.NOT_SET,TEMPLATE_COMMON:o.r.COMMON,TEMPLATE_STUDENT:o.r.STUDENT,TEMPLATE_EMPLOYEE:o.r.EMPLOYEE}[e])&&void 0!==t?t:o.r.NOT_SET}},{propName:"roster.columnHeader",jsonName:"rosterColumnHeader",fromJsonDef:""},{propName:"roster.members",jsonName:"rosterMembers",fromJsonDef:[]},{propName:"latestRecord",jsonName:"records",fromJsonDef:null,fromJson:e=>{if(!Array.isArray(e)||!e.length)return null;const[{seq:t,uid:n,answers:o,role:r,createTime:s}]=e.slice(-1);return{seq:t,uid:n,answers:(0,i.iB)(o,[]),role:r,createdTime:treatTimeObj(s)}}}],a=(0,r.x)(s)(window.recordInfo)},67698:(e,t,n)=>{n.d(t,{oY:()=>_,E1:()=>y,LG:()=>h,vL:()=>f});var o=n(64649),r=(n(11431),n(27693)),i=n.n(r),s=n(74988),a=n(7038),l=n(8760),c=n(45519),d=n(66127),u=n(53345),p=n(65162),m=n(31556);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const timeStrFromJson=(e,t)=>e?i()(e).valueOf():t,timeStampToJson=e=>i()(e||0).toISOString(),h={RELATED_SHEET:"sync_cfg.relative_sheet",BIND_PATTERN:"sync_cfg.bind_type"},f={ANONYMOUS:"collection.anonymous",CLOSED:"collection.isClosed",RECORDS_LIMIT:"collection.recordsLimit",NOTIFY_OWNER:"notifyConfig.canNotifyOwner"},g=[{propName:"formVersion",jsonName:"form_version"},{propName:"serverTime",jsonName:"server_time",fromJson:e=>timeStrFromJson(e,Date.now()),fromJsonDef:Date.now()},{propName:"serverTimeDifference",jsonName:"server_time",fromJson:e=>e?i()(e).valueOf()-Date.now():0,fromJsonDef:0},{propName:"collection.startTime",jsonName:"collect_cfg.start_time",fromJson:e=>timeStrFromJson(e,0),fromJsonDef:0,toJson:timeStampToJson},{propName:"collection.endTime",jsonName:"collect_cfg.end_time",fromJson:e=>timeStrFromJson(e,0),fromJsonDef:0,toJson:timeStampToJson},{propName:"collection.anonymous",jsonName:"collect_cfg.anonymous",fromJsonDef:!1},{propName:"collection.isClosed",jsonName:"collect_cfg.is_closed",fromJsonDef:!1},{propName:"collection.recordsLimit",jsonName:"collect_cfg.collect_limit",fromJson:e=>Math.max(0,e||0),fromJsonDef:0},{propName:"collection.backendMaxRecordLimit",jsonName:"collect_cfg.backend_collect_limit",fromJsonDef:s.U.MAX},{propName:"collection.backendNearMaxRecordLimit",jsonName:"collect_cfg.early_warning_collect_limit",fromJsonDef:s.U.NEAR_MAX},{propName:"fillerConfig.canMultiSubmit",jsonName:"filler_cfg.enable_multi_fill",fromJsonDef:!0},{propName:"fillerConfig.canModifyRecords",jsonName:"filler_cfg.enable_modify_records",fromJsonDef:!1},{propName:"fillerConfig.canCheckResults",jsonName:"filler_cfg.enable_see_collect_results",fromJsonDef:!1},{propName:"fillerConfig.canCheckPaperScore",jsonName:"filler_cfg.enable_see_paper_score",fromJsonDef:!0},{propName:"fillerConfig.canDeleteRecords",jsonName:"filler_cfg.enable_delete_records",fromJsonDef:!1},{propName:"notifyConfig.canNotifyOwner",jsonName:"notify_cfg.enable_fill_notify_owner",fromJsonDef:!1},{propName:"notifyConfig.canReceiveClockNotify",jsonName:"notify_cfg.enable_sign_notify_filler",fromJsonDef:!1},{propName:"notifyConfig.canReceivePeriodicNotify",jsonName:"notify_cfg.enable_cycle_notify_filler",fromJsonDef:!0},{propName:"notifyConfig.collectResultNotifyConfig.dailyNotifyTime",jsonName:"notify_cfg.collect_result_notify_cfg.daily_notify_time"},{propName:"notifyConfig.collectResultNotifyConfig.type",jsonName:"notify_cfg.collect_result_notify_cfg.type",fromJsonDef:1},{propName:"conclusion",jsonName:"conclusion",fromJson:e=>null!=e?e:{picSrc:"",remarkTitle:"",linkList:[]}},{propName:"relatedSheet.backendGridLimit",jsonName:"sync_cfg.sync_limit.sheet_limit",fromJsonDef:c.gu.GRID},{propName:"relatedSheet.backendSmartLimit",jsonName:"sync_cfg.sync_limit.smart_sheet_limit",fromJsonDef:c.gu.SMART},{propName:"relatedSheet.bindPattern",jsonName:"sync_cfg.bind_type",fromJsonDef:d.Ah.NORMAL},{propName:"relatedSheet.globalPadId",jsonName:"sync_cfg.relative_sheet.doc_id.domain_id|sync_cfg.relative_sheet.doc_id.pad_id",fromJson:e=>{let[t,n]=e;return`${t}$${atob(n)}`},toJson:e=>{const[t,n]=e.split("$");return t&&n?[t,btoa(n)]:[void 0,void 0]},toJsonIgnore:e=>!(null!=e&&e.split("$").every(Boolean))},{propName:"relatedSheet.url",jsonName:"sync_cfg.relative_sheet.doc_url|sync_cfg.relative_sheet.sub_id",fromJson:e=>{let[t,n]=e;return`${atob(t)}?tab=${atob(n)}`},toJson:e=>{const[t,n]=e.split("?tab=");return[btoa(t),n?btoa(n):n]},toJsonIgnore:e=>!(null!=e&&e.split("?tab=").every(Boolean))},{propName:"relatedSheet.subId",jsonName:"sync_cfg.relative_sheet.sub_id",fromJson:atob,toJson:btoa},{propName:"relatedSheet.subType",jsonName:"sync_cfg.relative_sheet.sub_type"},{propName:"relatedPeriodic.isPeriodic",jsonName:"collect_cfg.is_cycle_enabled",fromJsonDef:!1},{propName:"relatedPeriodic.submitStatus",jsonName:"cycle_cfg.submit_status",fromJsonDef:u.j5.DEFAULT},{propName:"relatedPeriodic.canSubmitByPeriodic",jsonName:"cycle_cfg.submit_status",fromJson:e=>e===u.j5.ALLOWED},{propName:"relatedPeriodic.periodicPattern",jsonName:"cycle_cfg.info.cycle_type",fromJsonDef:u.CR.DEFAULT},{propName:"relatedPeriodic.notifyPattern",jsonName:"cycle_cfg.info.notify_type",fromJsonDef:u.$S.DEFAULT},{propName:"relatedPeriodic.notifyBefore",jsonName:"cycle_cfg.info.notify_before",fromJsonDef:0},{propName:"relatedPeriodic.allowedStartTime",jsonName:"cycle_cfg.info.allowed_time.start",fromJson:e=>Number(e)||0,fromJsonDef:l.v.START,toJson:e=>`${null!=e?e:0}`},{propName:"relatedPeriodic.allowedEndTime",jsonName:"cycle_cfg.info.allowed_time.end",fromJson:e=>Number(e)||0,fromJsonDef:l.v.END,toJson:e=>`${null!=e?e:0}`},{propName:"relatedPeriodic.periodicDays",jsonName:"cycle_cfg.info.cycle_info.days",fromJsonDef:[]},{propName:"relatedPeriodic.histories",jsonName:"cycle_cfg.history_cycles",fromJsonDef:[]},{propName:"selectedRoster",jsonName:"collect_cfg.roster_template|collect_cfg.roster_column_header",fromJsonDef:null,fromJson:e=>{let[t,n]=e;return"number"!=typeof t||t<=a.r.NOT_SET?null:{type:t,columnHeader:null!=n?n:""}}},{propName:"resultSetting.tab",jsonName:"statistics_cfg.subpage",fromJsonDef:0},{propName:"resultSetting.version",jsonName:"collect_cfg.statistic_version",fromJsonDef:0},{propName:"resultSetting.chartSetting",jsonName:"statistics_cfg.answers_chart",fromJsonDef:{},fromJson:e=>Object.keys(e).reduce(((t,n)=>{const{chart_type:o,question_type:r,sort_type:i,fold:s}=e[n];return _objectSpread(_objectSpread({},t),{},{[n]:_objectSpread(_objectSpread(_objectSpread(_objectSpread({},o?{chartType:o}:{}),r?{questionType:r}:{}),i?{sortType:i}:{}),s?{fold:s}:{})})}),{}),toJson:e=>Object.keys(e).reduce(((t,n)=>{const{chartType:o,questionType:r,sortType:i,fold:s}=e[n];return _objectSpread(_objectSpread({},t),{},{[n]:_objectSpread(_objectSpread(_objectSpread(_objectSpread({},void 0!==o?{chart_type:o}:{}),void 0!==r?{question_type:r}:{}),void 0!==i?{sort_type:i}:{}),void 0!==s?{fold:s}:{})})}),{})},{propName:"resultSetting.showCanStistic",jsonName:"statistics_cfg.is_filter",fromJsonDef:!1},{propName:"resultSetting.filterFold",jsonName:"statistics_cfg.is_filter_folder",fromJsonDef:!1},{propName:"resultSetting.hide.questions",jsonName:"statistics_cfg.hide.questions",fromJsonDef:[]},{propName:"resultSetting.filterConfig",jsonName:"statistics_cfg.filter_cfg",fromJsonDef:{},fromJson:p.g1,toJson:p.Lv}],_=(0,m.x)(g),y=(0,m.Q)(g)},38318:(e,t,n)=>{n.d(t,{u:()=>o});const o=(0,n(31556).x)([{jsonName:"del_cnt",propName:"delCnt",fromJsonDef:0},{jsonName:"personal_total_cnt",propName:"personalTotalCnt",fromJsonDef:0},{jsonName:"personal_valid_cnt",propName:"personalValidCnt",fromJsonDef:0},{jsonName:"total_cnt",propName:"totalCnt",fromJsonDef:0},{jsonName:"user_cnt",propName:"userCnt",fromJsonDef:0},{jsonName:"self_seqs",propName:"selfSids",fromJsonDef:[]},{jsonName:"del_list_unread_cnt",propName:"delUnreadCnt",fromJsonDef:0},{jsonName:"anonymous_submitted",propName:"hasAnonymousSubmitted",fromJsonDef:!1}])},31556:(e,t,n)=>{n.d(t,{x:()=>fromJson,Q:()=>toJson});var o=n(69396),r=n(67486),i=n(64049);function fromJson(e){return function(t){let{useDef:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useDef:!0};return e.reduce(((e,s)=>{const{propName:a,fromJsonIgnore:l}=s,c=(e=>{const{jsonName:r,fromJson:s,fromJsonDef:a}=e,l=n?a:void 0,c=r.split("|").map((e=>(0,o.Z)(t,e,l)));var d;return c.length<=1?(0,i.o8)(c[0])?l:"function"==typeof s?s(c[0]):null!==(d=c[0])&&void 0!==d?d:l:c.every(i.o8)?l:"function"==typeof s?s(c):c})(s);return"function"==typeof l&&l(c)||c===l||(0,r.default)(e,a,c),e}),{})}}function toJson(e){return function(t){let{useDef:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useDef:!0};return e.reduce(((e,s)=>{var a,l;const{propName:c,toJsonIgnore:d,toJsonDef:u,jsonName:p,toJson:m}=s,h=n?u:void 0,f=(0,o.Z)(t,c,h);if("function"==typeof d&&d(f)||f===d)return e;const g=null!==(a=null!==(l=null==m?void 0:m(f))&&void 0!==l?l:f)&&void 0!==a?a:h,_=p.split("|");return _.length>1&&Array.isArray(g)&&_.length===g.length?_.forEach(((t,n)=>{!(0,i.o8)(g[n])&&(0,r.default)(e,t,g[n])})):!(0,i.o8)(g)&&(0,r.default)(e,_[0],g),e}),{})}}},60940:(e,t,n)=>{n.d(t,{e:()=>getCurrFormType});var o=n(78984),r=n(36849);function getCurrFormType(e){var t,n,i;const{cardConfig:s,taskConfig:a,sequenceConfig:l}=e,c=null===(t=e.scene)||void 0===t?void 0:t.type;return null!==(n=null===(i=[{condition:!!l||c===o.c.SEQUENCE,formType:o.c.SEQUENCE},{condition:!!s||c===o.c.CLOCK,formType:o.c.CLOCK},{condition:!!a&&a.taskType===r.U.COMMON||c===o.c.TASK,formType:o.c.TASK},{condition:!!a&&a.taskType===r.U.EXAM||c===o.c.EXAM,formType:o.c.EXAM},{condition:c===o.c.VOTE,formType:o.c.VOTE},{condition:c===o.c.QUESTIONNAIRE,formType:o.c.QUESTIONNAIRE},{condition:c===o.c.FILE_COLLECT,formType:o.c.FILE_COLLECT}].find((e=>{let{condition:t}=e;return t})))||void 0===i?void 0:i.formType)&&void 0!==n?n:o.c.FORM}},39588:(e,t,n)=>{n(62438).i18nextService.start()},62438:(e,t,n)=>{n.r(t),n.d(t,{i18nextService:()=>m});var o=n(22501),r=n(80597),i=n(19781),s=n(36303);const a="core-form";var l;!function(e){e.ZH_CN="zh-CN",e.EN_US="en-US",e.ZH_HK="zh-HK",e.ZH_TW="zh-TW"}(l||(l={}));const c="zh_CN",d={[l.ZH_CN]:"zh_CN",[l.EN_US]:"en_US",[l.ZH_HK]:"zh_HK",[l.ZH_TW]:"zh_HK",en:"en_US",zh:"zh_CN"},u=new i.default;u.addDetector({name:"userAgent",lookup(){const e=navigator.userAgent.match(/language\/([a-zA-Z'-_]+)/i);if(e)return e[1].replace("_","-")}}),u.addDetector({name:"toggle",lookup(){if(s.default.isTencentDocsApp&&!s.default.isTencentDocsAppVersionAboveOrEqual("2.16.0"))return"zh-CN"}});const p={resources:{[l.ZH_CN]:{translation:r[l.ZH_CN][a]},[l.EN_US]:{translation:r[l.EN_US][a]},[l.ZH_HK]:{translation:r[l.ZH_HK][a]}},fallbackLng:{default:["zh-CN"],en:["en-US"],zh:["zh-CN"],"zh-TW":["zh-HK"],"en-US":["zh-CN"],"zh-HK":["zh-CN"]},interpolation:{escapeValue:!1},detection:{order:["querystring","toggle","userAgent","cookie"],lookupCookie:"language",lookupQuerystring:"lng",caches:[]}};const m=new class I18NextService{constructor(){this.i18nInstance=o.ZP,this.globalLanguage=c}start(){return this.i18nInstance.use(u).init(p),this.setGlobalLanguageEnv(),this.i18nInstance}setGlobalLanguageEnv(){var e;const{language:t}=this.i18nInstance;this.globalLanguage=null!==(e=d[t])&&void 0!==e?e:c,window.__LANG__=this.globalLanguage,window.__I18N__=this.i18nInstance,document.documentElement.lang=this.globalLanguage.replace("_","-").toLocaleLowerCase()}getGlobalLanguage(){return this.globalLanguage}getI18nSingleton(){return this.i18nInstance}}},61709:(e,t,n)=>{n.d(t,{k:()=>a});var o=n(64649),r=(n(36775),n(17209),n(11431),n(22701)),i=n(67538);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getContent=e=>{var t;let{context:n,config:o,returnValue:r,pos:i}=e;const{caredState:s,caredProps:a,caredAttr:l,custom:c}=o,{props:d,state:u}=n,getValue=(e,t)=>{const n=t.split(".");let o=e;return n.forEach((e=>{o&&(o=o[e])})),o},p={propsValue:a.reduce(((e,t)=>_objectSpread(_objectSpread({},e),{},{[t]:getValue(d,t)})),{}),stateValue:s.reduce(((e,t)=>_objectSpread(_objectSpread({},e),{},{[t]:getValue(u,t)})),{}),attrValue:l.reduce(((e,t)=>_objectSpread(_objectSpread({},e),{},{[t]:getValue(n,t)})),{}),customValue:(null==c||null===(t=c.call)||void 0===t?void 0:t.call(c,n))||null};return Object.keys(p).forEach((e=>{const t=p[e];["string","boolean","object","number"].includes(typeof t)&&null!==t?"object"==typeof t&&0===Object.keys(t).length&&delete p[e]:delete p[e]})),"after"===i&&o.showReturn&&(p.returnValue=void 0===r?"[undefined Value]":r),p},getParams=(e,t)=>{if(null==e||!e.length||!t)return"";return`[${e.slice(0,t).map(((e,t)=>{const n=JSON.stringify(e,(()=>{const e=new WeakSet;return(t,n)=>"object"!=typeof n||null===n?n:e.has(n)?"[Circular Value]":(e.add(n),Array.isArray(n)||(0,r.Z)(n)?n:Object.prototype.toString.call(n))})());return(null==n?void 0:n.length)>200?`__long-param-${t}__`:n})).join("|")}]`},s=function descriptorLogger(e,t,n,o){if(!(!n.get&&!n.set))return;const{before:r}=o,{after:i}=o,{error:s}=o,a=n.value?"value":"initializer",l=n[a],c="value"===a,d=(e=>{let{before:t=!1,after:n=!0,showReturn:o=!0,props:r=[],state:i=[],attr:s=[],custom:a}=e;const l={before:t,after:n,showReturn:o,props:r,state:i,attr:s,custom:a,caredProps:[],caredState:[],caredAttr:[]},convertToArray=e=>Array.isArray(e)?e:[e],c=convertToArray(l.props),d=convertToArray(l.state),u=convertToArray(l.attr);return l.caredProps=c,l.caredState=d,l.caredAttr=u,l})(e);n[a]=function(){const e=this;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];const u=function main(){const n=c?l.length:l().length;for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];const m=getParams(o.concat(u),n);if(d.before){const n=getContent({context:e,config:d});r({className:e.constructor.name,funcName:t,params:m,content:n})}try{const n=c?l.apply(e,o):l.apply(e).apply(void 0,u);return d.after&&setTimeout((()=>{const o=getContent({context:e,config:d,pos:"after",returnValue:n});i({className:e.constructor.name,funcName:t,params:m,content:o})})),n}catch(h){throw s({className:e.constructor.name,funcName:t,params:m,errorInfo:h}),h}};return c?u():u}},a=function logger(e){return function(t,n,o){return s(e||{},n,o,{before:function before(e){const{className:t}=e,{funcName:n}=e,o=e.params,{content:r}=e;i.l.info("".concat(t,"-").concat(n,"-before"),{params:o,content:r})},after:function after(e){const{className:t}=e,{funcName:n}=e,o=e.params,{content:r}=e;i.l.info("".concat(t,"-").concat(n,"-after"),{params:o,content:r})},error:function error(e){const{className:t}=e,{funcName:n}=e,o=e.params,{errorInfo:r}=e;i.l.error("".concat(t,"-").concat(n,"-error"),{params:o,errorInfo:r})}})}}},86550:(e,t,n)=>{n.d(t,{$:()=>report007});var o=n(33319),r=n(69841);const i={[r.U.formMPage]:{attrid:"form-mobile"},[r.U.formMLitePage]:{attrid:"form-mobile-lite"},[r.U.formPCPage]:{attrid:"form-pc"},[r.U.formPadPage]:{attrid:"form-pad"},[r.U.sequenceMPage]:{attrid:"sequence-mobile"},[r.U.sequencePCPage]:{attrid:"sequence-pc"},[r.U.sequencePadPage]:{attrid:"sequence-pad"},[r.U.clockMPage]:{attrid:"clock-mobile"},[r.U.clockPCPage]:{attrid:"clock-pc"},[r.U.clockPadPage]:{attrid:"clock-pad"},[r.U.voteMPage]:{attrid:"vote-mobile"},[r.U.votePCPage]:{attrid:"vote-pc"},[r.U.votePadPage]:{attrid:"vote-pad"},[r.U.dvaError]:{attrid:"form-dva-error"},[r.U.jsError]:{attrid:"form-js-error"},[r.U.jankTime]:{attrid:"form-jank-time"},[r.U.tti]:{attrid:"form-tti"},[r.U.fmp]:{attrid:"form-fmp"},[r.U.publishSensitive]:{attrid:"form-publish-sensitive"},[r.U.TTFB]:{attrid:"form-TTFB"},[r.U.jsDuration]:{attrid:"form-js-duration"}},s={[r.U.publishSuccess]:{attrid:"form-publish",value:0},[r.U.publishFailed]:{attrid:"form-publish",value:1},[r.U.editSuccess]:{attrid:"form-edit",value:0},[r.U.editFailed]:{attrid:"form-edit",value:1},[r.U.submitSuccess]:{attrid:"form-submit",value:0},[r.U.submitFailed]:{attrid:"form-submit",value:1},[r.U.exportSuccess]:{attrid:"form-export",value:0},[r.U.exportFailed]:{attrid:"form-export",value:1},[r.U.ttiLessThan5s]:{attrid:"form-tti-less-than-5s",value:0},[r.U.ttiMoreThan5s]:{attrid:"form-tti-less-than-5s",value:1},[r.U.pvForAll]:{attrid:"form-pv",value:0}},report007=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(i[e])return((e,t)=>{var n;const r=i[e];(0,o.zzsValue)({attrid:r.attrid,value:null!==(n=t.value)&&void 0!==n?n:1,dimensions:t.dimensions,project:"form"},t.immediate)})(e,t);if(s[e])return((e,t)=>{var n;const r=s[e];(0,o.zzsStatus)({attrid:r.attrid,status:null!==(n=t.value)&&void 0!==n?n:r.value,dimensions:t.dimensions,project:"form"},t.immediate)})(e,t)}catch(n){console.error(`007 report error: ${n}`)}}},67538:(e,t,n)=>{n.d(t,{l:()=>r});var o=n(4222);const r=new class Weblog{constructor(){this.pid=10,this.initialized=!1,this.initWeblog=()=>new Promise((e=>{if(this.initialized)return e();this.loadWeblogSDK().then((()=>{var t,n,o,r;null===(t=(n=window.log).config)||void 0===t||t.call(n,{pid:this.pid}),null===(o=(r=window.log).init)||void 0===o||o.call(r,this.pid),this.initialized=!0,e()})).catch((()=>{}))})),this.hadLoadedSDK=()=>!!window.log,this.loadWeblogSDK=()=>new Promise(((e,t)=>{if(this.hadLoadedSDK())return e();document.head.appendChild(Object.assign(document.createElement("script"),{src:o.pg.PRIVATE?o.Y3.PRIVATE_WEB_LOG_SDK:o.Y3.WEB_LOG_SDK,onload:()=>{e()},onerror:()=>{t()}}))}))}init(){this.log("info","weblog initialized")}info(e,t){this.log("info",e,t)}error(e,t){this.log("error",e,t)}warn(e,t){this.log("warn",e,t)}debug(e,t){this.log("debug",e,t)}upload(){this.initWeblog().then((()=>{window.log.loadAsset("WL_REPORT_DIALOG",{exportToFile:o.kZ.SPECIAL_WEBLOG_EXPORT_FILE})}))}initUpload(e){if(!e)return;setTimeout((()=>{const t=document.getElementById(e);t&&((e,t,n,o)=>{let r=0,i=0;const onClick=()=>{if(i){if(!(+new Date-i<n))return r=0,void(i=0);if(r>=t-1)return o(),r=0,void(i=0)}i=+new Date,r+=1};e.addEventListener("click",onClick)})(t,5,1e3,(()=>{this.upload()}))}),3e3)}log(e,t,n){this.initWeblog().then((()=>{window.log[e](t,n)}))}}},74957:(e,t,n)=>{n.d(t,{e1:()=>tryLogin,TX:()=>showLogin});var o=n(4869);function tryLogin(e){!e&&(0,o.isLogin)()||(0,o.loginOnce)()}function showLogin(){(0,o.loginOnce)()}},26348:(e,t,n)=>{n.d(t,{T:()=>getSelectedRosters});const getSelectedRosters=()=>({type:"roster/getSelectedRosters"})},25687:(e,t,n)=>{n.d(t,{x7:()=>updateCurrSelectedHistory,OH:()=>updateLocalSheetRelated,KZ:()=>updateLocalSettings,oO:()=>querySettings,ce:()=>updatePeriodicRelated,re:()=>updateConclusionSetting,g6:()=>updateNotifyTypeSetting,Vx:()=>updateSimpleSetting,wm:()=>updatePeriodicSubmitNotify,Pg:()=>queryPeriodicHistory,cq:()=>bindSheet,Vj:()=>unbindSheet,xy:()=>rebindSheet,GI:()=>updateSheetType});var o=n(64649),r=n(67486),i=n(66127);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const updateCurrSelectedHistory=e=>({type:"setting/updatePeriodicHistoriesReducer",payload:{relatedPeriodic:{currSelectedHistory:e}}}),updateLocalSheetRelated=e=>({type:"setting/updateSettingsReducer",payload:{relatedSheet:e}}),updateLocalSettings=e=>({type:"setting/updateSettingsReducer",payload:e}),querySettings=()=>({type:"setting/querySettings"}),updatePeriodicRelated=(e,t)=>({type:"setting/updateSettings",payload:_objectSpread(_objectSpread({},e),t)}),updateConclusionSetting=(e,t)=>({type:"setting/updateSettings",payload:_objectSpread({conclusion:e},t)}),updateNotifyTypeSetting=(e,t)=>({type:"setting/updateSettings",payload:_objectSpread({notifyConfig:e},t)}),updateSimpleSetting=(e,t,n)=>({type:"setting/updateSettings",payload:(0,r.default)(_objectSpread({},n),e,t)}),updatePeriodicSubmitNotify=e=>({type:"setting/updatePeriodicSubmitNotify",payload:e}),queryPeriodicHistory=(e,t)=>({type:"setting/queryPeriodicHistory",payload:{year:e,month:t}}),bindSheet=function(){let{download:e=!1,sheetId:t="",sheetUrl:n="",exportToLocal:o=!1,sheetType:r=i.jy.SMART}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"setting/bindSheet",payload:{download:e,sheetId:t,sheetUrl:n,exportToLocal:o,sheetType:r}}},unbindSheet=e=>({type:"setting/unbindSheet",payload:e}),rebindSheet=e=>({type:"setting/rebindSheet",payload:e}),updateSheetType=e=>({type:"setting/updatePreferredSheetType",payload:e})},84396:(e,t,n)=>{n.d(t,{Vs:()=>setHeaderVisible,HZ:()=>setActiveId,x5:()=>setTopBarTitle,M0:()=>setScrollDistance,l3:()=>setTopTitleBarVisible,vp:()=>setScrollContainerRef});const setHeaderVisible=e=>({type:"toggle/setHeaderVisible",payload:{showHeader:e}}),setTopTitleBarVisible=e=>({type:"toggle/setTopTitleBarVisible",payload:{showTitleBar:e}}),setActiveId=e=>({type:"toggle/setActiveId",payload:{activeId:e}}),setTopBarTitle=e=>({type:"toggle/setTopBarTitle",payload:{topBarTitle:e}}),setScrollContainerRef=e=>({type:"toggle/setScrollContainerRef",payload:{scrollContainerRef:e}}),setScrollDistance=e=>({type:"toggle/setScrollDistance",payload:{scrollDistance:e}})},67550:(e,t,n)=>{n.d(t,{dw:()=>mqqinvoke,mC:()=>i,yL:()=>getGroupInfo});var o=n(86432),r=n(72870);function mqqinvoke(){if(window.mqq&&!(r.isMiniProgram||r.isWeChat||r.isWeWork||r.isQQMiniProgram)){try{for(var e,t,n,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];null===(e=window)||void 0===e||null===(t=e.mqq)||void 0===t||null===(n=t.invoke)||void 0===n||n.apply(window.mqq,i)}catch(a){}return!0}return!1}const i=r.isMiniProgram||r.isWeChat||r.isWeWork;function getGroupInfo(){const e=(0,o.pm)("groupid")||(0,o.pm)("_w_groupid")||(0,o.pm)("group_code");if(!e)return{};const t=(0,o.pm)("groupname")||(0,o.pm)("_w_groupname"),n=(0,o.pm)("uinType")||(0,o.pm)("_w_uinType")||"1",r="form"===(0,o.pm)("qqapp")||"clock"===(0,o.pm)("qqapp")||"jielong"===(0,o.pm)("qqapp"),i="qqminiprogram"===(0,o.pm)("__wxjs_environment"),s=(0,o.pm)("aiotip");return{groupId:e,groupname:decodeURIComponent(t),uinType:parseInt(n,10),isFormMini:i&&r,formAioTip:s}}},62995:(e,t,n)=>{n.d(t,{e:()=>createCopy});var o=n(54734),r=n(81893),i=n(67538),s=n(72870),a=n(60250),l=n(81721),c=n(70740),d=n(27565),u=n(4222),p=n(72598),m=n(45607),h=n(15995);const f={312002:o.Z.t("生成副本失败，请联系管理员更新产品授权。")},g="jump_generatecopy";async function createCopy(e){let{title:t,padId:n,domainId:_,urlParams:y,loadingCallback:b}=e;(0,d.H4)(g,{isFinished:!1,title:o.Z.t("副本-{{formTitle}}",{formTitle:t}),iconType:"form",tips:m.c3}),null==b||b();const{data:E}=await(0,p.fm)({title:t,domainId:_,padId:n});(null==E?void 0:E.retcode)===c.oY.SUCCESS?function handleCloneFormDataSuccess(e,t,n){var o;let i=null!==(o=t.docUrl)&&void 0!==o?o:t.doc_url;n&&(i=(0,l.At)(i,n)),(0,d.H4)(g,{isFinished:!0,title:e,iconType:"form",retcode:t.retcode,url:i}),(0,r.lY)({url:i,replace:u.kZ.HACK_REPLACE_PATTERN&&s.isMobile})}(t,E,y):function handleCloneFormDataFailed(e,t){var n;const{retcode:r,message:s,msg:l,traceId:u,traceid:p}=t||{},m=null!==(n=f[r])&&void 0!==n?n:o.Z.t("生成副本失败 [{{retcode}}]",{retcode:r});(0,a.IG)(m),r&&c.i8.includes(Number(r))&&(0,h.s)(r,"detail",{apprec1:"copy",apprec2:"form"}),(0,d.H4)(g,{isFinished:!0,title:e,iconType:"form",retcode:(null==t?void 0:t.retcode)||-1,failImg:{src:"generator_fail"},tips:o.Z.t("生成副本失败，请稍后重试。")}),i.l.error("Failed to generate copy.",u||p||l||s)}(t,E)}},782:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(64649),r=n(54734),i=n(70740),s=n(87768),a=n(18834),l=n(60250),c=n(19541);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=new class QQGroupEmitter{constructor(){this.allowCallAjax=!0}async emitPublication(e){var t,n;const{groupId:o,globalPadId:d}=e;if(!this.allowCallAjax||!o||!d)return;this.allowCallAjax=!1;const{formTitle:u,uinType:p,successCallback:m,failureCallback:h}=e,f=await(0,a.ss)({globalPadId:d,uin:o,uinType:p});f.error||(null===(t=f.data)||void 0===t?void 0:t.ret)!==i.oY.SUCCESS?(null==h||h(),await(0,l.IG)(r.Z.t("发布到群失败，请稍后重试"),{type:c.g.ERROR})):(null==m||m(),await(0,l.IG)(r.Z.t("已成功发布到本群"),{type:c.g.SUCCESS})),(0,s.G)("edit","check_quick_share");const g=await(0,a.Wk)({globalPadId:d,groupId:o,title:u});(0,s.G)("grp_file","clk_complete",{opername:"doc_grp",ver7:o}),g.error||(null===(n=g.data)||void 0===n||n.retcode,i.oY.SUCCESS),this.allowCallAjax=!0}async emitSubmission(e){if(!e.groupId)return;const{groupId:t,alreadyFilledNumber:n,successCallback:o,failureCallback:r}=e,{data:s,error:l}=await(0,a.zM)(_objectSpread(_objectSpread({},e),{},{uin:t},"number"==typeof n?{AlreadyFilledNumber:n}:null));l||(null==s?void 0:s.retcode)!==i.oY.SUCCESS?null==r||r():null==o||o()}}},46347:(e,t,n)=>{n.d(t,{LX:()=>o,tw:()=>r,hq:()=>i,xS:()=>s});const o=1e4,r=25e3,i=3e4,s="TIMEOUT"},29185:(e,t,n)=>{n.d(t,{Z:()=>E});var o=n(53782),r=n(64649),i=(n(11431),n(23291)),s=n.n(i),a=n(42409),l=n(8139),c=n.n(l),d=n(81893),u=n(70740),p=n(81721),m=n(4222),h=n(15530),f=n(42341),g=n(65779),_=n(33358),y=n(46347);const b=["timeout","useDomain","cacheConfig"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E=new class RequestController{constructor(){this.requestFailCallback=(e,t)=>n=>{var o;return(e.indexOf(h.b3.SUBMIT)>-1||e.indexOf(h.Jq.IS_BIG_PAPER_SUBMIT_FORM_API)>-1)&&(null===(o=t.currRespStatus)||void 0===o?void 0:o.toString().startsWith("2"))?{data:{code:u.oY.NEED_TRY_RELOGIN_11000}}:{error:n}},this.handleResponseErrorStatus=e=>{if("number"==typeof e.status&&!e.status.toString().startsWith("2"))throw new Error(`${e.status}-${e.statusText}`)},this.handleXsrfError=()=>{(0,g.d8)("TOK","form2retry",void 0,"/",`.${m._P.DOMAIN_NAME}`),(0,p.Tb)("xsrfload")||(0,d.Oi)(window,(0,p.At)(location.href,{xsrfload:1}))}}getApi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const o=this.params2search(t);return this.request(`${e}${o}`,_objectSpread({credentials:"include"},n))}postApi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const o="string"==typeof t?t:JSON.stringify(t);return this.request(e,_objectSpread({method:"POST",body:o,credentials:"include",headers:f.o},n))}postApiWithFormData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const o=s()(t);return this.request(e,_objectSpread({method:"POST",body:o,credentials:"include"},n))}async requestFetch(e,t){const n=null!=t?t:{},{timeout:r=y.LX,useDomain:i=!0,cacheConfig:s}=n,l=(0,o.Z)(n,b),c=(0,p.At)(i?`//${m._P.DOMAIN_NAME}${e}`:e,{xsrf:(0,_.VQ)()}),d=(0,a.ZP)(c,l,{cacheConfig:s}),u=r?Promise.race([d,this.getTimeout(r)]):d;try{return{data:await u}}catch(h){return{error:h.message}}}async request(e,t){const{data:n,error:o}=await this.requestFetch(e,t);if(o||!n)return{error:o};const r={currRespStatus:n.status};try{this.handleResponseErrorStatus(n);const t=await n.json();return this.handleResponseDataSuccessCallback(t,e)}catch(i){return this.requestFailCallback(e,r)(i)}}handleResponseDataSuccessCallback(e,t){return e.retcode===u.oY.XSRF_ERROR?(this.handleXsrfError(),{error:"xsrf is error"}):{data:e}}params2search(e){return Object.keys(e)?`?${c().stringify(e)}`:""}getTimeout(e){return new Promise(((t,n)=>{setTimeout((()=>{n(new Error(y.xS))}),e)}))}}},9300:(e,t,n)=>{n.d(t,{Bc:()=>getSeqs,Es:()=>getAnswer,ym:()=>checkName,dC:()=>getBigPaperData,tx:()=>getBigPaperResult,TF:()=>submitBigFormRecord});var o=n(15530),r=n(22082),i=n(86432),s=n(4222),a=n(29185);function getSeqs(e){const t={global_padid:e};return a.Z.getApi(o.Jq.GET_BIG_PAPER_SEQS,t)}function getAnswer(e,t){const n={global_padid:e,sid:t};return a.Z.getApi(o.Jq.GET_BIG_PAPER_ANSWER,n)}function checkName(e,t){const n={global_padid:e,name:t,doc_url:`//${s._P.DOMAIN_NAME}${window.location.pathname}`};return a.Z.postApi(o.Jq.CHECK_BIG_PAPER_ANSWER_SECURE,n)}function getBigPaperData(){const{urlId:e}=(0,r.e)();return a.Z.getApi(o.Jq.GET_BIG_PAPER_DATA,{id:e})}function getBigPaperResult(e){return a.Z.getApi(o.Jq.GET_BIG_PAPER_RESULT,{globalPadID:e})}function submitBigFormRecord(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s={global_padid:e,data:JSON.stringify(t),role:r},l=(0,i.pm)("qqzy"),c={hideIds:{condition:null===(n=r.hideIds)||void 0===n?void 0:n.length,value:r.hideIds},modify_sid:{condition:r.sid,value:r.sid},qqzy:{condition:l,value:l}};return Object.getOwnPropertyNames(c).forEach((e=>{c[e].condition&&(s[e]=c[e].value)})),a.Z.postApiWithFormData(o.Jq.IS_BIG_PAPER_SUBMIT_FORM_API,{global_padid:e,data:JSON.stringify(s)})}},32944:(e,t,n)=>{n.d(t,{st:()=>deleteImageCapacity,tF:()=>deleteFileImageCapacity,w_:()=>getCurrentFormCapacity});var o=n(15530),r=n(42341),i=n(29185);function deleteImageCapacity(e,t){return i.Z.postApi(o.cv.DELETE_FILE_CAPACITY,{file_id:e,object_keys:t},{headers:r.o})}function deleteFileImageCapacity(e,t){return i.Z.postApi(o.cv.DELETE_FILE_IMAGE_CAPACITY,{file_id:e,obj_keys:t},{headers:r.o})}function getCurrentFormCapacity(e){return i.Z.postApi(o.cv.CURRENT_FORM_CAPACITY,{file_id:e},{headers:r.o})}},55515:(e,t,n)=>{n.d(t,{rJ:()=>getAttachmentDownloadUrl,Kn:()=>getUserSpace,N5:()=>parseXLSXFile,lQ:()=>getParseProgress,VQ:()=>getExportLastRule});var o=n(15530),r=n(33358),i=n(63881),s=n(29185);function getAttachmentDownloadUrl(e,t,n){const a={access_type:n||i.WP.Download,file_id:t,obj_keys:e,xsrf:(0,r.VQ)()};return s.Z.postApi(o.cv.ATTACHMENT_DETAIL,a)}function getUserSpace(){return s.Z.postApi(o.cv.GET_USER_SPACE,{})}async function parseXLSXFile(e){let{fileName:t,fileKey:n}=e;const r={fileKey:n,filename:encodeURIComponent(t)};return await s.Z.postApiWithFormData(o.cv.IMPORT_EXCEL_PARSE,r)}async function getParseProgress(e){return await s.Z.getApi(o.cv.IMPORT_EXCEL_PROGRESS,{operationId:e})}async function getExportLastRule(e){const t={form_id:e};return await s.Z.postApi(o.pU.EXPORT_LAST_RULE,t)}},36443:(e,t,n)=>{n.d(t,{nQ:()=>authApplyCheck,rr:()=>getFormAuthInfo,ul:()=>getUserReportToken,P8:()=>setCertification,WE:()=>getStatisticsSecurityCheck});var o=n(33358),r=n(15530),i=n(29185);function authApplyCheck(e){return i.Z.postApi(r.cb.AUTH_APPLY_CHECK,{localPadId:e})}function getFormAuthInfo(e){let{localPadId:t}=e;const n={var:2,localPadId:t,type:1,xsrf:(0,o.VQ)(),time:new Date,dataType:1};return i.Z.getApi(r.gD.GET_AUTH_INFO_PRIVATE,n)}function getUserReportToken(e,t){const n={domain_id:e,pad_id:t,dataType:1,xsrf:(0,o.VQ)()};return i.Z.getApi(r.cb.GET_REPORT_TOKEN,n)}function setCertification(e){return i.Z.postApi(r.cv.SET_CERTIFICATION,e)}function getStatisticsSecurityCheck(e,t){return i.Z.postApi(r.pU.STATISTICS_SECURITY_CHECK,{form_id:e,text:t})}},72598:(e,t,n)=>{n.d(t,{mv:()=>recoverForm,wd:()=>createNewForm,fm:()=>cloneForm,Aj:()=>publishForm,gV:()=>saveAsTemplate,OH:()=>changeFormTitle,W0:()=>setToList});var o=n(64649),r=n(54734),i=n(86432),s=n(42341),a=n(33358),l=n(15530),c=n(29185),d=n(39507);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function recoverForm(e){let{domainId:t,localPadId:n}=e;const o=`domain_id=${t}&pad_id=${n}&xsrf=${(0,a.VQ)()}`;return c.Z.postApi(l.cb.DOC_RECOVER,o,{headers:s.Q})}function createNewForm(e){const{title:t,doc_type:n,create_type:o,template_id:r,template_version:i}=e;return c.Z.getApi(l.cb.CREATE_DOC_NEW,_objectSpread({title:t,create_type:o,doc_type:n,template_id:r,folder_id:"",hum:1,xsrf:(0,a.VQ)()},i?{template_version:i}:{}))}function cloneForm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{title:t="",domainId:n="",padId:o=""}=e,i={title:r.Z.t("副本-{{title}}",{title:t}),create_type:4,doc_type:2,domain_id:n,pad_id:o,xsrf:(0,a.VQ)()};return c.Z.getApi(l.cb.CREATE_DOC_NEW,i)}function publishForm(e){let{globalPadId:t,end_time:n,start_time:o,form_type:r,form_records:s}=e,a=t;t!==window.clientVars.globalPadId&&(a=window.clientVars.globalPadId);const u=[];return null==s||s.forEach((e=>{const t=JSON.parse(e.data),n=(0,d.P_)(t);u.push({role:e.role,answers:n})})),new Promise(((e,t)=>{const d=(0,i.pm)("qqzy"),p=_objectSpread(_objectSpread({form_id:a,end_time:n,start_time:o,form_type:r},d?{qqzy:d}:{}),s?{records:u}:{});c.Z.postApi(l.b3.PUBLISH,p).then((t=>{document.dispatchEvent(new CustomEvent("hadPublishForm")),e(t)})).catch((e=>{t(e)}))}))}function saveAsTemplate(e){const{title:t="",domain_id:n="",pad_id:o="",sub_type:r}=e,i=_objectSpread({title:t,domain_id:n,pad_id:o,xsrf:(0,a.VQ)()},r?{sub_type:r}:{});return c.Z.postApiWithFormData(l.gD.SAVE_AS_TEMPLATE,i)}function changeFormTitle(e){let{domain_id:t="",pad_id:n="",title:o="new_title"}=e;const{docStatus:r}=window.clientVars||{};return 12===r&&setToList({domainId:t,padId:n}),c.Z.getApi(l.cb.CHANGE_FORM_TITLE,{domain_id:t,pad_id:n,title:o,xsrf:(0,a.VQ)(),version:2,auto_change:0})}function setToList(e){let{domainId:t,padId:n}=e;return c.Z.postApiWithFormData(l.cb.DOC_HUMTRANS,{domain_id:t,pad_id:n,xsrf:(0,a.VQ)()}).then((e=>{var t;return window.clientVars.docStatus=0,null===(t=window.SLR)||void 0===t||t.dispatch("DOC_HUMTRANS_DONE"),e}))}},60329:(e,t,n)=>{n.d(t,{_z:()=>getFormRecordData,JS:()=>deleteRecord,Ng:()=>fetchRecordList,T0:()=>submitRecord,wg:()=>queryOverallCount});var o=n(64649),r=n(86432),i=n(15530),s=n(29185),a=n(46347),l=n(39507);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function getFormRecordData(e,t){const n={form_id:e,seq:t};return s.Z.postApi(i.b3.RECORD_GET,n)}function deleteRecord(e,t){const n={form_id:e,seq:t};return s.Z.postApi(i.b3.DELETE_RECORD,n)}function fetchRecordList(e){const{docId:t,since:n,pageSize:o,filterDel:r,needData:a,startTime:l,endTime:c,uid:d,selfOnly:u=!1,descending_order:p=!0,orderBy:m=0,status:h=0,anonymousFilterType:f=0,deleteTimeRange:g,questionIds:_}=e,y=l&&c?{since:new Date(l).toISOString(),until:new Date(c).toISOString(),range_type:2}:{};return s.Z.postApi(i.b3.RECORD_PAGE,_objectSpread(_objectSpread({form_id:t,self_only:u,need_answers:!!a,filter_del:!!r},d?{uid:d}:null),{},{size:o,descending_order:p,order_by:m,record_status:h,seq_range:201!==h?{since:n,until:0,range_type:p?1:0}:{},del_time_range:null!=g?g:null,time_range:y,user_type_filter:f,question_ids:_}))}async function submitRecord(e,t){var n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;const d=_objectSpread({form_id:e,answers:(0,l.P_)(t),role:_objectSpread({},o)},c?{cost:c}:{});delete d.role.title,delete d.role.hideIds,delete d.role.sid;const u=(0,r.pm)("qqzy"),p={hidden_ids:{condition:!(null===(n=o.hideIds)||void 0===n||!n.length),value:o.hideIds},modify_seq:{condition:!!o.sid,value:o.sid},qqzy:{condition:!!u,value:u}};Object.getOwnPropertyNames(p).forEach((e=>{p[e].condition&&(d[e]=p[e].value)}));const{error:m,data:h}=await s.Z.postApi(i.b3.SUBMIT,d,{timeout:a.tw});if(m||null==h||!h.result||0!==h.retcode)return{error:m,data:h};const f=_objectSpread(_objectSpread({},h.result),d.modify_seq?{modify_seq:d.modify_seq}:null);return{data:_objectSpread(_objectSpread({},h),{},{result:f})}}function queryOverallCount(e,t,n){const o=_objectSpread(_objectSpread({form_id:e},t?{cycle_collect_time:t}:null),n?{time_range:n}:null);return s.Z.postApi(i.pU.OVERALL_COUNT,o)}},52753:(e,t,n)=>{n.d(t,{o:()=>getStatisticalResult});var o=n(70740),r=n(15530),i=n(29185);async function getStatisticalResult(e){var t;const{data:n,error:s}=await i.Z.postApi(r.b3.GET_STATISTICAL_CHART,e,{timeout:2e4});return s||(null==n?void 0:n.retcode)!==o.oY.SUCCESS?{retcode:null==n?void 0:n.retcode,data:[],error:(null==n?void 0:n.retcode)||s}:{data:Array.isArray(null===(t=n.result)||void 0===t?void 0:t.results)?n.result.results:[]}}},68586:(e,t,n)=>{n.d(t,{a:()=>writeSettingAsync,_:()=>readSettingAsync});var o=n(64649),r=n(15530),i=n(29185);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function writeSettingAsync(e,t){const n=_objectSpread({form_id:e},t);return i.Z.postApi(r.pU.WRITE_SETTING,n)}function readSettingAsync(e){let{needSheetRelatedConfig:t=!1,needPeriodicRelatedConfig:n=!1,needResultSetting:o=!1,historicalPeriodicConfig:s=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=_objectSpread({form_id:e,need_sync_cfg:t,need_cycle_cfg:n,need_statistics_cfg:o},s?{read_history_cycles:s}:null);return i.Z.postApi(r.pU.READ_SETTING,a)}},52255:(e,t,n)=>{n.d(t,{b:()=>getUserInfo});var o=n(64649),r=n(48976),i=n(4869),s=n(86432),a=n(33358),l=n(81893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function*getUserInfo(){let e=(0,a.VQ)();if(!e){let t=100;for(;!e&&t<500;)yield(0,r.delay)(t),e=(0,a.VQ)(),t+=120;e&&(0,l.Oi)(window,(0,s.Vm)())}let t=yield(0,i.authenticate)({fetchUserInfo:!0,autoLogin:!1});if(t){t=_objectSpread(_objectSpread({},t),{},{userDomain:t.domain,userIsGuest:!1,userLink:""})}return{data:t}}},45008:(e,t,n)=>{n.d(t,{f7:()=>getUnreadNum,ap:()=>getSignRole,QZ:()=>setSignRole,RH:()=>queryUserMarkInRooms,Zr:()=>getUserAttributesAsync,CD:()=>updateUserAttributesAsync});var o=n(42341),r=n(33358),i=n(86432),s=n(15530),a=n(29185);function getUnreadNum(){const e=(0,i.aF)();let t=s.cb.GET_UNREAD_NUM;e&&(t+=`?route_ip=${e.routeIp}&room_route_ip=${e.roomRouteIp}`);const n={param:{},url:t,ajaxType:"POST",xsrf:(0,r.VQ)()};return a.Z.getApi(t,n,{})}function getSignRole(){const e={global_padid:window.clientVars.globalPadId};return a.Z.postApi(s.b3.GET_SIGN_ROLE,e)}function setSignRole(e,t){const n={global_padid:window.clientVars.globalPadId,sign_roles:e,selected_id:t};return a.Z.postApi(s.b3.SET_SIGN_ROLE,n)}function queryUserMarkInRooms(e){const t={globalPadID:e,count:arguments.length>1&&void 0!==arguments[1]?arguments[1]:20};return a.Z.getApi(s.bG.USER_MARK,t)}function getUserAttributesAsync(){return a.Z.getApi(s._H.QUERY)}function updateUserAttributesAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"userAttribute";const n={[t]:JSON.stringify({attributes:e})};return a.Z.postApi(s._H.UPDATE,n,{headers:o.Q})}},99537:(e,t,n)=>{n.d(t,{kQ:()=>getPadOwnerVipLevel,mh:()=>getSelfVipLevel,IR:()=>getNewVip});var o=n(15530),r=n(29185);function getPadOwnerVipLevel(e){let{allInfo:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allInfo:!0};const n={file_id:e,get_all:t};return r.Z.postApi(o.ly.OWNER_VIP_LEVEL,n)}function getSelfVipLevel(){return r.Z.postApi(o.ly.SELF_VIP_LEVEL,{})}function getNewVip(){return r.Z.postApi(o.ly.VIP_NEW_COMER,{})}},1896:(e,t,n)=>{n.d(t,{Bl:()=>getFormDataFromServer,Z_:()=>sync,Bj:()=>syncWithFullText,AA:()=>getPubRev,u8:()=>getFormMeta});var o=n(8139),r=n.n(o),i=n(33358),s=n(45122),a=n(15530),l=n(29185),c=n(46347),d=n(72598);function getFormDataFromServer(e){const t={id:e,normal:1,tag:arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Kg.PUB,rtkey:arguments.length>2?arguments[2]:void 0,confirmed:arguments.length>3?arguments[3]:void 0,xsrf:(0,i.VQ)()};return l.Z.getApi(a.tL.GET,t,{headers:{"If-Modified-Since":"0"}})}function sync(e){let{actions:t,padId:n,rev:o,pos:s}=e;const{docStatus:u,domainId:p,npadId:m}=window.clientVars||{};12===u&&parseInt(o,10)>1&&(0,d.W0)({domainId:p,padId:m});const h=r().stringify({padId:n,rev:o,pos:s,xsrf:(0,i.VQ)()}),f=`${a.tL.SYNC}?${h}`;return l.Z.postApi(f,t,{timeout:c.hq})}function syncWithFullText(e){let{formData:t,rev:n,pos:o}=e;const s=`${a.tL.SYNC}?${r().stringify({padId:t.globalPadId,rev:n,pos:o,xsrf:(0,i.VQ)(),fullText:1})}`;return l.Z.postApi(s,t,{timeout:c.hq})}function getPubRev(e){const t={padId:e,xsrf:(0,i.VQ)()};return l.Z.getApi(a.tL.PUB_REV,t)}function getFormMeta(e){let{domainId:t,localPadId:n}=e;const o={domainId:t,localPadId:n,getCollected:1,xsrf:(0,i.VQ)()};return l.Z.getApi(a.cb.GET_PAD_META_INFO,o)}},48974:(e,t,n)=>{n.d(t,{L:()=>getMatchedQuestionsServer});var o=n(15530),r=n(29185);function getMatchedQuestionsServer(e){const t={search:e};return r.Z.postApi(o.pU.GET_MATCHED_QUESTIONS,t)}},66940:(e,t,n)=>{n.d(t,{W:()=>markPaper});var o=n(86432),r=n(15530),i=n(29185);const getPostData=e=>{let{form_id:t,seq:n,results:o,qqzy:r}=e;const i=JSON.stringify({form_id:t,seq:n,results:o,qqzy:r},((e,t)=>"score"===e&&"number"==typeof t?`__REPLACE_START__${t.toFixed(3).replace(/(\.\d)+0*$/,"$1")}__REPLACE_END__`:t)).replace(/"__REPLACE_START__(.*?)__REPLACE_END__"/g,"$1");return JSON.parse(i)};function markPaper(e,t,n){const s=getPostData({form_id:e,seq:t,results:n,qqzy:(0,o.pm)("qqzy")||void 0});return i.Z.postApi(r.b3.PAPER_MARK,s)}},9309:(e,t,n)=>{n.d(t,{j:()=>setFillReminder,p:()=>getSubmittedUsers});var o=n(64649),r=n(15530),i=n(42341),s=n(29185);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function setFillReminder(e){let{globalPadId:t,isEnabled:n,tinyId:o}=e;const a={form_id:t,uid:o,enabled:n};return s.Z.postApi(r.pU.SET_FILL_REMINDER,a,{headers:i.o})}function getSubmittedUsers(e,t){const n=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({form_id:e},t?{cycle_collect_time:t}:null);return s.Z.postApi(r.pU.GET_SUBMIT_USERS,n)}},18834:(e,t,n)=>{n.d(t,{BP:()=>pushToQQChannel,Wk:()=>saveToQQGroupDocs,ss:()=>publishToMini,zM:()=>submitToMini,qE:()=>getQQChannelNickName});var o=n(64649),r=(n(11431),n(15530)),i=n(33358),s=n(29185);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pushToQQChannel(e){const t=_objectSpread(_objectSpread(_objectSpread(_objectSpread({pad_id:e.localPadId,guild_id:e.guildId,channel_id:e.channelId,url:e.pageUrl,type:e.type,from_title:e.title},e.subtitle?{from_content:e.subtitle}:null),e.example?{create_content:e.example}:null),e.pushMsg?{msg_state:e.pushMsg}:null),"number"==typeof e.sid?{sid:e.sid}:null);return s.Z.postApiWithFormData(r.BT.QQ_CHANNEL_PUSH,t)}function saveToQQGroupDocs(e){const{globalPadId:t,groupId:n,title:o}=e,[a,l]=t.split("$"),c={domain_id:a,pad_id:l,title:o,group_code:n,type:2,copy:7,xsrf:(0,i.VQ)(),bkn:(0,i.Go)()};return s.Z.postApiWithFormData(r.BT.QQ_GROUP_ADD_DOCS,c)}async function publishToMini(e){const{globalPadId:t,uin:n,uinType:o}=e,[a,l]=t.split("$"),c=[{id:Number(n),type:"number"==typeof o?o:1}],d=`domainid=${a}&padid=${l}&uins=${encodeURIComponent(JSON.stringify(c))}&xsrf=${(0,i.VQ)()}&platform=4`,u=await s.Z.postApi(r.BT.PUBLISH_TO_MINI,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d});return document.dispatchEvent(new CustomEvent("hadPublishToMini")),u}function submitToMini(e){const t="number"==typeof e.uinType?e.uinType:1,n="number"==typeof e.formType?e.formType:0,o=_objectSpread(_objectSpread({},e),{},{formType:n,uinType:t,AlreadyFilledNumber:e.alreadyFilledNumber,xsrf:(0,i.VQ)()});return s.Z.postApiWithFormData(r.BT.SUBMIT_TO_MINI,o)}function getQQChannelNickName(e,t,n){const o=`open_guild_id=${e}&channel_id=${t}&uins=${n}&uins=${n}`,i=`${r.BT.QQ_CHANNEL_NICK_NAME}?${o}`;return s.Z.getApi(i)}},75645:(e,t,n)=>{n.d(t,{AL:()=>getNewRoster,xA:()=>getSelectedRoster,U5:()=>addNewRoster,lQ:()=>updateNewRoster,rd:()=>deleteNewRoster,Ml:()=>preSubmitCheckRole,g9:()=>rosterMemberSearch,Sb:()=>rosterMemberBind,dB:()=>rosterMemberGet,Y2:()=>rosterRelationUpdate,Hv:()=>rosterMemberSubmitted});var o=n(64649),r=n(15530),i=n(7038),s=n(29185);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function getNewRoster(e){const{rosterIds:t=[],type:n=i.r.NOT_SET}=e||{},o={roster_ids:t,roster_template:n};return s.Z.postApi(r.pU.ROSTER_GET,o)}function getSelectedRoster(e){let{globalPadId:t}=e;const n={form_id:t};return s.Z.postApi(r.pU.ROSTER_RELATION_GET,n)}function addNewRoster(e){const t={roster:{roster_meta:{title:e.title,roster_template:e.type}}};return(0,{[i.r.COMMON]:()=>{t.roster.roster_meta.column_header=e.columnHeader,t.roster.roster_member=e.names.map((e=>({common_roster_value:e})))},[i.r.STUDENT]:()=>{t.roster.roster_member=e.members}}[e.type])(),s.Z.postApi(r.pU.ROSTER_ADD,t)}function updateNewRoster(e){const t={roster_with_action:{roster_meta:{version:e.version,roster_id:e.id,roster_template:e.type,title:e.title}}};return(0,{[i.r.COMMON]:()=>{t.roster_with_action.roster_meta.column_header=e.columnHeader,t.roster_with_action.member_with_action=e.names.map((t=>({roster_member:{roster_id:e.id,roster_template:e.type,common_roster_value:t}})))},[i.r.STUDENT]:()=>{t.roster_with_action.member_with_action=e.members.map((e=>({roster_member:{identity_id:e.identityId,roster_id:e.rosterId,has_uid:e.hasUid,roster_template:e.type,child:e.child,role:{role:e.role.role,name:e.role.name}},action_type:e.action})))}}[e.type])(),s.Z.postApi(r.pU.ROSTER_EDIT,t)}function deleteNewRoster(e){let{id:t,type:n}=e;const o={roster_id:t,roster_template:n};return s.Z.postApi(r.pU.ROSTER_DELETE,o)}function preSubmitCheckRole(e){let{name:t,globalPadId:n,sid:i}=e;const a=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({role:{name:t},form_id:n},i?{modify_seq:i}:{});return s.Z.postApi(r.b3.ROLE_CHECK,a)}function rosterMemberSearch(e){const{name:t,globalPadId:n}=e,o={member:{child:{name:t}},form_id:n};return s.Z.postApi(r.pU.ROSTER_MEMBER_SEARCH,o)}function rosterMemberBind(e){const{member:t,globalPadId:n}=e,o={member:t,form_id:n};return s.Z.postApi(r.pU.ROSTER_MEMBER_BIND,o)}function rosterMemberGet(e){const{rosterTemplate:t,globalPadId:n}=e,o={roster_template:t,form_id:n};return s.Z.postApi(r.pU.ROSTER_MEMBER_GET,o)}function rosterRelationUpdate(e){let{version:t,globalPadId:n,rosterBindingStates:o}=e;const i={relations:{version:t,form_id:n,roster_binding_states:o}};return s.Z.postApi(r.pU.ROSTER_RELATION_UPDATE,i)}function rosterMemberSubmitted(e){let{globalPadId:t,member:n}=e;const o={form_id:t,member:{identity_id:n.identity_id,roster_id:n.roster_id}};return s.Z.postApi(r.pU.ROSTER_MEMBER_SUBMITTED,o)}},54443:(e,t,n)=>{n.d(t,{Yv:()=>startToBindSheet,ey:()=>startTorRebindSheet,Lq:()=>fetchBindResult,Fp:()=>exportProcess,Vj:()=>unbindSheet,Cp:()=>getRelativeSheetList,jq:()=>querySheetBindPattern});var o=n(64649),r=n(15530),i=n(29185);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function startToBindSheet(e,t,n){const o={form_id:e,bind_type:t,bind_sheet:n};return i.Z.postApi(r.nI.BIND_START,o)}function startTorRebindSheet(e,t,n,o){const s={form_id:e,bind_type:Number(t)||1,unbind_sheet:n,rebind_sheet:o};return i.Z.postApi(r.nI.REBIND_START,s)}function fetchBindResult(e,t){const n={form_id:e,task_id:t};return i.Z.postApi(r.nI.BIND_RESULT,n)}function exportProcess(e){const t=JSON.stringify({global_padid:e.globalPadId});return i.Z.postApiWithFormData(r.nI.EXPORT_PROCESS,{data:t})}function unbindSheet(e,t){const n={form_id:e,source:1,sheet:t};return i.Z.postApi(r.nI.UNBIND,n)}function getRelativeSheetList(e){const t=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({limit:20,list_type:6,order_type:0,sort_type:2,start:0},e);return i.Z.getApi(r.cb.DOC_LIST,t)}function querySheetBindPattern(e){const t={form_id:e};return i.Z.postApi(r.nI.BIND_PATTERN,t)}},46603:(e,t,n)=>{n.d(t,{P:()=>getUnsubmitUsers});var o=n(64649),r=n(15530),i=n(29185);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function getUnsubmitUsers(e){let{globalPadId:t,cycleCollectTime:n,timeRange:o}=e;const s=_objectSpread(_objectSpread({form_id:t},n?{cycle_collect_time:n}:null),o?{time_range:o}:null);return i.Z.postApi(r.pU.GET_UNSUBMIT_USERS,s)}},66426:(e,t,n)=>{let o;n.d(t,{_:()=>o,t:()=>r}),function(e){e.FORM_SHOW_PUBLIC_COUNT="form_show_public_count",e.FORM_AUTO_FILL="form-auto-fill",e.PREFERRED_RELATED_SHEET_TYPE="preferred_related_sheet_type",e.CREATE_QUESTION_BY_TYPE="create_question_by_type"}(o||(o={}));const r="user_attribute_initialized"},82937:(e,t,n)=>{n.d(t,{Ez:()=>m});n(11431),n(54370),n(5153),n(80566),n(50870),n(75397),n(18829),n(51429),n(25376),n(95864),n(94565),n(95073),n(65204),n(47072),n(98391),n(22727),n(19647);var o=n(6659),r=n.n(o),i=n(67538),s=n(70740),a=n(79195),l=n(14148);const c=new RegExp("^\\[(.*)\\]$"),d="v1";function ArrayAndEncodeUserAttributesMap(e){return(0,a.Sd)(e)?[]:Object.getOwnPropertyNames(e).map((t=>{const n=function encode(e,t){if(!l.d.some((t=>{let{title:n}=t;return new RegExp(`\\.*${n}\\.*`).test(e)})))return t;if("string"==typeof t){if(!c.test(t))return encodeHelper(t);return(0,a.iB)(t,[]).reduce(((e,t)=>{if("string"==typeof t)return e.push(encodeHelper(t)),e;const n=treatNestedLegacyData(t).map((e=>encodeHelper(e)));return e.push(...n),e}),[])}return t.reduce(((e,t)=>{if("string"==typeof t)return e.push(encodeHelper(t)),e;const n=treatNestedLegacyData(t).map((e=>encodeHelper(e)));return e.push(...n),e}),[])}(t,e[t]);return{name:t,value:"string"==typeof n?n:(0,a.BA)(n)}}))}function decode(e){if("string"==typeof e){if(!c.test(e))return decodeHelper(e);const t=(0,a.iB)(e,[]).reduce(((e,t)=>{if("string"==typeof t)return e.push(decodeHelper(t)),e;const n=treatNestedLegacyData(t).map((e=>decodeHelper(e)));return e.push(...n),e}),[]);return[...new Set(t)].filter(Boolean)}const t=e.reduce(((e,t)=>{if("string"==typeof t)return e.push(decodeHelper(t)),e;const n=treatNestedLegacyData(t).map((e=>decodeHelper(e)));return e.push(...n),e}),[]);return[...new Set(t)].filter(Boolean)}function decodeHelper(e,t){const n=`${d}|`;try{return e.startsWith(n)?function decodeUserInfo(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===(t=window.clientVars)||void 0===t?void 0:t.tinyId)||(null===(n=window.clientVars)||void 0===n?void 0:n.tinyid)||"1234567890";const r=decodeURIComponent(escape(atob(e))),i=Array.from(r,(e=>e.charCodeAt(0))),s=Array.from(o,(e=>e.charCodeAt(0)),o);return i.map(((e,t)=>String.fromCharCode(e^s[t%s.length]))).join("")}(e.replace(n,""),t):e}catch(o){return e}}function encodeHelper(e,t){try{const n=function encodeUserInfo(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===(t=window.clientVars)||void 0===t?void 0:t.tinyId)||(null===(n=window.clientVars)||void 0===n?void 0:n.tinyid)||"1234567890";const r=Array.from(e,(e=>e.charCodeAt(0))),i=Array.from(o,(e=>e.charCodeAt(0)));return btoa(r.map(((e,t)=>unescape(encodeURIComponent(String.fromCharCode(e^i[t%i.length]))))).join(""))}(e,t);return`${d}|${n}`}catch(n){return e}}function treatNestedLegacyData(e){try{const t=e.toString();return"[object Object]"===t?[]:t.split(",")}catch(t){return[]}}var u=n(66426),p=n(45008);class UserAttributeRequest extends(r()){static getInstance(){return UserAttributeRequest.instance||(UserAttributeRequest.instance=new UserAttributeRequest),UserAttributeRequest.instance}constructor(){super(),this.initialized=!1,this.userAttributesMapping={},this.dataKey="userAttribute",this.logPrefixOfFetchingUserAttributes="[UserAttributeRequest:getUserAttributesAsync]",this.logPrefixOfUpdatingUserAttributes="[UserAttributeRequest:updateUserAttributesAsync]",this.forceFetchUserAttributesMap()}get userAttributesMap(){return this.userAttributesMapping}get userAttributesInitialized(){return this.initialized}async getUserAttributesMap(){return this.initialized?await Promise.resolve(this.userAttributesMapping):await this.forceFetchUserAttributesMap()}async getUserAttributeValueByName(e,t){const n=(await this.getUserAttributesMap())[e];return c.test(n)?(0,a.iB)(n,[]):null!=n?n:t}async forceFetchUserAttributesMap(){var e;const{data:t,error:n}=await(0,p.Zr)();if(n||(null==t||null===(e=t.header)||void 0===e?void 0:e.code)!==s.oY.SUCCESS)return i.l.error(`${this.logPrefixOfFetchingUserAttributes}[error]`,n||t),{};const o=this.getAttributeAndReplaceDataKey(t);if(!o)return i.l.error(`${this.logPrefixOfFetchingUserAttributes}[data]`,t),{};const{attributes:r}=(0,a.iB)(o,{attributes:[]});return this.userAttributesMapping=function flattenAndDecodeUserAttributes(e){return Array.isArray(e)?e.reduce(((e,t)=>{if(!t.value)return e;const n=decode(t.value);return e[t.name]="string"==typeof n?n:(0,a.BA)(n),e}),{}):{}}(r),this.initialized=!0,this.emit(u.t,this.userAttributesMapping),this.userAttributesMapping}async forceUpdateUserAttributes(e){var t;if(!Array.isArray(e)||!e.length)return;this.initialized||await this.forceFetchUserAttributesMap(),e.forEach((e=>this.mergeUserAttributeToMap(e)));const n=ArrayAndEncodeUserAttributesMap(this.userAttributesMapping),{data:o,error:r}=await(0,p.CD)(n,this.dataKey);(r||(null==o||null===(t=o.header)||void 0===t?void 0:t.code)!==s.oY.SUCCESS)&&i.l.error(`${this.logPrefixOfUpdatingUserAttributes}[error]`,r||o)}mergeUserAttributeToMap(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(0,a.Sd)(e)){if(!t)return this.compatibleMergeUserAttributeToMap(e);{const t=decode(e.value);this.userAttributesMapping[e.name]="string"==typeof t?t:(0,a.BA)([...new Set(t)])}}}compatibleMergeUserAttributeToMap(e){const{name:t,value:n}=e,o=this.userAttributesMapping[t],r=decode(n),i="string"==typeof r;if(!o)return void(this.userAttributesMapping[t]=i?r:(0,a.BA)([...new Set(r)]));const s=decode(o),l="string"==typeof s;if(l&&i)return void(this.userAttributesMapping[t]=r);const c=[...new Set((l?[s]:s).concat(r))];this.userAttributesMapping[t]=(0,a.BA)(c)}getAttributeAndReplaceDataKey(e){return"string"==typeof e.userAttribute?(this.dataKey="userAttribute",e.userAttribute):"string"==typeof e.user_attribute?(this.dataKey="user_attribute",e.user_attribute):""}}UserAttributeRequest.instance=void 0;const m=UserAttributeRequest.getInstance()},68222:(e,t,n)=>{n.d(t,{S:()=>i});var o=n(64649),r=n(45008);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const i=new class UserMarkRequest{constructor(){this.userMarkCache={},this.userCount=100}getCacheUserMark(e){var t;return null!==(t=this.userMarkCache[e])&&void 0!==t?t:{markName:"",uid:e,userPic:"",reqUid:e}}async queryUserMark(e,t){const n=this.userMarkCache[t];return n?await Promise.resolve(n):this.forceQueryUserMark(e,t)}async forceQueryUserMark(e,t){var n;const{data:o,error:i}=await(0,r.RH)(e,this.userCount),s={markName:"",uid:t,userPic:"",reqUid:t};if(i)return s;const a=null==o?void 0:o.result,l=null==a?void 0:a.rsp;if(null==l||!l.length)return s;this.userCount=Math.max(this.userCount,null!==(n=null==o?void 0:o.count)&&void 0!==n?n:0),this.userMarkCache=_objectSpread(_objectSpread({},this.userMarkCache),l.reduce(((e,t)=>(e[t.reqUid]=t,e[t.uid]=t,e)),{}));const c=this.userMarkCache[t];return null!=c?c:s}}},34556:(e,t,n)=>{n.d(t,{Z:()=>o});const o=new class LockInfoService{constructor(){this.holdingLockUserId=null}clear(){this.holdingLockUserId=null}}},60250:(e,t,n)=>{n.d(t,{OX:()=>loadSnackbarAsync,nP:()=>loadConfirmAsync,IG:()=>simpleShowSnackbar,N4:()=>simpleConfirmModal,J8:()=>simpleShowPullPanel,Zn:()=>simpleShowActionSheet,X7:()=>simpleShowConfirmDialog});var o=n(64649),r=(n(11431),n(19541)),i=n(58536);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function loadSnackbarAsync(){return Promise.resolve().then(n.bind(n,58536))}function loadConfirmAsync(){return n.e("js_components_dialog_confirm_jsx").then(n.bind(n,89573))}async function simpleShowSnackbar(e,t){return i.default.show(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({message:e,type:r.g.INFO},t))}async function simpleConfirmModal(e){const{Modal:t}=await loadConfirmAsync();return t.confirm(e)}async function simpleShowPullPanel(e){return(await async function loadPullPanelAsync(){const{default:e}=await Promise.all([n.e("vendors-node_modules_css3transform_dist_css3transform_js-node_modules_phy-touch_index_js"),n.e("vendors-node_modules_tencent_docs-soft-keyboard_dist_index_js"),n.e("vendors-node_modules_tencent_dui-mobile_lib_components_PullPanel_index_js")]).then(n.bind(n,58334));return e}()).show(e)}async function simpleShowActionSheet(e){return(await async function loadActionSheetAsync(){const{default:e}=await n.e("vendors-node_modules_tencent_dui-mobile_lib_components_ActionSheet_index_js").then(n.bind(n,99548));return e}()).show(e)}async function simpleShowConfirmDialog(e){const{default:t}=await loadConfirmAsync();return t(e)}},79195:(e,t,n)=>{n.d(t,{Qr:()=>isEmptyObject,Sd:()=>isFalsyValueOrEmptyPlainObject,iB:()=>safelyDeserialize,BA:()=>safelySerialize});var o=n(64049);function isEmptyObject(e){return null===e||!!(0,o.Kn)(e)&&0===Object.keys(e).length}function isFalsyValueOrEmptyPlainObject(e){return!e||!!(0,o.PO)(e)&&0===Object.keys(e).length}function safelyDeserialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(n){return t}}function safelySerialize(e){try{return JSON.stringify(e)}catch(t){return""}}},63406:(e,t,n)=>{n.d(t,{v1:()=>s,YY:()=>inEdit,Gg:()=>inQuickCreate,P0:()=>inFill,dU:()=>inFillModified,Wt:()=>inResultModify,L_:()=>inResult,Cx:()=>inSubmitResult,_4:()=>inFillDetail,G9:()=>inFillList,j4:()=>inDetail,QJ:()=>isDetail,MC:()=>a,Mx:()=>inEditOnly,Vs:()=>inEditTable,JV:()=>inFillTable,at:()=>isBig,A9:()=>getFormSubType});var o=n(86432),r=n(33716),i=n(96601);const s=location.pathname.indexOf("/exam/")>-1;function inEdit(){const{hash:e}=window.location;return[r.G.EDIT,r.G.PREVIEW,r.G.EDIT_TABLE,r.G.LOGIC_JUMP,r.G.SETTING_DEFAULT_ANSWER].some((t=>e.startsWith(`#/${t}`)))}function inQuickCreate(){return window.location.hash===i.y.QUICK_CREATE}function inFill(){return"#/fill"===location.hash}function inFillModified(){return/fill\//.test(location.hash)}function inResultModify(){return"#/result/modify"===location.hash}function inResult(){return"#/result"===location.hash}function inSubmitResult(){return"#/submit-result"===location.hash}function inFillDetail(){return"#/fill-detail"===location.hash}function inFillList(){return"#/fill-list"===location.hash}function inDetail(){return/detail\//.test(location.hash)}const isDetail=()=>/#\/detail(.*)$/i.test(window.location.hash),a=(Number((0,o.pm)("pre")),()=>"#/preview"===window.location.hash);/form\/edit/i.test(location.href),window.location.hash,window.location.hash,/blankpage/.test(window.location.hash),/form\/page\/clockm-edit/i.test(location.href);function inEditOnly(){return"#/edit"===location.hash}function inEditTable(){return/edit-table\//.test(location.hash)}function inFillTable(){return/fill-table\//.test(location.hash)}function isBig(){return"1"===(0,o.pm)("big")}function getFormSubType(){return s?"exam":"form"}},20782:(e,t,n)=>{n.d(t,{y:()=>genKeyByPeriodicCalendar});var o=n(3252);function genKeyByPeriodicCalendar(e){if((0,o.h)(e)){const{year:t,month:n,day:o,start:r,end:i}=e;return`${t}/${n}/${o}@[${r}-${i}]`}return""}},3252:(e,t,n)=>{function isValidPeriodicCalendar(e){return!!e&&"number"==typeof e.day&&"number"==typeof e.start&&"number"==typeof e.end}n.d(t,{h:()=>isValidPeriodicCalendar})},9938:(e,t,n)=>{n.d(t,{W:()=>mergeRelatedPeriodic});var o=n(64649),r=(n(11431),n(27693)),i=n.n(r),s=n(53345),a=n(3252);var l=n(8760),c=n(26338);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mergeRelatedPeriodic(e,t){var n,o;if(!t)return e;const{allowedStartTime:r,allowedEndTime:d,latestHistory:u,historicalMap:p}=e,{allowedStartTime:m,allowedEndTime:h,isPeriodic:f,historicalMap:g,currSelectedHistory:_}=t;if(!1===f)return _objectSpread(_objectSpread(_objectSpread({},e),t),{},{isPeriodic:!1,periodicPattern:s.CR.DEFAULT,submitStatus:s.j5.DEFAULT,canSubmitByPeriodic:!1});const y=i()(),[b,E,v]=[y.year(),y.month()+1,y.date()],T=(0,a.h)(u)?_objectSpread(_objectSpread({},u),{},{start:null!=m?m:u.start,end:null!=h?h:u.end}):{year:b,month:E,day:v,start:null!==(n=null!=m?m:r)&&void 0!==n?n:l.v.START,end:null!==(o=null!=h?h:d)&&void 0!==o?o:l.v.END},S=_objectSpread(_objectSpread(_objectSpread({},e),t),{},{currSelectedHistory:null!=_?_:T,isInCurrPeriodic:!_||(0,c.default)(_,T),historicalMap:_objectSpread(_objectSpread({},p),g)}),O=function calcPeriodicSubmitStatus(e,t){const{periodicPattern:n,allowedStartTime:o,allowedEndTime:r,periodicDays:i}=e,[a,l,c]=[t.hour(),t.minute(),t.second()],d=3600*a+60*l+c,u=d>=o&&d<=r?s.j5.ALLOWED:s.j5.FORBIDDEN;if(n===s.CR.DAILY||u===s.j5.FORBIDDEN)return u;if(n===s.CR.WEEKLY){const e=t.day();return null!=i&&i.includes(e)?s.j5.ALLOWED:s.j5.FORBIDDEN}if(n===s.CR.MONTHLY){const e=t.date();return null!=i&&i.includes(e)?s.j5.ALLOWED:s.j5.FORBIDDEN}return s.j5.DEFAULT}(S,y);return S.submitStatus=O,S.canSubmitByPeriodic=O===s.j5.ALLOWED,S}},35463:(e,t,n)=>{function genKey(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.slice.call(t).join("-")}function getRandomKey(){return`${Date.now().toString(36)}_${1e3*Math.random()%1e3|0}`}function randomString(e){let t,n="";const o=void 0!==e?e:4;for(t=0;t<o;t++)n+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return n}n.d(t,{_j:()=>genKey,dA:()=>getRandomKey,O1:()=>randomString})},39507:(e,t,n)=>{n.d(t,{XM:()=>recordTransform,P_:()=>answersTransform,X6:()=>m,sq:()=>transformSubmittedUsers});var o=n(64649),r=(n(11431),n(27693)),i=n.n(r),s=n(14042),a=n(20635),l=n(43582),c=n(25528),d=n(54734),u=n(54969);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function recordTransform(e){var t,n,o,r,s,a,p,m,h,f,g,_,y,b,E,v,T,S,O,w,I,C,R,P,A,D,N,L,j,M,x,F,k,Z,B,U,G,H;const V=null!==(t=null===(n=e.role)||void 0===n||null===(o=n.user_info)||void 0===o?void 0:o.type)&&void 0!==t?t:null===(r=e.role)||void 0===r||null===(s=r.userInfo)||void 0===s?void 0:s.type,q=V===u.f.ANONYMOUS?l:(null!==(a=null===(p=e.role)||void 0===p||null===(m=p.user_info)||void 0===m?void 0:m.avatar)&&void 0!==a?a:null===(h=e.role)||void 0===h||null===(f=h.userInfo)||void 0===f?void 0:f.avatar)||c,Q=V===u.f.ANONYMOUS?d.Z.t("匿名填写"):null!==(g=null===(_=e.role)||void 0===_||null===(y=_.user_info)||void 0===y?void 0:y.nick)&&void 0!==g?g:null===(b=e.role)||void 0===b||null===(E=b.userInfo)||void 0===E?void 0:E.nick,K={avatar:null!==(v=null===(T=e.del_info)||void 0===T?void 0:T.deleter_info.avatar)&&void 0!==v?v:null===(S=e.delInfo)||void 0===S?void 0:S.deleterInfo.avatar,nick:null!==(O=null===(w=e.del_info)||void 0===w?void 0:w.deleter_info.nick)&&void 0!==O?O:null===(I=e.delInfo)||void 0===I?void 0:I.deleterInfo.nick,delTime:(null!==(C=null===(R=e.del_info)||void 0===R?void 0:R.deleted_time)&&void 0!==C?C:null===(P=e.delInfo)||void 0===P?void 0:P.deletedTime)&&i()(null!==(A=null===(D=e.del_info)||void 0===D?void 0:D.deleted_time)&&void 0!==A?A:null===(N=e.delInfo)||void 0===N?void 0:N.deletedTime).valueOf()||0};return{audit_status:null!==(L=e.audit_status)&&void 0!==L?L:e.auditStatus,avatar:q,nick:Q,baseSid:null!==(j=e.base_seq)&&void 0!==j?j:e.baseSeq,del:null!==(M=e.record_status)&&void 0!==M?M:e.recordStatus,hideIds:null!==(x=e.hidden_ids)&&void 0!==x?x:e.hiddenIds,paperResults:null!==(F=null===(k=e.paper_result)||void 0===k?void 0:k.results)&&void 0!==F?F:null===(Z=e.paperResult)||void 0===Z?void 0:Z.results,paperTotalScore:null!==(B=null===(U=e.paper_result)||void 0===U?void 0:U.total_score)&&void 0!==B?B:null===(G=e.paperResult)||void 0===G?void 0:G.totalScore,post_time:Number(new Date(null!==(H=e.create_time)&&void 0!==H?H:e.createdTime))/1e3,role:e.role,sid:e.seq,uid:Number(e.uid),data:e.answers,deleteInfo:K,myRecord:e.my_record}}function answersTransform(e){return(null!=e?e:[]).map((e=>transformContent(e)))}function transformContent(e){var t,n;const{id:o,dataType:r,type:i,content:l,cutMark:c,format:d,securityStatus:u,originType:h,selectedOptionIds:f}=e;let g=m[i];i===s.c.LOCATION&&r===a.g.POSITION&&(g=97);const _=[];return null==f||f.forEach((e=>{_.push(`${e}`)})),_objectSpread({id:o,content:null===(t=(n=p)[g])||void 0===t?void 0:t.call(n,l),data_type:r,answer_type:m[i],format:d,security_status:u,origin_type:h,selected_option_ids:f?_:f},c?{cut_mark:c}:null)}function transformText(e){return{text:{text:e}}}function transformTexts(e){return{multi_texts:{texts:e}}}function transformFiles(e){const t=JSON.parse(e),n=[];return null==t||t.forEach((e=>{const t={name:e.name,origin_name:e.originName,key:e.key,type:e.type,size:e.size,file_id:e.fileId,download_url:e.downloadUrl};n.push(t)})),{files:{files:n}}}function transformMatrix(e){const t=[];return null==e||e.forEach((e=>{t.push({sub_id:e.subID,option_ids:e.optionIDs,values:e.values})})),{matrix:{matrix_rows:t}}}const p={1:e=>transformText(e),2:e=>transformFiles(e),3:e=>transformTexts(e),4:e=>function transformHealthCodes(e){const t=JSON.parse(e),n=[];return null==t||t.forEach((e=>{const t={name:e.name,time:e.time,color:e.color,testing_interval:e.testingInterval,testing_result:e.testingResult,testing_time:e.testingTime,image_url:e.imageUrl,src:e.src};n.push(t)})),{health_codes:{health_codes:n}}}(e),5:e=>function transformTravelCards(e){const t=JSON.parse(e),n=[];return null==t||t.forEach((e=>{const t={reached_city:e.reachedCity,time:e.time,color:e.color,risk_area:e.riskArea,telephone:e.telephone,image_url:e.imageUrl,src:e.src};n.push(t)})),{travel_cards:{travel_cards:n}}}(e),7:e=>function transformCommodities(e){const t=JSON.parse(e),n=[];return null==t||t.forEach((e=>{const t={id:e.id,title:e.title,price:e.price,quantity:e.quantity};n.push(t)})),{commodities:{commodities:n}}}(e),8:e=>transformTexts(e),9:e=>transformTexts(e),10:e=>transformTexts(e),11:e=>transformText(e),12:e=>transformText(e),13:e=>transformText(e),14:e=>transformText(e),15:e=>transformText(e),16:e=>transformText(e),17:e=>transformFiles(e),19:e=>transformText(e),20:e=>transformText(e),21:e=>transformText(e),23:e=>transformMatrix(e),24:e=>transformMatrix(e),25:e=>transformMatrix(e),26:e=>function transformTable(e){const t=[];return null==e||e.forEach((e=>{const n=[];null==e||e.forEach((e=>{const t=transformContent(e);n.push(t)})),t.push({answers:n})})),{table:{table_rows:t}}}(e),27:e=>transformTexts(e),28:e=>transformText(e),29:e=>transformFiles(e),97:e=>function transformPosition(e){const t=JSON.parse(e);return{position:{position_x:t.positionX,position_y:t.positionY,value:t.value,source_type:t.sourceType,uid:t.UID,sub_title:t.subTitle}}}(e),30:e=>transformText(e),31:e=>transformTexts(e)},m={SEQUENCE:1,FILE:2,IMAGE:3,HEALTHCODE:4,TRAVELCARD:5,COMMODITY:7,RADIO:8,CHECKBOX:9,SELECT:10,SIMPLE:11,RICH:11,TIME:12,LOCATION:13,CANVAS:14,DATE:15,TEMPERATURE:16,FILEIMAGE:17,RECOGNITION:18,CASCADER:19,SCALE:20,RATING:21,SEGMENTATION:22,MATRIX_RADIO:23,MATRIX_CHECKBOX:24,MATRIX_RATING:25,TABLE:26,VOTE:27,FILLIN:28,CANVAS_IMAGE:29,POSITION:97,AUTODEP:98,AUTONAME:99,SCAN:30,SORT:31};function transformSubmittedUsers(e){return Array.isArray(e)&&e.length?e.map((e=>{var t;return(null===(t=e.role)||void 0===t?void 0:t.user_type)===u.f.ANONYMOUS?_objectSpread(_objectSpread({},e),{},{avatar:l,nick:e.nick||d.Z.t("匿名")}):_objectSpread(_objectSpread({},e),{},{avatar:e.avatar||c})})):[]}},82275:(e,t,n)=>{n.d(t,{EP:()=>jumpToDocFirstPage,BL:()=>redirectToDoc,EV:()=>checkAndRedirectToClock,MY:()=>checkAndRedirectToSequence,Fe:()=>checkNeedRedirectToDetail});var o=n(45731),r=n(67550),i=n(86432),s=n(72870),a=n(4222),l=n(81893);function jumpToDocFirstPage(){const e=s.isIPad&&s.isTencentDocsApp&&(0,o.n)("1.4.3"),t=function getFirstPageUrl(){var e,t;const n=`https://${a._P.DOMAIN_NAME}`,o=`${n}/desktop/m/index.html?_wv=2`;return null!==(e=null===(t=[{condition:s.isQQFormMiniProgram,url:"/pages/templatesList/templatesList?searchtype=form&filtertype=2"},{condition:s.isMiniProgram,url:"/pages/list/list"},{condition:s.isTencentDocsApp&&window.mqq.iOS,url:`${n}/desktop/m/index.html?_fv=0&_wv=131072`},{condition:s.isTencentDocsApp&&!window.mqq.iOS,url:`${n}/desktop/m/index.html?_fv=0&_wv=4676`},{condition:s.isIPad,url:`${n}/desktop/index.html?_wv=2`}].find((e=>e.condition)))||void 0===t?void 0:t.url)&&void 0!==e?e:o}();e&&(0,r.dw)("docx","back",{from:"form"},(()=>{})),(0,l.lY)({url:t})}function redirectToDoc(e){var t,n;if(s.isMiniProgram)null===(t=window.wx)||void 0===t||null===(n=t.miniProgram)||void 0===n||n.redirectTo({url:`/pages/detail/detail?url=${encodeURIComponent(e)}`});else if(!(s.isMiniProgram||s.isWeChat||s.isWeWork)){var o,r;null===(o=window.mqq)||void 0===o||null===(r=o.ui)||void 0===r||r.openUrl({url:e,target:0,style:3})}}function checkAndRedirectToClock(e){let t=window.location.href;e&&t.match("/form/fill/")&&(t=t.replace("/form/fill/","/form/page/clock/"),(0,l.Oi)(window,t)),e&&t.match("/form/edit/")&&(t=t.replace("/form/edit/","/form/page/clock/"),(0,l.Oi)(window,t))}function checkAndRedirectToSequence(e){let t=window.location.href;e&&t.match("/form/fill/")&&(t=t.replace("/form/fill/","/form/page/sequence/"),(0,l.Oi)(window,t)),e&&t.match("/form/edit/")&&(t=t.replace("/form/edit/","/form/page/sequence/"),(0,l.Oi)(window,t))}function checkNeedRedirectToDetail(){return!(!(0,i.pm)("sid")||!(0,i.pm)("qqzy"))}},51734:(e,t,n)=>{n.d(t,{c:()=>goToTuCao});var o=n(72870),r=n(4222),i=n(81893);function goToTuCao(){var e,t;const n=o.isIPad&&o.isTencentDocsApp,s=`${r.Zj.FEED_BACK}?clientInfo=${encodeURIComponent(window.navigator.userAgent)}&customInfo=${encodeURIComponent(window.location.href)}`;var a,l;o.isMiniProgram?window.location.href=s:o.isQQDesktopDocsClient||n||!window.mqq||"0"===(null===(e=window.mqq.QQVersion)||void 0===e||null===(t=e.toString)||void 0===t?void 0:t.call(e))?(0,i.lY)({url:s}):null===(a=window.mqq)||void 0===a||null===(l=a.ui)||void 0===l||l.openUrl({url:s,target:1,style:1})}},87768:(e,t,n)=>{n.d(t,{G:()=>tdw,g:()=>reportFactory});var o=n(33319),r=n(63406),i=n(72870),s=n(86432);function tdw(e,t,n,a){var l,c;const d={table:"dc03111",module:e,action:t,report_type:101,file_type:3,opername:"doc_form",ver11:(0,r.A9)(),id:(null===(l=window.clientVars)||void 0===l?void 0:l.globalPadId)||"",isOwner:null!==(c=window.clientVars)&&void 0!==c&&c.isOwner?1:0},u=function setDefaultOption(e){var t,n;const o={},r=[{isQQFormMiniProgram:{condition:i.isQQFormMiniProgram,value:2}},{isQQMiniProgram:{condition:i.isQQMiniProgram,value:1}},{isMiniProgram:{condition:i.isMiniProgram,value:3}}].find((e=>e[Object.keys(e)[0]].condition)),a=null!==(t=null==r||null===(n=r[Object.keys(r)[0]])||void 0===n?void 0:n.value)&&void 0!==t?t:0,l="object"==typeof e,c=(0,s.pm)("groupid"),d={obj2:{condition:l,value:null==e?void 0:e.title},ver1:{condition:l,value:null==e?void 0:e.globalPadId},ver2:{condition:l,value:null==e?void 0:e.creatorId},ver3:{condition:l,value:null==e?void 0:e.domainId},ver4:{condition:l,value:null==e?void 0:e.ownerId},ver9:{condition:a,value:a},ver10:{condition:c,value:c}};return Object.getOwnPropertyNames(d).forEach((e=>{d[e].condition&&(o[e]=d[e].value)})),o}(a),p=Object.assign({},d,u,n);(0,o.tdw)(p,{showLog:!0})}function reportFactory(e,t){var n;const o=null!==(n=t[e.type])&&void 0!==n?n:{disable:!0};if(!o.disable){if(Array.isArray(o))return void o.forEach((e=>{e.disable||tdw(e.module,e.action,e.extra)}));tdw(o.module,o.action,o.extra)}}},71800:(e,t,n)=>{n.d(t,{Q:()=>o});const o=new class RevPosController{constructor(){this.rev$=0,this.pos$=0}getRevAndPos(){return{rev:this.rev$,pos:this.pos$}}setRevAndPos(e,t){this.rev$&&this.rev$>=e||(this.rev$=e,this.pos$=t)}}},98494:(e,t,n)=>{n.d(t,{n:()=>getConfigByScene});var o=n(78984),r=n(33716),i=n(45607);function getConfigByScene(e){const t={headerTimeDefText:i.on},n={usePeriodic:!0,timeDefMainTitle:i.on,timeDefSubTitle:i.i8},s={usePeriodic:!0,timeDefMainTitle:i.on,timeDefSubTitle:i.i8},a={headerTimeDefText:i.oj},l={usePeriodic:!1,timeDefMainTitle:i.oj,timeDefSubTitle:""},c={headerTimeDefText:i.oj},d={usePeriodic:!1,timeDefMainTitle:i.oj,timeDefSubTitle:""};return{[o.c.FORM]:{[r.G.EDIT]:t,[r.G.SETTING]:n},[o.c.TASK]:{[r.G.EDIT]:c,[r.G.SETTING]:d},[o.c.CLOCK]:{[r.G.SETTING]:s},[o.c.SEQUENCE]:{},[o.c.EXAM]:{},[o.c.VOTE]:{[r.G.EDIT]:a,[r.G.SETTING]:l},[o.c.QQ_GROUP_FORM]:{},[o.c.QQ_GROUP_TASK]:{},[o.c.QQ_GROUP_CLOCK]:{},[o.c.QQ_GROUP_SEQ]:{},[o.c.QQ_CHANNEL_FORM]:{},[o.c.QQ_CHANNEL_SEQ]:{}}[e]}},11331:(e,t,n)=>{function calcTotalScore(e){const{sections:t=[{qlist:[]}],questions:n=[]}=e||{},o=t.map((e=>{let{qlist:t}=e;return t})).flat();return function round(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(`${Math.round(Number(`${e}e${t}`))}e-${t}`)}(n.filter((e=>o.includes(null==e?void 0:e.id))).reduce(((e,t)=>{var n;return e+(Number(null===(n=t.answerInfo)||void 0===n?void 0:n.score)||0)}),0),1)}n.d(t,{v:()=>calcTotalScore})},69870:(e,t,n)=>{n.d(t,{ct:()=>s});var o=n(54734),r=n(52304),i=n(83956);o.Z.t("收集表涉及敏感信息，请核实创建人身份，以防上当受骗。"),o.Z.t("关闭");class SensitiveWordManager{static getInstance(){return this.instance||(this.instance=new SensitiveWordManager),this.instance}constructor(){this.sensitiveWords=[],this.needCheck=!0}setNeedCheck(e){var t,n;const{dataset:o}=r.hx[i.Td.FORM_COMMON_CONFIG](),s=null===(t=null==o||null===(n=o.sensitiveWords)||void 0===n?void 0:n.isEnabled)||void 0===t||t;this.needCheck=e&&s}setSensitiveWords(){var e,t;const{dataset:n}=r.hx[i.Td.FORM_COMMON_CONFIG](),o=null==n||null===(e=n.sensitiveWords)||void 0===e?void 0:e.primary,s=null==n||null===(t=n.sensitiveWords)||void 0===t?void 0:t.secondary;this.sensitiveWords=[o?o.split("|").filter(Boolean):i.z4.primary,s?s.split("|").filter(Boolean):i.z4.secondary]}getSensitiveWords(){return this.sensitiveWords}containsSensitiveWords(e,t){return!!this.needCheck&&("string"==typeof e?this.stringContainsSensitiveWords(e,t):e.some((e=>this.stringContainsSensitiveWords(e,t))))}stringContainsSensitiveWords(e,t){var n;return"number"==typeof t?null===(n=this.sensitiveWords[t])||void 0===n?void 0:n.some((t=>null==e?void 0:e.includes(t))):this.sensitiveWords.some((t=>t.some((t=>null==e?void 0:e.includes(t)))))}}SensitiveWordManager.instance=void 0;const s=SensitiveWordManager.getInstance()},67010:(e,t,n)=>{n.r(t),n.d(t,{getShareLink:()=>getShareLink,shareForm:()=>shareForm,navigateToMiniProgramUrl:()=>navigateToMiniProgramUrl,getShareOrPermissionMiniProgramUrl:()=>getShareOrPermissionMiniProgramUrl,getShareQr:()=>getShareQr});var o=n(64649),r=(n(11431),n(8139)),i=n.n(r),s=n(81893),a=n(54734),l=n(4222),c=n(72870),d=n(33358),u=n(15530),p=n(81721);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function getShareLink(){return window.location.origin+window.location.pathname}function shareForm(e){if(c.isMiniProgram){const{resultUrl:t}=e;navigateToMiniProgramUrl("Share",t)}else{var t,n;if(l.kZ.NEED_MINI_NATIVE&&window.mqq)null===(t=window.mqq.ui)||void 0===t||null===(n=t.showShareMenu)||void 0===n||n.call(t);else l.kZ.SPECIAL_ARK_EXTENSIONS&&c.isMobile&&(0,s.Oi)(window,`https://${l._P.DOMAIN_NAME}/components/docs/SharePrivateMobile.html?localPadId=${e.padId}`)}}function navigateToMiniProgramUrl(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;if(null!==(t=window.wx)&&void 0!==t&&t.miniProgram){const t=getShareOrPermissionMiniProgramUrl(e,n);window.wx.miniProgram.navigateTo({url:t})}}function getShareOrPermissionMiniProgramUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;const[n]=t.split("?");return(0,p.At)({Share:"/pages/sharePanel/sharePanel",Permission:"/packages/miniapp-privileges/permission-panel/permission-panel"}[e],{url:n})}function getShareQr(e){const t={url:getShareLink(),xsrf:(0,d.VQ)(),output_image:1},n=[{condition:!1,value:{title:null!=e?e:a.Z.t("未命名打卡"),background_type:"check_in"}},{condition:!1,value:{title:null!=e?e:a.Z.t("未命名接龙"),background_type:"pass_on"}}].find((e=>e.condition))||{value:{title:""}},o=_objectSpread(_objectSpread(_objectSpread({},t),n.value),{},{title:n.value.title.replace(/\r|\n/," ")}),r=`?${i().stringify(o)}`;return`//${l._P.DOMAIN_NAME}${u.cb.SHARE_QR_IMAGE}${r}`}},35548:(e,t,n)=>{n.d(t,{e:()=>getMatchedTitle,t:()=>checkTitleSmartMatched});var o=n(14042);function getMatchedTitle(e,t){var n;const o=e||[];if(!t)return"";const r=t.replace(/ /g,""),i=o.find((e=>{let{match:t}=e;return null==t?void 0:t.some((e=>-1!==r.indexOf(e)))}));return null!==(n=null==i?void 0:i.title)&&void 0!==n?n:""}function checkTitleSmartMatched(e,t,n){return n.some((n=>{let{type:r,id:i,title:s}=n;return r===o.c.SIMPLE&&!!String(t[i]||"").trim()&&!!getMatchedTitle(e,s)}))}},27565:(e,t,n)=>{function safelyGetFromLocalStorage(e,t){const{useDeserialization:n=!0,fallbackValue:o=null,fallbackCallback:r=(()=>{})}=null!=t?t:{};if(!e)return r("key is a falsy value!",e),o;try{const t=localStorage.getItem(e);if(t){return n?JSON.parse(t):t}return r("value from localStorage is invalid",t),o}catch(i){return r('parse error occurs in "safelyGetFromLocalStorage"',i),o}}function safelySetIntoLocalStorage(e,t,n){const{useSerialization:o=!0,fallbackCallback:r=(()=>{})}=null!=n?n:{};if(!e)return null==r||r("key is a falsy value!",e),!1;try{const n=o?JSON.stringify(t):`${t}`;return localStorage.setItem(e,n),!0}catch(i){return r('something went wrong in "safelySetIntoLocalStorage"',i),!1}}function safelyDelFromLocalStorage(e,t){const{fallbackCallback:n=(()=>{})}=null!=t?t:{};if(!e)return null==n||n("key is a falsy value!",e),!1;try{return localStorage.removeItem(e),!0}catch(o){return n('something went wrong in "safelyDelFromLocalStorage"',o),!1}}n.d(t,{FY:()=>safelyGetFromLocalStorage,H4:()=>safelySetIntoLocalStorage,Vr:()=>safelyDelFromLocalStorage})},41677:(e,t,n)=>{n.d(t,{G:()=>setLocalActions});var o=n(27565);function setLocalActions(e,t){t.createdDate=Number(new Date);const n="docs_actions",r=(0,o.FY)(n,{fallbackValue:[]}),i={};r.forEach(((e,t)=>{const n=`${e.localPadId}$${e.domainId}`;i[n]={index:t,value:e}}));const s=i[`${t.localPadId}$${t.domainId}`];s?r[s.index]={type:"ADD"===s.value&&"MODIFY"===e?"ADD":e,data:s.value}:r.push({type:e,data:t}),(0,o.H4)(n,r)}},64049:(e,t,n)=>{let o;n.d(t,{Qp:()=>isGenerationFunction,Kn:()=>isObject,PO:()=>isPlainObject,o8:()=>isUndefined}),function(e){e.STRING="[object String]",e.BOOLEAN="[object Boolean]",e.NUMBER="[object Number]",e.UNDEFINED="[object Undefined]",e.NULL="[object Null]",e.OBJECT="[object Object]",e.ARRAY="[object Array]",e.ERROR="[object Error]",e.DATE="[object Date]",e.REGEXP="[object RegExp]",e.FUNCTION="[object Function]",e.GENERATOR="[object GeneratorFunction]"}(o||(o={}));const r=Object.prototype.toString;function getStrictType(e){return r.call(e)}function isObject(e){const t=getStrictType(e);return t===o.ARRAY||t===o.OBJECT}function isPlainObject(e){return getStrictType(e)===o.OBJECT}function isUndefined(e){return getStrictType(e)===o.UNDEFINED}function isGenerationFunction(e){return getStrictType(e)===o.GENERATOR}},72870:(e,t,n)=>{n.r(t),n.d(t,{isMobile:()=>r,isWxWork:()=>i,isPC:()=>s,isIPad:()=>a,isMac:()=>l,isIOS:()=>c,isAndroid:()=>d,isAndroidPad:()=>u,isTimOrQQ:()=>p,isQQ:()=>m,isTim:()=>h,isQQBrowser:()=>f,isMiniProgram:()=>g,isWxMiniProgram:()=>_,isQQMiniProgram:()=>y,isTencentDocsApp:()=>b,isQQDesktopDocsClient:()=>E,isAndroidPhone:()=>v,isWeChat:()=>T,isWeWork:()=>S,isChrome:()=>O,isChromiumEdge:()=>w,isChromeVersionAboveOrEqual:()=>I,isTimOrQQFamily:()=>C,isIE:()=>R,isSafari:()=>P,isOldEdge:()=>A,isQQAppForm:()=>D,isTencentDocsAppVersionAboveOrEqual:()=>N,isElectronTencentDocsClient:()=>L,isWedrive:()=>j,ieVersion:()=>M,isWindows:()=>x,session:()=>F,isQQFormMiniProgram:()=>k,isFormMiniProgram:()=>Z});var o=n(36303);const{isMobile:r}=o.default,{isWxWork:i}=o.default,{isPC:s}=o.default,{isIPad:a}=o.default,{isMac:l}=o.default,{isIOS:c}=o.default,{isAndroid:d}=o.default,{isAndroidPad:u}=o.default,{isTimOrQQ:p}=o.default,{isQQ:m}=o.default,{isTim:h}=o.default,{isQQBrowser:f}=o.default,{isMiniProgram:g}=o.default,{isWxMiniProgram:_}=o.default,{isQQMiniProgram:y}=o.default,{isTencentDocsApp:b}=o.default,{isQQDesktopDocsClient:E}=o.default,{isAndroidPhone:v}=o.default,{isWeChat:T}=o.default,S=o.default.isWxWork,{isChrome:O}=o.default,{isChromiumEdge:w}=o.default,{isChromeVersionAboveOrEqual:I}=o.default,{isTimOrQQFamily:C}=o.default,{isIE:R}=o.default,{isSafari:P}=o.default,{isOldEdge:A}=o.default,D=window.location.href.indexOf("qqapp=form")>-1||window.location.href.indexOf("qqapp=clock")>-1,{isTencentDocsAppVersionAboveOrEqual:N}=o.default,{isElectronTencentDocsClient:L}=o.default,j=/WeDrive/i.test(navigator.userAgent),M=Number(navigator.userAgent.match(/MSIE (\d+)/)&&RegExp.$1),{isWindows:x}=o.default,F={get(e){try{return sessionStorage.getItem(e)}catch(t){return""}},set(e,t){try{sessionStorage.setItem(e,t)}catch(n){}}},k=y&&(D||!!F.get("qqappform"));F.get("qqappform")||F.set("qqappform",D?"1":"");const Z=D||!!F.get("qqappform")},22082:(e,t,n)=>{n.d(t,{e:()=>getFormSource,_:()=>getFormUrl});var o=n(10405),r=n.n(o),i=n(4222),s=n(63406),a=n(15530);function getFormSource(){const e=r()("/form/:action/:source"),t=r()("/form/page/:action/:source"),n=e.exec(window.location.pathname)||t.exec(window.location.pathname);return n?{action:n[1],urlId:n[2]}:{urlId:""}}function getFormUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{urlId:t}=getFormSource();if(s.v1)return`${a.Jq.GET_BIG_PAPER_DATA}?id=${t}`;if((0,s.at)())return`${i.Zj.BIG_FORM_MAIN_URL}/${t}.json`;let n=`${a.tL.GET}?id=${t}&normal=1`;return location.search.length>0&&(n=`${a.tL.GET}${location.search}&id=${t}&normal=1`),e&&(n=`${n}&tag=${e}`),`//${i._P.DOMAIN_NAME}${n}`}},96806:(e,t,n)=>{function getIdOnUrl(){var e;const{pathname:t}=window.location;return t&&null!==(e=t.split("/").filter(Boolean).pop())&&void 0!==e?e:""}function isCollegeExam(){return window.location.pathname.indexOf("/exam/")>-1}n.d(t,{L:()=>getIdOnUrl,O:()=>isCollegeExam})},86432:(e,t,n)=>{n.d(t,{pm:()=>getQuery,rA:()=>isInQuickCreate,ZS:()=>hasClientIdOnUrlQuery,MU:()=>getQQGroupIdOnUrlQuery,C6:()=>getQQChannelIdsOnUrlQuery,lN:()=>getQQChannelReportValues,at:()=>isBig,zf:()=>isFromAdvertisementPage,Vm:()=>updatedUrlTimeStamp,aF:()=>getRouteIpsOnUrlQuery});n(11431),n(32904);var o=n(72870);function getQuery(e){let t=null;const{location:n}=window;return n&&(t=n.search.match(new RegExp(`(\\?|&)${e}=([^&]*)(#|&|$)`))),t?decodeURIComponent(t[2]):""}function isInQuickCreate(){return"1pcnmx1fef8wuyz5w7xp6hqipw"===getQuery("templateId")}function hasClientIdOnUrlQuery(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"f33b8e0054674e6c9b33f18178bb6a6c";return getQuery("clientid")===e}function getQQGroupIdOnUrlQuery(){return getQuery("group_code")||getQuery("groupid")||getQuery("group_id")||getQuery("_w_groupid")}function getQQChannelIdsOnUrlQuery(){return{guildId:getQuery("guild_id")||getQuery("guildid"),channelId:getQuery("channel_id")||getQuery("channelid")}}function getQQChannelReportValues(){return{tag:getQuery("source_tag")}}function isBig(){return"1"===getQuery("big")}function isFromAdvertisementPage(){const e=!!getQuery("isFromAdPage");return o.isMiniProgram&&e}function updatedUrlTimeStamp(){const{search:e}=window.location,t=new URLSearchParams(e);return t.set("_t",`${Date.now()}`),`${location.origin}${location.pathname}?${t.toString()}${location.hash}`}function getRouteIpsOnUrlQuery(){const e=getQuery("route_ip"),t=getQuery("room_route_ip");return e&&t?{routeIp:e,roomRouteIp:t}:null}},45731:(e,t,n)=>{n.d(t,{n:()=>checkTencentDocAppVersionSupportFunction});var o=n(72870);const checkTencentDocAppVersionSupportFunction=e=>(0,o.isTencentDocsAppVersionAboveOrEqual)(e);Number(navigator.userAgent.match(/MSIE (\d+)/)&&RegExp.$1)},12371:(e,t,n)=>{n.d(t,{Z:()=>o});n(74161),n(97975),n(49981),n(18706),n(39588);const o=(new(n(44187).Z)).add(n(79871).Z,n(84554).Z,n(90894).Z,n(83309).Z,n(73017).Z,n(6078).Z,n(85717).Z,n(25742).Z,n(86571).Z,n(28472).Z,n(87856).Z,n(92614).Z,n(31924).Z,n(43525).Z).model(n(30095).Z,n(38999).Z,n(72182).Z,n(7819).Z,n(49399).Z,n(33575).Z,n(53333).Z,n(47524).Z,n(32609).Z,n(66082).Z).router(n(22364).Z).start("#root")}}]);
//# sourceMappingURL=form-main-chunks-5c86a5.js.map