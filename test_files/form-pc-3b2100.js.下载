(self.webpackChunk=self.webpackChunk||[]).push([["form-pc"],{20839:(e,t,r)=>{"use strict";r.d(t,{iy:()=>i,i2:()=>s,SS:()=>l,qR:()=>c,vH:()=>d,mL:()=>u,Rm:()=>p,eZ:()=>m,EX:()=>f,_x:()=>h,YY:()=>y});var n,o=r(64649),a=r(14042),i=(0,o.Z)({0:{value:"满意度",startText:"非常不满意",endText:"非常满意"},1:{value:"推荐度",startText:"非常不推荐",endText:"非常推荐"},2:{value:"符合度",startText:"非常不符合",endText:"非常符合"},3:{value:"认同度",startText:"非常不认同",endText:"非常认同"},4:{value:"可能性",startText:"非常不可能",endText:"非常可能"},5:{value:"意愿度",startText:"非常不愿意",endText:"非常愿意"},6:{value:"重要度",startText:"非常不重要",endText:"非常重要"}},-1,{value:"自定义"}),s="请输入问题",l="文件要求：{{FILE_TYPE}}{{DELIMITER:，}}{{FILE_SIZE:上限}}",c="图片要求：{{MAX:最多}}{{MIN:最少}}{{UNIT:张}}{{DELIMITER:，}}{{IMAGE_SIZE:上限}}{{WATERMARK:，显示水印}}",d={doc:"文字文档",sheet:"表格",ppt:"演示文稿",pdf:"PDF",video:"视频",audio:"音频",image:"图片"},u={cancelText:"取消",okText:"确定"},p={location:"待填写者填写详细地址",intelligent:"请输入题目",recognition:"待填写者上传图片（仅支持1张图）",segmentation:"请输入小节标题",select:"待填写者选择",simple:{bankCard:"银行卡号输入区",currency:"货币输入区",email:"电子邮箱输入区",fallback:"待填写人输入",id:"身份证号输入区",number:"数字输入区",passport:"护照号输入区",phone:"手机号输入区",tel:"固定电话输入区",url:"网址输入区"}},m={imageReadonly:"未上传",locationDetail:"请填写详细地址",otherOptionPlaceholder:"请输入",select:"请选择",selectReadonly:"未选择",simple:{bankCard:"请输入银行卡号",email:"请输入电子邮箱",fallback:"请输入",id:"请输入身份证号",number:"请输入数字",passport:"请输入护照号",phone:"请输入手机号",tel:"请输入固定电话",url:"请输入网址"},simpleReadonly:"未填写",temperature:"请输入体温（数字）"},f={jumpTo:"跳转至",jumpToEndTitle:"跳至末尾结束作答",overflowQuestionNumber:"{{NUMBER}}",questionNumber:"{{NUMBER}}题",show:"显示",tipsSuffix:"等{{TOTAL_NUMBER}}题",relatedTips:"此题已关联第"},h={checkboxValidator:{EQL:"固定选择 {{NUMBER}} 项",MAX:"最多选择 {{NUMBER}} 项",MIN:"至少选择 {{NUMBER}} 项"}},y=(n={},(0,o.Z)(n,a.c.AUTODEP,"自动部门题"),(0,o.Z)(n,a.c.AUTONAME,"自动姓名题"),(0,o.Z)(n,a.c.CANVAS,"签名题"),(0,o.Z)(n,a.c.CANVAS_IMAGE,"签名题"),(0,o.Z)(n,a.c.CHECKBOX,"多选题"),(0,o.Z)(n,a.c.COMMODITY,"商品题"),(0,o.Z)(n,a.c.DATE,"日期题"),(0,o.Z)(n,a.c.FILE,"文件题"),(0,o.Z)(n,a.c.FILEIMAGE,"图片题"),(0,o.Z)(n,a.c.FILLIN,"填空题"),(0,o.Z)(n,a.c.IMAGE,"图片题"),(0,o.Z)(n,a.c.INTELLIGENT_MATCH,"智能推荐题型"),(0,o.Z)(n,a.c.LOCATION,"地理位置"),(0,o.Z)(n,a.c.MATRIX_CHECKBOX,"矩阵题"),(0,o.Z)(n,a.c.MATRIX_RADIO,"矩阵题"),(0,o.Z)(n,a.c.MATRIX_RATING,"矩阵题"),(0,o.Z)(n,a.c.RADIO,"单选题"),(0,o.Z)(n,a.c.RATING,"评分题"),(0,o.Z)(n,a.c.RECOGNITION,"识图题"),(0,o.Z)(n,a.c.SCALE,"量表题"),(0,o.Z)(n,a.c.SEGMENTATION,"分节标题"),(0,o.Z)(n,a.c.SELECT,"下拉选择"),(0,o.Z)(n,a.c.SIMPLE,"问答题"),(0,o.Z)(n,a.c.TABLE,"表格题"),(0,o.Z)(n,a.c.TEMPERATURE,"体温题"),(0,o.Z)(n,a.c.TIME,"时间题"),(0,o.Z)(n,a.c.CASCADER,"多级选项"),(0,o.Z)(n,a.c.VOTE,"投票题"),(0,o.Z)(n,a.c.SCAN,"扫码题"),(0,o.Z)(n,a.c.SORT,"排序题"),n)},12536:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>questionAdaptor});var n=r(50189),o=r(649),a=r(64649),i=r(11026),s=(r(53124),r(74413),r(62285),r(12249),r(57637),r(63115),r(8532),r(20779),r(47134),r(63517),r(91270),r(13227),r(54370),r(5153),r(67506),r(80566),r(50870),r(75397),r(18829),r(95498),r(51429),r(61842),r(25376),r(38333),r(95864),r(63990),r(94565),r(95073),r(65204),r(47072),r(98391),r(24338),r(22727),r(2002),r(19647),r(11431),r(27378)),l=r(90005),c=r.n(l),d=r(56583),u=r(41589),p=r(1671),m=r(95240),f=r(14042),h=r(79942),y=r(51410),b=r(78638),g=(r(84050),r(59910),r(66066),r(61820)),v=function getQuestionIndex(e,t,r){var n,o=t.findIndex((function(t){return t===e}));return-1===o?o:(null===(n=r[o])||void 0===n?void 0:n.type)===f.c.SEGMENTATION?r[o].title||"":o-r.slice(0,o+1).filter((function(e){return e.type===f.c.SEGMENTATION})).length},_=function getShowTips(e,t,r,n,o){var a=null==e?void 0:e.map((function(e){return v(e,t,n)})).filter((function(e){return-1!==e})).sort((function(e,t){return e-t})).map((function(e){if("string"==typeof e){var t=r[f.c.SEGMENTATION];return e?(null==e?void 0:e.length)>4?"".concat(t,"(").concat(e.substring(0,4),"...)"):"".concat(t,"(").concat(e,")"):t}return"".concat(e+1).padStart(2,"0")}));if((null==a?void 0:a.length)>0){var i=r.overflowQuestionNumber,s=r.questionNumber,l=r.show,c=r.relatedTips,d=r.tipsSuffix,u=a.length>3,p=(u?i:s).replace("{{NUMBER}}",a.slice(0,3).join("、")),m=u?d.replace("{{TOTAL_NUMBER}}",a.length).replace("{{REST_NUMBER}}",a.length-3):"",h=[f.c.SCALE,f.c.RATING].includes(o)?c:l;return"".concat(h).concat(p).concat(m)}return null},O=function getJumpTips(e,t,r,n){var o=r.jumpTo,a=r.jumpToEndTitle,i=r.questionNumber,s=r[f.c.SEGMENTATION];if(e===g.KZ)return a;var l=v(e,t,n);if("string"==typeof l){if(!l)return s;var c=(null==l?void 0:l.length)>4?"".concat(s,"(").concat(l.substring(0,4),"...)"):"".concat(s,"(").concat(l,")");return"".concat(o).concat(i.replace("{{NUMBER}}",c))}if(l>0){var d="".concat(l+1).padStart(2,"0");return"".concat(o).concat(i.replace("{{NUMBER}}",d))}return null},S=function getValidatorDesc(e,t){var r=e.toggle,n=void 0===r?{}:r,o=e.type,a=e.validateInput,i=void 0===a?{}:a;if(o!==f.c.CHECKBOX)return null;if(!n.showValidate)return"​";var s=t.checkboxValidator,l=i.type,c=i.number;return"number"==typeof c?s[l].replace("{{NUMBER}}",c):"​"},P=h.b,C=y.v,w=b.DATE_TIME_TYPE,I=(0,d.Z)(u.dJ),E=(0,d.Z)(u.lU),T=(0,d.Z)((function(e,t){return e.map((function(e){return t[e]})).filter(Boolean)}));function getDesc(e,t,r,n){var o=e.jumpId,a=void 0===o?"":o,i=e.showIds,l=void 0===i?[]:i,d=e.toggle,u=e.type,p=e.validateInput,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},f=m.className,h=m.jumpTipsEnabled,y=void 0===h||h,b=m.showTipsEnabled,g=void 0===b||b,v=m.validatorTipsEnabled,P=void 0===v||v,C=I(t),w=y?O(a,C,r,n):"",E=g?_(l,C,r,n,u):"",T=[{type:"validator",text:P?S({toggle:d,type:u,validateInput:p},r):""},{type:"jump",text:w},{type:"show",text:E}].map((function(e){var t=e.text,r=e.type;return t?s.createElement("div",{key:r,className:c()("desc-row","ellipsis",f),"data-text":t,"data-tipstype":r},t.replace(/\u200B/g,"")):null})).filter(Boolean);return T.length?T:null}function getQuestionDefaultValue(e){return m.rn.has(e.type)?e.defaultValues&&JSON.parse(e.defaultValues)||[]:e.type===f.c.TABLE?[[],[]]:e.defaultValues?JSON.parse(e.defaultValues):""}function getOptionDesc(e,t,r,n){return function(o,a,i){var s,l=i.jumpId,c=i.showIds;return getDesc({jumpId:t.jumpId||l,showIds:null!==(s=t.showIds)&&void 0!==s&&s.length?t.showIds:c},e,r,n,{className:"option-desc",validatorTipsEnabled:t.type===f.c.CHECKBOX})}}function questionAdaptor(e,t){var r,s=e.disabled,l=e.fillable,c=e.formData,d=e.getPopupContainer,u=e.lang,m=e.locale,h=e.onBlur,y=e.onChange,b=e.onFocus,g=e.onReport,v=e.placeholder,_=e.question,O=e.readOnly,S=e.wxConfig,I=!!c.taskConfig,N=_.type,j=_.qdata,D=void 0===j?{}:j,k={disabled:s,getPopupContainer:d,lang:u,onBlur:h,onChange:y,onFocus:b,onReport:g,placeholder:v,readOnly:O},x={},Z=t[N.toLowerCase()]||{},L="function"==typeof Z?Z(_):Z,R="/v1/image/upload?globalPadId=".concat(c.globalPadId),A=function handleOptionType(){switch(N){case f.c.SELECT:x.options=D.options;break;case f.c.RADIO:case f.c.CHECKBOX:case f.c.VOTE:default:x.options=function getValidOptions(e){var t=!1;return(e||[]).filter((function(e){if(!e)return!1;if(e.id===p.H){if(t)return!1;t=!0}return!0}))}(D.options)}if(!l){var e=E(c.questions),t=T(c.sections[0].qlist,e);x.getDesc=function(){return getDesc(_,c.sections,m,t,{className:"global-desc",jumpTipsEnabled:!1,showTipsEnabled:!1})},x.getOptionDesc=getOptionDesc(c.sections,_,m,t),x.wxConfig=S,x.value=getQuestionDefaultValue(_)}},F=function handleChoice(){I&&(x.SNType="ALPHABET"),x.multiple=N===f.c.CHECKBOX,A()},M=function handleImage(){var e=(D.fileNum||{}).max,t=c.globalPadId.split("$"),r=(0,i.Z)(t,2);x.padId=r[1],x.maxCount=e||6,x.qdata=D,x.uploadUrl=R,x.wxConfig=S,l||(x.editable=!0)},B=M,q=M,U=function handleMatrix(){var e;if(x.subtitles=D.subtitles,x.options=D.options,x.type=(e={},(0,a.Z)(e,f.c.MATRIX_CHECKBOX,f.c.CHECKBOX),(0,a.Z)(e,f.c.MATRIX_RADIO,f.c.RADIO),(0,a.Z)(e,f.c.MATRIX_RATING,f.c.RATING),e)[N],!l){var t=E(c.questions),r=T(c.sections[0].qlist,t);x.getDesc=function(){return getDesc(_,c.sections,m,r)},x.value=getQuestionDefaultValue(_)}},G=function handleSimple(){if(!l){var e=E(c.questions),t=T(c.sections[0].qlist,e);x.getDesc=function(){return getDesc(_,c.sections,m,t)},x.value=getQuestionDefaultValue(_)}x.prefix=D.prefix,x.suffix=D.suffix},K=(r={},(0,a.Z)(r,f.c.CANVAS,(function handleCanvas(){x.uploadUrl=R,x.addonParams={docID:c.globalPadId}})),(0,a.Z)(r,f.c.CANVAS_IMAGE,B),(0,a.Z)(r,f.c.CASCADER,(function handleCascader(){x.levelNames=D.levelNames,x.options=D.options,l||(x.value=getQuestionDefaultValue(_))})),(0,a.Z)(r,f.c.CHECKBOX,F),(0,a.Z)(r,f.c.COMMODITY,(function handleCommodity(){x.options=D.options,x.wxConfig=S})),(0,a.Z)(r,f.c.DATE,(function handleDate(){x.type={'yyyy"年"m"月"d"日"':w.DATE,'yyyy"年"m"月"':w.MONTH,'yyyy"年"m"月"d"日" hh:mm':w.DATETIME,date:w.DATE,datetime:w.DATETIME,month:w.MONTH}[D.subType]||w.DATE,l||(x.value=getQuestionDefaultValue(_))})),(0,a.Z)(r,f.c.FILE,(function handleFile(){var e=(D.fileNum||{}).max,t=c.globalPadId.split("$"),r=(0,i.Z)(t,2);x.padId=r[1],x.maxCount=e||6,x.qdata=D,l||(x.editable=!0)})),(0,a.Z)(r,f.c.FILEIMAGE,q),(0,a.Z)(r,f.c.FILLIN,G),(0,a.Z)(r,f.c.IMAGE,M),(0,a.Z)(r,f.c.LOCATION,(function handleLocation(){var e;x.dataSourceUrl=D.dataSourceUrl||"",x.dataSourceUrl&&(x.allowAutoLocate=!1),D.levelName&&(x.levelName=D.levelName),x.type=(null===(e=D.subType)||void 0===e?void 0:e.toUpperCase())||C.DISTRICT,x.wxConfig=S})),(0,a.Z)(r,f.c.MATRIX_CHECKBOX,U),(0,a.Z)(r,f.c.MATRIX_RADIO,U),(0,a.Z)(r,f.c.MATRIX_RATING,U),(0,a.Z)(r,f.c.RADIO,F),(0,a.Z)(r,f.c.RATING,(function handleRating(){if(x.icon=D.icon,x.mode=D.mode,x.degree=D.degree,!l){var e,t=[];null===(e=_.showIds)||void 0===e||e.forEach((function(e){var r;(r=t).push.apply(r,(0,o.Z)(e.showIds))}));var r=E(c.questions),a=T(c.sections[0].qlist,r);t=Array.from(new Set(t)),x.getDesc=function(){return getDesc((0,n.Z)((0,n.Z)({},_),{},{showIds:t}),c.sections,m,a)},x.value=getQuestionDefaultValue(_)}})),(0,a.Z)(r,f.c.RECOGNITION,(function handleRecognition(){x.uploadUrl=R,x.maxCount=1})),(0,a.Z)(r,f.c.SCALE,(function handleScale(){if(x.end=D.end,x.endText="-1"===D.type?D.endText:m.bipolarWritingList[D.type].endText,x.order=D.order,x.start=D.start,x.startText="-1"===D.type?D.startText:m.bipolarWritingList[D.type].startText,!l){var e,t=[];null===(e=_.showIds)||void 0===e||e.forEach((function(e){var r;(r=t).push.apply(r,(0,o.Z)(e.showIds))}));var r=E(c.questions),a=T(c.sections[0].qlist,r);t=Array.from(new Set(t)),x.getDesc=function(){return getDesc((0,n.Z)((0,n.Z)({},_),{},{showIds:t}),c.sections,m,a)},x.value=getQuestionDefaultValue(_)}})),(0,a.Z)(r,f.c.SCAN,(function handleScan(){if(!l){var e=E(c.questions),t=T(c.sections[0].qlist,e);x.getDesc=function(){return getDesc(_,c.sections,m,t)},x.value=getQuestionDefaultValue(_)}x.wxConfig=S;var r=D.ext;x.cutLeft=r.cutLeft,x.cutRight=r.cutRight})),(0,a.Z)(r,f.c.SELECT,A),(0,a.Z)(r,f.c.SIMPLE,G),(0,a.Z)(r,f.c.TABLE,(function handleTable(){if(!l){var e=E(c.questions),t=T(c.sections[0].qlist,e);x.getDesc=function(){return getDesc(_,c.sections,m,t)}}x.questions=D.tableQuestionData.questions,x.sections=D.tableQuestionData.sections,x.maxTableRowCount=D.maxTableRowCount})),(0,a.Z)(r,f.c.TEMPERATURE,(function handleTemperature(){var e;x.type={fahrenheit:P.FAHRENHEIT,celsius:P.CELSIUS}[null===(e=D.unit)||void 0===e?void 0:e.toLowerCase()]||P.CELSIUS})),(0,a.Z)(r,f.c.TIME,(function handleTime(){var e;x.type={durationtype:w.DURATION,timetype:w.TIME}[null===(e=D.subType)||void 0===e?void 0:e.toLowerCase()]||w.TIME,l||(x.value=getQuestionDefaultValue(_))})),(0,a.Z)(r,f.c.VOTE,(function handleVote(){var e;x.multiple=null!==(e=D.multiple)&&void 0!==e&&e,A()})),(0,a.Z)(r,f.c.SORT,(function handleSort(){if(x.options=D.options,!l){var e=E(c.questions),t=T(c.sections[0].qlist,e);x.getDesc=function(){return getDesc(_,c.sections,m,t)},x.getOptionDesc=getOptionDesc(c.sections,_,m,t),x.wxConfig=S,x.value=getQuestionDefaultValue(_)}})),r)[N];return null==K||K(),(0,n.Z)((0,n.Z)((0,n.Z)({},k),x),L)}},35418:(e,t,r)=>{"use strict";r.d(t,{v:()=>l});var n=r(27378),o=r(23615),a=r.n(o),i=r(90005),s=r.n(i),l=(0,r(60485).W5)((function(e){var t=e.className,r=e.classNamePrefix,o=e.lang,a={en_US:"[Multi]",zh_TW:"[多選]"}[o]||"[多选]";return n.createElement("span",{className:s()("".concat(r,"-checkbox-tag"),t),lang:o.replace("_","-").toLowerCase()},a)}));l.propTypes={lang:a().string.isRequired,className:a().string,classNamePrefix:a().string},l.defaultProps={className:"",classNamePrefix:"form"},l.displayName="CheckboxTag"},6041:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var n=r(27378),o=r(90005),a=r.n(o),i=(0,r(60485).W5)((function(e){var t=e.SimpleScore,r=e.errorTip,o=e.lang,i=e.markMode,s=e.onSimpleScoreChange,l=e.onSimpleScoreError,c=e.questionCore,d=e.readOnly,u=e.score,p=e.simpleScorePlaceholder,m=e.simpleScoreValue,f=n.useRef({pointerEvents:"auto"});return n.createElement("div",{className:a()("question-content",{readonly:d,error:!!r})},c,i?n.createElement(t,{lang:o,max:null!=u?u:1/0,placeholder:p,style:f.current,value:m,onChange:s,onError:l}):null,r?n.createElement("div",{className:"question-content-error"},r):null)}));i.displayName="QuestionContent"},59169:(e,t,r)=>{"use strict";r.d(t,{e8:()=>a});var n=r(27378),o=r(60485),a=(0,o.W5)((function(e){var t=e.EditorReadonly,r=e.images,o=e.onReport,a=e.canPrivateCopyOut,i=e.richSubtitle,s=e.subtitle,l=e.corpId,c=e.wxConfig,d=i||function compatibleTextareaData(e){var t={value:e.subtitle,images:e.images,tag:"legacySubtitleImages"};return JSON.stringify(t)}({subtitle:s,images:r});return n.createElement(t,{canPrivateCopyOut:a,className:"question-rich-subtitle",corpId:l,richTextValue:d,source:"question-subtitle",wxConfig:c,onReport:o})}));a.displayName="QuestionSubtitleRich"},89847:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var n=r(27378),o=r(14042),a=r(12874),i=r(60485),s=r(35418),l=(0,i.W5)((function(e){var t=e.classNamePrefix,r=e.lang,i=e.title,l=e.type,c=e.onCopyTitle;return n.createElement("div",{className:"question-title",onCopy:c},l===o.c.CHECKBOX?n.createElement(s.v,{classNamePrefix:t,lang:r}):null,n.createElement(a.Z,{content:i,maxLen:150}))}));l.displayName="QuestionTitle"},13235:(e,t,r)=>{"use strict";r.d(t,{H:()=>D});r(66066),r(35659),r(71165),r(74413),r(69108),r(91270);var n=r(27378),o=r(90005),a=r.n(o),i=r(14042),s=r(60485),l=r(64649),c=(r(13227),r(54370),r(5153),r(67506),r(80566),r(50870),r(75397),r(18829),r(95498),r(51429),r(61842),r(25376),r(38333),r(95864),r(63990),r(94565),r(95073),r(65204),r(47072),r(98391),r(24338),r(22727),r(2002),r(19647),r(11431),r(12249),r(57637),r(53124),r(62285),r(19717),r(98704),r(63517),r(41589)),d=r(50189),u=r(22951),p=r(91976),m=r(67591),f=r(94337),h=r(23615),y=r.n(h);var b,g=(0,r(21886).p)({en_US:function en_US(){return r.e("node_modules_tencent_form-components_lib_components_answer-detail_locale_en_US_js").then(r.bind(r,62472))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-components_lib_components_answer-detail_locale_zh_TW_js").then(r.bind(r,92090))},locale:{answer:"正确答案",correct:"回答正确",explain:"答案解析",point:"分",wrong:"回答错误"}})(b=function(e){(0,m.Z)(AnswerDetail,e);var t=(0,f.Z)(AnswerDetail);function AnswerDetail(){return(0,u.Z)(this,AnswerDetail),t.apply(this,arguments)}return(0,p.Z)(AnswerDetail,[{key:"getAnswers",value:function getAnswers(){var e=this.props.answer;return Array.isArray(e)?e.join("、"):e}},{key:"renderResult",value:function renderResult(){var e=this.props,t=e.showScore,r=e.score,o=e.classNamePrefix,a=e.correct,i=this.state.locale,s=i.correct,l=i.wrong,c=i.point,d=n.createElement("div",{className:"".concat(o,"-score")},"+",a?r:0,c);return n.createElement("div",{className:"".concat(o,"-result")},n.createElement("div",{className:"answer-result"},a?s:l),t&&r?d:null)}},{key:"renderAnswer",value:function renderAnswer(){var e=this.props,t=e.classNamePrefix,r=e.explain,o=this.getAnswers();if(!o&&!r)return null;var a=this.state.locale,i=a.answer,s=a.explain;return n.createElement("div",{className:"".concat(t,"-answer")},o?n.createElement("div",{className:"".concat(t,"-title")},i,"：",n.createElement("span",{className:"".concat(t,"-main")},o)):null,r?n.createElement("div",{className:"".concat(t,"-explain")},s,"：",r):null)}},{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.correct,o=e.style;return n.createElement("div",{style:o,className:a()(t,{right:r,wrong:!r})},this.renderResult(),this.renderAnswer())}}]),AnswerDetail}(n.PureComponent))||b;g.propTypes={answer:y().oneOfType([y().arrayOf(y().string),y().string]),classNamePrefix:y().string,correct:y().bool,explain:y().string,score:y().number,showScore:y().bool,style:y().oneOfType([y().object])},g.defaultProps=(0,d.Z)((0,d.Z)({},g.defaultProps),{},{answer:[],classNamePrefix:"form-answer-detail",correct:!0,explain:"",score:0,showScore:!0,style:{}});const v=g;var _=(0,s.W5)((function(e){var t,r,o=e.answer,a=e.lang,d=e.question,u=d.qdata,p=d.answerInfo,m=d.type,f=e.showGainScore,h=(u||{}).options,y=void 0===h?[]:h,b=p||{},g=b.rightOptionIds,_=void 0===g?[]:g,O=b.rightTexts,S=void 0===O?[]:O,P=b.score,C=b.explain,w=b.caseSensitive,I=b.canInclude,E=function getChoiceResult(){if(!_.length)return null;var e=new Set(y.map((function(e){return e.id}))),t=new Set(_.filter((function(t){return e.has(t)})));return{rightAnswer:y.reduce((function(e,r,n){var o=r.id;return t.has(o)&&e.push(String.fromCharCode(n+65)),e}),[]),isCorrect:(0,c.xv)(y,o).map((function(e){return-1!==e?y[e].id:null})).filter(Boolean).sort().toString()===Array.from(t).sort().toString()}},T=null!==(t=(r={},(0,l.Z)(r,i.c.CHECKBOX,E),(0,l.Z)(r,i.c.RADIO,E),(0,l.Z)(r,i.c.FILLIN,(function getFillinResult(){return S.length?{rightAnswer:S,isCorrect:!!S.find((function(e){var t,r,n=o,a=e;w||(n=null===(r=n)||void 0===r?void 0:r.toLowerCase(),a=a.toLowerCase());return I?null===(t=n)||void 0===t?void 0:t.includes(a):n===a}))}:null})),r)[m])&&void 0!==t?t:s.dG,N=null==T?void 0:T();if(!N)return null;var j=N.rightAnswer,D=N.isCorrect;return n.createElement(v,{answer:j,correct:D,explain:C,lang:a,score:P,showScore:f,style:{marginTop:16}})}));_.defaultProps={question:{},score:0},_.displayName="AnswerObjective";var O=(0,s.W5)((function(e){var t=e.explain,r=e.lang,o=e.score,a=e.showGainScore;return n.createElement(v,{correct:o>0,explain:t,lang:r,score:o,showScore:a,style:{marginTop:16}})}));O.defaultProps={score:0},O.displayName="AnswerSubjective";var S=r(6041),P=(r(59910),r(47585)),C=(0,s.W5)((function(e){var t=e.index,r=e.isRequired;return e.show?n.createElement("div",{className:"question-main-index"},n.createElement(P.Z,{value:"".concat(t+1).padStart(2,"0")}),r?n.createElement("span",{className:"required-span"},"*"):null):null}));C.displayName="QuestionIndex";var w=r(12874),I=(0,s.W5)((function(e){var t=e.ImageGallery,r=e.images,o=e.onImageLoad,a=e.onPreviewImage,i=e.onReport,s=e.subtitle,l=e.subtitleAutoLink;return n.createElement(n.Fragment,null,s?n.createElement("div",{className:"question-subtitle"},n.createElement(w.Z,{autoLink:l,content:s,maxLen:240})):null,null!=r&&r.length?n.createElement(t,{images:r,source:"question-subtitle",onImageLoad:o,onPreviewImage:a,onReport:i}):null)}));I.displayName="QuestionSubtitleNormal";var E=r(59169),T=r(97696),N=(0,s.W5)((function(e){var t=e.classNamePrefix,r=e.lang,o=e.question;return e.showScore?n.createElement(T.Z,{classNamePrefix:t,lang:r,question:o,showAnswerTag:!1}):null}));N.displayName="QuestionTaskTags";var j=r(89847),D=(0,s.W5)((function(e){var t,r,o=e.EditorReadonly,l=e.ImageGallery,c=e.SimpleScore,d=e.cancelTips,u=e.classNamePrefix,p=e.currentPaperResult,m=e.disabled,f=e.errorTip,h=e.formId,y=e.getFieldValue,b=e.index,g=e.isTask,v=e.isSettingDefaultAnswer,P=e.lang,w=e.markMode,T=e.onClearDefaultAnswerSetting,D=e.onSimpleScoreChange,k=e.onSimpleScoreError,x=e.onSubtitleImageLoaded,Z=e.onSubtitleImagePreview,L=e.onReport,R=e.paperResult,A=e.question,F=e.questionCore,M=e.readOnly,B=e.showAnswer,q=e.showGainScore,U=e.showPaperResult,G=e.showScore,K=e.simpleScorePlaceholder,V=e.subtitleAutoLink,Q=e.title,H=e.useRichEditor,Y=e.wxConfig,z=e.defaultAnswerQuestionTypes,$=e.hasDefaultAnswer,W=e.defaultAnswerNotSupportedTips,X=e.settingDefaultAnswerTips,J=e.inPreview,ee=e.isHideQuestionIndex,te=e.canPrivateCopyOut,re=e.corpId,ne=e.onCopyTitle,oe=(0,n.useMemo)((function(){var e=A.type;return!([i.c.SEGMENTATION,i.c.VOTE].includes(e)||ee)}),[A,ee]),ae=(0,n.useMemo)((function(){var e=A.subtitle,t=A.images;return!!(e||g||null!=t&&t.length)}),[A,g]),ie=(0,n.useMemo)((function(){var e,t=!(null===(e=A.toggle)||void 0===e||!e.required);return n.createElement(C,{index:b,isRequired:t,show:oe})}),[b,A,oe]),se=(0,n.useMemo)((function(){var e=A.type;return[i.c.VOTE].includes(e)?null:n.createElement(j.e,{classNamePrefix:u,lang:P,title:Q,type:e,onCopyTitle:ne})}),[u,P,Q,A]),le=(0,n.useMemo)((function(){var e=A.type;if([i.c.VOTE].includes(e))return null;var t=A.images,r=A.richSubtitle,a=A.subtitle;return H?n.createElement(E.e8,{EditorReadonly:o,canPrivateCopyOut:te,corpId:re,images:t,richSubtitle:r,subtitle:a,wxConfig:Y,onReport:L}):n.createElement(I,{ImageGallery:l,images:t,subtitle:a,subtitleAutoLink:V,onImageLoad:x,onPreviewImage:Z,onReport:L})}),[A,H,o,Y,L,l,V,x,Z]),ce=A.answerInfo||{},de=(0,n.useMemo)((function(){return g?n.createElement(N,{classNamePrefix:u,lang:P,question:A,showScore:G}):null}),[g,P,u,G,A]),ue=(0,n.useMemo)((function(){return ae?n.createElement("div",{className:"question-sub"},le,de):null}),[ae,le,de]),pe=g&&w&&A.type===i.c.SIMPLE,me=pe?null!==(t=null===(r=p[A.id])||void 0===r?void 0:r.score)&&void 0!==t?t:function getScore(){var e=R.find((function(e){return e.question_id===A.id}))||{};return 0===e.result?null:e.score}():void 0,fe=Array.from({}),he=(0,n.useCallback)((function(e){D(A,e)}),fe),ye=(0,n.useCallback)((function(e){var t=e.error;k({id:A.id,error:t})}),fe);return n.createElement("div",{"data-qid":"".concat(h,"-").concat(A.id),"data-type":A.type.toLowerCase(),className:a()("question",{"setting-default-answer":v})},n.createElement("div",{className:"question-main"},ie,n.createElement("div",{className:"question-main-content"},se,ue,n.createElement(S.k,{SimpleScore:c,errorTip:f,lang:P,markMode:pe,questionCore:F,readOnly:m||M,score:ce.score,simpleScorePlaceholder:K,simpleScoreValue:me,onSimpleScoreChange:he,onSimpleScoreError:ye}))),g&&B?function getAnswerDetailComponent(){if([i.c.CHECKBOX,i.c.RADIO,i.c.FILLIN].includes(A.type)){var e=y(A.id);return n.createElement(_,{answer:e,lang:P,question:A,showGainScore:q})}if(U&&A.type===i.c.SIMPLE){var t=R.find((function(e){return e.question_id===A.id}));return n.createElement(O,{explain:ce.explain,lang:P,score:null==t?void 0:t.score,showGainScore:q})}return null}():null,v?function getSettingDefaultAnswerComponent(){return v?J?z.includes(A.type)?null:n.createElement("div",{className:"setting-default-answer-content"},n.createElement("div",{className:"content"},n.createElement("div",{className:"setting-default-tips"},W))):z.includes(A.type)?v?n.createElement("div",{className:"setting-default-answer-content"},n.createElement("div",{className:"content"},n.createElement("div",{className:"setting-default-tips"},X),n.createElement("div",{role:"button",tabIndex:"-1",className:a()("clear",{disabled:!$}),onClick:function onClick(){return T(A,A.id)},onKeyDown:s.dG},d))):null:n.createElement("div",{className:"setting-default-answer-content"},n.createElement("div",{className:"content"},n.createElement("div",{className:"setting-default-tips"},W))):null}():null)}));D.displayName="Question"},5913:(e,t,r)=>{"use strict";r.d(t,{Z:()=>getFieldFeaturePC});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(31461),p=r(25773),m=r(27378),f=r(23615),h=r.n(f),y=function(e){(0,l.Z)(FileFillLoader,e);var t=(0,c.Z)(FileFillLoader);function FileFillLoader(e){var r;return(0,a.Z)(this,FileFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(FileFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"interactable",get:function get(){var e=this.props,t=e.disabled,r=e.readOnly;return!t&&!r}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.lang,o=e.maxCount,a=e.value,i=e.qdata,s=this.state,l=s.FileFill,c=s.AttachmentsComponent;if(l)return m.createElement(l,(0,p.Z)({AttachmentsComponent:c},this.props));var d=this.FileCore,u=this.interactable;return m.createElement(d,{className:t,classNamePrefix:r,disabled:!u,fileImages:a,lang:n,maxCount:o,qdata:i})}}]),FileFillLoader}(m.PureComponent);y.propTypes={className:h().string,classNamePrefix:h().string,disabled:h().bool,maxCount:h().number,qdata:h().shape({fileNum:h().shape({max:h().number,min:h().number}),fileSize:h().number,fileType:h().arrayOf(h().symbol)}),readOnly:h().bool,value:h().arrayOf(h().shape({key:h().string,name:h().string}))},y.defaultProps={className:"",classNamePrefix:"form-file",disabled:!1,maxCount:6,qdata:{},readOnly:!1,value:void 0},delete y.defaultProps.value;var b=function(e){(0,l.Z)(FileFillPCLoader,e);var t,p=(0,c.Z)(FileFillPCLoader);function FileFillPCLoader(){var e;(0,a.Z)(this,FileFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"FileCore",u.e),e}return(0,i.Z)(FileFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t,o,a,i;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e=this.props.getAttachmentsComponent,n.next=3,null==e?void 0:e();case 3:return(o=n.sent)&&(t=o.default),n.next=7,r.e("node_modules_tencent_form-ui-components_lib_components_file_file-fill_file-fill-pc_js").then(r.bind(r,3885));case 7:a=n.sent,i=a.default,this.setState({AttachmentsComponent:t,FileFill:i});case 10:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),FileFillPCLoader}(y),g=r(88021),v=function(e){(0,l.Z)(FileImageFillLoader,e);var t=(0,c.Z)(FileImageFillLoader);function FileImageFillLoader(e){var r;return(0,a.Z)(this,FileImageFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(FileImageFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"interactable",get:function get(){var e=this.props,t=e.disabled,r=e.readOnly;return!t&&!r}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.lang,o=e.maxCount,a=e.qdata,i=e.value,s=this.state,l=s.FileImageFill,c=s.AttachmentsComponent;if(l)return m.createElement(l,(0,p.Z)({AttachmentsComponent:c},this.props));var d=null!=i&&i.length?(0,g.GG)(i,!0):[],u=this.interactable,f=this.FileImageCore;return m.createElement(f,{className:t,classNamePrefix:r,disabled:!u,fileImages:d,lang:n,maxCount:o,qdata:a})}}]),FileImageFillLoader}(m.PureComponent);v.propTypes={className:h().string,classNamePrefix:h().string,disabled:h().bool,maxCount:h().number,qdata:h().shape({fileNum:h().shape({max:h().number,min:h().number}),fileSize:h().number,onlyCamera:h().bool,watermark:h().bool}),readOnly:h().bool,value:h().arrayOf(h().shape({src:h().string}))},v.defaultProps={className:"",classNamePrefix:"form-file-image",disabled:!1,maxCount:6,qdata:{},readOnly:!1,value:void 0},delete v.defaultProps.value;const _=v;var O=r(30790),S=r(31859),P=function(e){(0,l.Z)(FileImageFillPCLoader,e);var t,u=(0,c.Z)(FileImageFillPCLoader);function FileImageFillPCLoader(){var e;(0,a.Z)(this,FileImageFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=u.call.apply(u,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"FileImageDefault",O.Z),(0,d.Z)((0,s.Z)(e),"FileImageCore",S.Z),e}return(0,i.Z)(FileImageFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t,o,a,i;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e=this.props.getAttachmentsComponent,n.next=3,null==e?void 0:e();case 3:return(o=n.sent)&&(t=o.default),n.next=7,Promise.all([r.e("vendors-node_modules_tencent_dui_lib_components_Preview_index_js"),r.e("node_modules_tencent_form-ui-components_lib_components_file-image_file-image-fill_file-image--273f8e")]).then(r.bind(r,89613));case 7:a=n.sent,i=a.default,this.setState({AttachmentsComponent:t,FileImageFill:i});case 10:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),FileImageFillPCLoader}(_),C=(r(66066),r(72173)),w=r(82545),I=r(51410),E=r(5212),T=function(e){(0,l.Z)(LocationFillLoader,e);var t=(0,c.Z)(LocationFillLoader);function LocationFillLoader(e){var r;return(0,a.Z)(this,LocationFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(LocationFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.type,a=e.value,i=e.placeholder,s=this.state.LocationFill;if(s)return m.createElement(s,this.props);var l=(0,E.H)(a instanceof Object?a.value:a),c=l.value,d=l.detail,u=w.Z.readOnlyPlaceholderGPS,p=w.Z.readOnlyPlaceholderNormal,f=w.Z.LOCATION_TEXT,h=o===I.v.GPS?u:p,y=!(o!==I.v.DETAIL||n&&!d);return m.createElement(C.PP,{className:t,classNamePrefix:r,placeholder:i||f[o],readOnly:n,readOnlyPlaceholder:h,selectable:![I.v.GPS,I.v.POSITION].includes(o),showDetailInput:y,value:c})}}]),LocationFillLoader}(m.PureComponent);T.propTypes={className:h().string,classNamePrefix:h().string,disabled:h().bool,placeholder:h().string,type:h().string,value:h().string},T.defaultProps={className:"",classNamePrefix:"form-location",disabled:!1,placeholder:"",type:"DISTRICT",value:void 0},delete T.defaultProps.value;var N=function(e){(0,l.Z)(LocationFillPCLoader,e);var t,s=(0,c.Z)(LocationFillPCLoader);function LocationFillPCLoader(){return(0,a.Z)(this,LocationFillPCLoader),s.apply(this,arguments)}return(0,i.Z)(LocationFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([r.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),r.e("vendors-node_modules_tencent_dui-mobile_lib_components_Modal_index_js"),r.e("vendors-node_modules_tencent_form-ui-components_lib_components_cascader_cascader-pc_js"),r.e("vendors-node_modules_tencent_form-ui-components_lib_components_cascader_style_cascader_pc_les-23a11a"),r.e("node_modules_tencent_form-ui-components_lib_components_location_location-fill_location-fill-pc_js")]).then(r.bind(r,64912));case 2:e=n.sent,t=e.default,this.setState({LocationFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),LocationFillPCLoader}(T),j=r(90005),D=r.n(j),k=r(36080),x=r(3632),Z=r(47572),L=function(e){(0,l.Z)(PictureFillLoader,e);var t=(0,c.Z)(PictureFillLoader);function PictureFillLoader(e){var r;return(0,a.Z)(this,PictureFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(PictureFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"interactable",get:function get(){var e=this.props,t=e.disabled,r=e.readOnly;return!t&&!r}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.placeholder,a=e.value,i=this.state.PictureFill;if(i)return m.createElement(i,this.props);var s=null!=a&&a.length?(0,Z.W)(a):[];if(n&&!s.length)return m.createElement(k.H,{className:D()(r,t,"disabled no-margin-bottom"),text:o});var l=this.interactable;return m.createElement(x.rk,{className:D()(t,{readonly:!l}),classNamePrefix:r,showAddBtn:l,showDeleteBtn:l,value:s})}}]),PictureFillLoader}(m.PureComponent);L.propTypes={className:h().string,classNamePrefix:h().string,disabled:h().bool,placeholder:h().string,readOnly:h().bool,value:h().arrayOf(h().shape({src:h().string}))},L.defaultProps={className:"",classNamePrefix:"form-picture",disabled:!1,placeholder:"未上传",readOnly:!1,value:void 0},delete L.defaultProps.value;var R=function(e){(0,l.Z)(PictureFillPCLoader,e);var t,s=(0,c.Z)(PictureFillPCLoader);function PictureFillPCLoader(){return(0,a.Z)(this,PictureFillPCLoader),s.apply(this,arguments)}return(0,i.Z)(PictureFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([r.e("vendors-node_modules_tencent_dui_lib_components_Preview_index_js"),r.e("node_modules_tencent_form-ui-components_lib_components_picture_picture-fill_picture-fill-pc_js")]).then(r.bind(r,75858));case 2:e=n.sent,t=e.default,this.setState({PictureFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),PictureFillPCLoader}(L),A=r(71565),F=function(e){(0,l.Z)(SignFillLoader,e);var t=(0,c.Z)(SignFillLoader);function SignFillLoader(e){var r;return(0,a.Z)(this,SignFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(SignFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"picUrl",get:function get(){var e=this.props.value;return(null==e?void 0:e.url)||e}},{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,n=this.state,o=n.SignFill,a=n.AttachmentsComponent;if(o)return m.createElement(o,(0,p.Z)({AttachmentsComponent:a},this.props));var i=this.SignCore;return m.createElement(i,{className:r,classNamePrefix:t})}}]),SignFillLoader}(m.PureComponent);F.propTypes={className:h().string,classNamePrefix:h().string,disabled:h().bool,readOnly:h().bool,value:h().oneOfType([h().string,h().shape({url:h().string})])},F.defaultProps={className:"",classNamePrefix:"form-sign",disabled:!1,readOnly:!1,value:void 0},delete F.defaultProps.value;var M=function(e){(0,l.Z)(SignFillPCLoader,e);var t,u=(0,c.Z)(SignFillPCLoader);function SignFillPCLoader(){var e;(0,a.Z)(this,SignFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=u.call.apply(u,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"SignCore",A.G),e}return(0,i.Z)(SignFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t,o,a,i;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=this.props.getAttachmentsComponent)){n.next=6;break}return n.next=4,null==t?void 0:t();case 4:(o=n.sent)&&(e=o.default);case 6:return n.next=8,Promise.all([r.e("vendors-node_modules_tencent_dui_lib_components_Preview_index_js"),r.e("vendors-node_modules_tencent_form-ui-components_lib_utils_image-uploader_js"),r.e("node_modules_tencent_form-ui-components_lib_components_sign_sign-fill_sign-fill-pc_js")]).then(r.bind(r,90044));case 8:a=n.sent,i=a.default,this.setState({AttachmentsComponent:e,SignFill:i});case 11:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),SignFillPCLoader}(F),B=r(66112);var q=function(e){(0,l.Z)(TableFillPCLoader,e);var t,s=(0,c.Z)(TableFillPCLoader);function TableFillPCLoader(){return(0,a.Z)(this,TableFillPCLoader),s.apply(this,arguments)}return(0,i.Z)(TableFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_table_table-fill_table-fill-pc_js").then(r.bind(r,36942));case 2:e=n.sent,t=e.default,this.setState({TableFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),TableFillPCLoader}(function(e){(0,l.Z)(TableFillLoader,e);var t=(0,c.Z)(TableFillLoader);function TableFillLoader(e){var r;return(0,a.Z)(this,TableFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(TableFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.state.TableFill;return e?m.createElement(e,this.props):m.createElement(B.Zl,this.props)}}]),TableFillLoader}(m.PureComponent)),U=r(79942),G=r(63795),K=function(e){(0,l.Z)(TemperatureFillLoader,e);var t,s=(0,c.Z)(TemperatureFillLoader);function TemperatureFillLoader(e){var t;return(0,a.Z)(this,TemperatureFillLoader),(t=s.call(this,e)).state={},t.value=(0,G.Bw)(e.value,e.type),t}return(0,i.Z)(TemperatureFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"text",get:function get(){var e=this.props,t=e.disabled,r=e.placeholder,n=this.value;return n||(t?"未填写":r)}},{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_temperature_temperature-fill_index_js").then(r.bind(r,16508));case 2:e=n.sent,t=e.default,this.setState({TemperatureFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.type,a=this.state.TemperatureFill;if(a)return m.createElement(a,this.props);var i=this.value,s=this.text,l=m.createElement("div",{className:"".concat(r,"-unit type-").concat(o.toLowerCase())});return m.createElement(k.H,{className:D()(t,r),disabled:n,suffixNode:l,text:s,textDisabled:!i})}}]),TemperatureFillLoader}(m.PureComponent);K.propTypes={className:h().string,classNamePrefix:h().string,disabled:h().bool,placeholder:h().string,type:h().oneOf([U.b.CELSIUS,U.b.FAHRENHEIT]),value:h().string},K.defaultProps={className:"",classNamePrefix:"form-temperature",disabled:!1,placeholder:"请输入",type:U.b.CELSIUS,value:void 0},delete K.defaultProps.value;const V=K;var Q=r(2537),H=r(55803),Y=r(38917),z=r(10899),$=r(1973),W=r(44376),X=r(69790),J=r(94865),ee=r(52489),te=r(16613),re=r(54174),ne=r(54951),oe=r(8605),ae=r(11026),ie=(r(63115),r(12249),r(57637),r(39690),r(74413),r(92243),r(56583)),se=r(26338),le=r(14042),ce=r(95240),de=r(12536);function getFieldByType(e,t){var r,n=e.componentProps,o=void 0===n?{}:n,a=e.disabled,i=e.formData,s=e.getPopupContainer,l=e.lang,c=e.locale,u=e.onBlur,p=e.onChange,f=e.onFocus,h=e.onReport,y=e.placeholder,b=e.question,g=e.readOnly,v=e.wxConfig,_=t.Cascader,O=t.Choice,S=t.Commodity,P=t.Date,C=t.File,w=t.FileImage,I=t.Location,E=t.Matrix,T=t.Picture,N=t.Rating,j=t.Scale,D=t.Scan,k=t.Select,x=t.Sign,Z=t.Simple,L=t.Sort,R=t.Table,A=t.Temperature,F=t.Time,M=t.Vote,B={disabled:a,fillable:!0,formData:i,getPopupContainer:s,lang:l,locale:c,onBlur:u,onChange:p,onFocus:f,onReport:h,placeholder:y,question:b,readOnly:g,wxConfig:v},q=(r={},(0,d.Z)(r,le.c.CANVAS,x),(0,d.Z)(r,le.c.CANVAS_IMAGE,x),(0,d.Z)(r,le.c.CASCADER,_),(0,d.Z)(r,le.c.COMMODITY,S),(0,d.Z)(r,le.c.CHECKBOX,O),(0,d.Z)(r,le.c.DATE,P),(0,d.Z)(r,le.c.FILE,C),(0,d.Z)(r,le.c.FILEIMAGE,w),(0,d.Z)(r,le.c.FILLIN,Z),(0,d.Z)(r,le.c.IMAGE,T),(0,d.Z)(r,le.c.LOCATION,I),(0,d.Z)(r,le.c.MATRIX_CHECKBOX,E),(0,d.Z)(r,le.c.MATRIX_RADIO,E),(0,d.Z)(r,le.c.MATRIX_RATING,E),(0,d.Z)(r,le.c.RADIO,O),(0,d.Z)(r,le.c.RATING,N),(0,d.Z)(r,le.c.RECOGNITION,T),(0,d.Z)(r,le.c.SCALE,j),(0,d.Z)(r,le.c.SCAN,D),(0,d.Z)(r,le.c.SEGMENTATION,(function(){return null})),(0,d.Z)(r,le.c.SELECT,k),(0,d.Z)(r,le.c.SIMPLE,Z),(0,d.Z)(r,le.c.SORT,L),(0,d.Z)(r,le.c.TABLE,R),(0,d.Z)(r,le.c.TIME,F),(0,d.Z)(r,le.c.TEMPERATURE,A),(0,d.Z)(r,le.c.VOTE,M),r)[b.type]||Z;return m.createElement(q,(0,de.ZP)(B,o))}function getNormalize(e){var t=e.question,r=void 0===t?{}:t,n={};return function(e){var t;switch(r.type){case le.c.TEMPERATURE:return/^\d+(\.\d*)?$/.test(e)?e:(0,G.Bw)(e,null===(t=r.qdata.unit)||void 0===t?void 0:t.toUpperCase());case le.c.IMAGE:return n[r.id]||(n[r.id]=(0,ie.Z)((function(e){return e.map((function(e){return"string"==typeof e?{src:e}:e}))}),se.default)),n[r.id](e);default:return e}}}const ue=function getFieldFeature(){var e={};return function(t,r){var n=t.question,o=t.privateFormId,a=n.id,i="".concat(o,"_").concat(a);return e[i]||(e[i]=function getMemoizeOne(){return(0,ie.Z)((function(e,t){return{field:getFieldByType(e,t),defaultValue:(a=e,i=a.question,s=void 0===i?{}:i,ce.rn.has(s.type)?s.defaultValues&&JSON.parse(s.defaultValues)||[]:s.type===le.c.TABLE?[[],[]]:s.defaultValues?JSON.parse(s.defaultValues):""),getValueProps:(r=e,n=r.question,o=getNormalize({question:void 0===n?{}:n}),function(e){return{value:o(e)}}),normalize:getNormalize(e)};var r,n,o,a,i,s}),(function(e,t){var r=(0,ae.Z)(e,1)[0],n=(0,ae.Z)(t,1)[0];return function compareOption(){var e=Object.keys(r),t=Object.keys(n);if(e.length!==t.length)return!1;var o=["question","onFocus","onBlur","onChange"];return e.every((function(e){return o.includes(e)||r[e]===n[e]}))}()}))}()),e[i](t,r)}}();function getFieldFeaturePC(e){return ue(e,{Cascader:Q.Z,Choice:H.Z,Commodity:Y.Z,Date:z.Z,File:b,FileImage:P,Location:N,Matrix:$.Z,Picture:R,Rating:W.Z,Scale:X.Z,Scan:J.Z,Select:ee.Z,Sign:M,Simple:te.Z,Sort:re.Z,Table:q,Temperature:V,Time:ne.Z,Vote:oe.Z})}},33108:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ct});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(40682),p=r(78076),m=r(50189),f=r(73428),h=r(27378),y=r(23615),b=r.n(y),g=r(90005),v=r.n(g),_=r(21886),O=r(66040);var S,P,C=r(28790),w=r(40500),I=(0,_.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_simple-score_locale_en_US_js").then(r.bind(r,72441))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_simple-score_locale_zh_TW_js").then(r.bind(r,98625))},locale:{maxErrMsg:"请输入小于或等于总分值的数字",point:"分"}})((P=function(e){(0,l.Z)(SimpleScore,e);var t=(0,c.Z)(SimpleScore);function SimpleScore(e){var r;return(0,a.Z)(this,SimpleScore),(r=t.call(this,e)).state={error:!1},r.mainRef=h.createRef(),r.isFocus=!1,r}return(0,i.Z)(SimpleScore,[{key:"handleBlur",value:function handleBlur(e){var t=this.props,r=t.onBlur,n=t.value,o=t.onError;e.target.value!==n?this.handleScoreChange(e):this.getErrorMessage(e.target.value)||o({error:null});this.isFocus=!1,r(e)}},{key:"handleFocus",value:function handleFocus(e){var t=this.props.onFocus;this.isFocus=!0,t(e)}},{key:"handleScoreChange",value:function handleScoreChange(e){var t=e.target.value,r=this.props,n=r.onError,o=r.value,a=r.onChange,i=this.getErrorMessage(t);o!==t&&a(t),this.setState({error:!!i}),n({error:i})}},{key:"getErrorMessage",value:function getErrorMessage(e){var t=this.props.max,r=this.state.locale.maxErrMsg;return parseFloat(e)>t?r:null}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.placeholder,o=e.value,a=e.style,i=this.state,s=i.error,l=i.locale.point;return h.createElement("div",{ref:this.mainRef,className:v()(t,r),style:a},h.createElement(C.default,{className:v()("".concat(r,"-input"),{error:s}),inputType:this.inputType,min:0,placeholder:n,precision:1,showStep:this.showStep,step:1,value:"number"==typeof o?o.toString():o,onBlur:this.handleBlur,onChange:this.handleScoreChange,onFocus:this.handleFocus}),h.createElement("div",{className:"".concat(r,"-text")},l))}}]),SimpleScore}(h.PureComponent),(0,f.Z)(P.prototype,"handleBlur",[O.xB],Object.getOwnPropertyDescriptor(P.prototype,"handleBlur"),P.prototype),(0,f.Z)(P.prototype,"handleFocus",[O.xB],Object.getOwnPropertyDescriptor(P.prototype,"handleFocus"),P.prototype),(0,f.Z)(P.prototype,"handleScoreChange",[O.xB],Object.getOwnPropertyDescriptor(P.prototype,"handleScoreChange"),P.prototype),S=P))||S;I.propTypes={className:b().string,classNamePrefix:b().string,max:b().number,placeholder:b().string,style:b().oneOfType([b().object]),value:b().oneOfType([b().string,b().number]),onBlur:b().func,onChange:b().func,onError:b().func,onFocus:b().func},I.defaultProps=(0,m.Z)((0,m.Z)({},I.defaultProps),{},{className:"",classNamePrefix:"form-simple-score",max:1/0,onBlur:w.dG,onChange:w.dG,onError:w.dG,onFocus:w.dG,placeholder:"请输入分数",style:{},value:""});var E,T,N=function(e){(0,l.Z)(SimpleScorePC,e);var t=(0,c.Z)(SimpleScorePC);function SimpleScorePC(){var e;(0,a.Z)(this,SimpleScorePC);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,d.Z)((0,s.Z)(e),"inputType","text"),(0,d.Z)((0,s.Z)(e),"showStep",!0),e}return(0,i.Z)(SimpleScorePC)}(I),j=r(40109),D=r(22843),k=r(84850),x=r(5913),Z=r(53782),L=r(649),R=r(11026),A=(r(53124),r(74413),r(62285),r(12249),r(57637),r(32679),r(67551),r(66066),r(63115),r(13227),r(54370),r(5153),r(67506),r(80566),r(50870),r(75397),r(18829),r(95498),r(51429),r(61842),r(25376),r(38333),r(95864),r(63990),r(94565),r(95073),r(65204),r(47072),r(98391),r(24338),r(22727),r(2002),r(19647),r(11431),r(91270),r(8532),r(20779),r(47134),r(84050),r(63517),r(35659),r(71165),r(69108),r(19717),r(98704),r(13951),r(45436),r(91117),r(41698),r(55294),r(9077),r(76999),r(91067),r(2126),r(18924),r(67699),r(18007),r(71675),r(99830),r(62659),r(56583)),F=r(25737),M=r.n(F),B=r(86727),q=r(41589),U=r(14042),G=r(20635),K=r(95240),V=r(45099),Q=r(84863),H=r(20839);const Y=(0,m.Z)((0,m.Z)({},H.mL),{},{bipolarWritingList:H.iy,cancelTips:"清除答案",defaultTitle:"未命名的问题",emptySubmitSnackbar:"填写内容不能为空",notGraded:"第{{NUMBER}}题未进行批改",placeholder:(0,m.Z)({},H.eZ),rememberPersonalInfo:"记住个人信息",simpleScorePlaceholder:"请输入分数",submitConfirmContent:"提交后不可再修改，请确认后提交。",submitConfirmTitle:"确认提交收集表么？",submitPaperResult:"提交批卷结果",anonymousTip:"- 发布者设置了“匿名填写”，你的个人信息将不被记录 -",defaultAnswerNotSupportedTips:"该题型不支持设置默认答案",settingDefaultAnswerTips:"请设置默认答案",validateAdaptor:{regRuleMessageType:(E={},(0,d.Z)(E,Q.S.ID_CARD,"请输入正确的身份证号"),(0,d.Z)(E,Q.S.MOBILE_NUMBER,"请输入正确的手机号"),(0,d.Z)(E,Q.S.TEL_NUMBER,"请输入正确的固定电话"),(0,d.Z)(E,Q.S.URL,"请输入正确的网址"),(0,d.Z)(E,Q.S.EMAIL,"请输入正确的电子邮箱"),(0,d.Z)(E,Q.S.WECHAT,"请输入正确的微信号"),(0,d.Z)(E,Q.S.QQ,"请输入正确的QQ号"),(0,d.Z)(E,Q.S.NUMBER,"请输入数字"),(0,d.Z)(E,Q.S.WECHAT_ID,"请输入正确的微信号"),(0,d.Z)(E,Q.S.PASSPORT,"请输入正确的护照号"),(0,d.Z)(E,Q.S.DECIMAL,"请输入小数"),(0,d.Z)(E,Q.S.HOUR_MINUTE,"请输入正确的时间"),(0,d.Z)(E,Q.S.DURATION,"请输入正确的时间"),(0,d.Z)(E,Q.S.DATE,"请输入正确的日期"),(0,d.Z)(E,Q.S.MONTH,"请输入正确的日期"),(0,d.Z)(E,Q.S.DATETIME,"请输入正确的时间"),(0,d.Z)(E,Q.S.COMPONENT_TEMPERATRUE,"请输入0-200，最多一位小数的数字"),E),regRuleType:(T={},(0,d.Z)(T,Q.S.ID_CARD,"身份证号"),(0,d.Z)(T,Q.S.MOBILE_NUMBER,"手机号"),(0,d.Z)(T,Q.S.TEL_NUMBER,"固定电话"),(0,d.Z)(T,Q.S.URL,"网址"),(0,d.Z)(T,Q.S.EMAIL,"电子邮箱"),(0,d.Z)(T,Q.S.WECHAT,"微信号"),(0,d.Z)(T,Q.S.QQ,"QQ号"),(0,d.Z)(T,Q.S.NUMBER,"数字"),(0,d.Z)(T,Q.S.WECHAT_ID,"微信号"),(0,d.Z)(T,Q.S.PASSPORT,"护照号"),(0,d.Z)(T,Q.S.DECIMAL,"小数"),(0,d.Z)(T,Q.S.HOUR_MINUTE,"时间"),(0,d.Z)(T,Q.S.DURATION,"时间"),(0,d.Z)(T,Q.S.DATE,"日期"),(0,d.Z)(T,Q.S.MONTH,"日期"),(0,d.Z)(T,Q.S.DATETIME,"时间"),(0,d.Z)(T,Q.S.COMPONENT_TEMPERATRUE,"温度"),(0,d.Z)(T,"number","数字"),(0,d.Z)(T,"integer","整数"),(0,d.Z)(T,"float","小数"),T),bankCardMessage:"请输入正确的银行卡号",numberMessage:"请输入数字",defaultMessage:"输入内容不正确",decimalMessage:"请输入小数",decimalLenMessage:"请输入最多$0位小数",integerMessage:"请输入整数",requiredMessage:"该问题为必填",fileEqMessage:"请上传%s个文件",fileGteMessage:"请至少上传%s个文件",fileLteMessage:"请上传最多%s个文件",imageEqMessage:"请上传%s张图片",imageGteMessage:"请至少上传%s张图片",imageLteMessage:"请上传最多%s张图片",optionEqMessage:"只能选择%s个选项",optionGteMessage:"最少选择%s个选项",optionLteMessage:"最多选择%s个选项",lengthEqMessage:"输入内容需等于%s个字符",lengthGteMessage:"输入内容需不少于%s个字符",lengthLteMessage:"输入内容需不超过%s个字符",numGtMessage:"请输入大于$0的数字",numGteMessage:"请输入大于等于$0的数字",numLtMessage:"请输入小于$0的数字",numLteMessage:"请输入小于等于$0的数字",numInRangeMessage:"请输入$0和$1之间的数字",numOutofRangeMessage:"请输入小于$0或大于$1的数字",numNeqMessage:"请输入除$0以外的数字",tableSubQuestionValidMessage:"请完成表格中子题目的填写。",space:"空格",wrap:"换行",letter:"字母",bankType:"银行卡号",secondRegRuleTip:"，{{type}}中不能包含：",sortRequiredMessage:"该问题为必填题，请完成排序后再提交。"},completeDefaultAnswer:"完成"});var z=r(64633),$=r(61820),W=r(61982),X=r(60485),J=r(6041),ee=r(89847),te=(0,X.W5)((function(e){var t,r=e.classNamePrefix,n=e.disabled,o=e.errorTip,a=e.formId,i=e.lang,s=e.question,l=e.questionCore,c=e.readOnly,d=e.title;return h.createElement("div",{className:"question","data-qid":"".concat(a,"-").concat(s.id),"data-type":s.type.toLowerCase()},h.createElement("div",{className:"question-main"},h.createElement("div",{className:"question-main-index"},h.createElement("span",{className:"icon-pic",style:{backgroundImage:"url(".concat(s.icon,")")}}),null!==(t=s.toggle)&&void 0!==t&&t.required?h.createElement("span",{className:"required-span"},"*"):null),h.createElement("div",{className:"question-main-content"},h.createElement(ee.e,{classNamePrefix:r,lang:i,title:d,type:s.type}),h.createElement(J.k,{errorTip:o,lang:i,questionCore:l,readOnly:n||c}))))}));te.displayName="FixedQuestion";var re,ne,oe=r(13235),ae=(r(57270),r(71669),r(65486),r(49892),r(48121)),ie=r(1671),se=r(95608),le=r(36086),ce=r(72481),de="OTHER_OPTION",ue="MATRIX_REQUIRED",pe="number",me="float",fe="integer",he=[Q.S.ID_CARD],ye=[Q.S.URL,Q.S.EMAIL,Q.S.WECHAT,Q.S.WECHAT_ID,Q.S.PASSPORT,pe,me,fe],be=[Q.S.MOBILE_NUMBER,Q.S.TEL_NUMBER,Q.S.QQ,Q.S.NUMBER,Q.S.DECIMAL,Q.S.HOUR_MINUTE,Q.S.DURATION,Q.S.DATE,Q.S.MONTH,Q.S.DATETIME,Q.S.COMPONENT_TEMPERATRUE],ge=function errAnimationend(e){var t=e.target;t.classList.remove("table-question-error-cell"),t.removeEventListener("animationend",errAnimationend)},ve=function addErrTableCellClsAndScroll(e,t,r){var n=!1,o=document.querySelector("[data-qid=".concat(e,"-").concat(t,"]")).querySelector("tbody");r.forEach((function(e,t){var r=o.querySelectorAll("tr")[t];e.forEach((function(e){var t=r.querySelectorAll("td")[e];t.classList.add("table-question-error-cell"),n||(t.scrollIntoView(),n=!0)}))}))},_e=function covertNumber(e){return/^-?(\d+\.)?\d+$/.test(e)?Number(e):Number.NaN},Oe=function getMinMax(e){var t=e.min,r=e.max,n=e.open,o=Number(t),a=Number(r);return n?{min:Number.isNaN(o)?void 0:o+1e-15,max:Number.isNaN(a)?void 0:a-1e-15}:{min:Number.isNaN(o)?void 0:o,max:Number.isNaN(a)?void 0:a}},Se=function checkBySpace(e){return e.includes(" ")},Pe=function checkByBreak(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").includes("\n")},Ce=function checkByTab(e){return e.includes("\t")},we=function getSectionCheckBySpaceBreakTAb(e,t){var r=t.space,n=t.wrap;return[{condition:Se,tip:r},{condition:Pe,tip:n},{condition:Ce,tip:"tab"}].reduce((function(t,r){return r.condition(e)&&t.push(r.tip),t}),[]).join("、")},Ie=function getSectionCheckBySpaceLetterBreakTAb(e,t){var r=t.letter,n=we(e,t),o=n.length?n.split("、"):[];return function checkByLetter(e){return/[a-zA-Z]/.test(e)}(e)&&o.unshift(r),o.slice(0,3).join("、"),o},Ee=function getSecondCheckTips(e,t,r){return he.includes(e)?function getSectionCheckBySpace(e,t){var r=t.space;return Se(e)?r:""}(t,r):ye.includes(e)?we(t,r):be.includes(e)?Ie(t,r):""},Te=function getRegRuleMessage(e,t,r){var n=r.regRuleType,o=r.regRuleMessageType,a=r.secondRegRuleTip,i=r.decimalMessage,s=r.integerMessage,l=r.numberMessage,c=r.defaultMessage,d={float:i,integer:s,number:l}[e]||c,u=o[e]||d,p=Ee(e,t,r);if(!p.length)return u;var m=a.replace("{{type}}",n[e]);return"".concat(u).concat(m).concat(p)},Ne=function getValidateTrigger(e,t){var r=t.rules;return t.type===V.g.REQUIRED?null:[U.c.SIMPLE,U.c.TEMPERATURE].includes(e)?["onBlur"]:e===U.c.CHECKBOX&&(null==r?void 0:r.max)>0?["onChange"]:null},je=function tableQuestionValueTransform(e,t){var r=new Set(t.qdata.tableQuestionData.sections[0].qlist);return e.map((function(e){return e.filter((function(e){return r.has(e.id)&&!(0,q.tr)(e)}))}))},De=(re={},(0,d.Z)(re,de,1),(0,d.Z)(re,V.g.REQUIRED,2),(0,d.Z)(re,ue,3),(0,d.Z)(re,V.g.INNER_PATTERN,4),(0,d.Z)(re,V.g.BANK_CARD,5),(0,d.Z)(re,V.g.PATTERN,6),(0,d.Z)(re,V.g.NOT_BETWEEN,7),(0,d.Z)(re,V.g.DECIMAL_PRECISION,8),(0,d.Z)(re,V.g.LENGTH,9),(0,d.Z)(re,V.g.RANGE,10),(0,d.Z)(re,V.g.INTEGER,11),(0,d.Z)(re,V.g.VALUE_TYPE,12),re),ke=(ne={},(0,d.Z)(ne,de,(function(){return{validator(e,t,r){var n=null==t?void 0:t.find((function(e){return e.id===ie.H}));n&&!n.title?r(new Error):r()}}})),(0,d.Z)(ne,V.g.REQUIRED,(function(e,t,r){return r.type===U.c.TABLE?{transform(e){return je(e,r)},validator(e,t,r){r(t.some((function(e){return e.length}))?void 0:new Error)}}:r.type===U.c.SORT?{validator(e,t,n){var o=r.qdata.options;(null==t?void 0:t.length)<o.length?n(new Error):n()}}:{required:!0}})),(0,d.Z)(ne,ue,(function(e,t,r,n){return{validator(e,t,o){var a=r.qdata.subtitles,i=r.validate;if(i.length){var s=0,l=a.map((function(e){var r=t.find((function(t){return t.subID===e.id}));if(r){var n;if(null!==(n=r.optionIDs)&&void 0!==n&&n.length)return null;s+=1}return e.id})).filter(Boolean);!function addErrMatrixCellClsAndScroll(e,t,r){var n=!1,o=document.querySelector("[data-qid=".concat(e,"-").concat(t,"]"));r.forEach((function(e){var t=o.querySelector("[data-id=".concat(e,"]"));t.classList.add("table-question-error-cell"),n||(t.scrollIntoView(),n=!0),t.addEventListener("animationend",ge)}))}(n,r.id,l),l.length&&(!i.length||l.length!==a.length||s)?o(new Error):o()}else o()}}})),(0,d.Z)(ne,V.g.VALUE_TYPE,(function(e){var t=e.type;return{type:{float:"float",number:"number",integer:"integer"}[t],transform(e){return["float","integer","number"].includes(t)?"number"==typeof e?e:null!=e&&e.length?_e(e):null:"".concat(e)}}})),(0,d.Z)(ne,V.g.RANGE,(function(e){var t=e.max,r=e.min,n=e.open;return(0,m.Z)((0,m.Z)({type:"number"},Oe({max:t,min:r,open:n})),{},{transform(e){return null!=e&&e.length?_e(e):null}})})),(0,d.Z)(ne,V.g.NOT_BETWEEN,(function(e){var t=e.max,r=e.min,n=e.open;return{validator(e,o,a){var i=e.required,s=e.field;if(!function isNullLike(e){return null==e||""===e||Array.isArray(e)&&0===e.length}(o)||i){var l=Number(o);Number.isNaN(l)?a(new TypeError("".concat(s," is not a number"))):l<t&&l>r?a(new Error):n||![r,t].includes(l)?a():a(new Error)}else a()}}})),(0,d.Z)(ne,V.g.INTEGER,(function(){return{type:"integer",transform(e){return"number"==typeof e?e:null!=e&&e.length?_e(e):null}}})),(0,d.Z)(ne,V.g.PATTERN,(function(e,t){var r=e.pattern;if("string"==typeof r)try{return{pattern:new RegExp(r)}}catch(n){}return{pattern:se.ol[t]||/(?:)/}})),(0,d.Z)(ne,V.g.LENGTH,(function(e){var t=e.max,r=e.min,n=e.open;return(0,m.Z)((0,m.Z)({},Oe({max:t,min:r,open:n})),{},{transform(e){return Array.isArray(e)?"_".repeat(e.length):e}})})),(0,d.Z)(ne,V.g.INNER_PATTERN,(function(e,t){return{pattern:se.ol[t]||/(?:)/}})),(0,d.Z)(ne,V.g.BANK_CARD,(function(){return{validator(e,t,r){r(!t||(0,le.D)(t)?void 0:new Error)}}})),(0,d.Z)(ne,V.g.DECIMAL_PRECISION,(function(e){var t=e.max;return{pattern:new RegExp("^-?\\d+(\\.\\d{1,".concat(t,"})?$"))}})),(0,d.Z)(ne,V.g.SUBQUESTION_VALID,(function(e,t,r,a){return{transform(e){return je(e,r)},validator(e,t,i){return(0,o.Z)((0,n.Z)().mark((function _callee(){var e,o,s,l,c,u,p;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(e=r.qdata.tableQuestionData,o=e.questions.filter((function(t){var r=t.id;return e.sections[0].qlist.includes(r)})),s=new Map(e.sections[0].qlist.map((function(e,t){return[e,t]}))),l=o.reduce((function(e,t){return(0,m.Z)((0,m.Z)({},e),{},(0,d.Z)({},t.id,t.validate.concat([U.c.CHECKBOX,U.c.RADIO].includes(t.type)?{type:de}:Array.from({}),U.c.SIMPLE===t.type?{type:V.g.LENGTH,rules:{max:ce.SIMPLE_FILL_MAX_LEN}}:Array.from({}),K.Fk.has(t.type)?{type:ue}:Array.from({})).sort((function(e,t){return De[e.type]-De[t.type]})).map((function(e){return ke[e.type](e.rules,e.ruletype,t,a)}))))}),{}),c=t.map((function(e){return e.reduce((function(e,t){return(0,m.Z)((0,m.Z)({},e),{},(0,d.Z)({},t.id,t.content))}),{})})),u=new ae.Z(l),p=[],c.forEach((function(e,r){return u.validate(e,(function(e){t[r].some((function(e){return!(0,q.tr)(e)}))?p.push((e||[]).map((function(e){return s.get(e.field)}))):p.push([])}))})),!p.some((function(e){return e.length}))){n.next=13;break}return ve(a,r.id,p),i(new Error),n.abrupt("return");case 13:i();case 14:case"end":return n.stop()}}),_callee)})))()}}})),ne);function validateAdaptor(e){var t=e.validateField,r=e.question,n=e.locale,o=e.formId,a=e.value,i=r.type,s=Array.isArray(t)?t:Array.from({});s=i===U.c.SEGMENTATION?Array.from({}):s;var l=ce.SIMPLE_FILL_MAX_LEN,c=[U.c.CHECKBOX,U.c.RADIO,U.c.SELECT].includes(i),u=[U.c.CHECKBOX,U.c.RADIO].includes(i),p=i===U.c.SIMPLE&&!s.some((function(e){var t=e.type,r=e.rules;return t===V.g.LENGTH&&r.max<=l})),f={type:V.g.LENGTH,rules:{max:l}},h={type:de},y={type:ue},b=s.concat(p?f:Array.from({}),u?h:Array.from({}),K.Fk.has(i)?y:Array.from({})).filter((function(e){return e.type in ke})).sort((function(e,t){return De[e.type]-De[t.type]}));return console.log("pppppp",b),b.map((function(e){return console.log(e),{rules:[(0,m.Z)((0,m.Z)({},ke[e.type](e.rules,e.ruletype,r,o)),{},{message:function message(){return function genErrorMessage(e,t){var r,n=e.locale,o=e.message,a=e.rules,i=e.ruletype,s=e.type,l=e.value,c=e.questionType,u=t.checkFileLen,p=t.checkImageLen,m=t.checkOptionLen;if(o)return o;var f=n.decimalLenMessage,h=n.fileEqMessage,y=n.fileGteMessage,b=n.fileLteMessage,g=n.imageEqMessage,v=n.imageGteMessage,_=n.imageLteMessage,O=n.integerMessage,S=n.lengthEqMessage,P=n.lengthGteMessage,C=n.lengthLteMessage,w=n.numGtMessage,I=n.numGteMessage,E=n.numInRangeMessage,T=n.numLtMessage,N=n.numLteMessage,j=n.numOutofRangeMessage,D=n.optionEqMessage,k=n.optionGteMessage,x=n.optionLteMessage,Z=n.requiredMessage,R=n.sortRequiredMessage,A=n.tableSubQuestionValidMessage,F=function getPatternMessage(){return Te(i,l,n)},M=(r={},(0,d.Z)(r,de,(function(){return Z})),(0,d.Z)(r,ue,(function(){return Z})),(0,d.Z)(r,V.g.REQUIRED,(function getRequiredMessage(){return c===U.c.SORT?R:Z})),(0,d.Z)(r,V.g.VALUE_TYPE,(function getValueTypeMessage(){return Te(a.type,l,n)})),(0,d.Z)(r,V.g.RANGE,(function getInRangeMessage(){var e=a.max,t=a.min,r=a.open,n=function formatTemplate(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return n.length?formatTemplate.apply(void 0,[e.replace("$".concat(t),n[0]),t+1].concat((0,L.Z)(n.slice(1)))):e},o=!Number.isNaN(Number(e)),i=!Number.isNaN(Number(t));return o&&i?n(E,0,t,e):o?n(r?T:N,0,e):n(r?w:I,0,t)})),(0,d.Z)(r,V.g.NOT_BETWEEN,(function getOutofRangeMessage(){var e=a.max,t=a.min;return j.replace("$0",t).replace("$1",e)})),(0,d.Z)(r,V.g.INTEGER,(function(){return O})),(0,d.Z)(r,V.g.PATTERN,F),(0,d.Z)(r,V.g.LENGTH,(function getLengthMessage(){var e=a.min,t=a.max,r=function formatTemplate(e,t){return e.replace("%s",t)},n=S,o=P,i=C;return m?(n=D,o=k,i=x):u?(n=h,o=y,i=b):p&&(n=g,o=v,i=_),e===t?r(n,e):e>=0?r(o,e):r(i,t)})),(0,d.Z)(r,V.g.INNER_PATTERN,F),(0,d.Z)(r,V.g.BANK_CARD,(function getBankCardMessage(){var e=n.secondRegRuleTip,t=n.bankCardMessage,r=n.bankType,o=Ie(l,n);if(!o.length)return t;var a=e.replace("{{type}}",r);return"".concat(t).concat(a).concat(o)})),(0,d.Z)(r,V.g.DECIMAL_PRECISION,(function(){return f.replace("$0",a.max)})),(0,d.Z)(r,V.g.SUBQUESTION_VALID,(function(){return A})),r);return M[s]()}((0,m.Z)((0,m.Z)({},e),{},{locale:n,value:a,questionType:i}),{checkFileLen:i===U.c.FILE,checkImageLen:[U.c.IMAGE,U.c.FILEIMAGE].includes(i),checkOptionLen:c})}})],trigger:Ne(i,e)}}))}var xe,Ze,Le,Re,Ae,Fe,Me,Be,qe,Ue=["question_id"],Ge=["getLocation","setClipboardData","scanQRCode"],Ke="between",Ve="greater",Qe="less",He="equal",Ye=(0,A.Z)(q.lU),ze=(0,A.Z)(q.tZ),$e=(0,A.Z)((function(e){return e.map((function(e){var t,r=e.id,n=e.showIds,o=e.jumpId,a=e.qdata;return o||null!=n&&n.length||null!=a&&null!==(t=a.options)&&void 0!==t&&t.length&&a.options.some((function(e){var t=e.jumpId,r=e.showIds;return t||(null==r?void 0:r.length)}))?r:null})).filter(Boolean)})),We=(0,A.Z)((function(e,t){var r,n;return null!==(r=null===(n=e[t])||void 0===n?void 0:n.qlist)&&void 0!==r?r:[]}),(function(e,t){var r=(0,R.Z)(e,2),n=r[0],o=r[1],a=(0,R.Z)(t,2),i=a[0];return o===a[1]&&(n===i||JSON.stringify(n)===JSON.stringify(i))})),Xe=function isScaleRatingQuestion(e){return[U.c.SCALE,U.c.RATING].includes(e)},Je=(0,A.Z)((function(e,t){return e.map((function(e){return t[e]})).filter(Boolean)})),et=function safelyDeserialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(r){return t}},tt=(0,A.Z)((function(e,t,r){var n=new Set,o=new Set,a=function deleteHideId(e){n.delete(e),o.add(e)},i=function addHideId(e){o.has(e)||n.add(e)},s=null;return e.forEach((function(e){var o,l=e.id,c=e.qdata;s&&(s!==l?n.add(l):(n.delete(l),s=null));var u,p,m=function getLogic(e){var t,r,n;if(Xe(e.type)){var o,a,i,s=null!==(o=e.qdata.start)&&void 0!==o?o:1,l=null!==(a=e.qdata.end)&&void 0!==a?a:5;r=Array.from({length:l-s+1},(function(e,t){return{id:s+t,showIds:[],jumpId:null}})),null===(i=e.showIds)||void 0===i||i.forEach((function(e){var t,n=e.value,o=e.showIds;if(n.length&&o.length){var a=(0,(t={},(0,d.Z)(t,Ke,(function(){return{start:n[0],end:n[1]}})),(0,d.Z)(t,Ve,(function(){return{start:parseInt(n[0],10)+1,end:l}})),(0,d.Z)(t,Qe,(function(){return{start:s,end:n[0]-1}})),(0,d.Z)(t,He,(function(){return{start:n[0],end:n[0]}})),t)[e.condition])(),i=a.start,c=a.end;Array.from({length:c-i+1},(function(e,t){return parseInt(i,10)+t})).forEach((function(e){var t,n=r.findIndex((function(t){return e===t.id}));if(-1!==n){(t=r[n].showIds).push.apply(t,(0,L.Z)(o));var a=r[n].showIds;r[n].showIds=Array.from(new Set(a))}}))}})),n={jumpId:e.jumpId,optionJumpIds:[],showIds:[],optionShowIds:[]}}else{var c;r=(null===(c=e.qdata)||void 0===c?void 0:c.options)||[],n={jumpId:e.jumpId,optionJumpIds:[],showIds:e.showIds||[],optionShowIds:[]}}return null===(t=r)||void 0===t||t.forEach((function(e){var t=e.jumpId,r=e.showIds;n.optionJumpIds.push(t),n.optionShowIds.push(r)})),n}(e),f=m.jumpId,h=m.optionJumpIds,y=m.optionShowIds,b=m.showIds;r?u=n.has(l)?null:t[l]:u=n.has(l)?null:null!==(p=t[l])&&void 0!==p?p:et(e.defaultValues,void 0);if(e.type===U.c.TABLE){var g,v=e.qdata.tableQuestionData.sections[0].qlist;u=null===(g=u)||void 0===g?void 0:g.filter((function(e){return e.some((function(e){return!(0,q.tr)(e)&&v.includes(e.id)}))}))}if(null!==(o=u)&&void 0!==o&&o.length){var _;if(Xe(e.type)){var O,S,P=null!==(O=e.qdata.start)&&void 0!==O?O:1,C=null!==(S=e.qdata.end)&&void 0!==S?S:5,w=Array.from({length:C-P+1},(function(e,t){return P+t}));_=[_=w.indexOf(parseInt(u,10))]}else{var I,E;_=(0,q.xv)(null==c?void 0:c.options,null===(I=(E=u).map)||void 0===I?void 0:I.call(E,(function(e){return"string"==typeof e?{title:e}:e})))}!function updateHideIds(e,t){var r=e.showIds,n=e.optionShowIds;r.forEach((function(e){return a(e)})),n.forEach((function(e,r){if(null!=e&&e.length){var n=-1!==t.indexOf(r)?a:i;e.forEach((function(e){return n(e)}))}}))}({showIds:b,optionShowIds:y},_),s=f||h.find((function(e,t){return-1!==_.indexOf(t)}))}else!function initHideIds(e){var t=e.showIds,r=e.optionShowIds;t.forEach((function(e){return i(e)})),r.forEach((function(e){return null==e?void 0:e.forEach((function(e){return i(e)}))}))}({showIds:b,optionShowIds:y})})),Array.from(n)}),(function(e,t){var r=(0,R.Z)(e,2),n=r[0],o=r[1],a=(0,R.Z)(t,2),i=a[0],s=a[1];return n===i&&JSON.stringify(o)===JSON.stringify(s)})),rt=(0,A.Z)((function(e,t){return e.concat(t)})),nt=function errAnimationend(e){var t=e.target;t.classList.remove("question-err"),t.removeEventListener("animationend",errAnimationend)},ot=function addErrCls(e){e.classList.add("question-err"),e.addEventListener("animationend",nt)},at=function submitValueFormatter(e,t,r){return e.reduce((function(e,n){var o,a=r[n],i=t[n]||[];if(!a||(0,q.tr)({content:i,type:a.type}))return e;var s={id:n,type:a.type},l=function handleDateAndTime(){s.content=i,s.format=a.qdata.format,s.dataType=a.dataType||G.g.DATETIME};return((o={},(0,d.Z)(o,U.c.DATE,l),(0,d.Z)(o,U.c.TIME,l),(0,d.Z)(o,U.c.TEMPERATURE,(function handleTemperature(){var e;s.content="".concat(parseFloat(i)).concat(null!==(e={fahrenheit:"℉",celsius:"℃"}[a.qdata.unit])&&void 0!==e?e:"℃"),s.dataType=a.dataType||G.g.TEXT})),(0,d.Z)(o,U.c.IMAGE,(function handleImage(){s.content=i.map((function(e){return e.src})),s.dataType=a.dataType||G.g.TEXT})),(0,d.Z)(o,U.c.RECOGNITION,(function handleRecognition(){s.content=i,s.dataType=a.dataType||G.g.TEXT,s.subType=a.qdata.subType.toUpperCase()})),(0,d.Z)(o,U.c.TABLE,(function handleTable(){s.content=i.map((function(e){var t=e.reduce((function(e,t){return(0,m.Z)((0,m.Z)({},e),{},(0,d.Z)({},t.id,t.content))}),{}),r=Object.keys(t),n=Ye(a.qdata.tableQuestionData.questions);return submitValueFormatter(r,t,n)})),s.dataType=a.dataType||G.g.TEXT})),o)[a.type]||function handleDefault(){s.content=i,s.dataType=a.dataType||G.g.TEXT})(),e.push(s),e}),[])},it=(xe=(0,O.px)(),Ze=(0,_.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-components_lib_components_form-fill_locale_en_US_js").then(r.bind(r,40561))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-components_lib_components_form-fill_locale_zh_TW_js").then(r.bind(r,54506))},locale:Y}),Le=(0,O.w0)(),Re=(0,O.w0)(),xe(Ae=Ze((qe=function(e){(0,l.Z)(FormFill,e);var t,r=(0,c.Z)(FormFill);function FormFill(e){var t;return(0,a.Z)(this,FormFill),(t=r.call(this,e)).state={extraError:{},paperResult:{},sectionIndex:0,defaultAnswerQuestionsMap:new Map},t.handleQuestionBlurPool=new Map,t.handleQuestionChangePool=new Map,t.handleQuestionFocusPool=new Map,t.componentPropsMemoPool=new Map,t.formId=M()("form"),t.submitTimer=null,t.invalidQuestionCount=0,t.segmentationQuestionCount=0,t.handleImageLoaded=FormFill.subtitleImageLoaded.bind(null,(0,s.Z)(t)),t.handlePreviewImage=FormFill.subtitleImagePreview.bind(null,(0,s.Z)(t)),t.commodityProps={maxQuantity:999,quantityMaxLength:3},t.getCheckboxProps=(0,A.Z)((function(e){return{otherOptionPlaceholder:e}})),t.getImageProps=(0,A.Z)((function(e){var t;return{maxFileSize:e.fileSize?Number((e.fileSize/1024/1024).toFixed(1)):void 0,maxCount:null===(t=e.fileNum)||void 0===t?void 0:t.max}})),t.getLocationProps=(0,A.Z)((function(e){return{detailPlaceholder:e}})),t.getRadioProps=(0,A.Z)((function(e,t){return{canCancel:e,otherOptionPlaceholder:t}})),t.getSimpleProps=(0,A.Z)((function(e,t){return{showError:e,inputMode:t===G.g.NUMBER?"decimal":"text"}})),t.isInCopyStatus=!1,t}return(0,i.Z)(FormFill,[{key:"componentDidMount",value:function componentDidMount(){var e,t=this.props,r=t.value,n=t.isSettingDefaultAnswer;(r.length&&this.updateFormValue(),n&&this.updateDefaultAnswerMap(),this.hasSortQuestion)&&(null===(e=this.updateSortValue)||void 0===e||e.call(this))}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){var r=this.props,n=r.value,o=r.submitting,a=r.form,i=this.state.sectionIndex;o===e.submitting||o||(this.isSubmitting=!1,this.forceUpdate()),n!==e.value?(a.resetFields(),this.updateFormValue()):i!==t.sectionIndex&&this.updateFormValue(i-t.sectionIndex==1)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.handleQuestionBlurPool.clear(),this.handleQuestionChangePool.clear(),this.handleQuestionFocusPool.clear(),this.componentPropsMemoPool.clear()}},{key:"handleAnswerQuestionChange",value:function handleAnswerQuestionChange(e){var t=e.id,r=e.type,n=e.content,o=this.props,a=o.defaultAnswerQuestionTypes;if(o.isSettingDefaultAnswer&&a.includes(r)){var i=this.state.defaultAnswerQuestionsMap;i.set(t,n),this.setState({defaultAnswerQuestionsMap:i})}}},{key:"handleClearDefaultAnswerSetting",value:function handleClearDefaultAnswerSetting(e,t){var r=this.props.form,n=this.state.defaultAnswerQuestionsMap,o=this.props.onClearDefaultAnswerQuestion;n.delete(t),this.setState({defaultAnswerQuestionsMap:n});var a="";K.rn.has(e.type)&&(a=[]),e.type===U.c.TABLE&&(a=[[],[]]),o(t),r.setFieldsValue((0,d.Z)({},t,a))}},{key:"handleCopyTitle",value:function handleCopyTitle(e){this.props.canPrivateCopyOut&&!this.isInCopyStatus&&this.doCopyInPrivate(e)}},{key:"handleQuestionBlur",value:function handleQuestionBlur(e){var t=this,r=this.handleQuestionBlurPool.get(e.id);if(r)return r;var n=function memoizedFunc(r){var n=t.props,o=n.form;(0,n.onFormItemBlur)(r,e,o)};return this.handleQuestionBlurPool.set(e.id,n),n}},{key:"handleQuestionChange",value:function handleQuestionChange(e){var t=this,r=this.handleQuestionChangePool.get(e.id);if(r)return r;var n=function memoizedFunc(r){var n=t.props,o=n.form;(0,n.onFormItemChange)(r,e,o)};return this.handleQuestionChangePool.set(e.id,n),n}},{key:"handleQuestionFocus",value:function handleQuestionFocus(e){var t=this,r=this.handleQuestionFocusPool.get(e.id);if(r)return r;var n=function memoizedFunc(r){var n=t.props,o=n.form;(0,n.onFormItemFocus)(r,e,o)};return this.handleQuestionFocusPool.set(e.id,n),n}},{key:"handleSimpleScoreChange",value:function handleSimpleScoreChange(e,t){var r=parseFloat(t||0);if(!Number.isNaN(r)){var n=e.id,o=this.state.paperResult;this.setState({paperResult:(0,m.Z)((0,m.Z)({},o),{},(0,d.Z)({},n,{question_id:n,result:1,score:r}))})}}},{key:"handleSubmit",value:function handleSubmit(){var e=this,t=this.props,r=t.form,n=t.showConfirmModal,o=this.state,a=o.extraError,i=o.locale.emptySubmitSnackbar,s=this.getFirstErrorElement(a);if(s)return s.scrollIntoView({behavior:"smooth"}),void ot(s);r.validateFieldsAndScroll({force:!0,scroll:{offsetTop:50}},(function(t,r){if(t){var o=e.getFirstErrorElement(t);ot(o)}else{Object.keys(r).some((function(t){var n=e.questionMap[t],o=n.type,a=n.qdata,i=r[t];return o!==U.c.TABLE?!(0,q.tr)({type:o,content:i}):i.some((function(e){return e.filter((function(e){return a.tableQuestionData.sections[0].qlist.includes(e.id)})).some((function(e){return!(0,q.tr)(e)}))}))}))?n?e.openSubmitConfirmDialog(r):e.handleSubmitConfirm(r,!1):e.Snackbar.show({message:i,type:"info"})}}))}},{key:"handleConfirmDefaultAnswerSetting",value:function handleConfirmDefaultAnswerSetting(){(0,this.props.onSettingDefaultAnswer)(this.state.defaultAnswerQuestionsMap),this.setState({defaultAnswerQuestionsMap:new Map})}},{key:"handlePaperMarkSubmit",value:function handlePaperMarkSubmit(){var e=this,t=this.state,r=t.extraError,n=t.locale.notGraded,o=this.getFirstErrorElement(r);if(o)return o.scrollIntoView({behavior:"smooth"}),void ot(o);var a=this.props,i=a.onMarkPaperSubmit,s=a.paperResult.reduce((function(e,t){var r=t.question_id,n=(0,Z.Z)(t,Ue);return(0,m.Z)((0,m.Z)({},e),{},(0,d.Z)({},r,(0,m.Z)({question_id:r},n)))}),{}),l=this.state.paperResult,c=(0,m.Z)((0,m.Z)({},s),l),u=Object.keys(c).map((function(e){return c[e]})),p=new Set(this.hideIds),f=this.questionMap;this.questionList.some((function(t,r){var o,a,i=f[t];return i.type===U.c.SIMPLE&&0===(null===(o=c[t])||void 0===o?void 0:o.result)&&(null===(a=i.answerInfo)||void 0===a?void 0:a.score)>0&&!p.has(t)&&(e.Snackbar.show({message:n.replace("{{NUMBER}}",r+1),type:"info"}),!0)}))||i({results:u})}},{key:"handleSubmitConfirm",value:function handleSubmitConfirm(e,t){var r=this;if(!this.isSubmitting){this.isSubmitting=!0;var n=this.props,o=n.onSubmit,a=n.formData,i=n.submitTimeout,s=n.fixedQuestions,l=Object.keys(e||{}),c=s.concat(a.questions),d=this.questionMap,u=at(l,e,d);o({questions:c,global_padid:a.globalPadId,data:u,rawAnswer:e,rememberChecked:t,hideIds:this.hideIds}),i&&(clearTimeout(this.submitTimer),this.submitTimer=setTimeout((function(){r.isSubmitting=!1,r.forceUpdate()}),i))}}},{key:"hasSortQuestion",get:function get(){return this.questions.find((function(e){return e.type===U.c.SORT}))}},{key:"isTask",get:function get(){return!!this.props.formData.taskConfig}},{key:"questionList",get:function get(){var e=this.props.formData,t=this.state.sectionIndex;return We(e.sections,t)}},{key:"questionMap",get:function get(){var e=this.props,t=e.formData,r=e.fixedQuestions;return Ye(rt(r,t.questions))}},{key:"questions",get:function get(){var e=this.questionMap,t=this.questionList;return Je(t,e)}},{key:"withLogicQuestionIds",get:function get(){return $e(this.questions)}},{key:"hideIds",get:function get(){var e=this.questions,t=this.props,r=t.form.getFieldsValue,n=t.disabled,o=r(this.withLogicQuestionIds);return tt(e,o,n)}},{key:"wxConfig",get:function get(){var e=this.props.wxConfig;return ze(e,Ge)}},{key:"setExtraError",value:function setExtraError(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,r=e.id,n=this.state.extraError,o=(0,m.Z)({},n);t?o[r]={id:r,error:t}:o[r]&&delete o[r],this.setState({extraError:o})}},{key:"setQuestionError",value:function setQuestionError(e){var t=this.state.extraError;this.setState({extraError:(0,m.Z)((0,m.Z)({},t),e)})}},{key:"getComponentPropsByQuestion",value:function getComponentPropsByQuestion(e){var t,r,n,o=this,a=e.qdata,i=e.type,s=e.validate,l=this.props.componentProps,c=this.state.locale.placeholder,u=c.locationDetail,p=c.otherOptionPlaceholder,f=null===(t=(n={},(0,d.Z)(n,U.c.CHECKBOX,(function(){return o.getCheckboxProps(p)})),(0,d.Z)(n,U.c.COMMODITY,(function(){return o.commodityProps})),(0,d.Z)(n,U.c.FILEIMAGE,(function(){return o.getImageProps(a)})),(0,d.Z)(n,U.c.IMAGE,(function(){return o.getImageProps(a)})),(0,d.Z)(n,U.c.LOCATION,(function(){return o.getLocationProps(u)})),(0,d.Z)(n,U.c.RADIO,(function(){return o.getRadioProps(!(null!=s&&s.some((function(e){return e.type===V.g.REQUIRED}))),p)})),(0,d.Z)(n,U.c.SIMPLE,(function(){return o.getSimpleProps(!!o.getErrors(e),e.dataType)})),r=n)[i])||void 0===t?void 0:t.call(r);if(!f)return l;var h=i.toLowerCase(),y=l[h],b=this.componentPropsMemoPool.get(e.id);if(b)return b(h,y,f);var g=(0,A.Z)((function(e,t,r){return(0,d.Z)({},e,"function"==typeof t?function(){return(0,m.Z)((0,m.Z)({},r),t.apply(void 0,arguments))}:(0,m.Z)((0,m.Z)({},r),t))}));return this.componentPropsMemoPool.set(e.id,g),g(h,y,f)}},{key:"getErrors",value:function getErrors(e){var t,r=this.props.form,n=this.state.extraError,o=r.getFieldError,a=null===(t=n[e.id])||void 0===t?void 0:t.error;return a?[a]:o(e.id)}},{key:"getPlaceholder",value:function getPlaceholder(e){var t,r,n,o,a=e.type,i=e.validateSetting,s=void 0===i?{}:i,l=this.props,c=l.readOnly,u=l.disabled||c,p=this.state.locale.placeholder,m=p.imageReadonly,f=p.select,h=p.selectReadonly,y=p.simple,b=y.bankCard,g=y.email,v=y.fallback,_=y.id,O=y.number,S=y.passport,P=y.phone,C=y.tel,w=y.url,I=p.simpleReadonly,E=p.temperature,T=(t={},(0,d.Z)(t,U.c.FILEIMAGE,m),(0,d.Z)(t,U.c.IMAGE,m),(0,d.Z)(t,U.c.SIMPLE,I),(0,d.Z)(t,U.c.SELECT,h),t),N=(o={},(0,d.Z)(o,U.c.SIMPLE,null!==(r=(n={},(0,d.Z)(n,W.yX.BANKCARD,b),(0,d.Z)(n,W.yX.CURRENCY,O),(0,d.Z)(n,W.yX.EMAIL,g),(0,d.Z)(n,W.yX.ID,_),(0,d.Z)(n,W.yX.MOBILE,P),(0,d.Z)(n,W.yX.NUMBER,O),(0,d.Z)(n,W.yX.PASSPORT,S),(0,d.Z)(n,W.yX.PHONE,C),(0,d.Z)(n,W.yX.URL,w),n)[s.type])&&void 0!==r?r:v),(0,d.Z)(o,U.c.SELECT,f),(0,d.Z)(o,U.c.TEMPERATURE,E),o);return u?T[a]:N[a]}},{key:"getFormField",value:function getFormField(e){var t=this,r=this.state.locale.bipolarWritingList,n=this.props,o=n.disabled,a=n.form,i=n.formData,s=n.getPopupContainer,l=n.lang,c=n.onAnswerQuestion,d=n.readOnly,u=n.isSettingDefaultAnswer,p=n.submitting,m=a.getFieldDecorator,f=this.getFieldFeature({componentProps:this.getComponentPropsByQuestion(e),disabled:o,fillable:!0,formData:i,getPopupContainer:s,lang:l,locale:{bipolarWritingList:r},onBlur:this.handleQuestionBlur(e),onChange:this.handleQuestionChange(e),onFocus:this.handleQuestionFocus(e),onReport:this.handleReport,placeholder:this.getPlaceholder(e),privateFormId:this.formId,question:e,readOnly:o||d,wxConfig:this.wxConfig}),h=f.field,y=f.defaultValue,b=f.getValueProps,g=f.normalize,v=K.rn.has(e.type)?[]:void 0;return m(e.id,{validate:u?[]:this.getValidateRules(e),initialValue:o||p?v:y,onChange:function onChange(r){var n,o;t.handleAnswerQuestionChange({id:e.id,type:e.type,content:r});for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];c.apply(void 0,[{id:e.id,type:e.type,content:r,dataType:e.dataType}].concat(i)),null===(n=(o=h.props).onChange)||void 0===n||n.call.apply(n,[o,r].concat(i))},preserve:i.sections.length>1,hidden:!1,getValueProps:b,normalize:g})(h)}},{key:"getSettingDefaultAnswer",value:function getSettingDefaultAnswer(e){var t=e.id,r=this.state.defaultAnswerQuestionsMap.get(t),n=et(r,r);return Array.isArray(n)?!!n.length:!!n}},{key:"getFirstErrorElement",value:function getFirstErrorElement(e){var t;return this.props.fixedQuestions.map((function(e){return e.id})).concat(this.questionList).some((function(r){return!!e[r]&&(t=r,!0)}))?document.querySelector("[data-qid=".concat(this.formId,"-").concat(t,"]")):null}},{key:"getQuestionIndex",value:function getQuestionIndex(e){var t=this.state.sectionIndex,r=this.props,n=r.formData,o=r.questionNumberOffset,a=n.sections;if(a.length<2)return e+Math.max(o,0)-this.invalidQuestionCount-this.segmentationQuestionCount;var i=a.slice(0,t).reduce((function(e,t){return e+t.qlist.length}),0);return i+e+(o+i>=0?o:0)}},{key:"getValidateRules",value:function getValidateRules(e){var t=e.validate,r=this.props.onValidate,a=this.state.locale.validateAdaptor,i=(0,this.props.form.getFieldsValue)([e.id])[e.id],s=validateAdaptor({validateField:t,question:e,locale:a,formId:this.formId,value:i});return"function"==typeof r?[{rules:[{validator(t,a,i){return(0,o.Z)((0,n.Z)().mark((function _callee(){var t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(e,a);case 2:t=n.sent,i(t);case 4:case"end":return n.stop()}}),_callee)})))()}}]}].concat(s):s}},{key:"doCopyInPrivate",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee2(e){var t,r,o,a;return(0,n.Z)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return this.importSCCommonService(),t=this.props.corpId,this.isInCopyStatus=!0,e.preventDefault(),a=(0,q.v2)(),r=a.html,o=a.plain,n.prev=9,n.next=12,(0,B.writeInClipBoard)({html:r,plain:o,event:e},{encrypt:!0,encryptKey:t});case 12:this.isInCopyStatus=!1,n.next=18;break;case 15:n.prev=15,n.t0=n.catch(9),this.isInCopyStatus=!1;case 18:case"end":return n.stop()}}),_callee2,this,[[9,15]])}))),function doCopyInPrivate(e){return t.apply(this,arguments)})},{key:"scrollById",value:function scrollById(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{block:"center"};null===(t=document.querySelector("[data-qid=".concat(this.formId,"-").concat(e,"]")))||void 0===t||t.scrollIntoView(r)}},{key:"paperMarkSubmit",value:function paperMarkSubmit(){this.handlePaperMarkSubmit()}},{key:"updateSectionIndex",value:function updateSectionIndex(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.next,o=t.prev,a=this.state.sectionIndex,i=this.props,s=i.formData,l=i.onSectionChange;return"number"==typeof r?e=r:!0===n?e=a+1:!0===o&&(e=a-1),!("number"!=typeof e||e<0||e>=s.sections.length)&&(this.setState({sectionIndex:e}),l(e,a),!0)}},{key:"submitForm",value:function submitForm(){this.handleSubmit()}},{key:"updateFormValue",value:function updateFormValue(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props,n=r.value,o=r.form,a=r.formData,i=r.fixedQuestions,s=this.questionMap,l=this.state.sectionIndex,c=n.reduce((function(e,t){return(0,m.Z)((0,m.Z)({},e),{},(0,d.Z)({},t.id,t.content))}),{}),u=function getQuestionList(){var r=0===l?i.map((function(e){return e.id})):[],n=t?e.questionList:Array.prototype.concat.apply([],a.sections.slice(0,l+1).map((function(e){return e.qlist})));return r.concat(n)}().map((function(e){return s[e]&&e in c?(o.getFieldProps(e,{preserve:!0}),(0,d.Z)({},e,c[e])):null}));o.setFieldsValue(Object.assign.apply(Object,[{}].concat((0,L.Z)(u))))}},{key:"updateDefaultAnswerMap",value:function updateDefaultAnswerMap(){var e=this.props.formData.questions,t=new Map;e.forEach((function(e){e.defaultValues&&t.set(e.id,e.defaultValues)})),t.size&&this.setState({defaultAnswerQuestionsMap:t})}},{key:"openSubmitConfirmDialog",value:function openSubmitConfirmDialog(e){var t=this,r=this.props,n=r.onSubmitDialogVisibleChange,o=r.showSubmitRememberCheckbox,a=r.confirmModalConfig;n(!0);var i=this.state.locale,s=i.cancelText,l=i.okText,c=i.rememberPersonalInfo,d=i.submitConfirmContent,u=i.submitConfirmTitle,p=a.cancelText,m=void 0===p?s:p,f=a.content,h=void 0===f?d:f,y=a.okText,b=void 0===y?l:y,g=a.title,v=void 0===g?u:g;this.confirm({cancelText:m,checkBoxContent:o(e)?c:"",content:h,okText:b,onCancel:function onCancel(){return n(!1)},onConfirm:function onConfirm(r,n){var o=n.checked;return t.handleSubmitConfirm(e,o)},title:v})}},{key:"renderHiddenQuestion",value:function renderHiddenQuestion(e){return(0,this.props.form.getFieldProps)(e.id,{hidden:!0}),h.createElement("div",{key:e.id,hidden:!0,className:"question","data-qid":"".concat(this.formId,"-").concat(e.id),"data-type":e.type.toLowerCase()})}},{key:"renderQuestion",value:function renderQuestion(e,t){if(!e)return this.invalidQuestionCount+=1,null;e.type===U.c.SEGMENTATION&&(this.segmentationQuestionCount+=1);var r=this.props,n=r.canPrivateCopyOut,o=r.classNamePrefix,a=r.corpId,i=r.disabled,s=r.defaultAnswerQuestionTypes,l=r.form.getFieldValue,c=r.lang,d=r.markMode,u=r.paperResult,p=r.readOnly,m=r.showAnswer,f=r.showGainScore,y=r.showPaperResult,b=r.showScore,g=r.subtitleAutoLink,v=r.useRichEditor,_=r.inPreview,O=r.isSettingDefaultAnswer,S=this.getQuestionIndex(t),P=this.state,C=P.locale,w=C.defaultTitle,I=C.simpleScorePlaceholder,E=C.cancelTips,T=C.defaultAnswerNotSupportedTips,N=C.settingDefaultAnswerTips,j=P.paperResult,D=this.EditorReadonly,k=this.ImageGallery,x=this.SimpleScore,Z=this.isTask,L=this.wxConfig,R=this.getErrors(e),A=this.getFormField(e),F=e.type===U.c.SEGMENTATION?"":w,M=this.getSettingDefaultAnswer(e);return h.createElement(oe.H,{key:e.id,EditorReadonly:D,ImageGallery:k,SimpleScore:x,canPrivateCopyOut:n,cancelTips:E,classNamePrefix:o,corpId:a,currentPaperResult:j,defaultAnswerNotSupportedTips:T,defaultAnswerQuestionTypes:s,disabled:i,errorTip:null==R?void 0:R.join(","),formId:this.formId,getFieldValue:l,hasDefaultAnswer:M,inPreview:_,index:S,isSettingDefaultAnswer:O,isTask:Z,lang:c,markMode:d,paperResult:u,question:e,questionCore:A,readOnly:p,settingDefaultAnswerTips:N,showAnswer:m,showGainScore:f,showPaperResult:y,showScore:b,simpleScorePlaceholder:I,subtitleAutoLink:g,title:e.title||F,useRichEditor:v,wxConfig:L,onClearDefaultAnswerSetting:this.handleClearDefaultAnswerSetting,onCopyTitle:this.handleCopyTitle,onReport:this.handleReport,onSimpleScoreChange:this.handleSimpleScoreChange,onSimpleScoreError:this.setExtraError,onSubtitleImageLoaded:this.handleImageLoaded,onSubtitleImagePreview:this.handlePreviewImage})}},{key:"renderFixedSection",value:function renderFixedSection(){var e=this,t=this.props,r=t.classNamePrefix,n=t.disabled,o=t.fixedQuestions,a=t.lang,i=t.readOnly,s=this.state.locale.defaultTitle;return o.length>0?h.createElement("div",{className:"fixed-question"},o.map((function(t){var o;return h.createElement(te,{key:t.id,classNamePrefix:r,disabled:n,errorTip:null===(o=e.getErrors(t))||void 0===o?void 0:o.join(","),formId:e.formId,lang:a,question:t,questionCore:e.getFormField(t),readOnly:i,title:t.title||s})}))):null}},{key:"renderDefaultAnswerSubmitButton",value:function renderDefaultAnswerSubmitButton(){var e=this.state.locale.completeDefaultAnswer;return h.createElement("div",{className:"question-commit"},h.createElement("button",{className:"default-answer-submit-btn",type:"button",onClick:this.handleConfirmDefaultAnswerSetting},e))}},{key:"renderMarkSubmitButton",value:function renderMarkSubmitButton(){var e=this.props.markSubmitButton,t=this.state.locale.submitPaperResult,r=e()||h.createElement("div",{className:"question-commit"},h.createElement("button",{className:"paper-result-submit-btn",type:"button"},t));return h.cloneElement(r,{onClick:this.handlePaperMarkSubmit})}},{key:"renderSubmitButton",value:function renderSubmitButton(){var e=this.props,t=e.anonymous,r=e.showSubmitBtn,n=e.showSubmitBtnOnReadonly,o=e.readOnly,a=e.canSubmit,i=e.submitting,s=e.disabled,l=e.submitBtnText,c=e.submittingBtnText,d=this.state.locale.anonymousTip;return function shouldShowSubmitBtn(){return r&&(!o||n)}()?h.createElement("div",{className:"question-commit"},t&&h.createElement("span",{className:"anonymous-tip"},d),h.createElement("button",{disabled:!a||i||this.isSubmitting||s,type:"button",onClick:this.handleSubmit},t&&h.createElement("span",{className:"anonymous-icon"}),i||this.isSubmitting?c:l)):null}},{key:"renderBottomButton",value:function renderBottomButton(){var e=this.props,t=e.markMode,r=e.formData,n=e.isSettingDefaultAnswer,o=e.inPreview;return n&&!o?this.renderDefaultAnswerSubmitButton():t&&this.isTask?this.renderMarkSubmitButton():this.state.sectionIndex===r.sections.length-1?this.renderSubmitButton():null}},{key:"render",value:function render(){var e=this,t=this.props,r=t.classNamePrefix,n=t.className,o=t.formData,a=t.renderFooter,i=this.hideIds,s=this.questionMap,l=this.state.sectionIndex,c=(o.sections[l]||{}).title;this.segmentationQuestionCount=0,this.invalidQuestionCount=0;var d=0;return h.createElement("div",{className:v()(n,"".concat(r,"-body"),"".concat(r,"-fill-body"))},0===l?this.renderFixedSection():null,c?h.createElement("div",{className:"".concat(r,"-section-title")},c):null,this.questionList.map((function(t,r){var n=s[t];return i.includes(t)?((null==n?void 0:n.type)===U.c.SEGMENTATION&&(d+=1),e.renderHiddenQuestion(n)):e.renderQuestion(n,r-d)})),a(),this.renderBottomButton())}}]),FormFill}(h.Component),(0,d.Z)(qe,"subtitleImageLoaded",X.dG),(0,d.Z)(qe,"subtitleImagePreview",X.dG),Fe=qe,(0,f.Z)(Fe,"subtitleImageLoaded",[Le],(Me=(Me=Object.getOwnPropertyDescriptor(Fe,"subtitleImageLoaded"))?Me.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return Me}}),Fe),(0,f.Z)(Fe,"subtitleImagePreview",[Re],(Be=(Be=Object.getOwnPropertyDescriptor(Fe,"subtitleImagePreview"))?Be.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return Be}}),Fe),(0,f.Z)(Fe.prototype,"handleClearDefaultAnswerSetting",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleClearDefaultAnswerSetting"),Fe.prototype),(0,f.Z)(Fe.prototype,"handleCopyTitle",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleCopyTitle"),Fe.prototype),(0,f.Z)(Fe.prototype,"handleQuestionBlur",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleQuestionBlur"),Fe.prototype),(0,f.Z)(Fe.prototype,"handleQuestionChange",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleQuestionChange"),Fe.prototype),(0,f.Z)(Fe.prototype,"handleQuestionFocus",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleQuestionFocus"),Fe.prototype),(0,f.Z)(Fe.prototype,"handleSimpleScoreChange",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleSimpleScoreChange"),Fe.prototype),(0,f.Z)(Fe.prototype,"handleSubmit",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleSubmit"),Fe.prototype),(0,f.Z)(Fe.prototype,"handleConfirmDefaultAnswerSetting",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handleConfirmDefaultAnswerSetting"),Fe.prototype),(0,f.Z)(Fe.prototype,"handlePaperMarkSubmit",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"handlePaperMarkSubmit"),Fe.prototype),(0,f.Z)(Fe.prototype,"setExtraError",[O.xB],Object.getOwnPropertyDescriptor(Fe.prototype,"setExtraError"),Fe.prototype),Ae=Fe))||Ae)||Ae);it.propTypes={form:b().oneOfType([b().object]).isRequired,formData:b().shape({globalPadId:b().string.isRequired,questions:b().arrayOf(b().shape({id:b().string,images:b().arrayOf(b().string),qdata:b().shape({placeholder:b().string}),subtitle:b().string,title:b().string,toggle:b().shape({required:b().bool}),type:b().oneOf([].concat((0,L.Z)($.xy),["RICH"])),validate:b().arrayOf(b().shape({message:b().string,rules:b().shape({}),type:b().number}))})).isRequired,sections:b().arrayOf(b().shape({qlist:b().arrayOf(b().string),title:b().string})).isRequired,taskConfig:b().shape({})}).isRequired,anonymous:b().bool,canPrivateCopyOut:b().bool,canSubmit:b().bool,className:b().string,classNamePrefix:b().string,componentProps:b().exact({autodep:b().oneOfType([b().func,b().object]),autoname:b().oneOfType([b().func,b().object]),canvas:b().oneOfType([b().func,b().object]),canvas_image:b().oneOfType([b().func,b().object]),cascader:b().oneOfType([b().func,b().object]),checkbox:b().oneOfType([b().func,b().object]),commodity:b().oneOfType([b().func,b().object]),date:b().oneOfType([b().func,b().object]),file:b().oneOfType([b().func,b().object]),fileimage:b().oneOfType([b().func,b().object]),image:b().oneOfType([b().func,b().object]),location:b().oneOfType([b().func,b().object]),matrix:b().oneOfType([b().func,b().object]),radio:b().oneOfType([b().func,b().object]),rating:b().oneOfType([b().func,b().object]),recognition:b().oneOfType([b().func,b().object]),scale:b().oneOfType([b().func,b().object]),scan:b().oneOfType([b().func,b().object]),segmentation:b().oneOfType([b().func,b().object]),select:b().oneOfType([b().func,b().object]),simple:b().oneOfType([b().func,b().object]),sort:b().oneOfType([b().func,b().object]),table:b().oneOfType([b().func,b().object]),temperature:b().oneOfType([b().func,b().object]),time:b().oneOfType([b().func,b().object]),vote:b().oneOfType([b().func,b().object])}),confirmModalConfig:b().shape({cancelText:b().string,content:b().string,okText:b().string,title:b().string}),corpId:b().string,defaultAnswerQuestionTypes:b().arrayOf(b().string),disabled:b().bool,fixedQuestions:b().arrayOf(z.$),getPopupContainer:b().func,inPreview:b().bool,isSettingDefaultAnswer:b().bool,markMode:b().bool,markSubmitButton:b().func,paperResult:b().arrayOf(b().shape({question_id:b().string,result:b().oneOf([0,1,2]),score:b().number})),questionNumberOffset:b().number,readOnly:b().bool,renderFooter:b().func,showAnswer:b().bool,showConfirmModal:b().bool,showGainScore:b().bool,showPaperResult:b().bool,showScore:b().bool,showSubmitBtn:b().bool,showSubmitBtnOnReadonly:b().bool,showSubmitRememberCheckbox:b().func,submitBtnText:b().string,submitTimeout:b().number,submitting:b().bool,submittingBtnText:b().string,subtitleAutoLink:b().bool,useRichEditor:b().bool,value:b().arrayOf(b().shape({id:b().string.isRequired,type:b().oneOf($.xy).isRequired,content:b().oneOfType([b().string,b().array]),dataType:b().number})),wxConfig:b().shape({}),onAnswerQuestion:b().func,onClearDefaultAnswerQuestion:b().func,onFormItemBlur:b().func,onFormItemChange:b().func,onFormItemFocus:b().func,onMarkPaperSubmit:b().func,onSectionChange:b().func,onSettingDefaultAnswer:b().func,onSubmit:b().func,onSubmitDialogVisibleChange:b().func,onValidate:b().func},it.defaultProps=(0,m.Z)((0,m.Z)({},it.defaultProps),{},{anonymous:!1,canPrivateCopyOut:!1,canSubmit:!0,className:"",classNamePrefix:"form",componentProps:{},confirmModalConfig:{},corpId:"",defaultAnswerQuestionTypes:[],disabled:!1,fixedQuestions:[],getPopupContainer:function getPopupContainer(){return document.body},inPreview:!1,isSettingDefaultAnswer:!1,markMode:!1,markSubmitButton:function markSubmitButton(){return null},onAnswerQuestion:X.dG,onClearDefaultAnswerQuestion:X.dG,onFormItemBlur:X.dG,onFormItemChange:X.dG,onFormItemFocus:X.dG,onMarkPaperSubmit:X.dG,onSectionChange:X.dG,onSettingDefaultAnswer:X.dG,onSubmit:X.dG,onSubmitDialogVisibleChange:X.dG,paperResult:[],questionNumberOffset:0,readOnly:!1,renderFooter:X.dG,showAnswer:!0,showConfirmModal:!0,showGainScore:!0,showPaperResult:!0,showScore:!0,showSubmitBtn:!0,showSubmitBtnOnReadonly:!1,showSubmitRememberCheckbox:function showSubmitRememberCheckbox(){return!1},submitBtnText:"提交",submitTimeout:0,submitting:!1,submittingBtnText:"提交中...",subtitleAutoLink:!1,useRichEditor:!1,value:[],wxConfig:void 0});const st=it;var lt;const ct=(0,u.Z)()(lt=function(e){(0,l.Z)(FormFillPC,e);var t,u=(0,c.Z)(FormFillPC);function FormFillPC(){var e;(0,a.Z)(this,FormFillPC);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=u.call.apply(u,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"confirm",j.Z),(0,d.Z)((0,s.Z)(e),"getFieldFeature",x.Z),(0,d.Z)((0,s.Z)(e),"ImageGallery",D.default),(0,d.Z)((0,s.Z)(e),"SimpleScore",N),(0,d.Z)((0,s.Z)(e),"EditorReadonly",k.Z),(0,d.Z)((0,s.Z)(e),"Snackbar",p.default),e}return(0,i.Z)(FormFillPC,[{key:"importSCCommonService",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){return(0,n.Z)().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),r.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),r.e("vendors-node_modules_tencent_dui-mobile_esm_components_Modal_index_js"),r.e("node_modules_tencent_docs-scenario-component-common-service_dist_esm_index_js-_433d0")]).then(r.bind(r,71349));case 2:(0,e.sent.showClipboardProtectionModal)();case 5:case"end":return e.stop()}}),_callee)}))),function importSCCommonService(){return t.apply(this,arguments)})}]),FormFillPC}(st))||lt},54785:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(50189),o=r(22951),a=r(91976),i=r(67591),s=r(94337),l=(r(66066),r(19717),r(74413),r(98704),r(63517),r(27378)),c=r(23615),d=r.n(c),u=r(21886),p=r(14042);var m,f=(0,u.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-components_lib_components_task-tags_locale_en_US_js").then(r.bind(r,45803))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-components_lib_components_task-tags_locale_zh_TW_js").then(r.bind(r,72920))},locale:{answer:"正确答案",answerUnset:"未设置正确答案",point:"分",scoreSettingTitle:"设置题目分数",scoreUnset:"未设置分数"}})(m=function(e){(0,i.Z)(TaskTagsBase,e);var t=(0,s.Z)(TaskTagsBase);function TaskTagsBase(){return(0,o.Z)(this,TaskTagsBase),t.apply(this,arguments)}return(0,a.Z)(TaskTagsBase,[{key:"answerText",get:function get(){var e=this.props,t=e.question,r=t.answerInfo,n=t.qdata,o=t.type,a=e.showAnswerTag,i=(n||{}).options,s=void 0===i?[]:i,l=r||{},c=l.rightOptionIds,d=void 0===c?[]:c,u=l.rightTexts,m=void 0===u?[]:u;if(!a)return"";var f=this.state.locale,h=f.answer,y=f.answerUnset;return[p.c.CHECKBOX,p.c.RADIO].includes(o)&&d.length>0?"".concat(h,"：").concat(s.reduce((function(e,t,r){var n=t.id;return-1!==d.indexOf(n)&&e.push(String.fromCharCode(r+65)),e}),[])):p.c.FILLIN===o&&m.length>0?"".concat(h,"：").concat(m):o!==p.c.SIMPLE?y:""}},{key:"scoreText",get:function get(){var e=this.props,t=e.question.answerInfo,r=e.showScoreTag,n=(t||{}).score,o=void 0===n?0:n;if(!r)return"";var a=this.state.locale,i=a.point,s=a.scoreUnset;return o?"".concat(o).concat(i):s}},{key:"render",value:function render(){return null}}]),TaskTagsBase}(l.PureComponent))||m;f.propTypes={className:d().string,classNamePrefix:d().string,question:d().shape({answerInfo:d().shape({rightOptionIds:d().arrayOf(d().string),rightTexts:d().arrayOf(d().string),score:d().number}),qdata:d().shape({options:d().arrayOf(d().shape({id:d().string.isRequired}))}),title:d().string,type:d().string}),showAnswerTag:d().bool,showScoreTag:d().bool},f.defaultProps=(0,n.Z)((0,n.Z)({},f.defaultProps),{},{className:"",classNamePrefix:"form",question:{},showAnswerTag:!0,showScoreTag:!0});const h=f},97696:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(22951),o=r(91976),a=r(67591),i=r(94337),s=(r(63517),r(27378)),l=r(90005),c=r.n(l),d=r(50189),u=(r(12249),r(57637),r(23615)),p=r.n(u),m=r(29885),f=r(40500),h=function(e){(0,a.Z)(TagGroup,e);var t=(0,i.Z)(TagGroup);function TagGroup(){return(0,n.Z)(this,TagGroup),t.apply(this,arguments)}return(0,o.Z)(TagGroup,[{key:"render",value:function render(){var e=this.props,t=e.value,r=e.style,n=e.className,o=e.classNamePrefix,a=e.size,i=e.disabled,l=e.onClick,u=e.clickable,p=e.gutter,f=e.background,h=e.color,y=e.onMouseDown;return s.createElement("div",{className:c()(n,o),style:r},t.map((function(e,r){var n=e.id,c=e.text,b=e.active,g=e.size,v=e.style,_=e.className,O=e.disabled,S=e.clickable,P=e.onClick;return s.createElement(m.Z,{key:n,active:b,className:_,classNamePrefix:o,clickable:"boolean"==typeof S?S:u,disabled:"boolean"==typeof O?O:i,id:n,size:g||a,text:c,style:(0,d.Z)((0,d.Z)({backgroundColor:f,color:h},v),{},{marginLeft:r?p/2:0,marginRight:r<t.length-1?p/2:0}),onClick:"function"==typeof P?P:l,onMouseDown:y})})))}}]),TagGroup}(s.PureComponent);h.propTypes={background:p().string,className:p().string,classNamePrefix:p().string,clickable:p().bool,color:p().string,disabled:p().bool,gutter:p().number,size:p().oneOf(["default","large"]),style:p().oneOfType([p().object]),value:p().arrayOf(p().shape({text:p().string.isRequired,active:p().bool,className:p().string,classNamePrefix:p().string,clickable:p().bool,disabled:p().bool,id:p().oneOfType([p().string,p().number]),size:p().oneOf(["default","large"]),style:p().oneOfType([p().object]),onClick:p().func})),onClick:p().func,onMouseDown:p().func},h.defaultProps={background:"",className:"",classNamePrefix:"form-tag",clickable:!1,color:"",disabled:!1,gutter:12,onClick:f.dG,onMouseDown:f.dG,size:"default",style:{},value:[]};const y=h;const b=function(e){(0,a.Z)(TaskTagsFill,e);var t=(0,i.Z)(TaskTagsFill);function TaskTagsFill(){return(0,n.Z)(this,TaskTagsFill),t.apply(this,arguments)}return(0,o.Z)(TaskTagsFill,[{key:"render",value:function render(){var e=this,t=["scoreText","answerText"].reduce((function(t,r){var n=e[r];return n&&t.push({text:n,id:r.replace("Text","")}),t}),[]),r=this.props,n=r.className,o=r.classNamePrefix;return t.length?s.createElement(y,{className:c()(n,"".concat(o,"-task-tags")),value:t}):null}}]),TaskTagsFill}(r(54785).Z)},64633:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});var n=r(649),o=r(23615),a=r.n(o),i=r(95240),s=a().shape({id:a().string.isRequired,type:a().oneOf([].concat((0,n.Z)(i.xy),["RICH"])).isRequired,icon:a().string,images:a().arrayOf(a().string),isCommon:a().bool,isDirty:a().bool,isFixed:a().bool,subtitle:a().string,title:a().string,validate:a().arrayOf(a().shape({message:a().string,rules:a().shape({}),type:a().number}))})},61820:(e,t,r)=>{"use strict";r.d(t,{xy:()=>d,pv:()=>p,KZ:()=>m});r(91270);var n=r(95240),o=r(14042),a=r(20635),i=r(56898),s=r(45099),l=r(84863),c=r(61982),d=Array.from(n.xy),u={ADDRESS:{localeKey:"ADDRESS",type:o.c.LOCATION,qdata:{subType:"DETAIL"}},AGE:{localeKey:"AGE",type:o.c.SIMPLE,dataType:a.g.NUMBER,validate:[(0,i.Q)({checkType:s.g.RANGE,params:{min:0,open:!1}})],validateSetting:{type:c.yX.NUMBER,min:"0",numberRangeType:c.wO.GTE}},AMOUNT:{localeKey:"AMOUNT",type:o.c.SIMPLE,qdata:{prefix:"¥"},validate:[(0,i.Q)({checkType:s.g.DECIMAL_PRECISION,params:{max:2}})],validateSetting:{type:c.yX.CURRENCY,precision:2}},BIRTH:{localeKey:"BIRTH",type:o.c.DATE,qdata:{format:'yyyy"年"m"月"',subType:"month"}},BODYSIZE:{localeKey:"BODYSIZE",type:o.c.SELECT},COMMODITY:{localeKey:"COMMODITY",type:o.c.COMMODITY},EDU:{localeKey:"EDU",type:o.c.RADIO},EMAIL:{localeKey:"EMAIL",type:o.c.SIMPLE,dataType:a.g.EMAIL,validate:[(0,i.Q)({checkType:s.g.INNER_PATTERN,params:{ruletype:l.S.EMAIL}})],validateSetting:{type:c.yX.EMAIL}},HEIGHT:{localeKey:"HEIGHT",type:o.c.SIMPLE,dataType:a.g.NUMBER,validate:[(0,i.Q)({checkType:s.g.RANGE,params:{min:0,open:!0}})],validateSetting:{type:c.yX.NUMBER,numberRangeType:c.wO.GT,min:"0"}},ID:{localeKey:"ID",type:o.c.SIMPLE,dataType:a.g.ID_CARD,validate:[(0,i.Q)({checkType:s.g.INNER_PATTERN,params:{ruletype:l.S.ID_CARD}})],validateSetting:{type:c.yX.ID}},NAME:{localeKey:"NAME",type:o.c.SIMPLE},QQ:{localeKey:"QQ",type:o.c.SIMPLE,validate:[(0,i.Q)({checkType:s.g.INNER_PATTERN,params:{ruletype:l.S.QQ}})]},PHONE:{localeKey:"PHONE",type:o.c.SIMPLE,dataType:a.g.PHONE,validate:[(0,i.Q)({checkType:s.g.INNER_PATTERN,params:{ruletype:l.S.MOBILE_NUMBER}})],validateSetting:{type:c.yX.MOBILE}},SEX:{localeKey:"SEX",type:o.c.RADIO},TEMPERATURE:{localeKey:"TEMPERATURE",type:o.c.SIMPLE,dataType:a.g.NUMBER,qdata:{suffix:"℃"},validate:[(0,i.Q)({checkType:s.g.VALUE_TYPE,params:{type:"number"}})],validateSetting:{type:c.yX.NUMBER}},WECHAT:{localeKey:"WECHAT",type:o.c.SIMPLE,validate:[(0,i.Q)({checkType:s.g.INNER_PATTERN,params:{ruletype:l.S.WECHAT}})]},WEIGHT:{localeKey:"WEIGHT",type:o.c.SIMPLE,dataType:a.g.NUMBER,validate:[(0,i.Q)({checkType:s.g.RANGE,params:{min:0,open:!0}})],validateSetting:{type:c.yX.NUMBER,numberRangeType:c.wO.GT,min:"0"}},YESORNO:{localeKey:"YESORNO",type:o.c.RADIO}},p=[{localeKey:"DEFAULT",questions:[u.NAME,u.PHONE,u.ID,u.YESORNO,u.SEX,u.TEMPERATURE,u.COMMODITY,u.AGE,u.BIRTH,u.WEIGHT,u.HEIGHT,u.WECHAT,u.QQ,u.EMAIL,u.ADDRESS,u.EDU,u.AMOUNT,u.BODYSIZE]}],m=-1},61982:(e,t,r)=>{"use strict";r.d(t,{yX:()=>n,rm:()=>o,wO:()=>a});var n={NONE:-1,STRING:0,NUMBER:1,EMAIL:2,URL:3,ID:4,MOBILE:5,PHONE:6,PASSPORT:7,BANKCARD:8,CURRENCY:9},o={ONLY_INT:1,ONLY_DECIMAL:2,UNLIMIT:3},a={UNLIMIT:0,GT:3,GTE:4,LT:5,LTE:6,BETWEEN:7,NOT_BETWEEN:8,NOT_EQL:10}},60485:(e,t,r)=>{"use strict";r.d(t,{dG:()=>a,EE:()=>i,W5:()=>s,jx:()=>l,eA:()=>c,ty:()=>d});r(35659),r(71165),r(74413),r(69108),r(91270),r(53124),r(62285),r(66066),r(84050);var n=r(27378),o=r(34470),a=Function.prototype,i=new o.Z,s=function createMemoComponent(e,t){var r=(0,n.memo)(e,t);return Object.defineProperty(r,"displayName",{set(t){e.displayName="Memo(".concat(t||"anonymous",")")}}),r},l=function findByKeyWithCache(e){var t={};return function(r,n){return n in t?t[n]:e.find((function(e){return t[e[r]]=e,e[r]===n}))}},c=function getQidPosition(e,t){var r=-1;return[t.findIndex((function(t){var n,o;return-1!==(r=null!==(n=null===(o=t.qlist)||void 0===o?void 0:o.indexOf(e))&&void 0!==n?n:-1)})),r]},d=function isPrimitiveType(e){return["bigint","boolean","number","string","symbol","undefined"].includes(typeof e)||null===e}},33978:(e,t,r)=>{"use strict";r.d(t,{xE:()=>i,hA:()=>s,mL:()=>l,eJ:()=>c,YY:()=>d});var n,o=r(64649),a=(r(83216),r(14042)),i={DATE:"年/月/日",DATETIME:"年/月/日/时/分",MONTH:"年/月",TIME:"时/分",DURATION:"时长：时/分/秒"},s={dismissText:"取消",okText:"完成"},l={okText:"确定",cancelText:"取消"},c={imageEmpty:["请选择图片"],imageFileSize:["请选择{{maxFileSize}}M以内的图片插入"],imageLengthOverflow:["最多同时插入{{maxFilesCount}}张图片",{action:"确定",autoClose:!1,duration:void 0}],imageType:["暂不支持本格式图片，请转化为JPG、PNG再上传"],network:["网络异常，不支持插入图片，请在网络正常后再试"],uploadPartialFail:["部分图片未插入成功，请稍后再试",{type:"error"}],uploadFail:["未成功插入图片，请稍后再试",{type:"error"}]},d=(n={},(0,o.Z)(n,a.c.AUTODEP,"自动部门题"),(0,o.Z)(n,a.c.AUTONAME,"自动姓名题"),(0,o.Z)(n,a.c.CANVAS,"签名题"),(0,o.Z)(n,a.c.CANVAS_IMAGE,"签名题"),(0,o.Z)(n,a.c.CHECKBOX,"多选题"),(0,o.Z)(n,a.c.COMMODITY,"商品题"),(0,o.Z)(n,a.c.DATE,"日期题"),(0,o.Z)(n,a.c.FILE,"文件题"),(0,o.Z)(n,a.c.FILEIMAGE,"图片题"),(0,o.Z)(n,a.c.FILLIN,"填空题"),(0,o.Z)(n,a.c.IMAGE,"图片题"),(0,o.Z)(n,a.c.INTELLIGENT_MATCH,"智能推荐题型"),(0,o.Z)(n,a.c.LOCATION,"地理位置"),(0,o.Z)(n,a.c.MATRIX_CHECKBOX,"矩阵题"),(0,o.Z)(n,a.c.MATRIX_RADIO,"矩阵题"),(0,o.Z)(n,a.c.MATRIX_RATING,"矩阵题"),(0,o.Z)(n,a.c.RADIO,"单选题"),(0,o.Z)(n,a.c.RATING,"评分题"),(0,o.Z)(n,a.c.RECOGNITION,"识图题"),(0,o.Z)(n,a.c.SCALE,"量表题"),(0,o.Z)(n,a.c.SEGMENTATION,"分节标题"),(0,o.Z)(n,a.c.SELECT,"下拉选择"),(0,o.Z)(n,a.c.SIMPLE,"问答题"),(0,o.Z)(n,a.c.TABLE,"表格题"),(0,o.Z)(n,a.c.TEMPERATURE,"体温题"),(0,o.Z)(n,a.c.TIME,"时间题"),(0,o.Z)(n,a.c.CASCADER,"多级选项题"),(0,o.Z)(n,a.c.VOTE,"投票题"),(0,o.Z)(n,a.c.SCAN,"扫码题"),(0,o.Z)(n,a.c.SORT,"排序题"),n)},12874:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n,o=r(25773),a=r(22951),i=r(91976),s=r(67591),l=r(94337),c=r(73428),d=r(27378),u=r(23615),p=r.n(u),m=r(66040),f=r(40500),h=(n=function(e){(0,s.Z)(AutoEllipsis,e);var t=(0,l.Z)(AutoEllipsis);function AutoEllipsis(e){var r;return(0,a.Z)(this,AutoEllipsis),(r=t.call(this,e)).state={expanded:!1},r}return(0,i.Z)(AutoEllipsis,[{key:"getShortStr",value:function getShortStr(){var e=this.props,t=e.maxLen,r=e.content,n=e.autoLink,o=r.slice(0,t);if(!n)return o;var a=(0,f.ml)(r),i=a.lastIndexOf('<a href="',t-1);if(-1===i)return a.slice(0,t);var s=a.indexOf("</a>",i);return a.slice(0,s+4)}},{key:"getFullStr",value:function getFullStr(){var e=this.props,t=e.content;return e.autoLink?(0,f.ml)(t):t}},{key:"toggleForm",value:function toggleForm(){var e=this.state.expanded;this.setState({expanded:!e})}},{key:"renderMain",value:function renderMain(){var e=this.props,t=e.autoLink,r=e.classNamePrefix,n=this.state.expanded?this.getFullStr():this.getShortStr(),a={dangerouslySetInnerHTML:{__html:n}};return t?d.createElement("span",(0,o.Z)({className:r},a)):d.createElement("span",{className:r},n)}},{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.expandText,n=e.foldText,o=this.state,a=o.canExpand,i=o.expanded;return d.createElement(d.Fragment,null,this.renderMain(),a?d.createElement("span",{className:"".concat(t,"-suffix")},i?null:d.createElement("span",{"aria-hidden":!0},"..."),d.createElement("span",{"aria-pressed":i,className:"".concat(t,"-btn"),role:"button",tabIndex:"0",onClick:this.toggleForm,onKeyUp:this.toggleForm},i?n:r)):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(e){return{canExpand:(0,f.hl)(e.content)>e.maxLen}}}]),AutoEllipsis}(d.PureComponent),(0,c.Z)(n.prototype,"toggleForm",[m.OT],Object.getOwnPropertyDescriptor(n.prototype,"toggleForm"),n.prototype),n);h.propTypes={autoLink:p().bool,classNamePrefix:p().string,content:p().string,expandText:p().string,foldText:p().string,maxLen:p().number},h.defaultProps={autoLink:!1,classNamePrefix:"form-auto-ellipsis",content:"",expandText:"展开",foldText:"收起",maxLen:150};const y=h},36080:(e,t,r)=>{"use strict";r.d(t,{H:()=>c});var n=r(25773),o=r(27378),a=r(23615),i=r.n(a),s=r(90005),l=r.n(s),c=(0,r(40500).W5)((function(e){var t=e.borderColor,r=e.backgroundDisabled,a=e.classNamePrefix,i=e.className,s=e.text,c=e.disabled,d=e.textDisabled,u=e.hasArrow,p=e.hasBorder,m=e.multiple,f=e.prefixNode,h=e.size,y=e.suffixNode,b={onClick:e.onClick};return o.createElement("div",(0,n.Z)({className:l()(i,a,"size-".concat(h),{disabled:c,multiple:m,"bg-disabled":r,"with-border":p}),style:{borderColor:t}},b),f,o.createElement("div",{className:l()("".concat(a,"-text"),{disabled:d})},s),y,u?o.createElement("div",{className:l()("".concat(a,"-arrow"))}):null)}));c.propTypes={backgroundDisabled:i().bool,borderColor:i().string,className:i().string,classNamePrefix:i().string,disabled:i().bool,hasArrow:i().bool,hasBorder:i().bool,multiple:i().bool,prefixNode:i().node,size:i().oneOf(["normal","small"]),suffixNode:i().node,text:i().node,textDisabled:i().bool,onClick:i().func},c.defaultProps={backgroundDisabled:!1,borderColor:"",className:"",classNamePrefix:"form-ui-component-basic",disabled:!1,hasArrow:!1,hasBorder:!0,multiple:!1,onClick:Function.prototype,prefixNode:null,size:"normal",suffixNode:null,text:"",textDisabled:!1},c.displayName="FormUIBasic"},18500:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(91976),o=r(22951),a=r(47169),i=r(67591),s=r(94337),l=r(64649),c=r(27378),d=r(23615),u=r.n(d),p=r(90005),m=r.n(p),f=r(40500),h=r(36080),y=function(e){(0,i.Z)(CascaderSelectCoreBase,e);var t=(0,s.Z)(CascaderSelectCoreBase);function CascaderSelectCoreBase(){return(0,o.Z)(this,CascaderSelectCoreBase),t.apply(this,arguments)}return(0,n.Z)(CascaderSelectCoreBase,[{key:"hasValue",get:function get(){return this.props.value.length>0}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.multiple,a=e.onClick,i=e.placeholder,s=e.value;return c.createElement(h.H,{hasArrow:!0,className:m()("".concat(r,"-main"),t),disabled:n,multiple:o,size:this.size,text:s||i,textDisabled:!this.hasValue,onClick:a})}}]),CascaderSelectCoreBase}(c.PureComponent);y.propTypes={className:u().string,classNamePrefix:u().string,disabled:u().bool,multiple:u().bool,placeholder:u().string,value:u().string,onClick:u().func},y.defaultProps={className:"",classNamePrefix:"form-cascader-select",disabled:!1,multiple:!1,onClick:f.dG,placeholder:"",value:""},y.displayName="CascaderSelectCore";var b=function(e){(0,i.Z)(CascaderSelectCorePC,e);var t=(0,s.Z)(CascaderSelectCorePC);function CascaderSelectCorePC(){var e;(0,o.Z)(this,CascaderSelectCorePC);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),(0,l.Z)((0,a.Z)(e),"size","small"),e}return(0,n.Z)(CascaderSelectCorePC)}(y)},2537:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(18500),p=r(27378),m=r(23615),f=r.n(m),h=r(90005),y=r.n(h),b=function(e){(0,l.Z)(CascaderSelectFillLoader,e);var t=(0,c.Z)(CascaderSelectFillLoader);function CascaderSelectFillLoader(e){var r;return(0,a.Z)(this,CascaderSelectFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(CascaderSelectFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,n=e.disabled,o=e.value,a=this.state.CascaderSelectFill;if(a)return p.createElement(a,this.props);var i=this.CascaderSelectCore;return p.createElement("div",{className:y()(t,"".concat(t,"-fill"),r)},p.createElement(i,{multiple:!0,classNamePrefix:t,disabled:n,value:o}))}}]),CascaderSelectFillLoader}(p.PureComponent);b.propTypes={className:f().string,classNamePrefix:f().string,disabled:f().bool,value:f().string},b.defaultProps={className:"",classNamePrefix:"form-cascader-select",disabled:!1,value:void 0},delete b.defaultProps.value;var g=function(e){(0,l.Z)(CascaderSelectFillPCLoader,e);var t,p=(0,c.Z)(CascaderSelectFillPCLoader);function CascaderSelectFillPCLoader(){var e;(0,a.Z)(this,CascaderSelectFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"CascaderSelectCore",u.Z),e}return(0,i.Z)(CascaderSelectFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([r.e("vendors-node_modules_tencent_form-ui-components_lib_components_cascader_cascader-pc_js"),r.e("node_modules_tencent_form-ui-components_lib_components_cascader-select_cascader-select-fill_c-ad9fce")]).then(r.bind(r,31757));case 2:e=n.sent,t=e.default,this.setState({CascaderSelectFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),CascaderSelectFillPCLoader}(b)},95661:(e,t,r)=>{"use strict";r.d(t,{f:()=>S});var n=r(11092),o=r(27791),a=r(11026),i=r(64649),s=(r(13227),r(54370),r(5153),r(67506),r(80566),r(50870),r(75397),r(18829),r(95498),r(51429),r(61842),r(25376),r(38333),r(95864),r(63990),r(94565),r(95073),r(65204),r(47072),r(98391),r(24338),r(22727),r(2002),r(19647),r(11431),r(32679),r(74413),r(67551),r(12249),r(57637),r(27378)),l=r(23615),c=r.n(l),d=r(90005),u=r.n(d),p=r(58539),m=r(72481),f=r(41589),h=r(1671),y=r(40500),b=r(16613),g=(0,y.W5)((function(e){var t,r=e.className,n=e.index,o=e.type,a=(t={},(0,i.Z)(t,p.Y.ALPHABET,String.fromCharCode(n+65)),(0,i.Z)(t,p.Y.NUMBER,n+1),t)[o];return a?s.createElement("span",{className:r},a,"."):null}));g.propTypes={className:c().string.isRequired,index:c().number.isRequired,type:c().string.isRequired},g.displayName="ChoiceOptionIndex";var v=(0,y.W5)((function(e){var t=e.className,r=e.placeholder,n=e.disabled,o=e.focus,a=e.onBlur,i=e.onChange,l=e.onFocus,c=e.readOnly,d=e.showError,u=e.value,p=(0,s.createRef)();return(0,s.useEffect)((function(){if(o){var e=p.current.inputRef.current;setTimeout((function(){null==e||e.focus()}))}}),[o]),s.createElement("div",{className:t,role:"row",tabIndex:"-1",onClick:function eventIntercept(e){c||n||e.stopPropagation()},onKeyDown:y.dG},s.createElement(b.Z,{ref:p,disabled:n,maxLength:m.OTHER_OPTION_MAX_LEN,placeholder:r,readOnly:c,showError:d,value:u,onBlur:a,onChange:i,onFocus:l}))}));v.propTypes={className:c().string.isRequired,disabled:c().bool.isRequired,focus:c().bool.isRequired,placeholder:c().string.isRequired,readOnly:c().bool.isRequired,showError:c().bool.isRequired,value:c().string.isRequired,onBlur:c().func.isRequired,onChange:c().func.isRequired,onFocus:c().func.isRequired},v.displayName="ChoiceOtherOption";var _=(0,y.W5)((function(e){var t,r=e.ImageGallery,n=e.classNamePrefix,o=e.desc,a=e.disabled,l=e.forceShowPlaceholder,c=e.images,d=e.index,m=e.isOther,f=e.onClick,h=e.onImageLoad,b=e.onOtherOptionBlur,_=e.onOtherOptionFocus,O=e.onOtherOptionValueChange,S=e.onPreviewImage,P=e.otherOptionPlaceholder,C=e.otherOptionError,w=e.otherOptionFocus,I=e.otherOptionValue,E=e.readOnly,T=e.SNType,N=e.selected,j=e.title,D=e.type,k=function getClassName(e){return"".concat(n,"-").concat(e," ").concat(n,"-").concat(D,"-").concat(e)};return s.createElement("div",{"aria-checked":N,role:D,tabIndex:"-1",className:u()(k("option"),{"is-other":m}),onClick:function handleClick(){f(d,N)},onKeyDown:y.dG},s.createElement("div",{className:u()((t={},(0,i.Z)(t,k("option-disabled"),a),(0,i.Z)(t,k("option-selected"),N),(0,i.Z)(t,k("option-normal"),!a&&!N),t))}),s.createElement("div",{className:k("option-content")},s.createElement("div",{className:k("option-text")},s.createElement(g,{className:k("option-text-index"),index:d,type:T}),s.createElement("span",{className:k("option-text-content")},j),m?s.createElement(v,{className:k("option-other"),disabled:a||!N,focus:w,placeholder:l||N?P:"",readOnly:E,showError:C,value:I,onBlur:b,onChange:O,onFocus:_}):null),c.length&&r?s.createElement(r,{images:c,size:"small",source:"option",className:u()(k("option-image-gallery"),(0,i.Z)({},k("option-image-gallery-no-text"),!(null!=j&&j.length)&&T===p.Y.NONE)),onImageLoad:h,onPreviewImage:S}):null,o?s.createElement("div",{className:k("option-desc")},o):null))}));_.propTypes={SNType:c().string.isRequired,classNamePrefix:c().string.isRequired,disabled:c().bool.isRequired,forceShowPlaceholder:c().bool.isRequired,images:c().arrayOf(c().string).isRequired,index:c().number.isRequired,isOther:c().bool.isRequired,otherOptionError:c().bool.isRequired,otherOptionFocus:c().bool.isRequired,otherOptionPlaceholder:c().string.isRequired,otherOptionValue:c().string.isRequired,readOnly:c().bool.isRequired,selected:c().bool.isRequired,type:c().string.isRequired,onClick:c().func.isRequired,onImageLoad:c().func.isRequired,onOtherOptionBlur:c().func.isRequired,onOtherOptionFocus:c().func.isRequired,onOtherOptionValueChange:c().func.isRequired,onPreviewImage:c().func.isRequired,ImageGallery:c().elementType,desc:c().node,title:c().string},_.displayName="ChoiceOption";var O=(0,y.W5)((function(e){var t=e.className,r=e.classNamePrefix,i=e.disabled,l=e.forceShowPlaceholder,c=e.getDesc,d=e.getOptionDesc,p=e.loadImageGallery,m=e.multiple,y=e.onOptionClick,b=e.onOptionImageLoad,g=e.onOptionImagePreview,v=e.onOtherOptionBlur,O=e.onOtherOptionFocus,S=e.onOtherOptionValueChange,P=e.options,C=e.otherOptionError,w=e.otherOptionFocus,I=e.otherOptionPlaceholder,E=e.otherOptionValue,T=e.readOnly,N=e.SNType,j=e.value,D=(0,s.useState)(null),k=(0,a.Z)(D,2),x=k[0],Z=k[1],L=(0,s.useState)(new Set),R=(0,a.Z)(L,2),A=R[0],F=R[1],M=m?"checkbox":"radio";return(0,s.useEffect)((function(){if(P.some((function(e){var t;return null===(t=e.images)||void 0===t?void 0:t.length}))){var e=function(){var e=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p();case 2:e=r.sent,t=e.default,Z((function(){return t}));case 5:case"end":return r.stop()}}),_callee)})));return function loadComponent(){return e.apply(this,arguments)}}();e()}}),[P]),(0,s.useEffect)((function(){F(new Set((0,f.xv)(P,j)))}),[P,j]),s.createElement("div",{className:u()(t,r,"".concat(r,"-").concat(M))},c(),P.map((function(e,t){var n=e.id,o=e.title,a=e.images,c=n.toString(),u=d(n,t,e),p=c===h.H,m=A.has(t);return s.createElement(_,{key:c,ImageGallery:x,SNType:N,classNamePrefix:r,desc:u,disabled:i,forceShowPlaceholder:l,images:a||[],index:t,isOther:p,otherOptionError:C,otherOptionFocus:w,otherOptionPlaceholder:I,otherOptionValue:E,readOnly:T,selected:m,title:o,type:M,onClick:y,onImageLoad:b,onOtherOptionBlur:v,onOtherOptionFocus:O,onOtherOptionValueChange:S,onPreviewImage:g})})))}));O.propTypes={SNType:c().string,className:c().string,classNamePrefix:c().string,disabled:c().bool,forceShowPlaceholder:c().bool,getDesc:c().func,getOptionDesc:c().func,loadImageGallery:c().func,options:c().arrayOf(c().shape({id:c().oneOfType([c().string,c().number]).isRequired,images:c().arrayOf(c().string),title:c().string})),otherOptionError:c().bool,otherOptionFocus:c().bool,otherOptionPlaceholder:c().string,otherOptionValue:c().string,readOnly:c().bool,value:c().arrayOf(c().shape({id:c().oneOfType([c().string,c().number]),title:c().string})),onOptionClick:c().func,onOptionImageLoad:c().func,onOptionImagePreview:c().func,onOtherOptionBlur:c().func,onOtherOptionFocus:c().func,onOtherOptionValueChange:c().func},O.defaultProps={className:"",classNamePrefix:"form-choice",disabled:!1,forceShowPlaceholder:!1,getDesc:y.dG,getOptionDesc:y.dG,loadImageGallery:y.dG,onOptionClick:y.dG,onOptionImageLoad:y.dG,onOptionImagePreview:y.dG,onOtherOptionBlur:y.dG,onOtherOptionFocus:y.dG,onOtherOptionValueChange:y.dG,options:[],otherOptionError:!1,otherOptionFocus:!1,otherOptionPlaceholder:"",otherOptionValue:"",readOnly:!1,SNType:p.Y.NONE,value:[]},O.displayName="ChoiceCore";var S=O},55803:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(95661),p=r(25773),m=r(27378),f=function loadImageGallery(){return{default:null}};var h=function(e){(0,l.Z)(ChoiceFillPCLoader,e);var t,p=(0,c.Z)(ChoiceFillPCLoader);function ChoiceFillPCLoader(){var e;(0,a.Z)(this,ChoiceFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"ChoiceCore",u.f),e}return(0,i.Z)(ChoiceFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_choice_choice-fill_choice-fill-pc_js").then(r.bind(r,49518));case 2:e=n.sent,t=e.default,this.setState({ChoiceFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),ChoiceFillPCLoader}(function(e){(0,l.Z)(ChoiceFillLoader,e);var t=(0,c.Z)(ChoiceFillLoader);function ChoiceFillLoader(e){var r;return(0,a.Z)(this,ChoiceFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(ChoiceFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.state.ChoiceFill;if(e)return m.createElement(e,this.props);var t=this.ChoiceCore;return m.createElement(t,(0,p.Z)({},this.props,{loadImageGallery:f}))}}]),ChoiceFillLoader}(m.PureComponent))},71540:(e,t,r)=>{"use strict";r.d(t,{k:()=>_});var n=r(50189),o=r(64649),a=r(11092),i=r(27791),s=r(11026),l=(r(91270),r(39690),r(74413),r(92243),r(19717),r(98704),r(12249),r(57637),r(27378)),c=r(23615),d=r.n(c),u=r(90005),p=r.n(u),m=r(40500),f=(0,m.W5)((function(e){var t=e.classNamePrefix,n=e.disabled,o=e.id,c=e.inputType,d=e.label,u=e.onChange,m=e.max,f=e.maxLength,h=e.min,y=e.value,b=l.useState(null),g=(0,s.Z)(b,2),v=g[0],_=g[1];l.useEffect((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function _callee(){var e,t;return(0,a.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then(r.bind(r,28790));case 2:e=n.sent,t=e.default,_((function(){return t}));case 5:case"end":return n.stop()}}),_callee)})));return function loadComponent(){return e.apply(this,arguments)}}();e()}),Array.from({}));var O=p()("".concat(t,"-input"));return l.createElement("div",{className:t},l.createElement("div",{className:"".concat(t,"-label")},d),l.createElement("i",{"aria-label":"减少",role:"button",tabIndex:0,className:p()("".concat(t,"-decrease"),{disabled:n||y<=h}),onClick:function handleDecrease(){return u(o,y-1)},onKeyDown:Function.prototype}),v?l.createElement(v,{autoSelect:!0,className:O,disabled:n,inputType:c,max:m,maxLength:f,min:Math.max(h,0),precision:0,showStep:!1,value:"".concat(y),onChange:function handleChange(e){var t=e.target;return u(o,Number(t.value))}}):l.createElement("div",{className:O}),l.createElement("i",{"aria-label":"增加",role:"button",tabIndex:0,className:p()("".concat(t,"-increase"),{disabled:n||y>=m}),onClick:function handleIncrease(){return u(o,y+1)},onKeyDown:Function.prototype}))}));f.propTypes={classNamePrefix:d().string.isRequired,disabled:d().bool.isRequired,id:d().string.isRequired,inputType:d().string.isRequired,label:d().string.isRequired,max:d().number.isRequired,maxLength:d().number.isRequired,min:d().number.isRequired,value:d().number.isRequired,onChange:d().func.isRequired},f.displayName="CommodityQuantity";var h=(0,m.W5)((function(e){var t=e.classNamePrefix,r=e.price;return l.createElement("div",{className:t},l.createElement("span",{className:"".concat(t,"-unit")},"¥"),l.createElement("span",{className:"".concat(t,"-num")},r||0))}));h.propTypes={classNamePrefix:d().string.isRequired,price:d().oneOfType([d().number,d().string])},h.displayName="CommodityPrice";var y=(0,m.W5)((function(e){var t=e.classNamePrefix,r=e.hasTitle,n=e.images,c=e.loadImageGallery,d=e.onReport,u=l.useState(null),m=(0,s.Z)(u,2),f=m[0],h=m[1];return l.useEffect((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function _callee2(){var e,t;return(0,a.Z)().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c();case 2:e=r.sent,t=e.default,h((function(){return t}));case 5:case"end":return r.stop()}}),_callee2)})));return function loadComponent(){return e.apply(this,arguments)}}();e()}),Array.from({})),f?l.createElement(f,{images:n,size:"small",source:"commodity-item",className:p()(t,(0,o.Z)({},"".concat(t,"-no-text"),!r)),onReport:d}):null}),(function commodityImageIsEqual(e,t){return Object.keys(t).every((function(r){return"".concat(t[r])==="".concat(e[r])}))}));y.propTypes={classNamePrefix:d().string.isRequired,hasTitle:d().bool.isRequired,images:d().arrayOf(d().string).isRequired,loadImageGallery:d().func.isRequired,onReport:d().func.isRequired},y.displayName="CommodityImage";var b=(0,m.W5)((function(e){var t=e.classNamePrefix,r=e.disabled,n=e.id,o=e.images,a=e.inputType,i=e.loadImageGallery,s=e.maxQuantity,c=e.minQuantity,d=e.onChange,u=e.onReport,p=e.price,m=e.quantity,b=e.quantityLabel,g=e.quantityMaxLength,v=e.title;return l.createElement("div",{className:t},l.createElement("div",{className:"".concat(t,"-icon")}),l.createElement("div",{className:"".concat(t,"-main")},l.createElement("div",{className:"".concat(t,"-title")},v),l.createElement(y,{classNamePrefix:"".concat(t,"-image-gallery"),hasTitle:Boolean(v),images:o,loadImageGallery:i,onReport:u}),l.createElement(h,{classNamePrefix:"".concat(t,"-price"),price:p}),l.createElement(f,{classNamePrefix:"".concat(t,"-quantity"),disabled:r,id:n,inputType:a,label:b,max:s,maxLength:g,min:c,value:m,onChange:d})))}));b.propTypes={classNamePrefix:d().string.isRequired,disabled:d().bool.isRequired,id:d().string.isRequired,images:d().arrayOf(d().string).isRequired,inputType:d().string.isRequired,loadImageGallery:d().func.isRequired,maxQuantity:d().number.isRequired,minQuantity:d().number.isRequired,price:d().oneOfType([d().string,d().number]).isRequired,quantity:d().number.isRequired,quantityLabel:d().string.isRequired,quantityMaxLength:d().number.isRequired,onChange:d().func.isRequired,onReport:d().func.isRequired,title:d().string},b.displayName="CommodityItem";var g=(0,m.W5)((function(e){var t=e.classNamePrefix,r=e.label,n=e.sum;return l.createElement("div",{className:t},l.createElement("div",{className:"".concat(t,"-label")},r),l.createElement("div",{className:"".concat(t,"-unit")},"¥"),l.createElement("div",{className:"".concat(t,"-num")},n))}));g.propTypes={classNamePrefix:d().string.isRequired,label:d().string.isRequired,sum:d().string.isRequired},g.displayName="CommoditySummary";var v=(0,m.W5)((function(e){var t=e.className,r=e.classNamePrefix,a=e.disabled,i=e.inputType,s=e.loadImageGallery,c=e.maxQuantity,d=e.minQuantity,u=e.onItemChange,m=e.onReport,f=e.options,h=e.quantityLabel,y=e.quantityMaxLength,v=e.summaryLabel,_=e.summaryNum,O=e.value,S=l.useMemo((function(){return O.reduce((function(e,t){return(0,n.Z)((0,n.Z)({},e),{},(0,o.Z)({},t.id,t))}),{})}),[O]);return l.createElement("div",{className:p()(r,t)},f.map((function(e){var t,n=e.id,o=e.images,p=void 0===o?[]:o,f=e.price,g=void 0===f?0:f,v=e.title;return l.createElement(b,{key:n,classNamePrefix:"".concat(r,"-item"),disabled:a,id:n,images:p,inputType:i,loadImageGallery:s,maxQuantity:c,minQuantity:d,price:g,quantity:(null===(t=S[n])||void 0===t?void 0:t.quantity)||0,quantityLabel:h,quantityMaxLength:y,title:v,onChange:u,onReport:m})})),l.createElement(g,{classNamePrefix:"".concat(r,"-summary"),label:v,sum:_}))}));v.propTypes={className:d().string,classNamePrefix:d().string,disabled:d().bool,inputType:d().string,loadImageGallery:d().func,maxQuantity:d().number,minQuantity:d().number,options:d().arrayOf(d().shape({id:d().string,images:d().arrayOf(d().string),price:d().oneOfType([d().string,d().number]),title:d().string})),quantityLabel:d().string,quantityMaxLength:d().number,summaryLabel:d().string,summaryNum:d().string,value:d().arrayOf(d().shape({id:d().string,quantity:d().number})),onItemChange:d().func,onReport:d().func},v.defaultProps={className:"",classNamePrefix:"form-commodity",disabled:!1,inputType:"text",loadImageGallery:Function.prototype,maxQuantity:1/0,minQuantity:0,onItemChange:Function.prototype,onReport:Function.prototype,options:[],quantityLabel:"选购",quantityMaxLength:1/0,summaryLabel:"应付",summaryNum:"0",value:[]},v.displayName="CommodityCore";var _=v},38917:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(71540),p=r(25773),m=r(27378),f=function loadImageGallery(){return{default:null}};var h=function(e){(0,l.Z)(CommodityFillPCLoader,e);var t,p=(0,c.Z)(CommodityFillPCLoader);function CommodityFillPCLoader(){var e;(0,a.Z)(this,CommodityFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"CommodityCore",u.k),e}return(0,i.Z)(CommodityFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_commodity_commodity-fill_commodity-fil-f40c6a").then(r.bind(r,54773));case 2:e=n.sent,t=e.default,this.setState({CommodityFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),CommodityFillPCLoader}(function(e){(0,l.Z)(CommodityFillLoader,e);var t=(0,c.Z)(CommodityFillLoader);function CommodityFillLoader(e){var r;return(0,a.Z)(this,CommodityFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(CommodityFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.state.CommodityFill;if(e)return m.createElement(e,this.props);var t=this.CommodityCore;return m.createElement(t,(0,p.Z)({},this.props,{loadImageGallery:f}))}}]),CommodityFillLoader}(m.Component))},89062:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var n=r(27378),o=r(23615),a=r.n(o),i=r(40500),s=r(36080),l=(0,i.W5)((function(e){var t=e.readOnly,r=e.className,o=e.classNamePrefix,a=e.placeholder,i=e.prefixNode,l=e.size,c=e.suffixNode,d=e.value,u=e.onClick,p=void 0===i?n.createElement("div",{className:"".concat(o,"-icon")}):i;return n.createElement(s.H,{className:r,disabled:t,hasArrow:!c,prefixNode:p,size:l,suffixNode:c,text:d||a,textDisabled:!d,onClick:t?void 0:u})}));l.propTypes={className:a().string,classNamePrefix:a().string,placeholder:a().string,prefixNode:a().node,readOnly:a().bool,suffixNode:a().node,value:a().string,onClick:a().func},l.defaultProps={className:"",classNamePrefix:"form-datetime",onClick:Function.prototype,placeholder:"请选择",prefixNode:void 0,readOnly:!1,size:"small",suffixNode:void 0,value:""},l.displayName="DateTimeCore"},10899:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(67591),l=r(94337),c=r(27378),d=r(23615),u=r.n(d),p=r(89062),m=function(e){(0,s.Z)(DateFillLoader,e);var t=(0,l.Z)(DateFillLoader);function DateFillLoader(e){var r;return(0,a.Z)(this,DateFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(DateFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.disabled,n=e.value,o=this.state.DateFill;return o?c.createElement(o,this.props):c.createElement(p.M,{className:t,readOnly:r,value:n})}}]),DateFillLoader}(c.PureComponent);m.propTypes={className:u().string,disabled:u().bool,value:u().string},m.defaultProps={className:"",disabled:!1,value:void 0},delete m.defaultProps.value;var f=function(e){(0,s.Z)(DateFillPCLoader,e);var t,c=(0,l.Z)(DateFillPCLoader);function DateFillPCLoader(){return(0,a.Z)(this,DateFillPCLoader),c.apply(this,arguments)}return(0,i.Z)(DateFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_date_date-fill_date-fill-pc_js").then(r.bind(r,73042));case 2:e=n.sent,t=e.default,this.setState({DateFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),DateFillPCLoader}(m)},30790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(91976),o=r(22951),a=r(67591),i=r(94337),s=r(64649),l=(r(48316),r(27378)),c=r(23615),d=r.n(c),u=r(90005),p=r.n(u),m=r(21886),f=r(14042);var h,y=r(21806),b=(0,m.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_file-image-default_locale_en_US_js").then(r.bind(r,25416))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_file-image-default_locale_zh_TW_js").then(r.bind(r,58748))},locale:{fileTypes:{doc:"文字文档",sheet:"表格",ppt:"演示文稿",pdf:"PDF",video:"视频",audio:"音频",image:"图片"},fileDesc:"文件要求：{{FILE_TYPE}}{{DELIMITER:，}}{{FILE_SIZE:上限}}",fileDescUnlimited:"文件要求：无限制",imageDesc:"图片要求：{{MAX:最多}}{{MIN:最少}}{{UNIT:张}}{{DELIMITER:，}}{{IMAGE_SIZE:上限}}{{WATERMARK:，显示水印}}",imageDescUnlimited:"图片要求：无限制",placeholder:{edit:{file:"待填写人添加文件",image:"待填写人添加图片",imageOnlyCamera:"待填写人拍照上传"},fill:{file:"添加文件",image:"添加图片",imageOnlyCamera:"拍照上传"},disabled:{file:"你未提交文件",image:"你未提交图片",imageOnlyCamera:"你未提交图片"}}}})(h=function(e){(0,a.Z)(FileImageDefault,e);var t=(0,i.Z)(FileImageDefault);function FileImageDefault(){return(0,o.Z)(this,FileImageDefault),t.apply(this,arguments)}return(0,n.Z)(FileImageDefault,[{key:"desc",get:function get(){var e,t,r=this.props,n=r.type,o=r.desc,a=r.qdata,i=this.state.locale;return o||(null!==(e=(t={},(0,s.Z)(t,f.c.FILE,y.o),(0,s.Z)(t,f.c.FILEIMAGE,y.Y),t)[n])&&void 0!==e?e:function(){return""})(a,i)}},{key:"iconType",get:function get(){var e=this.props,t=e.type,r=e.qdata;return t===f.c.FILEIMAGE&&r.onlyCamera?"camera":"default"}},{key:"placeholder",get:function get(){var e=this.props,t=e.type,r=e.qdata,n=e.disabled,o=e.editable,a=e.placeholder,i=this.state.locale.placeholder;return a||(o?i.edit:n?i.disabled:i.fill)[t===f.c.FILE?"file":r.onlyCamera?"imageOnlyCamera":"image"]}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.editable,a=e.onClick,i=this.desc,s=this.iconType,c=this.placeholder;return l.createElement("div",{role:"button",tabIndex:"-1",className:p()(t,"".concat(r,"-default"),{disabled:n&&!o}),onClick:n?Function.prototype:a,onKeyDown:Function.prototype},l.createElement("div",{className:"".concat(r,"-default-main icon-").concat(s)},c),i?l.createElement("div",{className:"".concat(r,"-default-desc")},i):null)}}]),FileImageDefault}(l.PureComponent))||h;b.propTypes={className:d().string,classNamePrefix:d().string,desc:d().string,disabled:d().bool,editable:d().bool,placeholder:d().string,qdata:d().shape({fileNum:d().shape({max:d().number,min:d().number}),fileSize:d().number,fileType:d().arrayOf(d().string),onlyCamera:d().bool,watermark:d().bool}),type:d().oneOf([f.c.FILEIMAGE,f.c.FILE]),onClick:d().func},b.defaultProps={className:"",classNamePrefix:"form-file-image",desc:"",disabled:!1,editable:!1,onClick:Function.prototype,placeholder:"",qdata:{},type:f.c.FILEIMAGE};const g=function(e){(0,a.Z)(FileImageDefaultPC,e);var t=(0,i.Z)(FileImageDefaultPC);function FileImageDefaultPC(){return(0,o.Z)(this,FileImageDefaultPC),t.apply(this,arguments)}return(0,n.Z)(FileImageDefaultPC)}(b)},31859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n,o=r(50189),a=r(22951),i=r(91976),s=r(47169),l=r(43243),c=r(27597),d=r(67591),u=r(94337),p=r(64649),m=r(73428),f=r(27378),h=r(23615),y=r.n(h),b=r(26725),g=r(80617),v=r(66040),_=(r(66066),r(12249),r(57637),r(90005)),O=r.n(_),S=r(25449),P=r(21886),C=r(14042),w=r(51830),I=r(88117),E=r(40500),T=(0,P.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_file-image_locale_en_US_js").then(r.bind(r,23876))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_file-image_locale_zh_TW_js").then(r.bind(r,90643))},locale:w.Z})(n=function(e){(0,d.Z)(FileImageCore,e);var t=(0,u.Z)(FileImageCore);function FileImageCore(){return(0,a.Z)(this,FileImageCore),t.apply(this,arguments)}return(0,i.Z)(FileImageCore,[{key:"renderSingleFileImageBase",value:function renderSingleFileImageBase(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.KJ.normal,o=this.props.classNamePrefix,a=this.state.locale,i=a.uploadFail,s=a.loadFail;return f.createElement("div",{key:e.id,className:O()("".concat(o,"-item"),{uploading:I.MH.includes(e.status),fail:e.status===I.tm.fail,big:n===I.KJ.big})},this.renderImageMain(e,t),null===(r=this.renderImageSlot)||void 0===r?void 0:r.call(this,t),I.MH.includes(e.status)?f.createElement(S.default,{className:"loading",spinType:"primary"}):null,e.status===I.tm.fail?f.createElement("div",{className:"error"},f.createElement("div",{className:"error-icon"}),i):null,I.m_.includes(e.errCode)?f.createElement("div",{className:"error gray-bg"},f.createElement("div",{className:"error-icon"}),s):null)}},{key:"renderImageMain",value:function renderImageMain(e,t){var r=this;return I.m_.includes(e.errCode)?null:f.createElement("div",{role:"button",tabIndex:"-1",onClick:function onClick(){return r.handleClickFileImage(t)},onKeyDown:E.dG},f.createElement("img",{alt:"图片",className:"picture",src:e.src}))}},{key:"renderAddButton",value:function renderAddButton(){var e=this.props,t=e.classNamePrefix,r=e.disabled,n=e.maxCount,o=e.fileImages.length,a=e.onClickAddBtn,i=this.state.locale.addImage;return r||o>=n?null:f.createElement("div",{className:"".concat(t,"-add-btn"),role:"button",tabIndex:"-1",onClick:a,onKeyDown:Function.prototype},f.createElement("div",{className:"add-icon"}),i)}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.fileImages,a=e.lang,i=e.maxCount,s=e.qdata,l=e.onClickAddBtn,c=this.FileImageDefault;return null!=o&&o.length?1!==o.length||1!==i&&!n?f.createElement("div",{className:O()(r,t)},f.createElement("div",{className:"".concat(r,"-content")},o.map(this.renderSingleFileImage)),this.renderAddButton()):this.renderSingleFileImage(o[0],0,I.KJ.big):f.createElement(c,{disabled:n,lang:a,qdata:s,type:C.c.FILEIMAGE,onClick:l})}}]),FileImageCore}(f.PureComponent))||n;T.propTypes={className:y().string,classNamePrefix:y().string,disabled:y().bool,fileImages:y().arrayOf(y().shape({id:y().oneOfType([y().number,y().string]).isRequired,src:y().string.isRequired,status:y().number})),maxCount:y().number,qdata:y().shape({fileNum:y().shape({max:y().number,min:y().number}),fileSize:y().number,onlyCamera:y().bool,watermark:y().bool}),onClickAddBtn:y().func},T.defaultProps={className:"",classNamePrefix:"form-file-image",disabled:!1,fileImages:[],maxCount:6,onClickAddBtn:Function.prototype,qdata:{}},T.displayName="FileImageCore";const N=T;var j,D=r(30790),k=(j=function(e){(0,d.Z)(FileImageCorePC,e);var t=(0,u.Z)(FileImageCorePC);function FileImageCorePC(){var e;(0,a.Z)(this,FileImageCorePC);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,p.Z)((0,s.Z)(e),"FileImageDefault",D.Z),e}return(0,i.Z)(FileImageCorePC,[{key:"handleClickFileImage",value:function handleClickFileImage(e){(0,this.props.onClickFileImage)(e)}},{key:"handleClickMenu",value:function handleClickMenu(e,t){var r,n=this.props,o=n.onDeleteFileImage,a=n.onUpdateFileImage;(0,(r={},(0,p.Z)(r,I.L2.delete,o),(0,p.Z)(r,I.L2.update,a),r)[e])(t)}},{key:"renderMenu",value:function renderMenu(e){var t=this,r=this.state.locale,n=r.deleteImage,o=r.updateImage;return f.createElement(g.default,{itemStyle:{cursor:"pointer"},selectable:!1,onClick:function onClick(r){return t.handleClickMenu(r,e)}},f.createElement(g.default.Item,{id:I.L2.update},o),f.createElement(g.default.Item,{id:I.L2.delete},n))}},{key:"renderImageSlot",value:function renderImageSlot(e){var t=this.props.disabled,r=this.renderMenu(e);return t?null:f.createElement("div",{className:"menu-icon-wrap"},f.createElement(b.default,{alignment:"right",dropContent:r},f.createElement("div",{className:"menu-icon"})))}},{key:"renderSingleFileImage",value:function renderSingleFileImage(e,t,r){return(0,l.Z)((0,c.Z)(FileImageCorePC.prototype),"renderSingleFileImageBase",this).call(this,e,t,r)}}]),FileImageCorePC}(N),(0,m.Z)(j.prototype,"renderSingleFileImage",[v.xB],Object.getOwnPropertyDescriptor(j.prototype,"renderSingleFileImage"),j.prototype),j);k.propTypes=(0,o.Z)((0,o.Z)({},N.propTypes),{},{onClickFileImage:y().func,onDeleteFileImage:y().func,onUpdateFileImage:y().func}),k.defaultProps=(0,o.Z)((0,o.Z)({},N.defaultProps),{},{onClickFileImage:Function.prototype,onDeleteFileImage:Function.prototype,onUpdateFileImage:Function.prototype});const x=k},51830:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={actionSheetCancel:"取消",addImage:"添加图片",imgCountOutOfRange:"图片最多上传{{maxCount}}张",deleteImage:"删除",updateImage:"替换图片",selectPhoto:"从相册中选择",takePhoto:"拍照",uploadFail:"上传失败",loadFail:"图片已删除"}},31461:(e,t,r)=>{"use strict";r.d(t,{e:()=>x});var n,o=r(22951),a=r(91976),i=r(47169),s=r(67591),l=r(94337),c=r(64649),d=r(73428),u=(r(12249),r(57637),r(27378)),p=r(35047),m=r(26725),f=r(77900),h=r(80617),y=r(19199),b=r(66040),g=r(11026),v=(r(91270),r(66066),r(23615)),_=r.n(v),O=r(90005),S=r.n(O),P=r(98798),C=r(80886),w=r(21886),I=r(41589),E=r(14042),T=r(8090),N=r(88117),j=(0,w.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_file_locale_en_US_js").then(r.bind(r,26191))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_file_locale_zh_TW_js").then(r.bind(r,97218))},locale:T.Z})(n=function(e){(0,s.Z)(FileCoreBase,e);var t=(0,l.Z)(FileCoreBase);function FileCoreBase(){return(0,o.Z)(this,FileCoreBase),t.apply(this,arguments)}return(0,a.Z)(FileCoreBase,[{key:"handleClickMenu",value:function handleClickMenu(e,t){var r,n=this.props,o=n.onClickFile,a=n.onDeleteFile,i=n.onUpdateFile,s=n.onViewFile;(0,(r={},(0,c.Z)(r,N.L2.download,o),(0,c.Z)(r,N.L2.delete,a),(0,c.Z)(r,N.L2.update,i),(0,c.Z)(r,N.L2.view,s),r)[e])(t)}},{key:"getMenuOperations",value:function getMenuOperations(e){var t=this.props,r=t.classNamePrefix,n=t.disabled,o=t.files,a=this.state.locale,i=a.downloadFile,s=a.deleteFile,l=a.updateFile,c=a.viewFile,d=[];return o[e].status===N.tm.success&&(d=d.concat([{id:N.L2.download,title:i},{id:N.L2.view,title:c}])),n||(d=d.concat([{id:N.L2.update,title:l},{id:N.L2.delete,title:s,className:"".concat(r,"-operation-delete")}])),d}},{key:"showAddButton",get:function get(){var e=this.props,t=e.disabled,r=e.files.length,n=e.maxCount;return!t&&r<n}},{key:"renderAddButton",value:function renderAddButton(){var e=this.props,t=e.classNamePrefix,r=e.onClickAddBtn,n=this.state.locale.addFile;return this.showAddButton?u.createElement("div",{className:"".concat(t,"-add-btn"),role:"button",tabIndex:"-1",onClick:r,onKeyDown:Function.prototype},u.createElement("div",{className:"add-icon"}),n):null}},{key:"renderFileNameBase",value:function renderFileNameBase(e){var t=this.props.classNamePrefix,r="".concat(t,"-content-item-info"),n=function getFileNamePart(e){var t=e.match(/(.*)(..\..*)/)||[null,e,""];return t.shift(),Array.from(t)}(e),o=(0,g.Z)(n,2),a=o[0],i=o[1];return u.createElement("div",{className:"".concat(r,"-name")},u.createElement("span",{className:"".concat(r,"-name-part1")},a),u.createElement("span",{className:"".concat(r,"-name-part2")},i))}},{key:"renderSingleFileBase",value:function renderSingleFileBase(e,t){var r,n=this,o=this.props.classNamePrefix,a=this.state.locale,i=a.uploadingText,s=a.uploadFailText,l=this.Divider,c=this.Loading,d="".concat(o,"-content-item"),p=e.id,m=e.name,f=e.size,h=e.type,y=e.status;return u.createElement("div",{key:p,className:d,role:"button",tabIndex:"-1",onClick:function onClick(){var e;return null===(e=n.handleClickFileItem)||void 0===e?void 0:e.call(n,t)},onKeyDown:Function.prototype},u.createElement(P.a,{className:"".concat(d,"-icon"),docType:C.e8.Drive,extensionName:h}),u.createElement("div",{className:"".concat(d,"-info")},this.renderFileName(m),u.createElement("div",{className:"".concat(d,"-info-sub")},y===N.tm.success?"".concat((0,I.H8)(Number(f),"B","AUTO",2),"B"):null,N.MH.includes(y)?u.createElement(u.Fragment,null,u.createElement(c,{className:"loading",spinType:"primary"}),u.createElement("div",null,i)):null,y===N.tm.fail?u.createElement(u.Fragment,null,u.createElement("div",{className:"fail"}),u.createElement("div",{className:"fail-text"},s)):null)),u.createElement(l,{className:"divider",orientation:"vertical"}),null===(r=this.renderMenuIcon)||void 0===r?void 0:r.call(this,t))}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.files,a=e.lang,i=e.qdata,s=e.onClickAddBtn,l=this.FileImageDefault;return null!=o&&o.length?u.createElement("div",{className:S()(r,t)},u.createElement("div",{className:S()("".concat(r,"-content"),{"with-add-btn":this.showAddButton})},o.map(this.renderSingleFile)),this.renderAddButton()):u.createElement(l,{disabled:n,lang:a,qdata:i,type:E.c.FILE,onClick:s})}}]),FileCoreBase}(u.PureComponent))||n;j.propTypes={className:_().string,classNamePrefix:_().string,disabled:_().bool,files:_().arrayOf(_().shape({id:_().oneOfType([_().number,_().string]).isRequired,name:_().string,size:_().oneOfType([_().number,_().string]),status:_().number,type:_().string})),maxCount:_().number,qdata:_().shape({fileSize:_().number,fileType:_().arrayOf(_().string)}),onClickAddBtn:_().func,onClickFile:_().func,onDeleteFile:_().func,onUpdateFile:_().func,onViewFile:_().func},j.defaultProps={className:"",classNamePrefix:"form-file",disabled:!1,files:[],maxCount:6,onClickAddBtn:Function.prototype,onClickFile:Function.prototype,onDeleteFile:Function.prototype,onUpdateFile:Function.prototype,onViewFile:_().func,qdata:{}},j.displayName="FileCore";var D,k=r(30790),x=(D=function(e){(0,s.Z)(FileCorePC,e);var t=(0,l.Z)(FileCorePC);function FileCorePC(){var e;(0,o.Z)(this,FileCorePC);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n)),(0,c.Z)((0,i.Z)(e),"Divider",p.ZP),(0,c.Z)((0,i.Z)(e),"FileImageDefault",k.Z),(0,c.Z)((0,i.Z)(e),"Loading",f.default),e}return(0,a.Z)(FileCorePC,[{key:"handleClickFileItem",value:function handleClickFileItem(e){(0,this.props.onViewFile)(e)}},{key:"renderSingleFile",value:function renderSingleFile(e,t){return this.renderSingleFileBase(e,t)}},{key:"renderFileName",value:function renderFileName(e){return u.createElement(y.default,{className:"name-tooltip",placement:"bottom",title:e},this.renderFileNameBase(e))}},{key:"renderMenu",value:function renderMenu(e){var t=this,r=this.getMenuOperations(e);return u.createElement(h.default,{itemStyle:{cursor:"pointer"},selectable:!1,onClick:function onClick(r){return t.handleClickMenu(r,e)}},r.map((function(e){return u.createElement(h.default.Item,{key:e.id,id:e.id},e.title)})))}},{key:"renderMenuIcon",value:function renderMenuIcon(e){var t=this.props.classNamePrefix,r="".concat(t,"-content-item"),n=this.renderMenu(e);return u.createElement("div",{className:"".concat(r,"-menu"),role:"button",tabIndex:"-1",onClick:function onClick(e){return e.stopPropagation()},onKeyDown:Function.prototype},u.createElement(m.default,{alignment:"right",dropContent:n},u.createElement("div",{className:"".concat(r,"-menu-wrapper")},u.createElement("div",{className:"".concat(r,"-menu-icon")}))))}}]),FileCorePC}(j),(0,d.Z)(D.prototype,"renderSingleFile",[b.xB],Object.getOwnPropertyDescriptor(D.prototype,"renderSingleFile"),D.prototype),D)},8090:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={deleteFile:"删除",downloadFile:"下载文件",updateFile:"替换文件",uploadingText:"上传中...",uploadFailText:"上传失败",viewFile:"预览文件",addFile:"添加文件"}},22843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n,o,a,i,s=r(22951),l=r(91976),c=r(47169),d=r(67591),u=r(94337),p=r(64649),m=r(27378),f=r(77900),h=r(25773),y=r(50189),b=r(11026),g=r(73428),v=(r(12249),r(57637),r(90005)),_=r.n(v),O=r(23615),S=r.n(O),P=r(66040),C=r(37154),w=r(81086),I=r(40500),E=(n=(0,P.w0)(),i=function(e){(0,d.Z)(ImageGallery,e);var t=(0,u.Z)(ImageGallery);function ImageGallery(e){var r;return(0,s.Z)(this,ImageGallery),(r=t.call(this,e)).imageThumbnailPrefix="imageMogr2/thumbnail",r.imageDefaultSizeMap={small:[84,84],normal:[90,90],single:[240,180]},r.handleVisibleChange=ImageGallery.imageGalleryPopoverVisibleChange.bind(null,(0,c.Z)(r)),r}return(0,l.Z)(ImageGallery,[{key:"handleDeleteImage",value:function handleDeleteImage(e,t){var r=this.props;(0,r.onDeleteImage)(e,t,r.images)}},{key:"handleReplaceImage",value:function handleReplaceImage(e,t){var r=this.props,n=r.onReplaceImage,o=r.images,a=document.createElement("input");a.style.display="none",a.type="file",a.accept="image/*",a.multiple=!1,a.onchange=function(r){n(r,e,t,o),setTimeout((function(){document.body.removeChild(a)}),150)},document.body.appendChild(a),a.click()}},{key:"handleImgLoad",value:function handleImgLoad(){(0,this.props.onImageLoad)()}},{key:"getImageToDisplay",value:function getImageToDisplay(e,t){if(t){var r=(0,b.Z)(this.imageDefaultSizeMap.single,2),n=r[0],o=r[1],a="".concat(this.imageThumbnailPrefix,"/!").concat(n,"x").concat(o,"r");return(0,C.At)(e,a)}var i=this.props.thumbnail;if(i>0){var s="".concat(this.imageThumbnailPrefix,"/!").concat(i,"p");return(0,C.At)(e,s)}var l=this.props.size,c=(0,b.Z)(this.imageDefaultSizeMap[l],2),d=c[0],u=c[1],p="".concat(this.imageThumbnailPrefix,"/!").concat(d,"x").concat(u,"r");return(0,C.At)(e,p)}},{key:"renderImageItem",value:function renderImageItem(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.props,o=n.readOnly,a=n.imageClassName,i=n.imageExtraAttributes,s=n.lang,l=(0,y.Z)({className:_()(a),src:e,onAfterImgLoad:this.handleImgLoad},i),c=this.renderMask(r);if(!o){var d=this.ImagePopover;return m.createElement(m.Suspense,{fallback:null},m.createElement(d,{lang:s,onDelete:function onDelete(){return t.handleDeleteImage(e,r)},onPreview:function onPreview(){return t.handlePreviewImage(e,r)},onReplace:function onReplace(){return t.handleReplaceImage(e,r)},onVisibleChange:this.handleVisibleChange},m.createElement(w.Z,l),c))}return c?m.createElement("div",{role:"button",style:{width:"100%",height:"100%"},tabIndex:0,onClick:function onClick(){return t.handlePreviewImage(e,r)},onKeyDown:I.dG},m.createElement(w.Z,l),c):m.createElement(w.Z,(0,h.Z)({},l,{onClick:function onClick(){return t.handlePreviewImage(e,r)}}))}},{key:"renderImageItemPlaceholder",value:function renderImageItemPlaceholder(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.props.classNamePrefix;return m.createElement(m.Fragment,null,m.createElement("div",{className:"".concat(r,"-item-placeholder")}),this.renderDeleteIcon(e,t))}},{key:"renderImageGalleryItem",value:function renderImageGalleryItem(e,t){var r=this.props,n=r.images,o=r.itemExtraAttributes,a=r.itemClassName,i=r.size,s=r.layout,l=r.classNamePrefix,c="grid"===s||n.length>1,d=function imageGalleryMultipleItemsWrapper(e){return m.createElement("div",(0,h.Z)({key:t,className:_()("".concat(l,"-item"),(0,p.Z)({grid:c},i,c),a)},o),e)};if(!e)return d(this.renderImageItemPlaceholder(e,t));var u=this.getImageToDisplay(e,!c);return d(this.renderImageItem(u,t))}},{key:"renderDeleteIcon",value:function renderDeleteIcon(e,t){var r=this;return this.props.readOnly?null:m.createElement("div",{"aria-label":"删除图片",className:"delete-icon",role:"button",tabIndex:"-1",onClick:function onClick(){return r.handleDeleteImage(e,t)},onKeyDown:I.dG})}},{key:"renderMask",value:function renderMask(e){var t=this.props,r=t.images,n=t.maxDisplay,o=t.overflowText,a=r.length-n;return a<=0||e!==n-1?null:m.createElement("div",{className:"image-mask"},o?m.createElement("span",{className:"image-mask-text"},o):m.createElement("span",{className:"image-mask-num"},"+".concat(a)))}},{key:"render",value:function render(){var e=this.props.images;if(null==e||!e.length)return null;var t=this.props,r=t.maxDisplay,n=t.className,o=t.extraAttributes,a=t.classNamePrefix;return m.createElement("div",(0,h.Z)({className:_()(a,n)},o),e.slice(0,r).map(this.renderImageGalleryItem,this))}}]),ImageGallery}(m.PureComponent),(0,p.Z)(i,"imageGalleryPopoverVisibleChange",I.dG),o=i,(0,g.Z)(o,"imageGalleryPopoverVisibleChange",[n],(a=(a=Object.getOwnPropertyDescriptor(o,"imageGalleryPopoverVisibleChange"))?a.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return a}}),o),(0,g.Z)(o.prototype,"handleImgLoad",[P.xB],Object.getOwnPropertyDescriptor(o.prototype,"handleImgLoad"),o.prototype),o);E.defaultProps={canPreview:!0,className:"",classNamePrefix:"form-image-gallery",extraAttributes:{},imageClassName:"",imageExtraAttributes:{},images:[],itemClassName:"",itemExtraAttributes:{},layout:"auto",maxDisplay:6,onDeleteImage:I.dG,onImageLoad:I.dG,onPreviewImage:I.dG,onReplaceImage:I.dG,overflowText:"",readOnly:!0,size:"normal",thumbnail:25},E.propTypes={canPreview:S().bool,className:S().string,classNamePrefix:S().string,extraAttributes:S().oneOfType([S().object]),imageClassName:S().string,imageExtraAttributes:S().oneOfType([S().object]),images:S().arrayOf(S().string),itemClassName:S().string,itemExtraAttributes:S().oneOfType([S().object]),layout:S().oneOf(["auto","grid"]),maxDisplay:S().number,overflowText:S().string,readOnly:S().bool,size:S().oneOf(["small","normal"]),thumbnail:S().number,onDeleteImage:S().func,onImageLoad:S().func,onPreviewImage:S().func,onReplaceImage:S().func};var T=function(e){(0,d.Z)(ImageGalleryPC,e);var t=(0,u.Z)(ImageGalleryPC);function ImageGalleryPC(){var e;(0,s.Z)(this,ImageGalleryPC);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,p.Z)((0,c.Z)(e),"ImagePopover",m.lazy((function(){return r.e("node_modules_tencent_form-ui-components_lib_components_popover_image-popover_image-popover-pc_js").then(r.bind(r,47964))}))),e}return(0,l.Z)(ImageGalleryPC,[{key:"handlePreviewImage",value:function handlePreviewImage(e,t){var n=this.props,o=n.canPreview,a=n.onPreviewImage,i=n.images;if(o){var s=f.default.show();r.e("vendors-node_modules_tencent_dui_lib_components_Preview_index_js").then(r.bind(r,81643)).then((function(r){var n=r.default;s.close(),n.show({urlList:i,initialIndex:t}),a(e,t,i)})).catch((function(){s.close()}))}}}]),ImageGalleryPC}(E)},28790:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(25773),o=r(50189),a=r(22951),i=r(91976),s=r(67591),l=r(94337),c=r(73428),d=(r(66066),r(65486),r(49892),r(27378)),u=r(23615),p=r.n(u),m=r(90005),f=r.n(m),h=r(78730),y=r(66040),b=function getDicimalCount(e){var t=String(e);return-1===t.indexOf(".")||/\.0+$/.test(t)?0:t.match(/\.(\d+)$/)[1].length};var g,v=r(40500),_=(g=function(e){(0,s.Z)(InputNumber,e);var t=(0,l.Z)(InputNumber);function InputNumber(e){var r;return(0,a.Z)(this,InputNumber),(r=t.call(this,e)).state={value:e.value||"",focused:!1},r.stepUpTimeout=null,r.stepDownTimeout=null,r.stepUpInterval=null,r.stepDownInterval=null,r}return(0,i.Z)(InputNumber,[{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props.value;e.value!==t&&this.trySyncValue()}},{key:"componentWillUnmount",value:function componentWillUnmount(){var e=this.state,t=e.value;if(e.focused){var r=this.autoFix(t);r!==t&&this.handleOnChange({target:{value:r}})}}},{key:"handleOnChange",value:function handleOnChange(e){var t=e.target,r=this.props,n=r.onChange,a=r.value;Number.isNaN(Number(t.value))||/[^\d.-]/.test(t.value)||(InputNumber.isSameValue(a,t.value)||n((0,o.Z)((0,o.Z)({},e),{},{target:(0,o.Z)((0,o.Z)({},t),{},{value:t.value.replace(/\.$/,"")})})))}},{key:"handleOnInput",value:function handleOnInput(e){var t=this.props.onInput,r=e.target;!Number.isNaN(Number(r.value))&&/^[\d.-]*$/.test(r.value)||"-"===r.value?(this.setState({value:r.value}),t(e)):e.preventDefault()}},{key:"handleOnBlur",value:function handleOnBlur(e){var t=this.props.onBlur,r=e.target,n=this.autoFix(r.value);this.setState({focused:!1,value:n}),n!==r.value&&(r.value=n,this.handleOnChange(e)),t(e)}},{key:"handleOnFocus",value:function handleOnFocus(e){var t=this.props,r=t.onFocus;t.autoSelect&&e.target.select(),this.setState({focused:!0}),r(e)}},{key:"handleOnKeyDown",value:function handleOnKeyDown(e){var t=e.keyCode,r=e.target,n=e.ctrlKey,o=e.metaKey,a=this.props,i=a.onKeyDown,s=a.min,l=t===h.Z.TAB,c=t>=h.Z.ZERO&&t<=h.Z.NINE||t>=h.Z.NUM_ZERO&&t<=h.Z.NUM_NINE,d=[h.Z.PERIOD,h.Z.NUM_PERIOD].includes(t),u=[h.Z.DASH,h.Z.NUM_MINUS].includes(t),p=[h.Z.DELETE,h.Z.BACKSPACE].includes(t),m=[h.Z.LEFT,h.Z.RIGHT].includes(t);(this.valueBeforeKeyUp=r.value,l||c||p||m||d&&-1===r.value.indexOf(".")||u&&s<0&&0===r.value.length)?i(e):((n||o)&&[h.Z.C,h.Z.V,h.Z.X,h.Z.A,h.Z.Z].includes(t)||(t===h.Z.UP&&(this.handleStepUp(),this.handleStepChangeFinish()),t===h.Z.DOWN&&(this.handleStepDown(),this.handleStepChangeFinish()),e.preventDefault()),i(e))}},{key:"handleStepUp",value:function handleStepUp(){var e=this;this.stepUpTimeout||(this.stepUpTimeout=setTimeout((function(){e.stepUpInterval=setInterval(e.handleStepChange,30)}),400),this.handleStepChange())}},{key:"handleStepDown",value:function handleStepDown(){var e=this;this.stepDownTimeout||(this.stepDownTimeout=setTimeout((function(){e.stepDownInterval=setInterval(e.handleStepChange,30)}),400),this.handleStepChange())}},{key:"handleStepChange",value:function handleStepChange(){var e=this.props,t=e.step,r=e.max,n=e.min,o=this.state.value,a=Number(o),i={target:{value:a},preventDefault:v.dG};i.target.value=function getInputNumberStepValue(e){var t=e.value,r=e.step,n=void 0===r?1:r,o=e.max,a=void 0===o?1/0:o,i=e.min,s=void 0===i?-1/0:i,l=Number(t),c=Number.isNaN(Number(n))?1:Number(n)||1,d=Number(s),u=Number(a),p=Math.max(b(t),b(c)),m=function getResult(e){var t=e;return e>u&&(t=Math.max(c,0)?l:u),e<d&&(t=Math.max(c,0)?d:l),t.toFixed(p).replace(/\.0+$/,"")},f=((l-d)/c).toFixed(1);return 0===b(f)?m(l+c):m(d+Math.ceil(f)*c)}({value:i.target.value,step:(this.stepUpTimeout?1:-1)*Math.abs(t),max:r,min:n}),this.handleOnInput(i),a!==Number(i.target.value)&&this.handleOnChange(i)}},{key:"handleStepChangeFinish",value:function handleStepChangeFinish(){clearTimeout(this.stepUpTimeout),clearTimeout(this.stepDownTimeout),clearInterval(this.stepUpInterval),clearInterval(this.stepDownInterval),this.stepUpTimeout=null,this.stepDownTimeout=null,this.stepUpInterval=null,this.stepDownInterval=null}},{key:"autoFix",value:function autoFix(e){var t=this.props,autoFix=t.autoFix,r=t.max,n=t.min,o=t.precision;if(!autoFix||!e)return e;var a=Math.min(Math.max(e,n),r).toString();return/[^.-\d]/.test(a)&&(a=e),a.replace(new RegExp("\\.(\\d{0,".concat(o,"}).*$")),"".concat(o?".":"","$1"))}},{key:"trySyncValue",value:function trySyncValue(){var e=this.state.value,t=this.props.value;InputNumber.isSameValue(e,t)||this.setState({value:t})}},{key:"renderStep",value:function renderStep(){var e=this.props.classNamePrefix;return d.createElement("div",{className:"".concat(e,"-btn-wrap")},d.createElement("div",{"aria-label":"增大数字",className:"".concat(e,"-btn ").concat(e,"-btn-up"),role:"button",tabIndex:"-1",onMouseDown:this.handleStepUp,onMouseLeave:this.handleStepChangeFinish,onMouseUp:this.handleStepChangeFinish}),d.createElement("div",{"aria-label":"减小数字",className:"".concat(e,"-btn ").concat(e,"-btn-down"),role:"button",tabIndex:"-1",onMouseDown:this.handleStepDown,onMouseLeave:this.handleStepChangeFinish,onMouseUp:this.handleStepChangeFinish}))}},{key:"render",value:function render(){var e=this.props,t=e.autoFocus,r=e.className,o=e.classNamePrefix,a=e.disabled,i=e.inputType,s=e.maxLength,l=e.placeholder,c=e.showStep,u=e.suffix,p=this.state,m=p.value,h=p.focused,y={autoFocus:t};return d.createElement("div",{className:f()(o,r,{focused:h,showstep:c})},d.createElement("input",(0,n.Z)({},y,{disabled:a,maxLength:s,placeholder:l,type:i,value:m,onBlur:this.handleOnBlur,onChange:this.handleOnChange,onFocus:this.handleOnFocus,onInput:this.handleOnInput,onKeyDown:this.handleOnKeyDown})),u,c?this.renderStep():null)}}],[{key:"isSameValue",value:function isSameValue(e,t){return e===t||""!==e&&""!==t&&Number(e)===Number(t)}}]),InputNumber}(d.PureComponent),(0,c.Z)(g.prototype,"handleOnChange",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleOnChange"),g.prototype),(0,c.Z)(g.prototype,"handleOnInput",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleOnInput"),g.prototype),(0,c.Z)(g.prototype,"handleOnBlur",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleOnBlur"),g.prototype),(0,c.Z)(g.prototype,"handleOnFocus",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleOnFocus"),g.prototype),(0,c.Z)(g.prototype,"handleOnKeyDown",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleOnKeyDown"),g.prototype),(0,c.Z)(g.prototype,"handleStepUp",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleStepUp"),g.prototype),(0,c.Z)(g.prototype,"handleStepDown",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleStepDown"),g.prototype),(0,c.Z)(g.prototype,"handleStepChange",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleStepChange"),g.prototype),(0,c.Z)(g.prototype,"handleStepChangeFinish",[y.xB],Object.getOwnPropertyDescriptor(g.prototype,"handleStepChangeFinish"),g.prototype),g);_.propTypes={autoFix:p().bool,autoFocus:p().bool,autoSelect:p().bool,className:p().string,classNamePrefix:p().string,disabled:p().bool,inputType:p().string,max:p().number,maxLength:p().number,min:p().number,placeholder:p().string,precision:p().number,showStep:p().bool,step:p().number,suffix:p().node,value:p().string,onBlur:p().func,onChange:p().func,onFocus:p().func,onInput:p().func,onKeyDown:p().func},_.defaultProps={autoFix:!0,autoFocus:!1,autoSelect:!1,className:"",classNamePrefix:"form-input-number",disabled:!1,inputType:"text",max:1/0,maxLength:1/0,min:-1/0,onBlur:v.dG,onChange:v.dG,onFocus:v.dG,onInput:v.dG,onKeyDown:v.dG,placeholder:"",precision:-1,showStep:!0,step:1,suffix:null,value:""};const O=_},82545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={deleteBtnText:"删除",editGPSPlaceholder:"待填写者定位当前位置",editPositionPlaceHolder:"待填写者选择位置",editMActionSheetTitle:"选择地理位置类型",editMActionSheetCancelText:"取消",listLoadErrText:"数据加载失败",listReloadBtnText:"点击重试",locateBtnText:"获取定位",locatePositionBtnText:"选择位置",locateErrText:"定位失败",locatingBtnText:"正在定位",readOnlyPlaceholderGPS:"未上传",readOnlyPlaceholderNormal:"未选择",relocateBtnText:"重新定位",relocatePositionBtnText:"重新选择",abroadLevelName:["海外国家","州/省"],extraBtn:["切换海外","切换国内"],levelName:{city:"市",district:"区/县",province:"省份/地区",street:"街道"},LOCATION_TEXT:{CITY:"省/市",DISTRICT:"省/市/区",STREET:"省/市/区/街道",DETAIL:"省/市/区/街道+详细地址",GPS:"定位当前位置",POSITION:"请选择位置"}}},72173:(e,t,r)=>{"use strict";r.d(t,{PP:()=>m});var n=r(27378),o=r(23615),a=r.n(o),i=r(90005),s=r.n(i),l=r(36080),c=r(40500),d=(0,c.W5)((function(e){var t=e.disabled,r=e.selectable,o=e.textDisabled,a=e.classNamePrefix,i=e.text,s=e.onClick,c=n.createElement("div",{className:"".concat(a,"-icon")});return n.createElement(l.H,{className:"".concat(a,"-main"),disabled:t,hasArrow:r,prefixNode:c,size:"small",text:i,textDisabled:o,onClick:t?void 0:s})}));d.propTypes={classNamePrefix:a().string.isRequired,disabled:a().bool.isRequired,selectable:a().bool.isRequired,text:a().string.isRequired,textDisabled:a().bool.isRequired,onClick:a().func},d.displayName="LocationMain";var u=(0,c.W5)((function(e){var t=e.readOnly,r=e.className,o=e.placeholder,a=e.value,i=e.onChange,s=t?a||o:null,c=t?null:n.createElement("div",{className:"input-container"},n.createElement("input",{maxLength:100,placeholder:o,value:a,onChange:i}));return n.createElement(l.H,{className:r,disabled:t,size:"small",suffixNode:c,text:s,textDisabled:!a})}));u.propTypes={className:a().string.isRequired,placeholder:a().string.isRequired,readOnly:a().bool.isRequired,value:a().string.isRequired,onChange:a().func.isRequired},u.displayName="LocationDetail";var p=(0,c.W5)((function(e){var t=e.classNamePrefix,r=e.gpsEnable,o=e.showDeleteBtn,a=e.deleteBtnText,i=e.errCode,s=e.errMsg,l=e.locateBtnText,c=e.onClear,d=e.onLocate,u=n.createElement("div",{className:"location-btn",role:"button",tabIndex:"0",onClick:d,onKeyDown:d},l),p=o?n.createElement("div",{className:"".concat(t,"-clear-btn"),role:"button",tabIndex:"0",onClick:c,onKeyDown:c},a):null,m=r&&(s||p)&&(null==l?void 0:l.length)>0,f=i?n.createElement("span",{className:"".concat(t,"-error-code")},"(".concat(i,")")):null,h=n.createElement("div",{className:"".concat(t,"-error")},s,f);return n.createElement("div",{className:"".concat(t,"-operation-bar")},r?u:null,m?n.createElement("div",{className:"".concat(t,"-separator")}):null,s?h:p)}));p.propTypes={classNamePrefix:a().string.isRequired,deleteBtnText:a().string.isRequired,errCode:a().string.isRequired,errMsg:a().string.isRequired,gpsEnable:a().bool.isRequired,locateBtnText:a().string.isRequired,showDeleteBtn:a().bool.isRequired,onClear:a().func.isRequired,onLocate:a().func.isRequired},p.displayName="LocationOperationBar";var m=(0,c.W5)((function(e){var t=e.gpsEnable,r=e.hideOperationBar,o=e.readOnly,a=e.selectable,i=e.showDetailInput,l=e.className,c=e.classNamePrefix,m=e.deleteBtnText,f=e.detailPlaceholder,h=e.detailValue,y=e.errCode,b=e.errMsg,g=e.locateBtnText,v=e.placeholder,_=e.readOnlyPlaceholder,O=e.value,S=e.getContainerWrapper,P=e.onClear,C=e.onDetailChange,w=e.onLocate,I=O||(o?_:v);return n.createElement("div",{className:s()(l,c)},S(n.createElement(d,{classNamePrefix:c,disabled:o||!a,selectable:a,text:I,textDisabled:!O})),i?n.createElement(u,{className:"".concat(c,"-detail"),placeholder:f,readOnly:o,value:h,onChange:C}):null,o||r?null:n.createElement(p,{classNamePrefix:c,deleteBtnText:m,errCode:y,errMsg:b,gpsEnable:t,locateBtnText:g,showDeleteBtn:!!O,onClear:P,onLocate:w}))}));m.propTypes={className:a().string,classNamePrefix:a().string,deleteBtnText:a().string,detailPlaceholder:a().string,detailValue:a().string,errCode:a().string,errMsg:a().string,getContainerWrapper:a().func,gpsEnable:a().bool,hideOperationBar:a().bool,locateBtnText:a().string,placeholder:a().string,readOnly:a().bool,readOnlyPlaceholder:a().string,selectable:a().bool,showDetailInput:a().bool,value:a().string,onClear:a().func,onDetailChange:a().func,onLocate:a().func},m.defaultProps={className:"",classNamePrefix:"form-location",deleteBtnText:"删除",detailPlaceholder:"请填写详细地址",detailValue:"",errCode:"",errMsg:"",getContainerWrapper:function getContainerWrapper(e){return e},gpsEnable:!0,hideOperationBar:!1,locateBtnText:"获取定位",onClear:Function.prototype,onDetailChange:Function.prototype,onLocate:Function.prototype,placeholder:"",readOnly:!1,readOnlyPlaceholder:"未选择",selectable:!0,showDetailInput:!1,value:""},m.displayName="LocationCore"},24653:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(45910);const o={addColumn:"选项列",addRow:"添加行",deleteCell:"删除",dragCell:"调序",optionTitle:"选项",subTitle:"行标题",finish:"完成",cancel:"取消",editOption:"编辑选项",editSubtitle:"编辑行标题",recommend:"推荐",satisfaction:"满意度",recommendation:"推荐度",conformity:"符合度",recognition:"认同度",possibility:"可能性",willingness:"意愿度",importance:"重要度",okText:"继续",replaceTips:"使用推荐选项将会覆盖已有内容，是否继续？",satisfactionList:n.Z,toolTipList:n.Z.satisfaction}},425:(e,t,r)=>{"use strict";r.d(t,{JD:()=>P,Lp:()=>C,sU:()=>w,mp:()=>E});var n,o,a=r(50189),i=r(22951),s=r(91976),l=r(67591),c=r(94337),d=r(73428),u=r(64649),p=(r(35659),r(71165),r(74413),r(69108),r(66066),r(13227),r(11431),r(12249),r(57637),r(27378)),m=r(90005),f=r.n(m),h=r(23615),y=r.n(h),b=r(21886),g=r(14042),v=r(66040),_=r(24653),O=r(57566),S=r(40500),P=(0,S.W5)((function(e){var t,r=e.checked,n=e.classNamePrefix,o=e.disabled,a=e.opt,i=e.sub,s=e.title,l=e.onChange,c=e.Checkbox;return p.createElement(c,{checked:r,className:f()("".concat(n,"-checkbox")),disabled:o,iconClassName:f()("".concat(n,"-checkbox-icon"),(t={},(0,u.Z)(t,"".concat(n,"-checkbox-icon-empty"),!s),(0,u.Z)(t,"".concat(n,"-checkbox-icon-disabled"),o),t)),onChange:function onChange(e){return l(e,i,a)}},s)})),C=(0,S.W5)((function(e){var t,r=e.checked,n=e.classNamePrefix,o=e.disabled,a=e.opt,i=e.sub,s=e.title,l=e.onChange,c=e.Radio;return p.createElement(c,{checked:r,className:f()("".concat(n,"-radio")),disabled:o,iconClassName:f()("".concat(n,"-radio-icon"),(t={},(0,u.Z)(t,"".concat(n,"-radio-icon-empty"),!s),(0,u.Z)(t,"".concat(n,"-radio-icon-disabled"),o),t)),onChange:function onChange(e){return l(e,i,a)}},s)})),w=(0,S.W5)((function(e){var t=e.classNamePrefix,r=e.currentHoveredIndex,n=e.currentSelectedIndex,o=e.disabled,a=e.toolTips,i=e.index,s=e.sub,l=e.opt,c=e.onChange,d=e.onMouseEnter,u=e.onMouseLeave,m=e.ToolTip,h=e.size,y=p.createElement(O.H,{entered:r>=i,index:i,selected:n>=i,size:null!=h?h:"small",className:f()({readonly:o}),onClick:function onClick(e){return c(e,s,l)},onMouseEnter:d,onMouseLeave:u});if(r!==i)return p.createElement("div",{className:f()("".concat(t,"-rating"))},y);var b=null!=a&&a.length?a[i]:"";return p.createElement("div",{className:f()("".concat(t,"-rating"))},p.createElement(m,{visible:!0,title:b},y))})),I=function getPlaceholder(e,t){return"".concat(e," ").concat(t+1)},E=(0,b.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_matrix_locale_en_US_js").then(r.bind(r,92305))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_matrix_locale_zh_TW_js").then(r.bind(r,14389))},locale:_.Z})((o=function(e){(0,l.Z)(MatrixCoreBase,e);var t=(0,c.Z)(MatrixCoreBase);function MatrixCoreBase(e){var r;return(0,i.Z)(this,MatrixCoreBase),(r=t.call(this,e)).tableColumnRef=p.createRef(),r.tableBodyRef=p.createRef(),r.matrixTableRef=p.createRef(),r}return(0,s.Z)(MatrixCoreBase,[{key:"componentDidMount",value:function componentDidMount(){var e;if(null===(e=this.tableBodyRef.current)||void 0===e||e.addEventListener("scroll",this.handleTableColumnScroll),this.matrixTableRef.current){var t=this.matrixTableRef.current.getBoundingClientRect().height;this.matrixTableRef.current.style.height="".concat(t+15,"px")}}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this,r=this.props,n=r.subtitles,o=r.type;e.subtitles.length===n.length&&e.type===o||setTimeout((function(){var e=t.tableBodyRef.current.getBoundingClientRect().height,r=t.tableColumnRef.current.getBoundingClientRect().height;t.matrixTableRef.current.style.height="".concat(e+r+15,"px")}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){var e;null===(e=this.tableBodyRef.current)||void 0===e||e.removeEventListener("scroll",this.handleTableColumnScroll)}},{key:"handleTableColumnScroll",value:function handleTableColumnScroll(){if(this.tableColumnRef.current){var e,t=(null===(e=this.tableBodyRef.current)||void 0===e?void 0:e.scrollLeft)||0;this.tableColumnRef.current.scrollLeft=t}}},{key:"tableClassNamePrefix",get:function get(){var e=this.props.classNamePrefix;return"".concat(e,"-table")}},{key:"getCheckboxStatus",value:function getCheckboxStatus(e,t){var r=e.id,n=t.id;return!!this.props.value.find((function(e){var t;return e.subID===r&&(null===(t=e.optionIDs)||void 0===t?void 0:t.includes(n))}))}},{key:"getSelectedIndex",value:function getSelectedIndex(e){var t,r=null===(t=this.props.value.find((function(t){return e===t.subID})))||void 0===t?void 0:t.values[0];return r=r?parseInt(r,10)-1:-1}},{key:"renderCheckbox",value:function renderCheckbox(e,t){var r=this.Checkbox,n=this.props,o=n.classNamePrefix,a=n.disabled,i=n.onChange,s=this.getCheckboxStatus(e,t);return p.createElement(P,{Checkbox:r,checked:s,classNamePrefix:o,disabled:a,opt:t,sub:e,title:"",onChange:i})}},{key:"renderRadio",value:function renderRadio(e,t){var r=this.Radio,n=this.props,o=n.classNamePrefix,a=n.disabled,i=n.onChange,s=this.getCheckboxStatus(e,t);return p.createElement(C,{Radio:r,checked:s,classNamePrefix:o,disabled:a,opt:t,sub:e,title:"",onChange:i})}},{key:"renderRating",value:function renderRating(e,t,r){var n=this.props,o=n.classNamePrefix,a=n.currentHoveredIndex,i=n.currentHoveredSubId,s=n.disabled,l=n.onChange,c=n.onMouseEnter,d=n.onMouseLeave,u=n.toolTips,m=n.ToolTip,f=e.id===i?a:-1,h=this.getSelectedIndex(e.id);return p.createElement(w,{ToolTip:m,classNamePrefix:o,currentHoveredIndex:f,currentSelectedIndex:h,disabled:s,index:r,opt:t,sub:e,toolTips:u,onChange:l,onMouseEnter:function onMouseEnter(t){return c(t,e)},onMouseLeave:d})}},{key:"renderTBody",value:function renderTBody(){var e=this,t=this.props,r=t.options,n=t.subtitles,o=t.type,a=t.onClickTBody,i=this.state.locale.subTitle;return p.createElement("tbody",{className:f()("".concat(this.tableClassNamePrefix,"-tbody"))},n.map((function(t,n){return p.createElement("tr",{key:t.id,className:f()("".concat(e.tableClassNamePrefix,"-tr")),"data-id":t.id},p.createElement("td",{role:"gridcell",tabIndex:"-1",className:f()("".concat(e.tableClassNamePrefix,"-option-setting"),"".concat(e.tableClassNamePrefix,"-cell-title"),(0,u.Z)({},"".concat(e.tableClassNamePrefix,"-place"),!t.title)),onClick:function onClick(){return a(t.id)}},t.title||I(i,n)),r.map((function(r,n){var a,i,s,l;return p.createElement("td",{key:Number(n).toString(),className:f()("".concat(e.tableClassNamePrefix,"-option-setting"),["".concat(e.tableClassNamePrefix,"-option-setting-").concat(o.toLowerCase())])},null!==(a=null===(i=(l={},(0,u.Z)(l,g.c.RADIO,e.renderRadio),(0,u.Z)(l,g.c.CHECKBOX,e.renderCheckbox),(0,u.Z)(l,g.c.RATING,e.renderRating),s=l)[o])||void 0===i?void 0:i.call(s,t,r,n))&&void 0!==a?a:null)})))})))}},{key:"renderTHeader",value:function renderTHeader(){var e=this,t=this.props,r=t.options,n=t.type,o=t.onClickTHeader;if(n===g.c.RATING)return null;var a=this.state.locale.optionTitle;return p.createElement("thead",{className:f()("".concat(this.tableClassNamePrefix,"-theader"))},p.createElement("tr",{className:f()("".concat(this.tableClassNamePrefix,"-tr"),"".concat(this.tableClassNamePrefix,"-theader-tr"))},p.createElement("th",{className:f()("".concat(this.tableClassNamePrefix,"-option"))}," "),r.map((function(t,r){return p.createElement("th",{key:t.id,className:f()("".concat(e.tableClassNamePrefix,"-option"),(0,u.Z)({},"".concat(e.tableClassNamePrefix,"-place"),!t.title)),onClick:function onClick(){return o(t.id)}},t.title||I(a,r))}))))}},{key:"render",value:function render(){return p.createElement("div",{ref:this.matrixTableRef,className:f()("".concat(this.tableClassNamePrefix))},p.createElement("div",{ref:this.tableColumnRef,className:f()("".concat(this.tableClassNamePrefix,"-header"))},p.createElement("table",{className:f()("".concat(this.tableClassNamePrefix,"-header-table"))},this.renderTHeader())),p.createElement("div",{ref:this.tableBodyRef,className:f()("".concat(this.tableClassNamePrefix,"-body"))},p.createElement("table",{className:f()("".concat(this.tableClassNamePrefix,"-body-table"))},this.renderTBody())))}}]),MatrixCoreBase}(p.PureComponent),(0,d.Z)(o.prototype,"handleTableColumnScroll",[v.xB],Object.getOwnPropertyDescriptor(o.prototype,"handleTableColumnScroll"),o.prototype),(0,d.Z)(o.prototype,"renderCheckbox",[v.xB],Object.getOwnPropertyDescriptor(o.prototype,"renderCheckbox"),o.prototype),(0,d.Z)(o.prototype,"renderRadio",[v.xB],Object.getOwnPropertyDescriptor(o.prototype,"renderRadio"),o.prototype),(0,d.Z)(o.prototype,"renderRating",[v.xB],Object.getOwnPropertyDescriptor(o.prototype,"renderRating"),o.prototype),n=o))||n;E.propTypes={options:y().arrayOf(y().shape({id:y().string,title:y().string})).isRequired,subtitles:y().arrayOf(y().shape({id:y().string,title:y().string})).isRequired,type:y().string.isRequired,ToolTip:y().oneOfType([y().any]),classNamePrefix:y().string,currentHoveredIndex:y().number,currentHoveredSubId:y().number,disabled:y().bool,toolTips:y().arrayOf(y().string),value:y().arrayOf(y().shape({optId:y().string.isRequired,subId:y().string.isRequired,value:y().string.isRequired})),onChange:y().func,onClickTBody:y().func,onClickTHeader:y().func,onMouseEnter:y().func,onMouseLeave:y().func},E.defaultProps=(0,a.Z)((0,a.Z)({},E.defaultProps),{},{classNamePrefix:"form-matrix",currentHoveredIndex:-1,currentHoveredSubId:-1,disabled:!1,onChange:S.dG,onClickTBody:S.dG,onClickTHeader:S.dG,onMouseEnter:S.dG,onMouseLeave:S.dG,ToolTip:p.Fragment,toolTips:[],value:[]}),E.displayName="MatrixCoreBase"},67600:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(91976),o=r(22951),a=r(47169),i=r(67591),s=r(94337),l=r(64649),c=r(9120),d=r(26700),u=function(e){(0,i.Z)(MatrixCorePC,e);var t=(0,s.Z)(MatrixCorePC);function MatrixCorePC(){var e;(0,o.Z)(this,MatrixCorePC);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),(0,l.Z)((0,a.Z)(e),"Checkbox",c.ZP),(0,l.Z)((0,a.Z)(e),"Radio",d.ZP),e}return(0,n.Z)(MatrixCorePC)}(r(425).mp)},1973:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(67600),p=r(27378);var m=function(e){(0,l.Z)(RatingFillPCLoader,e);var t,p=(0,c.Z)(RatingFillPCLoader);function RatingFillPCLoader(){var e;(0,a.Z)(this,RatingFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"MatrixCore",u.Z),e}return(0,i.Z)(RatingFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_matrix_matrix-fill_matrix-fill-pc_js").then(r.bind(r,78537));case 2:e=n.sent,t=e.default,this.setState({MatrixFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),RatingFillPCLoader}(function(e){(0,l.Z)(MatrixFillLoader,e);var t=(0,c.Z)(MatrixFillLoader);function MatrixFillLoader(e){var r;return(0,a.Z)(this,MatrixFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(MatrixFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.state.MatrixFill;if(e)return p.createElement(e,this.props);var t=this.MatrixCore;return p.createElement(t,this.props)}}]),MatrixFillLoader}(p.PureComponent))},40109:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ConfirmPC});var n=r(89362),o=r(11026),a=r(27378),i=r(23615),s=r.n(i),l=r(40500),c="form-confirm",d=function Checkbox(e){var t=e.defaultChecked,r=e.id,n=e.onChange,i=a.useState(t),s=(0,o.Z)(i,2),l=s[0],c=s[1];return a.createElement("input",{checked:l,id:r,type:"checkbox",onChange:function handleChange(e){c(e.target.checked),n(e)}})};function ConfirmPC(e){return function confirm_base_confirm(e){var t,r=e.title,n=e.content,o=e.okText,i=void 0===o?"确认":o,s=e.cancelText,u=void 0===s?"":s,p=e.onCancel,m=void 0===p?l.dG:p,f=e.onConfirm,h=void 0===f?l.dG:f,y=e.onCheckBox,b=void 0===y?l.dG:y,g=e.defaultChecked,v=e.checkBoxContent,_=e.modalComponent,O=(0,l.dA)(),S=function handleFooterBtnClick(e){return function(r){return e(r,{checked:Boolean(t)})}},P=(null==v?void 0:v.length)>0?a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(c,"-content")},n),a.createElement("label",{className:"".concat(c,"-checkbox-container"),htmlFor:O},a.createElement("div",{className:"".concat(c,"-checkbox-main")},a.createElement(d,{defaultChecked:g,id:O,onChange:function handleCheckboxChange(e){t=e.target.checked,b(e)}}),a.createElement("div",{className:"".concat(c,"-checkbox-icon")})),a.createElement("div",{className:"".concat(c,"-checkbox-content")},v))):n;return _.confirm({className:c,title:r,content:P,okText:i,cancelText:u,onOk:S(h),onCancel:S(m)})}({title:e.title,content:e.content,okText:e.okText,cancelText:e.cancelText,onCancel:e.onCancel,onConfirm:e.onConfirm,onCheckBox:e.onCheckBox,defaultChecked:e.defaultChecked,checkBoxContent:e.checkBoxContent,modalComponent:n.default})}d.propTypes={id:s().string.isRequired,onChange:s().func.isRequired,defaultChecked:s().bool},d.defaultProps={defaultChecked:!1}},47585:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(22951),o=r(91976),a=r(67591),i=r(94337),s=(r(12249),r(57637),r(27378)),l=r(23615),c=r.n(l),d=r(90005),u=r.n(d),p=function(e){(0,a.Z)(IconNumber,e);var t=(0,i.Z)(IconNumber);function IconNumber(){return(0,n.Z)(this,IconNumber),t.apply(this,arguments)}return(0,o.Z)(IconNumber,[{key:"render",value:function render(){var e=this.props,t=e.value,r=e.className;return s.createElement("span",{className:u()("icon-number",r)},function getNumbers(e){return e.split("").map((function(e,t){return s.createElement("i",{key:"item".concat(-t),className:"inumber"},e)}))}(t))}}]),IconNumber}(s.PureComponent);p.propTypes={value:c().string.isRequired,className:c().string},p.defaultProps={className:""};const m=p},87010:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(53782),o=r(25773),a=r(11026),i=r(22951),s=r(91976),l=r(67591),c=r(94337),d=(r(44350),r(9815),r(53124),r(74413),r(62285),r(27378)),u=r(23615),p=r.n(u),m=r(90005),f=r.n(m),h=r(99186),y=(r(12249),r(57637),r(40500)),b=function(e){(0,l.Z)(DropdownItem,e);var t=(0,c.Z)(DropdownItem);function DropdownItem(){return(0,i.Z)(this,DropdownItem),t.apply(this,arguments)}return(0,s.Z)(DropdownItem,[{key:"render",value:function render(){var e=this.props,t=e.contents,r=e.className,n=e.classNamePrefix,o=e.itemClassNamePrefix;if(null==t||!t.length)return null;var a=t.map((function(e){var t,n=e.type,a=e.iconClass,i=e.show,s=e.disabled,l=e.text,c=e.onClick,u=e.onChange,p=e.icon;return n&&i&&(a||l)?(t=s?y.dG:"image"===n||"file"===n?function handleOnClick(e){c(e);var t=document.createElement("input");t.id=(0,y.dA)(),t.style.display="none",t.type="file",t.accept="image/*",t.multiple=!0,t.onchange=function(e){u(e),setTimeout((function(){document.body.removeChild(t)}),150)},document.body.appendChild(t),t.click()}:c||u||y.dG,d.createElement("div",{key:"".concat(a,"-").concat(l),className:"".concat(o,"-wrapper")},d.createElement("div",{className:f()(o,r,{disabled:s}),role:"button",tabIndex:-1,onClick:t,onKeyDown:y.dG},a||p?d.createElement("div",{className:f()("".concat(o,"-icon"),a),style:p?{backgroundImage:"url(".concat(p,")")}:{}}):null,l&&d.createElement("div",{className:"".concat(o,"-text")},l)))):null}));return d.createElement("div",{className:n},a)}}]),DropdownItem}(d.PureComponent);b.propTypes={className:p().string,classNamePrefix:p().string,contents:p().arrayOf(p().shape(p().object)),itemClassNamePrefix:p().string},b.defaultProps={className:"",classNamePrefix:"form-pc-tool-menu-main",contents:[],itemClassNamePrefix:"form-pc-tool-menu-item"};const g=b;var v=function(e){(0,l.Z)(DropdownTrigger,e);var t=(0,c.Z)(DropdownTrigger);function DropdownTrigger(){return(0,i.Z)(this,DropdownTrigger),t.apply(this,arguments)}return(0,s.Z)(DropdownTrigger,[{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,n=e.trigger,o=e.disabled,a=e.onClick;return null!=n&&n.iconClass?d.createElement("div",{className:f()(t,r,{disabled:o}),role:"button",tabIndex:-1,onClick:o?y.dG:a,onKeyDown:y.dG},d.createElement("div",{className:f()("".concat(t,"-icon"),n.iconClass)})):null}}]),DropdownTrigger}(d.PureComponent);v.propTypes={className:p().string,classNamePrefix:p().string,disabled:p().bool,trigger:p().shape({iconClass:p().string}),onClick:p().func},v.defaultProps={className:"",classNamePrefix:"form-pc-tool-menu-trigger",disabled:!1,onClick:y.dG,trigger:null};const _=v;var O=r(47169),S=r(64649),P=r(87861),C="image",w="link",I="file",E="tdoc",T="form-pc-tool-menu-item",N={type:C,iconClass:"".concat(T,"-insert-image"),text:"插入图片",show:!0,disabled:!1,onClick:function onClick(){},onChange:function onChange(){}},j={type:w,iconClass:"form-pc-tool-menu-item-insert-link",text:"插入链接",show:!0,disabled:!1,onClick:function onClick(){},onChange:function onChange(){}},D={type:I,iconClass:"form-pc-tool-menu-item-insert-file",text:"插入附件",show:!0,disabled:!0,onClick:function onClick(){},onChange:function onChange(){}},k={type:E,iconClass:"".concat(T,"-insert-tdoc"),icon:P.Xj,text:"插入腾讯文档",show:!0,disabled:!1,onClick:function onClick(){},onChange:function onChange(){}},x=function(e){(0,l.Z)(SingleItem,e);var t=(0,c.Z)(SingleItem);function SingleItem(){var e;(0,i.Z)(this,SingleItem);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,S.Z)((0,O.Z)(e),"inputId",(0,y.dA)()),e}return(0,s.Z)(SingleItem,[{key:"render",value:function render(){var e=this.props.iconClass;if(!e)return null;var t=this.props,r=t.classNamePrefix,n=t.className,o=t.disabled,a=t.type,i=t.onClick,s=t.style,l=f()(r,n,{disabled:o}),c=d.createElement("div",{className:f()("".concat(r,"-item"),e)});return a===C||a===I?d.createElement("label",{className:l,htmlFor:o?"":this.inputId,style:s},c,d.createElement("input",{multiple:!0,accept:"image/*",id:this.inputId,type:"file",onChange:function onChange(e){i(e),e.currentTarget.value=null}})):d.createElement("div",{className:l,role:"button",style:s,tabIndex:-1,onClick:i,onKeyDown:y.dG},c)}}]),SingleItem}(d.PureComponent);x.propTypes={iconClass:p().string.isRequired,type:p().oneOf(["image","link","file","tdoc"]).isRequired,onClick:p().func.isRequired,className:p().string,classNamePrefix:p().string,disabled:p().bool,style:p().shape({})},x.defaultProps={className:"",classNamePrefix:"pc-tool-single-trigger",disabled:!1,style:{}};const Z=x;var L=["triggerIcon","triggerClassName","classNamePrefix","disabled","onTriggerClick"],R=function(e){(0,l.Z)(PcToolsDropdown,e);var t=(0,c.Z)(PcToolsDropdown);function PcToolsDropdown(){return(0,i.Z)(this,PcToolsDropdown),t.apply(this,arguments)}return(0,s.Z)(PcToolsDropdown,[{key:"render",value:function render(){var e=this.props.contents;if(null==e||!e.length)return null;var t=this.props,r=t.className,i=t.itemClassName,s=t.style,l=t.flat,c=e.filter((function(e){return e.show}));if(!c.length)return null;if(l){var u=(0,a.Z)(c,1)[0];return d.createElement(Z,(0,o.Z)({className:i,style:s},u))}var p=this.props,m=p.triggerIcon,y=p.triggerClassName,b=p.classNamePrefix,v=p.disabled,O=p.onTriggerClick,S=(0,n.Z)(p,L),P=d.createElement(g,{className:i,contents:e});return d.createElement(h.Z,(0,o.Z)({className:f()(b,r),disabled:v,dropContent:P},S),d.createElement(_,{className:y,disabled:v,trigger:m,onClick:O}))}}]),PcToolsDropdown}(d.PureComponent);R.propTypes={triggerIcon:p().shape({iconClass:p().string}).isRequired,alignment:p().oneOf(["left","left-outer","right","right-outer","center","auto","auto-outer"]),className:p().string,classNamePrefix:p().string,contents:p().arrayOf(p().shape({disabled:p().bool,iconClass:p().string,show:p().bool,text:p().string,type:p().oneOf(["image","link","file","tdoc"]),onChange:p().func,onClick:p().func})),disabled:p().bool,flat:p().bool,itemClassName:p().string,style:p().shape({}),triggerClassName:p().string,visible:p().bool,onTriggerClick:p().func,onVisibleChange:p().func},R.defaultProps={alignment:"right",className:"",classNamePrefix:"form-pc-quick-tool",contents:[],disabled:!1,flat:!1,itemClassName:"",onTriggerClick:y.dG,onVisibleChange:y.dG,style:{},triggerClassName:"",visible:void 0};const A={PcToolMenu:R,DEFAULT_INSERT_IMAGE_OPT:N,DEFAULT_INSERT_LINK_OPT:j,DEFAULT_INSERT_FILE_OPT:D,DEFAULT_INSERT_TDOC_OPT:k,DEFAULT_TRIGGER_OPT:{iconClass:"form-pc-tool-menu-trigger-insert"}}},3632:(e,t,r)=>{"use strict";r.d(t,{rk:()=>m});var n=r(25773),o=(r(12249),r(57637),r(27378)),a=r(23615),i=r.n(a),s=r(90005),l=r.n(s),c=r(25449),d=r(40500),u=(0,d.W5)((function(e){var t=e.picture,r=e.classNamePrefix,n=e.showDeleteBtn,a=e.onClick,i=e.onDelete;return o.createElement("div",{className:l()("".concat(r,"-item"),{uploading:!t.loaded})},o.createElement("div",{role:"button",tabIndex:"-1",onClick:a,onKeyDown:a},o.createElement("img",{alt:"图片",className:"picture",src:t.src})),n&&t.loaded?o.createElement("div",{"aria-label":"删除图片",className:"delete-icon",role:"button",tabIndex:"-1",onClick:i,onKeyDown:i}):null,t.loaded?null:o.createElement(c.default,{className:"loading",spinType:"primary"}))}));u.propTypes={classNamePrefix:i().string.isRequired,picture:i().shape({src:i().string.isRequired,loaded:i().bool}).isRequired,showDeleteBtn:i().bool.isRequired,onClick:i().func.isRequired,onDelete:i().func.isRequired},u.displayName="PictureItem";var p=(0,d.W5)((function(e){var t=e.classNamePrefix,r=e.inputId,a=e.onImageDropin,i={onClick:e.onClick,onDragOver:function onDragOver(e){return e.preventDefault()},onDrop:a};return o.createElement("div",{className:"".concat(t,"-add-btn ").concat(t,"-item")},o.createElement("label",(0,n.Z)({"aria-label":"选择图片",htmlFor:r},i)))}));p.propTypes={classNamePrefix:i().string.isRequired,inputId:i().string.isRequired,onClick:i().func.isRequired,onImageDropin:i().func.isRequired},p.displayName="PictureAddBtn";var m=(0,d.W5)((function(e){var t=e.value,r=e.children,n=e.classNamePrefix,a=e.className,i=e.getDesc,s=e.inputId,c=e.showDeleteBtn,d=e.showAddBtn,m=e.onPictureClick,f=e.onDelete,h=e.onImageDropin,y=e.onAddBtnClick,b=t.map((function(e,t){return o.createElement(u,{key:e.id,classNamePrefix:n,picture:e,showDeleteBtn:c,onClick:function onClick(){return m(t)},onDelete:function onDelete(){return f(t)}})}));return o.createElement(o.Fragment,null,o.createElement("div",{className:l()(n,a)},r,b,d?o.createElement(p,{classNamePrefix:n,inputId:s,onClick:y,onImageDropin:h}):null),o.createElement("div",{className:"".concat(n,"-desc")},i()))}));m.propTypes={children:i().element,className:i().string,classNamePrefix:i().string,getDesc:i().func,inputId:i().string,showAddBtn:i().bool,showDeleteBtn:i().bool,value:i().arrayOf(i().shape({id:i().string.isRequired,src:i().string.isRequired,loaded:i().bool})),onAddBtnClick:i().func,onDelete:i().func,onImageDropin:i().func,onPictureClick:i().func},m.defaultProps={children:null,className:"",classNamePrefix:"form-picture",getDesc:Function.prototype,inputId:"",onAddBtnClick:Function.prototype,onDelete:Function.prototype,onImageDropin:Function.prototype,onPictureClick:Function.prototype,showAddBtn:!0,showDeleteBtn:!0,value:[]},m.displayName="PictureCore"},8478:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(50189),o=r(22951),a=r(91976),i=r(47169),s=r(43243),l=r(27597),c=r(67591),d=r(94337),u=r(64649),p=r(27378),m=r(90005),f=r.n(m),h=r(23615),y=r.n(h),b=r(19199),g=r(62698),v=r(1292),_=r(40500),O=function(e){(0,c.Z)(LinkPopoverBase,e);var t=(0,d.Z)(LinkPopoverBase);function LinkPopoverBase(){return(0,o.Z)(this,LinkPopoverBase),t.apply(this,arguments)}return(0,a.Z)(LinkPopoverBase,[{key:"renderPopoverChildren",value:function renderPopoverChildren(){return this.props.children}},{key:"render",value:function render(){return(0,s.Z)((0,l.Z)(LinkPopoverBase.prototype),"render",this).call(this)}}]),LinkPopoverBase}(v.Z);O.defaultProps=(0,n.Z)((0,n.Z)((0,n.Z)({},v.Z.defaultProps),O.defaultProps),{},{onCancel:_.dG,onDelete:_.dG,onEdit:_.dG,onOpen:_.dG}),O.propTypes=(0,n.Z)((0,n.Z)({},v.Z.propTypes),{},{onCancel:y().func,onDelete:y().func,onEdit:y().func,onOpen:y().func});const S=O;var P=function(e){(0,c.Z)(LinkPopoverPC,e);var t=(0,d.Z)(LinkPopoverPC);function LinkPopoverPC(){var e;(0,o.Z)(this,LinkPopoverPC);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n)),(0,u.Z)((0,i.Z)(e),"Popover",b.default),e}return(0,a.Z)(LinkPopoverPC,[{key:"getExtraPopoverProps",value:function getExtraPopoverProps(){var e=this.props,t=e.classNamePrefix,r=e.className,o=e.containerClassName,a=e.alignment,i=e.extraPopoverAttributes,s=e.contents,l=p.createElement(g.Z,{contents:s});return(0,n.Z)({className:f()("".concat(t,"-trigger"),r),containerClassName:f()(t,o),title:l,alignment:a,overlayStyle:{padding:0,boxShadow:"0 2px 6px 0 rgb(0 0 0 / 12%)"},containerOffsetY:8},i)}},{key:"render",value:function render(){return(0,s.Z)((0,l.Z)(LinkPopoverPC.prototype),"render",this).call(this)}}]),LinkPopoverPC}(S);P.defaultProps=(0,n.Z)((0,n.Z)({},S.defaultProps),{},{alignment:"start",className:"",classNamePrefix:"form-link-popover",containerClassName:"",contents:[],extraPopoverAttributes:{}}),P.propTypes=(0,n.Z)((0,n.Z)({},S.propTypes),{},{alignment:y().oneOf(["start","center","end"]),className:y().string,classNamePrefix:y().string,containerClassName:y().string,contents:y().arrayOf(y().shape({})),extraPopoverAttributes:y().oneOfType([y().object])})},1292:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(25773),o=r(22951),a=r(91976),i=r(67591),s=r(94337),l=r(27378),c=r(23615),d=r.n(c),u=r(40500),p=function(e){(0,i.Z)(PopoverBase,e);var t=(0,s.Z)(PopoverBase);function PopoverBase(){return(0,o.Z)(this,PopoverBase),t.apply(this,arguments)}return(0,a.Z)(PopoverBase,[{key:"render",value:function render(){var e=this.props,t=e.readOnly,r=e.children;if(t)return r;var o=this.Popover,a=this.props,i=a.trigger,s=a.placement,c=a.destroyOnClose,d=a.visible,u=a.onVisibleChange,p=this.getExtraPopoverProps();return l.createElement(o,(0,n.Z)({destroyOnClose:c,placement:s,trigger:i,visible:d,onVisibleChange:u},p),this.renderPopoverChildren())}}]),PopoverBase}(l.PureComponent);p.defaultProps={children:null,destroyOnClose:!0,onVisibleChange:u.dG,placement:"top",readOnly:!1,trigger:"click",visible:void 0},p.propTypes={children:d().node,destroyOnClose:d().bool,placement:d().oneOf(["top","left","right","bottom"]),readOnly:d().bool,trigger:d().oneOf(["click","hover"]),visible:d().bool,onVisibleChange:d().func}},62698:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(50189),o=r(25773),a=r(53782),i=r(22951),s=r(91976),l=r(47169),c=r(67591),d=r(94337),u=r(64649),p=r(27378),m=r(23615),f=r.n(m),h=r(90005),y=r.n(h),b=r(19199),g=(r(12249),r(57637),function(e){(0,c.Z)(PopoverContentBase,e);var t=(0,d.Z)(PopoverContentBase);function PopoverContentBase(){return(0,i.Z)(this,PopoverContentBase),t.apply(this,arguments)}return(0,s.Z)(PopoverContentBase,[{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,n=e.contents;return null!=n&&n.length?p.createElement("div",{className:y()("".concat(t,"-").concat(this.componentType),r)},n.map(this.renderPopoverContentItem,this)):null}}]),PopoverContentBase}(p.PureComponent));g.defaultProps={className:"",classNamePrefix:"form-popover-content",contents:[]},g.propTypes={className:f().string,classNamePrefix:f().string,contents:f().arrayOf(f().shape({id:f().string.isRequired,iconClass:f().string,text:f().string,onClick:f().func}))};var v=r(40500),_=["id","iconClass","text","show","disabled"],O=function(e){(0,c.Z)(PopoverContentPC,e);var t=(0,d.Z)(PopoverContentPC);function PopoverContentPC(){var e;(0,i.Z)(this,PopoverContentPC);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,u.Z)((0,l.Z)(e),"componentType","pc"),e}return(0,s.Z)(PopoverContentPC,[{key:"renderPopoverContentItem",value:function renderPopoverContentItem(e){var t=this.props,r=t.classNamePrefix,n=t.iconClassName,i=t.itemClassName,s=t.textClassName,l=t.tipPlacement,c=t.extraTipAttributes,d=e.id,u=e.iconClass,m=e.text,f=e.show,h=e.disabled,g=(0,a.Z)(e,_);if(!f)return null;return p.createElement(b.default,(0,o.Z)({key:d,className:y()("".concat(r,"-item"),i,{disabled:h}),containerClassName:s,containerOffsetY:-4,hoverDelay:150,overlayStyle:{boxShadow:"0 2px 6px 0 rgb(0 0 0 / 12%)"},placement:l,title:m},c),p.createElement("div",(0,o.Z)({"aria-label":m,className:y()("".concat(r,"-item-icon"),u,n),role:"button",tabIndex:0,onKeyDown:v.dG},g)))}}]),PopoverContentPC}(g);O.defaultProps=(0,n.Z)((0,n.Z)({},g.defaultProps),{},{extraTipAttributes:{},iconClassName:"",itemClassName:"",textClassName:"",tipPlacement:"top"}),O.propTypes=(0,n.Z)((0,n.Z)({},g.propTypes),{},{extraTipAttributes:f().oneOfType([f().object]),iconClassName:f().string,itemClassName:f().string,textClassName:f().string,tipPlacement:f().oneOf(["top","bottom","left","right"])})},46812:(e,t,r)=>{"use strict";r.d(t,{u:()=>b});var n=r(22951),o=r(91976),a=r(47169),i=r(67591),s=r(94337),l=r(64649),c=(r(12249),r(57637),r(91270),r(27378)),d=r(23615),u=r.n(d),p=r(90005),m=r.n(p),f=r(57566),h=r(40500),y=function(e){(0,i.Z)(RatingCoreBase,e);var t=(0,s.Z)(RatingCoreBase);function RatingCoreBase(){var e;(0,n.Z)(this,RatingCoreBase);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,l.Z)((0,a.Z)(e),"ratingItemCount",5),e}return(0,o.Z)(RatingCoreBase,[{key:"renderSelectedTip",value:function renderSelectedTip(){var e=this.props,t=e.classNamePrefix,r=e.currentSelectedIndex,n=e.toolTips;return n.length>=this.ratingItemCount&&r>=0?c.createElement("div",{className:"".concat(t,"-tip")},c.createElement("span",null,n[r])):null}},{key:"renderRatingItem",value:function renderRatingItem(e,t){var r=this.props,n=r.cellClassName,o=r.classNamePrefix,a=r.currentHoveredIndex,i=r.currentSelectedIndex,s=r.icon,l=r.iconClassName,d=r.mode,u=r.size,p=r.toolTips,m=r.onClick,h=r.onMouseEnter,y=r.onMouseLeave,b=r.ToolTip,g=Number.prototype.toString.call(t),v=c.createElement(f.H,{key:g,className:n,classNamePrefix:o,icon:s,iconClassName:l,index:t,size:u,entered:!!{singleton:a===t,continuous:a>=t}[d],selected:!!{singleton:i===t,continuous:i>=t}[d],onClick:m,onMouseEnter:h,onMouseLeave:y});if(a!==t)return v;var _=p.length?p[t]:"";return c.createElement(b,{key:g,visible:!0,title:_},v)}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.getDesc,a=e.mode,i=e.readOnly,s=o(),l=this.ratingItemCount;return c.createElement(c.Fragment,null,c.createElement("div",{className:m()(r,t,a,{disabled:n,readonly:!n&&i})},Array.from({length:l}).map(this.renderRatingItem,this),this.renderSelectedTip()),s?c.createElement("div",{className:"".concat(r,"-edit-desc")},s):null)}}]),RatingCoreBase}(c.PureComponent);y.propTypes={ToolTip:u().oneOfType([u().any]),cellClassName:u().string,className:u().string,classNamePrefix:u().string,currentHoveredIndex:u().number,currentSelectedIndex:u().number,disabled:u().bool,getDesc:u().func,icon:u().oneOf(["stars","likes","emojis"]),iconClassName:u().string,mode:u().oneOf(["continuous","singleton"]),readOnly:u().bool,size:u().oneOf(["small","normal","large"]),toolTips:u().arrayOf(u().string),onClick:u().func,onMouseEnter:u().func,onMouseLeave:u().func},y.defaultProps={cellClassName:"",className:"",classNamePrefix:"form-rating",currentHoveredIndex:-1,currentSelectedIndex:-1,disabled:!1,getDesc:h.dG,icon:"stars",iconClassName:"",mode:"continuous",onClick:h.dG,onMouseEnter:h.dG,onMouseLeave:h.dG,readOnly:!1,size:"large",ToolTip:c.Fragment,toolTips:[]};var b=y},57566:(e,t,r)=>{"use strict";r.d(t,{H:()=>c});var n=r(27378),o=r(23615),a=r.n(o),i=r(90005),s=r.n(i),l=r(40500),c=(0,l.W5)((function(e){var t=e.className,r=e.classNamePrefix,o=e.disabled,a=e.entered,i=e.icon,c=e.iconClassName,d=e.index,u=e.readOnly,p=e.selected,m=e.size,f=e.onClick,h=e.onMouseEnter,y=e.onMouseLeave,b=s()("".concat(r,"-cell"),t,i,m,{disabled:o,entered:!o&&!u&&a,readonly:!o&&u,selected:p}),g=(0,n.useCallback)((function(e){e.stopPropagation(),f(d)}),[e.index]),v=(0,n.useCallback)((function(e){e.stopPropagation(),h(d)}),[e.index]),_=(0,n.useCallback)((function(e){e.stopPropagation(),y(d)}),[e.index]);return n.createElement("div",{className:b,"data-option-index":d,role:"button",tabIndex:"0",onClick:g,onKeyDown:l.dG,onMouseEnter:v,onMouseLeave:_},n.createElement("div",{className:s()("".concat(r,"-icon"),c)}))}));c.propTypes={className:a().string,classNamePrefix:a().string,disabled:a().bool,entered:a().bool,icon:a().oneOf(["stars","likes","emojis"]),iconClassName:a().string,index:a().number,readOnly:a().bool,selected:a().bool,size:a().oneOf(["mini","default","small","normal","large"]),onClick:a().func,onMouseEnter:a().func,onMouseLeave:a().func},c.defaultProps={className:"",classNamePrefix:"form-rating",disabled:!1,entered:!1,icon:"stars",iconClassName:"",index:-1,onClick:l.dG,onMouseEnter:l.dG,onMouseLeave:l.dG,readOnly:!1,selected:!1,size:"large"},c.displayName="RatingItem"},44376:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(46812),p=r(27378);var m=function(e){(0,l.Z)(RatingFillPCLoader,e);var t,p=(0,c.Z)(RatingFillPCLoader);function RatingFillPCLoader(){var e;(0,a.Z)(this,RatingFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"RatingCore",u.u),e}return(0,i.Z)(RatingFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_rating_rating-fill_rating-fill-pc_js").then(r.bind(r,53887));case 2:e=n.sent,t=e.default,this.setState({RatingFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),RatingFillPCLoader}(function(e){(0,l.Z)(RatingFillLoader,e);var t=(0,c.Z)(RatingFillLoader);function RatingFillLoader(e){var r;return(0,a.Z)(this,RatingFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(RatingFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.state.RatingFill;if(e)return p.createElement(e,this.props);var t=this.RatingCore;return p.createElement(t,this.props)}}]),RatingFillLoader}(p.PureComponent))},45910:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={satisfaction:["非常不满意","不满意","一般","满意","非常满意"],recommendation:["完全不推荐","不推荐","不确定","推荐","强烈推荐"],conformity:["完全不符合","不符合","一般","符合","非常符合"],recognition:["完全不认可","不认可","一般","认可","非常认可"],possibility:["完全不可能","不可能","不确定","可能","极有可能"],willingness:["完全不愿意","不愿意","不确定","愿意","非常愿意"],importance:["完全不重要","不重要","不确定","重要","非常重要"],mood:["生气","难过","平静","开心","兴奋"]}},67521:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var n={PARAGRAPH:"paragraph",LINK:"link",IMAGE:"image",UL:"ul",LI:"li"}},84850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ge});var n,o=r(11092),a=r(27791),i=r(22951),s=r(91976),l=r(47169),c=r(67591),d=r(94337),u=r(64649),p=r(73428),m=(r(12249),r(57637),r(27378)),f=r(23615),h=r.n(f),y=r(90005),b=r.n(y),g=r(86727),v=r(66040),_=r(41589),O=r(67521),S=r(12159),P=r(21896),C=r(41933),w=r(40500),I=(0,v.px)()(n=function(e){(0,c.Z)(Paragraph,e);var t=(0,d.Z)(Paragraph);function Paragraph(){return(0,i.Z)(this,Paragraph),t.apply(this,arguments)}return(0,s.Z)(Paragraph,[{key:"render",value:function render(){var e=this,t=this.props,r=t.beforeOpenLink,n=t.className,o=t.classNamePrefix,a=t.element,i=t.LinkElement,s=t.wxConfig,l=t.corpId,c=t.canPrivateCopyOut,d=t.importSCCommonService;return m.createElement("div",{className:b()(o,n)},a.map((function(t,n){if(t.type===O.y.LINK)return m.createElement(i,{key:Number.prototype.toString.call(n),readOnly:!0,beforeOpenLink:r,canPrivateCopyOut:c,corpId:l,element:t,importSCCommonService:d,wxConfig:s,onReport:e.handleReport});var o=t.text,a=t.highlight?{fontWeight:"bold",background:"yellow"}:{fontWeight:"normal",background:"transparent"};return m.createElement("span",{key:Number.prototype.toString.call(n),style:a},o||"\ufeff")})))}}]),Paragraph}(m.PureComponent))||n;I.defaultProps={beforeOpenLink:w.dG,canPrivateCopyOut:!1,className:"",classNamePrefix:"rich-text-element-paragraph",corpId:"",element:[],importSCCommonService:w.dG,LinkElement:null,wxConfig:void 0},I.propTypes={LinkElement:h().elementType,beforeOpenLink:h().func,canPrivateCopyOut:h().bool,className:h().string,classNamePrefix:h().string,corpId:h().string,element:h().arrayOf(h().shape({text:h().string})),importSCCommonService:h().func,wxConfig:h().shape({})};const E=I;var T,N,j=["setClipboardData"],D=(0,v.px)()((N=function(e){(0,c.Z)(EditorReadonly,e);var t,r=(0,d.Z)(EditorReadonly);function EditorReadonly(e){var t;return(0,i.Z)(this,EditorReadonly),(t=r.call(this,e)).isInCopyStatus=!1,t}return(0,s.Z)(EditorReadonly,[{key:"handleCopy",value:function handleCopy(e){this.props.canPrivateCopyOut&&!this.isInCopyStatus&&this.doCopyInPrivate(e)}},{key:"wxConfig",get:function get(){var e=this.props.wxConfig;return(0,_.tZ)(e,j)}},{key:"doCopyInPrivate",value:(t=(0,a.Z)((0,o.Z)().mark((function _callee(e){var t,r,n,a;return(0,o.Z)().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return this.importSCCommonService(),t=this.props.corpId,this.isInCopyStatus=!0,e.preventDefault(),a=(0,_.v2)(),r=a.html,n=a.plain,o.prev=9,o.next=12,(0,g.writeInClipBoard)({html:r,plain:n,event:e},{encrypt:!0,encryptKey:t});case 12:this.isInCopyStatus=!1,o.next=18;break;case 15:o.prev=15,o.t0=o.catch(9),this.isInCopyStatus=!1;case 18:case"end":return o.stop()}}),_callee,this,[[9,15]])}))),function doCopyInPrivate(e){return t.apply(this,arguments)})},{key:"renderElement",value:function renderElement(){var e=this,t=this.props.richTextValue,r=S.K.deserialize(t).value;if((0,P.Zc)(r))return null;var n=(0,C.Q)(r),o=this.props,a=o.beforeOpenLink,i=o.imageClassName,s=o.imageClassNamePrefix,l=o.linkClassName,c=o.linkClassNamePrefix,d=o.paragraphClassName,u=o.paragraphClassNamePrefix,p=o.source,f=o.corpId,h=o.canPrivateCopyOut,y=this.ImageElement,g=this.LinkElement;return m.createElement("div",{className:"editor-readonly"},n.map((function(t,r){return t.type===O.y.IMAGE?m.createElement(y,{key:Number.prototype.toString.call(r),className:i,classNamePrefix:s,imageList:t.data,source:p,onReport:e.handleReport}):m.createElement(E,{key:Number.prototype.toString.call(r),LinkElement:g,beforeOpenLink:a,canPrivateCopyOut:h,classNamePrefix:u,corpId:f,element:t.children,importSCCommonService:e.importSCCommonService,linkClassName:l,linkClassNamePrefix:c,wxConfig:e.wxConfig,className:b()(d,{"is-not-empty":!(0,P.Yj)(t)}),onReport:e.handleReport})})))}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix;return m.createElement("div",{className:b()(t,r),onCopy:this.handleCopy},this.renderElement())}}],[{key:"isEmptyNode",value:function isEmptyNode(e){var t=S.K.deserialize(e).value;return(0,P.Zc)(t)}}]),EditorReadonly}(m.PureComponent),(0,p.Z)(N.prototype,"handleCopy",[v.xB],Object.getOwnPropertyDescriptor(N.prototype,"handleCopy"),N.prototype),T=N))||T;D.defaultProps={beforeOpenLink:w.dG,canPrivateCopyOut:!1,className:"",classNamePrefix:"form-rich-editor",corpId:"",imageClassName:"",imageClassNamePrefix:"rich-text-element-image",linkClassName:"",linkClassNamePrefix:"rich-text-element-link",paragraphClassName:"",paragraphClassNamePrefix:"rich-text-element-paragraph",richTextValue:"",source:"",wxConfig:void 0},D.propTypes={beforeOpenLink:h().func,canPrivateCopyOut:h().bool,className:h().string,classNamePrefix:h().string,corpId:h().string,imageClassName:h().string,imageClassNamePrefix:h().string,linkClassName:h().string,linkClassNamePrefix:h().string,paragraphClassName:h().string,paragraphClassNamePrefix:h().string,richTextValue:h().string,source:h().string,wxConfig:h().shape({})};const k=D;var x,Z,L,R,A,F,M,B,q=r(36303),U=(x=(0,v.px)(),Z=(0,v.w0)(),L=(0,v.w0)(),x((B=function(e){(0,c.Z)(ImageBase,e);var t=(0,d.Z)(ImageBase);function ImageBase(e){var r;return(0,i.Z)(this,ImageBase),(r=t.call(this,e)).handleImageLoaded=ImageBase.richEditorImageLoaded.bind(null,(0,l.Z)(r)),r.handlePreviewImage=ImageBase.richEditorImagePreview.bind(null,(0,l.Z)(r)),r}return(0,s.Z)(ImageBase,[{key:"getImageList",value:function getImageList(){return this.props.imageList.map((function(e){return e.src}))}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.source,o=this.ImageGallery,a=this.getImageList();return m.createElement("div",{className:b()(t,r)},m.createElement("div",{className:"image-gallery-container"},m.createElement(o,{readOnly:!0,images:a,source:n,imageExtraAttributes:{useIntersectionObserver:this.useLazyImage},onImageLoad:this.handleImageLoaded,onPreviewImage:this.handlePreviewImage,onReport:this.handleReport})))}}]),ImageBase}(m.Component),(0,u.Z)(B,"richEditorImageLoaded",w.dG),(0,u.Z)(B,"richEditorImagePreview",w.dG),A=B,(0,p.Z)(A,"richEditorImageLoaded",[Z],(F=(F=Object.getOwnPropertyDescriptor(A,"richEditorImageLoaded"))?F.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return F}}),A),(0,p.Z)(A,"richEditorImagePreview",[L],(M=(M=Object.getOwnPropertyDescriptor(A,"richEditorImagePreview"))?M.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return M}}),A),R=A))||R);U.defaultProps={className:"",classNamePrefix:"rich-text-element-image",imageList:[],source:""},U.propTypes={className:h().string,classNamePrefix:h().string,imageList:h().arrayOf(h().shape({src:h().string})),source:h().string};const G=U;var K,V=r(22843),Q=(r(98618),function(e){(0,c.Z)(ImagePC,e);var t=(0,d.Z)(ImagePC);function ImagePC(e){var r;return(0,i.Z)(this,ImagePC),r=t.call(this,e),(0,u.Z)((0,l.Z)(r),"ImageGallery",V.default),r.useLazyImage=!(q.default.isWindows&&(q.default.isWeChat||q.default.isWxMiniProgram)),r}return(0,s.Z)(ImagePC)}(G)),H=r(50189),Y=r(21886),z=r(81893),$=r(80683),W=r(25773),X=r(11026),J=0,ee=1,te=2,re=3,ne=4,oe=(K=function(e){(0,c.Z)(LongPress,e);var t=(0,d.Z)(LongPress);function LongPress(e){var r;return(0,i.Z)(this,LongPress),(r=t.call(this,e)).pressStatus=J,r.longPressRef=m.createRef(),r}return(0,s.Z)(LongPress,[{key:"componentDidMount",value:function componentDidMount(){this.props.disabled||this.handleAddEventListener()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props.disabled;e.disabled!==t&&(t?this.handleRemoveEventListener():this.handleAddEventListener())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.handleRemoveEventListener()}},{key:"handleAddEventListener",value:function handleAddEventListener(){var e=this.longPressRef.current;e.addEventListener("touchstart",this.handleTouchStart),e.addEventListener("contextmenu",LongPress.handleContextmenu)}},{key:"handleRemoveEventListener",value:function handleRemoveEventListener(){var e=this.longPressRef.current;e.removeEventListener("touchstart",this.handleTouchStart),e.removeEventListener("contextmenu",LongPress.handleContextmenu)}},{key:"handleTouchCancel",value:function handleTouchCancel(e){(0,this.props.onLongPressCancel)(e),clearTimeout(this.timeoutEvent),this.pressStatus=ne}},{key:"handleTouchEnd",value:function handleTouchEnd(e){this.pressStatus===ee&&(0,this.props.onClick)(e);var t=this.props.onLongPressEnd;this.pressStatus=J,clearTimeout(this.timeoutEvent),t(e)}},{key:"handleTouchMove",value:function handleTouchMove(e){var t=(0,X.Z)(e.touches,1)[0],r=t.clientX,n=t.clientY,o=this.startPos,a=o.x,i=o.y,s=this.props.moveThreshold;Math.abs(r-a)<s&&Math.abs(n-i)<s||((0,this.props.onLongPressCancel)(e),clearTimeout(this.timeoutEvent),this.pressStatus=re)}},{key:"handleTouchStart",value:function handleTouchStart(e){var t=this;(0,this.props.onLongPressStart)(e),this.pressStatus=ee,this.startPos={};var r=(0,X.Z)(e.touches,1)[0];this.startPos.x=r.clientX,this.startPos.y=r.clientY;var n=this.props.pressDelay;this.timeoutEvent=setTimeout((function(){if(t.pressStatus===ee){var r=t.props.onLongPress;t.pressStatus=te,r(e)}}),n)}},{key:"render",value:function render(){var e=this.props,t=e.disabled,r=e.children,n=e.style,o=e.className,a=t?null:{onTouchCancel:this.handleTouchCancel,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchMove};return m.createElement("div",(0,W.Z)({ref:this.longPressRef,className:o,style:n},a),r)}}],[{key:"handleContextmenu",value:function handleContextmenu(e){e.preventDefault()}}]),LongPress}(m.Component),(0,p.Z)(K.prototype,"handleTouchCancel",[v.xB],Object.getOwnPropertyDescriptor(K.prototype,"handleTouchCancel"),K.prototype),(0,p.Z)(K.prototype,"handleTouchEnd",[v.xB],Object.getOwnPropertyDescriptor(K.prototype,"handleTouchEnd"),K.prototype),(0,p.Z)(K.prototype,"handleTouchMove",[v.xB],Object.getOwnPropertyDescriptor(K.prototype,"handleTouchMove"),K.prototype),(0,p.Z)(K.prototype,"handleTouchStart",[v.xB],Object.getOwnPropertyDescriptor(K.prototype,"handleTouchStart"),K.prototype),K);oe.defaultProps={children:null,className:"",disabled:!1,moveThreshold:5,onClick:w.dG,onLongPress:w.dG,onLongPressCancel:w.dG,onLongPressEnd:w.dG,onLongPressStart:w.dG,pressDelay:200,style:{}},oe.propTypes={children:h().element,className:h().string,disabled:h().bool,moveThreshold:h().number,pressDelay:h().number,style:h().shape({}),onClick:h().func,onLongPress:h().func,onLongPressCancel:h().func,onLongPressEnd:h().func,onLongPressStart:h().func};const ae=oe;var ie,se,le,ce,de,ue,pe=r(81841),me=(ie=(0,Y.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_en_US_js").then(r.bind(r,68376))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_zh_TW_js").then(r.bind(r,33033))},locale:pe.Z}),se=(0,v.w0)({type:"richEditorLinkRendered"}),le=(0,v.w0)({type:"richEditorOpenLink"}),ce=(0,v.w0)({type:"richEditorLinkCopy"}),ie((ue=function(e){(0,c.Z)(LinkBase,e);var t,r,n=(0,d.Z)(LinkBase);function LinkBase(e){var t;return(0,i.Z)(this,LinkBase),(t=n.call(this,e)).state={visible:!1},t.linkRef=m.createRef(),t.linkPopoverClassName="rich-text-link-popover",t}return(0,s.Z)(LinkBase,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"handleOpenLink",value:(r=(0,a.Z)((0,o.Z)().mark((function _callee(){var e,t,r,n;return(0,o.Z)().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.element.href,r=e.beforeOpenLink,o.next=3,r(t);case 3:if(o.t0=o.sent,!1!==o.t0){o.next=6;break}return o.abrupt("return");case 6:n=t.startsWith("http")?t:"https://".concat(t),this.setState({visible:!1}),(0,z.lY)({url:n});case 9:case"end":return o.stop()}}),_callee,this)}))),function handleOpenLink(){return r.apply(this,arguments)})},{key:"handleCopyLink",value:function handleCopyLink(){var e=this.props,t=e.element.href,r=e.wxConfig,n=e.canPrivateCopyOut;this.setState({visible:!1}),!n||this.isInCopyStatus?(0,$.k)({plain:t},r):this.doCopyLinkInPrivate(t)}},{key:"hideLinkPopover",value:function hideLinkPopover(e){this.state.visible&&!this.linkRef.current.contains(e.target)&&this.setState({visible:!1})}},{key:"doCopyLinkInPrivate",value:(t=(0,a.Z)((0,o.Z)().mark((function _callee2(e){var t,r;return(0,o.Z)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props,r=t.corpId,(0,t.importSCCommonService)(),this.isInCopyStatus=!0,n.prev=3,n.next=6,(0,g.writeInClipBoard)({html:e,plain:e},{true:!1,encryptKey:r});case 6:this.isInCopyStatus=!1,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),this.isInCopyStatus=!1;case 12:case"end":return n.stop()}}),_callee2,this,[[3,9]])}))),function doCopyLinkInPrivate(e){return t.apply(this,arguments)})},{key:"renderLink",value:function renderLink(){var e,t=this.props,r=t.children,n=t.className,o=t.classNamePrefix,a=t.element,i=a.source,s=a.icon,l=s?{backgroundImage:"url(".concat(s,")")}:{};return m.createElement("div",{ref:this.linkRef,className:b()(n,o),role:"button",tabIndex:0,onClick:this.handleClickLink,onKeyDown:this.handleClickLink},m.createElement("div",{className:"link-wrap"},i?m.createElement("div",{className:b()("icon","icon-".concat(i)),style:l}):null,m.createElement("span",{className:b()("link",{"common-link":!i})},m.createElement("span",null,null===(e=a.children)||void 0===e?void 0:e[0].text))),r)}},{key:"render",value:function render(){var e,t=this.props.lang,r=this.LinkPopover,n=(null===(e=this.getLinkPopoverContents)||void 0===e?void 0:e.call(this))||[],o=this.state.visible;return m.createElement(r,{className:this.linkPopoverClassName,contents:n,lang:t,visible:o},m.createElement(ae,{disabled:this.disabled,pressDelay:200,onClick:this.handleOpenLink,onLongPress:this.handleLongPress,onLongPressCancel:this.handleLongPressCancel,onLongPressStart:this.handleLongPressStart},this.renderLink()))}}]),LinkBase}(m.Component),(0,p.Z)(ue.prototype,"componentDidMount",[se],Object.getOwnPropertyDescriptor(ue.prototype,"componentDidMount"),ue.prototype),(0,p.Z)(ue.prototype,"handleOpenLink",[v.xB,le],Object.getOwnPropertyDescriptor(ue.prototype,"handleOpenLink"),ue.prototype),(0,p.Z)(ue.prototype,"handleCopyLink",[v.xB,ce],Object.getOwnPropertyDescriptor(ue.prototype,"handleCopyLink"),ue.prototype),(0,p.Z)(ue.prototype,"hideLinkPopover",[v.xB],Object.getOwnPropertyDescriptor(ue.prototype,"hideLinkPopover"),ue.prototype),de=ue))||de);me.defaultProps=(0,H.Z)((0,H.Z)({},me.defaultProps),{},{beforeOpenLink:w.dG,canPrivateCopyOut:!1,children:null,className:"",classNamePrefix:"rich-text-element-link",corpId:"",element:{},importSCCommonService:w.dG,wxConfig:void 0}),me.propTypes={beforeOpenLink:h().func,canPrivateCopyOut:h().bool,children:h().element,className:h().string,classNamePrefix:h().string,corpId:h().string,element:h().shape({children:h().arrayOf(h().shape({text:h().string})),href:h().string,icon:h().string,source:h().string}),importSCCommonService:h().func,wxConfig:h().shape({})};const fe=me;var he,ye=r(8478),be=(r(47868),he=function(e){(0,c.Z)(LinkPC,e);var t=(0,d.Z)(LinkPC);function LinkPC(){var e;(0,i.Z)(this,LinkPC);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,u.Z)((0,l.Z)(e),"LinkPopover",ye.Z),(0,u.Z)((0,l.Z)(e),"disabled",!0),e}return(0,s.Z)(LinkPC,[{key:"handleClickLink",value:function handleClickLink(){this.handleOpenLink()}}]),LinkPC}(fe),(0,p.Z)(he.prototype,"handleClickLink",[v.xB],Object.getOwnPropertyDescriptor(he.prototype,"handleClickLink"),he.prototype),he),ge=(r(46167),function(e){(0,c.Z)(EditorReadonlyPC,e);var t,n=(0,d.Z)(EditorReadonlyPC);function EditorReadonlyPC(){var e;(0,i.Z)(this,EditorReadonlyPC);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),(0,u.Z)((0,l.Z)(e),"ImageElement",Q),(0,u.Z)((0,l.Z)(e),"LinkElement",be),e}return(0,s.Z)(EditorReadonlyPC,[{key:"importSCCommonService",value:(t=(0,a.Z)((0,o.Z)().mark((function _callee(){return(0,o.Z)().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),r.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),r.e("vendors-node_modules_tencent_dui-mobile_esm_components_Modal_index_js"),r.e("node_modules_tencent_docs-scenario-component-common-service_dist_esm_index_js-_433d0")]).then(r.bind(r,71349));case 2:(0,e.sent.showClipboardProtectionModal)();case 5:case"end":return e.stop()}}),_callee)}))),function importSCCommonService(){return t.apply(this,arguments)})}]),EditorReadonlyPC}(k))},29985:(e,t,r)=>{"use strict";r.d(t,{NB:()=>n,ez:()=>o,PX:()=>a,GP:()=>i,_q:()=>s,Tx:()=>l,lc:()=>c,lo:()=>d});var n={id:"LINK_POPOVER_OPEN_LINK_ITEM",iconClass:"open-link-icon",show:!0},o={id:"LINK_POPOVER_EDIT_LINK_ITEM",iconClass:"edit-link-icon",show:!0},a={id:"LINK_POPOVER_CANCEL_LINK_ITEM",iconClass:"cancel-link-icon",show:!0},i={id:"LINK_POPOVER_DELETE_LINK_ITEM",iconClass:"delete-link-icon",show:!0},s={id:"LINK_POPOVER_COPY_LINK_ITEM",iconClass:"copy-link-icon",show:!0},l={id:"RICH_EDITOR_POPOVER_INSERT_LINK",iconClass:"insert-link-icon",show:!0},c={id:"RICH_EDITOR_POPOVER_HEIGHTLIGHT_TEXT",iconClass:"highlight-text-icon",show:!0},d={id:"RICH_EDITOR_POPOVER_CANCEL_HEIGHTLIGHT_TEXT",iconClass:"cancel-highlight-text-icon",show:!0}},81841:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(50189),o=r(33978),a=r(29985);const i={MODAL_BTN_TEXT:o.mL,PANEL_BTN_TEXT:o.hA,imageTag:"[图片]",linkTag:"[链接]",labeledInputGroup:{clickToReplace:"点击替换",emptyLinkError:"请输入链接。",invalidLinkError:"请输入正确链接。",linkLabel:"链接",linkPlaceholder:"请输入网页链接地址",textLabel:"显示文本",textLabelShort:"文本",textPlaceholder:"请输入内容",titleTips:"文档名为《{{TIPS}}》"},labeledInputPanel:{title:"插入链接"},toolbar:{insertDoc:"插入{{DOC_NAME}}",insertImage:"插入图片",insertLink:"插入链接"},linkPopover:{open:(0,n.Z)((0,n.Z)({},a.NB),{},{text:"打开链接"}),edit:(0,n.Z)((0,n.Z)({},a.ez),{},{text:"编辑链接"}),copy:(0,n.Z)((0,n.Z)({},a._q),{},{text:"复制链接"}),cancel:(0,n.Z)((0,n.Z)({},a.PX),{},{text:"取消链接"}),remove:(0,n.Z)((0,n.Z)({},a.GP),{},{text:"删除链接"})},richPopover:{insertLink:(0,n.Z)((0,n.Z)({},a.Tx),{},{text:"插入链接"}),highlight:(0,n.Z)((0,n.Z)({},a.lc),{},{text:"突出显示"}),cancelHighlight:(0,n.Z)((0,n.Z)({},a.lo),{},{text:"取消突出显示"})}}},78194:(e,t,r)=>{"use strict";r.d(t,{Z:()=>$t});var n=r(649),o=r(11026),a=r(11092),i=r(27791),s=r(50189),l=r(22951),c=r(91976),d=r(47169),u=r(67591),p=r(94337),m=r(64649),f=r(73428),h=(r(91270),r(39690),r(74413),r(92243),r(27378)),y=r(75225),b=r(90005),g=r.n(b),v=r(36303),_=r(66040),O=r(25773),S=(r(8532),r(20779),r(47134),r(23615)),P=r.n(S),C=r(86286),w=r(78730),I=r(21886),E=r(41589),T=r(80683),N=r(86727),j=r(81841),D=r(40500),k=function Image(e){var t=(0,C.vt)(),r=(0,C.UE)(),n=e.ImageElement;return h.createElement(n,(0,O.Z)({},e,{focused:r,selected:t}))};const x=k;k.propTypes={ImageElement:P().elementType.isRequired};var Z=function Link(e){var t=(0,C.vt)(),r=(0,C.UE)(),n=e.LinkElement;return h.createElement(n,(0,O.Z)({},e,{focused:r,selected:t}))};const L=Z;Z.propTypes={LinkElement:P().elementType.isRequired};var R=r(67521),A=r(57236);r(66066);function withIsVoid(e){var t=e.editor,r=e.insertLink,n=e.onlyBulletedList,o=e.maxAllNodes,a=e.maxPreLevelNodes,i=e.onOverstep,s=t,l=s.isVoid;return s.isVoid=function(e){return[R.y.IMAGE,R.y.LINK].includes(e.type)||l(e)},{editor:t,insertLink:r,onlyBulletedList:n,maxAllNodes:o,maxPreLevelNodes:a,onOverstep:i}}function withIsLine(e){var t=e.editor,r=e.insertLink,n=e.onlyBulletedList,o=e.maxAllNodes,a=e.maxPreLevelNodes,i=e.onOverstep,s=t,l=s.isInline;return s.isInline=function(e){return e.type===R.y.LINK||l(e)},{editor:t,insertLink:r,onlyBulletedList:n,maxAllNodes:o,maxPreLevelNodes:a,onOverstep:i}}function removeNode(e,t){y.YR.removeNodes(e,{at:t})}function insert_node_insertNode(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];y.YR.insertNodes(e,t,{at:r,select:n})}var F=r(5071);var M=r(21896);function withDeleteBackward(e){var t=e.editor,r=e.insertLink,a=e.onlyBulletedList,i=e.maxAllNodes,l=e.maxPreLevelNodes,c=e.onOverstep,d=t,u=d.deleteBackward,p=d.isInline,m=d.isVoid;return d.deleteBackward=function(e){var r=d.selection.focus,i=r.path,l=r.offset,c=y.ML.parent(t,i),f=(0,o.Z)(c,1)[0];if(a){var h=f.children[0].text;if(h&&!l)return;var b=(0,n.Z)(i);b.splice(b.length-1);var g=y.ML.parent(t,b),v=(0,o.Z)(g,1)[0],_=!h&&v.type===R.y.LI&&v.children.length>1,O=65279===h.charCodeAt(0)&&l;if(_||O){b.splice(b.length-1),removeNode(t,b);var S=y.ML.parent(t,b),P=(0,o.Z)(S,1)[0];return void(P.type!==R.y.UL||1!==P.children.length||P.children[0].type||insert_node_insertNode(t,(0,F.We)(""),b,!0))}}var C=(0,o.Z)(i,2),w=C[0],I=C[1],E=w-1,T=I-1,N=f.children[T];if(f.source&&f.children[0].text.length===l)removeNode(d,[w,I]);else{if(0===l&&f.type===R.y.PARAGRAPH&&null!=N&&N.source){var j=(0,n.Z)(i);return j[1]=T,void removeNode(d,j)}if(f.type!==R.y.LINK||f.children[0].text.length===l)if(p(f))(function unwrapNode(e,t){y.YR.unwrapNodes(e,t)})(d,{match:function match(e){return!y.ML.isEditor(e)&&y.W_.isElement(e)&&e.type===R.y.LINK}});else if(0!==l||(null==N?void 0:N.type)!==R.y.LINK){var D=d.children[E];if(D&&(0,M.Yj)(f)&&m(D))return u(e),removeNode(d,[E]),void insert_node_insertNode(d,(0,F.fn)(D.data),[E],!0);u(e),0===d.children.length&&insert_node_insertNode(d,(0,F.$_)(),[0],!0);var k=t.selection.focus.path,x=y.ML.parent(d,k),Z=(0,o.Z)(x,1)[0];1===Z.children.length&&Z.type===R.y.PARAGRAPH&&!Z.children[0].text&&Z.children[0].highlight&&(removeNode(d,i),d.selection=(0,s.Z)((0,s.Z)({},d.selection),{},{focus:{path:i,offset:0},anchor:{path:i,offset:0}}))}else{var L,A,B=(0,n.Z)(f.children);if(B[T]={text:N.children[0].text},removeNode(d,[w]),insert_node_insertNode(d,(0,F.$_)(B),[w]),f.children[I-2].highlight){A=I-1,L=N.children[0].text.length}else{A=I-2;var q=f.children[A].text,U=N.children[0].text;L=q.length+U.length}d.selection=(0,s.Z)((0,s.Z)({},d.selection),{},{focus:{path:[w,A],offset:L},anchor:{path:[w,A],offset:L}})}}},{editor:t,insertLink:r,onlyBulletedList:a,maxAllNodes:i,maxPreLevelNodes:l,onOverstep:c}}function withDeleteForward(e){var t=e.editor,r=e.insertLink,a=e.onlyBulletedList,i=e.maxAllNodes,s=e.maxPreLevelNodes,l=e.onOverstep,c=t,d=c.deleteForward;return c.deleteForward=function(e){var t=c.selection.focus,r=t.path,i=t.offset,s=y.ML.parent(c,r),l=(0,o.Z)(s,1)[0];if(a&&i===l.children[0].text.length)return;var u=(0,o.Z)(r,2),p=u[0],m=u[1],f=m+1;if(l.type!==R.y.LINK||l.source){var h=l.children[m],b=l.children[f];if(h&&h.text.length===i&&(null==b?void 0:b.type)===R.y.LINK){var g=(0,n.Z)(r);return g[1]=f,void removeNode(c,g)}d(e)}else removeNode(c,[p,m])},{editor:t,insertLink:r,onlyBulletedList:a,maxAllNodes:i,maxPreLevelNodes:s,onOverstep:l}}function getCurrentRow(e,t){var r=1,n=Array.from(e);return t.forEach((function(e){if(e)for(var t=0;t<e;t++){var o=n[t];o.type===R.y.UL?r+=(0,M.XU)(o):o.type===R.y.LI?r+=(0,M.XU)({type:R.y.UL,children:[o]}):r+=1}n=n[e].children})),r}function isSamePath(e,t){var r=t.anchor,n=r.path,a=r.offset,i=t.focus,s=i.path,l=i.offset;if(n.toString()===s.toString()&&a===l)return!0;var c=y.ML.parent(e,n),d=(0,o.Z)(c,1)[0].children[0].text;return d&&d.length===a&&!l&&getCurrentRow(e.children,s)-getCurrentRow(e.children,n)==1}function withDeleteFragment(e){var t=e.editor,r=e.insertLink,a=e.onlyBulletedList,i=e.maxAllNodes,l=e.maxPreLevelNodes,c=e.onOverstep,d=t,u=d.deleteFragment;return d.deleteFragment=function(e){var r;if(a)(function deleteFragmentBulletedList(e){for(var t=e.selection,r=t.anchor,a=t.anchor.path,i=t.focus,s=t.focus.path,l={"-1":{anchor:r,focus:i},0:{anchor:r,focus:i},1:{anchor:i,focus:r}}[y.y$.compare(a,s)],c=!1;!c;){var d=y.ML.parent(e,l.anchor.path),u=(0,o.Z)(d,2),p=u[0],m=u[1],f=(0,n.Z)(m);f.splice(f.length-1);var h=void 0,b=p.children[0].text;removeNode(e,h=b&&b.length===l.anchor.offset?l.focus.path.slice(0,-2):(h=l.anchor.path).length>2?h.slice(0,-2):h);var g=y.ML.parent(e,h),v=(0,o.Z)(g,1)[0];v.type===R.y.UL&&1===v.children.length&&(v.children[0].type||removeNode(e,h.slice(0,-1))),e.children.length||insert_node_insertNode(e,(0,F.Z0)(),[0],!0);var _=e.selection,O=_.anchor,S=_.anchor.path,P=_.focus,C=_.focus.path;c=isSamePath(e,l={"-1":{anchor:O,focus:P},0:{anchor:O,focus:P},1:{anchor:P,focus:O}}[y.y$.compare(S,C)])}})(t);else if(u(e),0!==t.children.length){var i=t.children[t.children.length-1],l=(0,M.qx)(i);if(""===(null==l||null===(r=l.children)||void 0===r?void 0:r[0].text)){if(removeNode(d,[t.children.length-1]),""===i.children[0].text)return void insert_node_insertNode(d,(0,F.$_)(),[t.children.length-1],!0);insert_node_insertNode(d,(0,F.$_)([{text:i.children[0].text}]),[t.children.length],!0)}var c=t.selection.focus.path,p=y.ML.parent(d,c),m=(0,o.Z)(p,1)[0];1===m.children.length&&m.type===R.y.PARAGRAPH&&!m.children[0].text&&m.children[0].highlight&&(removeNode(d,c),d.selection=(0,s.Z)((0,s.Z)({},d.selection),{},{focus:{path:c,offset:0},anchor:{path:c,offset:0}}))}else insert_node_insertNode(d,(0,F.$_)(),[0],!0)},{editor:t,insertLink:r,onlyBulletedList:a,maxAllNodes:i,maxPreLevelNodes:l,onOverstep:c}}r(51344),r(56614),r(36736),r(63517);var B=r(29954),q=(r(98395),"link"),U="text",G=function splitTextLinkHybridStr(e){var t=/(?:(?:http|https):\/\/[\w-]+\.|www\.)(?:[\w-]+\.)(?:[\w+&@#/%=~_|$?!:,\\.-])*\/?/gi;if(null==e||!e.match(t))return[{type:U,text:e}];var r=Array.from(e.matchAll(t)),n=0,a=[];if(r.forEach((function(t){var r=e.slice(n,t.index);r&&a.push({type:U,text:r});var i=(0,o.Z)(t,1)[0];a.push({type:q,text:i}),n=t.index+i.length})),n<e.length){var i=e.slice(n);a.push({type:U,text:i})}return a};function withInsertBreak(e){var t=e.editor,r=e.insertLink,a=e.onlyBulletedList,i=e.maxAllNodes,l=e.maxPreLevelNodes,c=e.onOverstep,d=t,u=d.insertBreak,p=d.isInline;return d.insertBreak=function(){var e=y.ML.parent(d,d.selection.focus.path),i=(0,o.Z)(e,2),l=i[0],c=i[1],m=y.y$.next(c);if(a){var f=(0,n.Z)(c);return f.splice(f.length-1),f[f.length-1]=f.at(-1)+1,void insert_node_insertNode(t,(0,F.We)(""),f,!0)}if(l.type!==R.y.IMAGE){if(!p(l)&&(u(),!a)){var h=(0,o.Z)(m,1)[0],b=(0,o.Z)(c,1)[0],g=h+1,v=d.children,_=(0,s.Z)((0,s.Z)({},v[h]),{},{id:(0,D.dA)()});d.children=[].concat((0,n.Z)(d.children.slice(0,h)),[_],(0,n.Z)(d.children.slice(g)));var O=[];if(d.children[b].children.forEach((function(e){e.type!==R.y.LINK?G(e.text).forEach((function(t){var a=t;if(a.type===R.y.LINK){null==r||r(),a.id=(0,D.dA)(),(0,B.y)(a.text).then((function(e){var t=e.data;if(!e.error){var r=(0,M.Jz)(a.id,d.children),n=(0,F.jq)({text:t.title,link:a.text,id:a.id,source:t.docTypeAlias}),i=(0,o.Z)(r,2),s=i[0],l=i[1]+2;insert_node_insertNode(d,n,r),removeNode(d,[s,l])}}));var i=(0,F.jq)((0,s.Z)((0,s.Z)({},a),{},{link:a.text}));O.push.apply(O,(0,n.Z)(i))}else O.push({text:a.text,highlight:e.highlight})})):O.push(e)})),O.length>1){var S=b+1;insert_node_insertNode(d,(0,F.$_)(O),[b]),removeNode(d,[S])}}}else insert_node_insertNode(d,(0,F.$_)(),m,!0)},{editor:t,insertLink:r,onlyBulletedList:a,maxAllNodes:i,maxPreLevelNodes:l,onOverstep:c}}r(19717),r(98704);function withInsertFragment(e){var t=e.editor,r=e.insertLink,n=e.onlyBulletedList,a=e.maxAllNodes,i=e.maxPreLevelNodes,s=e.onOverstep,l=t,c=l.isVoid,d=l.insertFragment;return l.insertFragment=function(e){var t,r=y.ML.parent(l,null===(t=l.selection)||void 0===t||null===(t=t.focus)||void 0===t?void 0:t.path),n=(0,o.Z)(r,2),a=n[0],i=n[1],s=y.y$.next(i),u=(0,o.Z)(s,1)[0],p=e.reduce((function(e,t){if(t.type===R.y.IMAGE)e.push((0,F.fn)(t.data));else{var r=(0,M.Yl)(t),n=r.index,a=r.linkNode;if(-1!==n){var i=(0,o.Z)(a.children,1)[0];t.children[n]=(0,F.tg)(i)}e.push((0,F.$_)(t.children,(0,D.dA)()))}return e}),Array.from({})),m=(0,M.Yl)(e[0]).linkNode;a.type!==R.y.LINK?m||c(a)?insert_node_insertNode(l,p,[u],!0):d.apply(void 0,[p]):insert_node_insertNode(l,p,[u+1],!0)},{editor:t,insertLink:r,onlyBulletedList:n,maxAllNodes:a,maxPreLevelNodes:i,onOverstep:s}}function withInsertText(e){var t=e.editor,r=e.insertLink,a=e.onlyBulletedList,i=e.maxAllNodes,s=e.maxPreLevelNodes,l=e.onOverstep,c=t,d=c.insertText;return c.insertText=function(e){var r=y.ML.parent(c,c.selection.focus.path),u=(0,o.Z)(r,2),p=u[0],m=u[1],f=c.selection.focus,h=f.path,b=f.offset;if(a){var g=(0,n.Z)(m);g.splice(g.length-1);var v=y.ML.parent(c,g),_=(0,o.Z)(v,1)[0],O=(0,M.XU)(t);if(_.children.length>s||O>i)return l(),removeNode(t,g),void insert_node_insertNode(t,(0,F.We)(),g,!0)}var S=(0,o.Z)(h,2),P=S[0],C=S[1],w=C+1;if(p.type===R.y.LINK){var I=(0,F.jq)(p.children[0]),E=C+2;return b===p.children[0].text.length?void insert_node_insertNode(c,{text:e},[P,w],!0):0===b?(insert_node_insertNode(c,I,[P,C],!0),removeNode(c,[P,E]),void insert_node_insertNode(c,{text:e},[P,C],!0)):(insert_node_insertNode(c,I,[P,C],!0),void removeNode(c,[P,E]))}if(p.type===R.y.PARAGRAPH){var T=p.children[C],N=T.highlight,j=T.text;if(N&&j.length===b)return void insert_node_insertNode(t,{text:e},[P,w],!0)}p.type===R.y.IMAGE&&insert_node_insertNode(t,(0,F.$_)(),[P+1],!0),d(e)},{editor:t,insertLink:r,onlyBulletedList:a,maxAllNodes:i,maxPreLevelNodes:s,onOverstep:l}}function withNewReact(e){var t=e.editor,r=e.insertLink,n=e.onlyBulletedList,o=e.maxAllNodes,a=e.maxPreLevelNodes,i=e.onOverstep;return(0,C.BU)(t),{editor:t,insertLink:r,onlyBulletedList:n,maxAllNodes:o,maxPreLevelNodes:a,onOverstep:i}}var K=function(){function InsertImage(){(0,l.Z)(this,InsertImage),this.imageList=[],this.insertIndex=-1}return(0,c.Z)(InsertImage,[{key:"uploadImage",value:function uploadImage(e,t,r,n,o){var a=this,i=e.target.files;this.insertIndex=(0,M.n7)(t,r.children),this.imageList=[],n({files:i,source:o,handleSingleComplete:function handleSingleComplete(e){var t=e.src;return a.handleUploadSuccess(t,r)}})}},{key:"handleUploadSuccess",value:function handleUploadSuccess(e,t){this.imageList.push({src:e}),this.insertImageNode(t)}},{key:"insertImageNode",value:function insertImageNode(e){var t=(0,F.fn)((0,n.Z)(this.imageList));(0,M.Yj)(e.children[this.insertIndex])?(insert_node_insertNode(e,t,[this.insertIndex]),removeNode(e,[this.insertIndex+1])):1===this.imageList.length?(this.insertIndex+=1,insert_node_insertNode(e,t,[this.insertIndex])):(removeNode(e,[this.insertIndex]),insert_node_insertNode(e,t,[this.insertIndex]))}}]),InsertImage}();r(63115);function insertLink(e){var t=e.link,r=e.editor,o=e.index,a=e.focus,i=(0,F.$_)((0,F.jq)(t)),l=r.children[o],c={node:l,editor:r,insertIndex:o};return function getInsertCondition(e){var t=e.focus,r=e.node,n=e.editor,o=e.insertIndex;return!n.selection||n.selection.focus.path[0]!==o||!t||r.type===R.y.IMAGE}({focus:a,node:l,editor:r,insertIndex:o})?function insertAtToolbarPosition(e){var t=e.node,r=e.needInsertNode,n=e.editor,o=e.insertIndex;if((0,M.Yj)(t))return insert_node_insertNode(n,r,[o]),void removeNode(n,[o+1]);insert_node_insertNode(n,r,[o+1])}(c=(0,s.Z)((0,s.Z)({},c),{},{needInsertNode:i})):function insertAtCursorPosition(e){var t=e.node,r=e.focus,o=e.editor,a=e.link,i=e.insertIndex,l=r.path,c=r.offset,d=t.children[l[1]],u=JSON.parse(JSON.stringify(t.children)),p="",m="",f=l[1],h=0,y=!1,b=!1;if(d.type!==R.y.LINK){var g=d.text,v=d.highlight;p=g.slice(0,c),y=v,b=v,m=g.slice(c),f-=1,h=1}f+=1;var _=(0,F.jq)((0,s.Z)((0,s.Z)({},a),{},{preText:p,aftText:m,preTextHighlight:y,aftTextHighlight:b}));u.splice.apply(u,[f,h].concat((0,n.Z)(_))),removeNode(o,[i]),insert_node_insertNode(o,(0,F.$_)(u),[i])}(c=(0,s.Z)((0,s.Z)({},c),{},{link:t,focus:a}))}var V=r(12159),Q=r(41933);r(35659),r(71165),r(69108);function isOverStepCount(e,t,r){var n=y.ML.parent(e,t);return(0,o.Z)(n,1)[0].children.length>=r}function backwardBulletedList(e,t,r,a){var i=e.selection.focus.path,s=(0,M.bk)(e.children,i),l=s.levels,c=s.optionIndex;if(l.length>=t)a();else if(c){var d=(0,M.dK)(e.children,i);if((0,M.TN)(d,0)+l.length>=t)a();else{var u=(0,n.Z)(i);u.splice(u.length-2);var p=(0,n.Z)(i);p.splice(p.length-1),p[p.length-2]=p.at(-2)-1,p[p.length-1]=p.at(-1)+1;var m,f=y.ML.parent(e,p),h=(0,o.Z)(f,1)[0],b=function getChildLevel(e){return e.children.find((function(e){return e.type===R.y.UL}))}(h);b?(m=d,p.push(b.children.length)):(p[p.length-1]=h.children.length,m={type:R.y.UL,children:[d]}),isOverStepCount(e,p,r)?a():(removeNode(e,u),insert_node_insertNode(e,m,p,!0))}}}r(48316);function bulletedListToText(e,t,r){e.forEach((function(e){if(e.type===R.y.LI)bulletedListToText(e.children,t,r);else if(e.type===R.y.UL)bulletedListToText(e.children,t,r+1);else{var n=e.children[0].text,o=Array.from({length:r}).fill("\t");t.push("".concat(o.join("")).concat(n,"\n"))}}))}function getPlainText(e){var t=[];return bulletedListToText((0,o.Z)(e,1)[0].children,t,0),t.join("")}r(53124),r(62285),r(84050);var H=function(){function TextToBulletedList(){(0,l.Z)(this,TextToBulletedList),this.editor=null,this.currentTabCount=0,this.maxLevel=1/0,this.maxPreNodes=1/0,this.maxAllNodes=1/0,this.overStepCount=!1}return(0,c.Z)(TextToBulletedList,[{key:"isVoidBulletedList",value:function isVoidBulletedList(){var e=this.editor.selection.focus.path,t=y.ML.parent(this.editor,e),r=(0,o.Z)(t,1)[0].children;return 1===r.length&&""===r[0].text}},{key:"insertBrotherNodes",value:function insertBrotherNodes(e){var t=y.ML.parent(this.editor,this.editor.selection.focus.path),r=(0,o.Z)(t,2)[1],a=(0,n.Z)(r);a.splice(a.length-1);var i=(0,n.Z)(a);if(this.isOverStepCount(r,{checkLevels:!1}))this.overStepCount=!0;else{if(!this.isVoidBulletedList(i))return i[i.length-1]=i.at(-1)+1,void insert_node_insertNode(this.editor,(0,F.We)(e),i,!0);removeNode(this.editor,i),insert_node_insertNode(this.editor,(0,F.We)(e),i,!0)}}},{key:"insertChildrenNodes",value:function insertChildrenNodes(e){var t=y.ML.parent(this.editor,this.editor.selection.focus.path),r=(0,o.Z)(t,2)[1],a=(0,n.Z)(r);if(a[a.length-1]=a.at(-1)+1,this.isOverStepCount(r))this.overStepCount=!0;else{var i=(0,n.Z)(a);insert_node_insertNode(this.editor,(0,F.Z0)(e),i,!0)}}},{key:"insertParentNodes",value:function insertParentNodes(e){var t=y.ML.parent(this.editor,this.editor.selection.focus.path),r=(0,o.Z)(t,2)[1],a=y.y$.parent(r),i=(0,n.Z)(a);i.splice(i.length-2),this.isOverStepCount(r,{checkLevels:!1})?this.overStepCount=!0:0===i.length?insert_node_insertNode(this.editor,(0,F.We)(e),y.y$.next(a),!0):(i[i.length-1]=i.at(-1)+1,insert_node_insertNode(this.editor,(0,F.We)(e),i,!0))}},{key:"isOverStepCount",value:function isOverStepCount(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.checkLevels,n=void 0===r||r,a=t.checkOption,i=void 0===a||a,s=t.checkTotalOptions,l=void 0===s||s,c=parseInt(e.length/2,10),d=e.slice(0,-1),u=y.ML.parent(this.editor,d),p=(0,o.Z)(u,1)[0],m=(0,M.XU)(this.editor);return n&&c>=this.maxLevel||i&&p.children.length>=this.maxPreNodes||l&&m>=this.maxAllNodes}},{key:"parseTextToBulletedList",value:function parseTextToBulletedList(e){var t=this,r=e.editor,n=e.maxLevel,o=e.maxPreLevelNodes,a=e.maxAllNodes,i=e.text,s=e.onOverstep;return this.editor=r,this.maxLevel=n,this.maxPreNodes=o,this.maxAllNodes=a,i.split("\n").filter((function(e){return Boolean(e.trim())})).forEach((function(e,r){var n=e.split("\t"),o=n.findIndex((function(e){return Boolean(e.trim())})),a=n[o];0===r||t.currentTabCount===o?t.insertBrotherNodes(a):o-t.currentTabCount>=1?t.insertChildrenNodes(a):t.currentTabCount-o>=1&&t.insertParentNodes(a),t.currentTabCount=o})),this.overStepCount&&s(),i}}]),TextToBulletedList}();function insertText(e,t){var r=e.selection.focus,n=r.path,a=r.offset;if(0===a)return function insertTextAtFront(e){var t=e.text,r=e.path;insert_node_insertNode(e.editor,{text:t},r,!0)}({text:t,path:n,editor:e});var i=(0,o.Z)(n,2),l=i[0],c=i[1],d=e.children[l].children[c].text;return d.length===a?function insertTextAtLast(e){var t=e.text,r=e.paragraphIndex,n=e.elementIndex;insert_node_insertNode(e.editor,{text:t},[r,n+1],!0)}({text:t,paragraphIndex:l,elementIndex:c,editor:e}):function insertTextAtMiddle(e){var t=e.text,r=e.paragraphIndex,n=e.elementIndex,o=e.offset,a=e.currentText,i=e.editor,l=i.children[r].children,c=Array.from(l);c[n]={text:"".concat(a.slice(0,o)).concat(t).concat(a.slice(o))},removeNode(i,[r,n]),insert_node_insertNode(i,c[n],[r,n],!0);var d=o+t.length;i.selection=(0,s.Z)((0,s.Z)({},i.selection),{},{focus:{path:[r,n],offset:d},anchor:{path:[r,n],offset:d}})}({text:t,paragraphIndex:l,elementIndex:c,offset:a,editor:e,currentText:d})}var Y=function(e){(0,u.Z)(UlBase,e);var t=(0,p.Z)(UlBase);function UlBase(){return(0,l.Z)(this,UlBase),t.apply(this,arguments)}return(0,c.Z)(UlBase,[{key:"render",value:function render(){var e=this.props,t=e.attributes,r=e.children,n=e.className,o=e.classNamePrefix;return h.createElement("ul",(0,O.Z)({className:g()(o,n)},t),r)}}]),UlBase}(h.PureComponent);Y.defaultProps={attributes:{},children:null,className:"",classNamePrefix:"rich-text-element-ul"},Y.propTypes={attributes:P().shape({}),children:P().node,className:P().string,classNamePrefix:P().string};var z,$,W,X,J,ee,te,re,ne,oe,ae,ie,se,le,ce=function(e){(0,u.Z)(LiBase,e);var t=(0,p.Z)(LiBase);function LiBase(){return(0,l.Z)(this,LiBase),t.apply(this,arguments)}return(0,c.Z)(LiBase,[{key:"render",value:function render(){var e=this.props,t=e.attributes,r=e.children,n=e.className,o=e.classNamePrefix;return h.createElement("li",(0,O.Z)({className:g()(o,n)},t),r)}}]),LiBase}(h.PureComponent);ce.defaultProps={attributes:{},children:null,className:"",classNamePrefix:"rich-text-element-li"},ce.propTypes={attributes:P().shape({}),children:P().node,className:P().string,classNamePrefix:P().string};var de=["setClipboardData"],ue=(z=(0,_.px)(),$=(0,I.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_en_US_js").then(r.bind(r,68376))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_zh_TW_js").then(r.bind(r,33033))},locale:j.Z}),W=(0,_.w0)(),X=(0,_.w0)(),J=(0,_.w0)({type:"richEditorInsertLink"}),ee=(0,_.w0)({type:"richEditorUploadImageClicked"}),te=(0,_.w0)({type:"richEditorAddTdocClicked"}),re=(0,_.w0)({type:"richEditorInsertLinkClicked"}),ne=(0,_.w0)({type:"richEditorPasted"}),z(oe=$((le=function(e){(0,u.Z)(RichEditorBase,e);var t,r,s=(0,p.Z)(RichEditorBase);function RichEditorBase(e){var t;return(0,l.Z)(this,RichEditorBase),(t=s.call(this,e)).state={readOnly:e.readOnly},t.currentId="",t.currentPath=[],t.focus=void 0,t.isInCopyStatus=!1,t.editor=function createEditorWithPlugins(e){var t=e.insertLink,r=e.onlyBulletedList,n=e.maxAllNodes,o=e.maxPreLevelNodes,a=e.onOverstep;return(0,A.Z)(withIsVoid,withIsLine,withDeleteBackward,withDeleteForward,withDeleteFragment,withInsertBreak,withInsertFragment,withInsertText,withNewReact)({editor:(0,y.Jh)(),insertLink:t,onlyBulletedList:r,maxAllNodes:n,maxPreLevelNodes:o,onOverstep:a})}({insertLink:RichEditorBase.insertLink.bind(null,(0,d.Z)(t)),onlyBulletedList:e.onlyBulletedList,maxPreLevelNodes:e.maxPreLevelNodes,maxAllNodes:e.maxAllNodes,onOverstep:e.onOverstep}).editor,t.initRichEditorValue(),t.reportImageIconClick=RichEditorBase.richEditorAddImageClick.bind(null,(0,d.Z)(t)),t}return(0,c.Z)(RichEditorBase,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){var r=this.props.lang,n=this.state,o=n.readOnly,a=n.hoveringToolbarVisible;return t.readOnly!==o||t.hoveringToolbarVisible!==a||e.lang!==r||e.richTextValue!==V.K.serialize({value:this.richEditorValue})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,r=t.richTextValue,n=t.lang;r===e.richTextValue&&n===e.lang||(this.initRichEditorValue(),this.editor.children=this.richEditorValue,this.forceUpdate())}},{key:"handleTDocPickerConfirm",value:function handleTDocPickerConfirm(e){var t=e.url,r=e.title,n=e.type,o={icon:e.iconLink,text:r,link:t,source:n.toLowerCase()};this.handleInsertLink(o)}},{key:"handleCancelLink",value:function handleCancelLink(){this.setReadOnly(!1)}},{key:"handleInsertLink",value:function handleInsertLink(e){this.setReadOnly(!1);var t=this.focus,r=this.currentId,n=this.editor;insertLink({link:e,editor:n,focus:t,index:(0,M.n7)(r,n.children)})}},{key:"handleUpdateLink",value:function handleUpdateLink(e){this.setReadOnly(!1),function updateLink(e){var t=e.link,r=e.path,a=e.editor,i=a.children[r[0]],s=(0,F.jq)(t),l=Array.from(i.children),c=(0,o.Z)(r,2),d=c[0],u=c[1];l.splice.apply(l,[u,1].concat((0,n.Z)(s))),removeNode(a,[d]),insert_node_insertNode(a,(0,F.$_)(l),[d])}({link:e,editor:this.editor,path:this.currentPath})}},{key:"handleRichValueChange",value:function handleRichValueChange(e){var t,r=this.props.onChange,o=V.K.serialize({value:this.richEditorValue}),a=V.K.serialize({value:e});this.state.hoveringToolbarVisible&&""===y.ML.string(this.editor,this.editor.selection)&&(null===(t=this.hideHoveringToolbar)||void 0===t||t.call(this));if(o!==a){var i=this.state.locale;this.richEditorValue=e,r(a,function parseRichText(e,t){var r=[];return e.forEach((function(e){var o,a;e.type===R.y.IMAGE?r.push.apply(r,(0,n.Z)(Array.from({length:null!==(o=null===(a=e.data)||void 0===a?void 0:a.length)&&void 0!==o?o:0},(function(){return t.imageTag})))):e.children.forEach((function(e){r.push(e.type===R.y.LINK?t.linkTag:e.text)}))})),r.join("")}(e,i))}}},{key:"handleInsertImageIconClick",value:function handleInsertImageIconClick(e,t){var r=this.props,n=r.source,o=r.onUploadImage,a=this.editor;(new K).uploadImage(e,t,a,o,n)}},{key:"handleInsertTDocIconClick",value:function handleInsertTDocIconClick(e){var t=e.id,r=e.focus;this.focus=r,this.currentId=t||this.currentId;var n=this.props.insertTDocTitle,a=(0,o.Z)(this.editor.children,1)[0];1===this.editor.children.length&&(0,M.Yj)(a)||this.setReadOnly(!0),this.FormFilePicker.show({title:n,className:"editor-file-picker",onConfirm:this.handleTDocPickerConfirm,onClose:this.handleFilePickerClose})}},{key:"handleFilePickerClose",value:function handleFilePickerClose(){this.handleCancelLink(),this.FormFilePicker.close()}},{key:"handleInsertLinkIconClick",value:function handleInsertLinkIconClick(e){var t=e.id,r=e.focus;this.focus=r,this.currentId=t||this.currentId;var n=(0,o.Z)(this.editor.children,1)[0];1===this.editor.children.length&&(0,M.Yj)(n)||this.setReadOnly(!0);var a=this.props.lang,i=this.state.locale,s=i.MODAL_BTN_TEXT,l=i.PANEL_BTN_TEXT,c=i.labeledInputPanel;this.LabeledInputPanel.show({lang:a,title:c.title,modalOkText:s.okText,modalCancelText:s.cancelText,panelDoneText:l.okText,onConfirm:this.handleInsertLink,onCancel:this.handleCancelLink})}},{key:"handleKeyDown",value:function handleKeyDown(e){var t=e.keyCode,r=e.shiftKey,a=this.props,i=a.maxLevel,s=a.maxPreLevelNodes,l=a.onlyBulletedList,c=a.onOverstep;l&&t===w.Z.TAB&&(e.preventDefault(),e.stopPropagation(),r?function forwardBulletedList(e,t,r){var a=e.selection.focus.path;if(1!==(0,M.bk)(e.children,a).levels.length){var i=(0,M.dK)(e.children,a),s=(0,n.Z)(a);if(s.splice(s.length-2),isOverStepCount(e,s.slice(0,-2),t))r();else{removeNode(e,s);var l=y.ML.parent(e,s),c=(0,o.Z)(l,1)[0],d=0;1===c.children.length&&""===c.children[0].text&&(s.splice(s.length-1),d=1,removeNode(e,s));var u=(0,n.Z)(s);u.splice(u.length-2+d),u[u.length-1]=u.at(-1)+1,insert_node_insertNode(e,i,u,!0)}}}(this.editor,s,c):backwardBulletedList(this.editor,i,s,c))}},{key:"handlePaste",value:function handlePaste(e){return this.props.canPrivateCopyOut?(this.doPrivatePaste(e),null):this.doCommonPaste(e)}},{key:"handleCopy",value:function handleCopy(e,t){if(!this.props.canPrivateCopyOut||this.isInCopyStatus)this.doCopyInCommon(e);else{var r=t||this.getSelectionInfo();this.doCopyInPrivate(e,r)}}},{key:"handleCut",value:function handleCut(e){if(this.props.canPrivateCopyOut){var t=this.getSelectionInfo();this.handleCopy(e,t),this.editor.deleteFragment()}}},{key:"isEmptyEditor",get:function get(){return(0,M.Zc)(this.richEditorValue)}},{key:"needHideRichEditor",get:function get(){return this.state.readOnly&&this.isEmptyEditor}},{key:"wxConfig",get:function get(){var e=this.props.wxConfig;return(0,E.tZ)(e,de)}},{key:"getBulletedListInClipBoard",value:function getBulletedListInClipBoard(){return getPlainText(y.ML.fragment(this.editor,this.editor.selection))}},{key:"getSelectionInfo",value:function getSelectionInfo(){var e="",t="";if(this.props.onlyBulletedList)t=this.getBulletedListInClipBoard();else{var r=(0,E.v2)();e=r.html,t=r.plain}return{html:e,plain:t}}},{key:"setCurrentInfo",value:function setCurrentInfo(e){var t=this;e.forEach((function(e){t[e.type]=e.value}))}},{key:"setReadOnly",value:function setReadOnly(e){this.setState({readOnly:e})}},{key:"doCopyInPrivate",value:(r=(0,i.Z)((0,a.Z)().mark((function _callee(e,t){var r,n,o;return(0,a.Z)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return r=t.html,n=t.plain,this.importSCCommonService(),o=this.props.corpId,this.isInCopyStatus=!0,e.preventDefault(),a.prev=5,a.next=8,(0,N.writeInClipBoard)({html:r,plain:n,event:e},{encrypt:!0,encryptKey:o});case 8:this.isInCopyStatus=!1,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(5),this.isInCopyStatus=!1;case 14:case"end":return a.stop()}}),_callee,this,[[5,11]])}))),function doCopyInPrivate(e,t){return r.apply(this,arguments)})},{key:"doCopyInCommon",value:function doCopyInCommon(e){if(this.props.onlyBulletedList){var t=this.props.wxConfig;e.preventDefault();var r=this.getBulletedListInClipBoard();(0,T.k)({plain:r},t)}}},{key:"doCopyBulletedList",value:function doCopyBulletedList(e){if(!e)return null;var t=this.props,r=t.maxLevel,n=t.maxPreLevelNodes,o=t.maxAllNodes,a=t.onOverstep,i=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return(new H).parseTextToBulletedList({editor:this.editor,maxLevel:r,maxPreLevelNodes:n,maxAllNodes:o,text:i,onOverstep:a})}},{key:"doCommonPaste",value:function doCommonPaste(e){if(!this.props.onlyBulletedList)return null;e.preventDefault();var t=e.clipboardData||window.clipboardData;if(!t)return null;var r=t.getData("text");return this.doCopyBulletedList(r)}},{key:"doPrivatePaste",value:(t=(0,i.Z)((0,a.Z)().mark((function _callee2(e){var t,r,n,o,i;return(0,a.Z)().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props,r=t.onlyBulletedList,n=t.corpId,e.preventDefault(),a.prev=2,a.next=5,(0,N.readInClipBoard)({event:e,encryptKey:n});case 5:if(o=a.sent,i=o.plain,!r){a.next=10;break}return this.doCopyBulletedList(i),a.abrupt("return");case 10:this.editor.deleteFragment(),insertText(this.editor,i),a.next=16;break;case 14:a.prev=14,a.t0=a.catch(2);case 16:case"end":return a.stop()}}),_callee2,this,[[2,14]])}))),function doPrivatePaste(e){return t.apply(this,arguments)})},{key:"initRichEditorValue",value:function initRichEditorValue(){var e=this.props,t=e.richTextValue,r=e.onlyBulletedList,n=V.K.deserialize(t).value;n.length?this.richEditorValue=(0,Q.Q)(n):this.richEditorValue=r?[(0,F.Z0)("")]:(0,Q.Q)([(0,F.$_)()])}},{key:"renderElement",value:function renderElement(e){var t;null===(t=this.setSelectionId)||void 0===t||t.call(this);var r=this.props,n=r.beforeOpenLink,o=r.imageClassName,a=r.imageClassNamePrefix,i=r.insertTDocTitle,s=r.linkClassName,l=r.linkClassNamePrefix,c=r.onUploadImage,d=r.paragraphClassName,u=r.paragraphClassNamePrefix,p=r.richTextValue,m=r.readOnly,f=r.source,y=r.lang,b=r.showInsertIcon,v=r.corpId,_=r.canPrivateCopyOut,S=this.ImageElement,P=this.Paragraph,C=this.LinkElement,w=this.Span;switch(e.element.type){case R.y.UL:return h.createElement(Y,(0,O.Z)({},e,{className:d,classNamePrefix:u}));case R.y.LI:return h.createElement(ce,(0,O.Z)({},e,{className:d,classNamePrefix:u}));case R.y.IMAGE:return h.createElement(x,(0,O.Z)({},e,{ImageElement:S,className:o,classNamePrefix:a,editor:this.editor,insertTDocTitle:i,lang:y,readOnly:m,source:f,onImageIconClick:this.reportImageIconClick,onInsertImageIconClick:this.handleInsertImageIconClick,onInsertLinkIconClick:this.handleInsertLinkIconClick,onInsertTDocIconClick:this.handleInsertTDocIconClick,onReport:this.handleReport,onUploadImage:c}));case R.y.LINK:return h.createElement(L,(0,O.Z)({},e,{LinkElement:C,beforeOpenLink:n,canPrivateCopyOut:_,className:s,classNamePrefix:l,corpId:v,editor:this.editor,importSCCommonService:this.importSCCommonService,lang:y,readOnly:m,richTextValue:V.K.deserialize(p).value,setCurrentInfo:this.setCurrentInfo,setReadOnly:this.setReadOnly,wxConfig:this.wxConfig,onCancelLink:this.handleCancelLink,onReport:this.handleReport,onUpdateLink:this.handleUpdateLink}));case R.y.PARAGRAPH:return h.createElement(P,(0,O.Z)({},e,{classNamePrefix:u,editor:this.editor,insertTDocTitle:i,lang:y,readOnly:m,showInsertIcon:b,className:g()(d,{"is-not-empty":!(0,M.Yj)(e.element)}),onImageIconClick:this.reportImageIconClick,onInsertImageIconClick:this.handleInsertImageIconClick,onInsertLinkIconClick:this.handleInsertLinkIconClick,onInsertTDocIconClick:this.handleInsertTDocIconClick,onReport:this.handleReport}));default:return h.createElement(w,(0,O.Z)({},e,{className:d,classNamePrefix:u}))}}},{key:"renderRichEditor",value:function renderRichEditor(){var e=this;if(this.needHideRichEditor)return null;var t=this.props,r=t.readOnly,n=t.placeholder,o=t.editorClassName;return h.createElement(C.mH,{editor:this.editor,value:this.richEditorValue,onChange:this.handleRichValueChange},h.createElement(C.CX,{ref:this.editorRef,className:g()("rich-editable-area",o),placeholder:n,readOnly:r,renderElement:this.renderElement,renderLeaf:RichEditorBase.renderLeaf,onBlur:this.handleEditorBlur,onClick:function onClick(e){return e.stopPropagation()},onCompositionEnd:function onCompositionEnd(t){var r;return null===(r=e.handleCompositionEnd)||void 0===r?void 0:r.call(e,t)},onCopy:this.handleCopy,onCut:this.handleCut,onDragStart:function onDragStart(){return!0},onDrop:function onDrop(){return!1},onFocus:this.handleEditorFocused,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUp,onPaste:this.handlePaste}))}},{key:"render",value:function render(){var e,t=this.props,r=t.classNamePrefix,n=t.className;return h.createElement("div",{className:g()(n,r)},this.renderRichEditor(),null===(e=this.renderHoveringToolbar)||void 0===e?void 0:e.call(this))}}],[{key:"isEmptyNode",value:function isEmptyNode(e){var t=V.K.deserialize(e).value;return(0,M.Zc)(t)}},{key:"renderLeaf",value:function renderLeaf(e){var t=e.attributes,r=e.children,n=e.leaf,o=n.highlight&&n.text?{fontWeight:"bold",background:"yellow"}:{fontWeight:"normal",background:"transparent"};return h.createElement("span",(0,O.Z)({},t,{style:o}),r)}}]),RichEditorBase}(h.Component),(0,m.Z)(le,"insertLink",D.dG),(0,m.Z)(le,"richEditorAddImageClick",D.dG),ae=le,(0,f.Z)(ae,"insertLink",[W],(ie=(ie=Object.getOwnPropertyDescriptor(ae,"insertLink"))?ie.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return ie}}),ae),(0,f.Z)(ae,"richEditorAddImageClick",[X],(se=(se=Object.getOwnPropertyDescriptor(ae,"richEditorAddImageClick"))?se.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return se}}),ae),(0,f.Z)(ae.prototype,"handleTDocPickerConfirm",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleTDocPickerConfirm"),ae.prototype),(0,f.Z)(ae.prototype,"handleCancelLink",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleCancelLink"),ae.prototype),(0,f.Z)(ae.prototype,"handleInsertLink",[_.xB,J],Object.getOwnPropertyDescriptor(ae.prototype,"handleInsertLink"),ae.prototype),(0,f.Z)(ae.prototype,"handleUpdateLink",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleUpdateLink"),ae.prototype),(0,f.Z)(ae.prototype,"handleRichValueChange",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleRichValueChange"),ae.prototype),(0,f.Z)(ae.prototype,"handleInsertImageIconClick",[_.xB,ee],Object.getOwnPropertyDescriptor(ae.prototype,"handleInsertImageIconClick"),ae.prototype),(0,f.Z)(ae.prototype,"handleInsertTDocIconClick",[_.xB,te],Object.getOwnPropertyDescriptor(ae.prototype,"handleInsertTDocIconClick"),ae.prototype),(0,f.Z)(ae.prototype,"handleFilePickerClose",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleFilePickerClose"),ae.prototype),(0,f.Z)(ae.prototype,"handleInsertLinkIconClick",[_.xB,re],Object.getOwnPropertyDescriptor(ae.prototype,"handleInsertLinkIconClick"),ae.prototype),(0,f.Z)(ae.prototype,"handleKeyDown",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleKeyDown"),ae.prototype),(0,f.Z)(ae.prototype,"handlePaste",[_.xB,ne],Object.getOwnPropertyDescriptor(ae.prototype,"handlePaste"),ae.prototype),(0,f.Z)(ae.prototype,"handleCopy",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleCopy"),ae.prototype),(0,f.Z)(ae.prototype,"handleCut",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"handleCut"),ae.prototype),(0,f.Z)(ae.prototype,"setCurrentInfo",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"setCurrentInfo"),ae.prototype),(0,f.Z)(ae.prototype,"setReadOnly",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"setReadOnly"),ae.prototype),(0,f.Z)(ae.prototype,"renderElement",[_.xB],Object.getOwnPropertyDescriptor(ae.prototype,"renderElement"),ae.prototype),oe=ae))||oe)||oe);ue.defaultProps=(0,s.Z)((0,s.Z)({},ue.defaultProps),{},{beforeOpenLink:D.dG,canPrivateCopyOut:!1,className:"",classNamePrefix:"form-rich-editor",corpId:"",editorClassName:"",imageClassName:"",imageClassNamePrefix:void 0,insertTDocTitle:"",linkClassName:"",linkClassNamePrefix:void 0,maxAllNodes:1/0,maxLevel:1/0,maxPreLevelNodes:1/0,onBlur:D.dG,onChange:D.dG,onFocus:D.dG,onlyBulletedList:!1,onOverMaxLevel:D.dG,onUploadImage:D.dG,paragraphClassName:"",paragraphClassNamePrefix:void 0,placeholder:"",readOnly:!0,richTextValue:"",showInsertIcon:!0,source:"",wxConfig:void 0}),ue.propTypes={beforeOpenLink:P().func,canPrivateCopyOut:P().bool,className:P().string,classNamePrefix:P().string,corpId:P().string,editorClassName:P().string,imageClassName:P().string,imageClassNamePrefix:P().string,insertTDocTitle:P().string,linkClassName:P().string,linkClassNamePrefix:P().string,maxAllNodes:P().number,maxLevel:P().number,maxPreLevelNodes:P().number,onlyBulletedList:P().bool,paragraphClassName:P().string,paragraphClassNamePrefix:P().string,placeholder:P().node,readOnly:P().bool,richTextValue:P().string,showInsertIcon:P().bool,source:P().string,wxConfig:P().shape({}),onBlur:P().func,onChange:P().func,onFocus:P().func,onOverstep:P().func,onUploadImage:P().func};const pe=ue;var me,fe,he,ye,be,ge,ve,_e,Oe,Se=r(22843);r(12249),r(57637);function replaceImage(e,t,r,o,a){var i=e.target.files,s=(0,M.n7)(t,o.children);a({files:i,handleSingleComplete:function handleSingleComplete(e){return function handleUploadSuccess(e,t,r,o){var a=o.children[t].data,i=(0,n.Z)(a);i[r]={src:e},insert_node_insertNode(o,(0,F.fn)(i),[t],!0),removeNode(o,[t+1])}(e.src,s,r,o)}})}var Pe=(me=(0,_.px)(),fe=(0,_.w0)(),he=(0,_.w0)({type:"richEditorImageLoaded"}),ye=(0,_.w0)({type:"richEditorImageDelete"}),be=(0,_.w0)({type:"richEditorImageReplace"}),me((Oe=function(e){(0,u.Z)(ImageBase,e);var t=(0,p.Z)(ImageBase);function ImageBase(e){var r;return(0,l.Z)(this,ImageBase),(r=t.call(this,e)).state={editableStyle:{}},r.imageGalleryRef=h.createRef(),r.handlePreviewImage=ImageBase.richEditorImagePreview.bind(null,(0,d.Z)(r)),r}return(0,c.Z)(ImageBase,[{key:"handleImageLoad",value:function handleImageLoad(){var e=this.getEditableStyle();this.setState({editableStyle:e})}},{key:"handleDeleteImage",value:function handleDeleteImage(e,t){var r=this.props,n=r.element;!function deleteImage(e,t,r,n){var o=(0,M.n7)(t,n.children),a=Array.from(e);1===e.length?(removeNode(n,[o]),0===n.children.length&&insert_node_insertNode(n,(0,F.$_)(),[0],!0)):(a.splice(r,1),insert_node_insertNode(n,(0,F.fn)(a),[o],!0),removeNode(n,[o+1]))}(n.data,n.id,t,r.editor)}},{key:"handleReplaceImage",value:function handleReplaceImage(e,t,r){var n=this.props;replaceImage(e,n.element.id,r,n.editor,n.onUploadImage)}},{key:"getEditableStyle",value:function getEditableStyle(){var e=this.props.readOnly;if(!this.imageGalleryRef.current||e)return{};var t=this.imageGalleryRef.current.parentNode.clientWidth+2,r=Math.max(Math.floor((t-4)/93),1),n=this.props.element.data.length;if(1===n){var o=this.imageGalleryRef.current.clientWidth,a=this.imageGalleryRef.current.clientHeight-2-4;return{width:"".concat(t-o-2,"px"),height:"".concat(a,"px")}}var i=Math.ceil(n/r)-1;return{width:"".concat(t-4-93*(n-i*r),"px"),height:"".concat(90,"px")}}},{key:"getImageList",value:function getImageList(){return this.props.element.data.map((function(e){return(null==e?void 0:e.src)||void 0}))}},{key:"renderImageEditable",value:function renderImageEditable(){var e=this.props.children,t=this.state.editableStyle;return h.createElement("div",{className:"image-editable",style:t},e)}},{key:"renderImageGallery",value:function renderImageGallery(){var e=this.props,t=e.lang,r=e.readOnly,n=e.source,o=this.ImageGallery,a=this.getImageList();return h.createElement("div",{ref:this.imageGalleryRef,className:"image-gallery-container",contentEditable:!1},h.createElement(o,{images:a,lang:t,readOnly:r,source:n,imageExtraAttributes:{useIntersectionObserver:this.useLazyImage},onDeleteImage:this.handleDeleteImage,onImageLoad:this.handleImageLoad,onPreviewImage:this.handlePreviewImage,onReplaceImage:this.handleReplaceImage,onReport:this.handleReport}))}},{key:"render",value:function render(){var e,t=this.props,r=t.attributes,n=t.className,o=t.classNamePrefix,a=t.element.id,i=t.focused,s=t.readOnly,l=t.selected;return h.createElement("div",(0,O.Z)({className:g()(n,o,{"can-edit":!s,selected:l&&i})},r),this.renderImageGallery(),null===(e=this.renderTooBar)||void 0===e?void 0:e.call(this,a),this.renderImageEditable())}}]),ImageBase}(h.Component),(0,m.Z)(Oe,"richEditorImagePreview",D.dG),ve=Oe,(0,f.Z)(ve,"richEditorImagePreview",[fe],(_e=(_e=Object.getOwnPropertyDescriptor(ve,"richEditorImagePreview"))?_e.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return _e}}),ve),(0,f.Z)(ve.prototype,"handleImageLoad",[_.xB,he],Object.getOwnPropertyDescriptor(ve.prototype,"handleImageLoad"),ve.prototype),(0,f.Z)(ve.prototype,"handleDeleteImage",[_.xB,ye],Object.getOwnPropertyDescriptor(ve.prototype,"handleDeleteImage"),ve.prototype),(0,f.Z)(ve.prototype,"handleReplaceImage",[_.xB,be],Object.getOwnPropertyDescriptor(ve.prototype,"handleReplaceImage"),ve.prototype),ge=ve))||ge);Pe.defaultProps={attributes:{},children:null,className:"",classNamePrefix:"rich-text-element-image editable",editor:{},element:{data:[]},focused:!1,onUploadImage:D.dG,readOnly:!0,selected:!1,source:""},Pe.propTypes={attributes:P().shape({}),children:P().element,className:P().string,classNamePrefix:P().string,editor:P().shape({}),element:P().shape({data:P().arrayOf(P().shape({src:P().string})),id:P().string}),focused:P().bool,readOnly:P().bool,selected:P().bool,source:P().string,onUploadImage:P().func};const Ce=Pe;var we,Ie,Ee,Te,Ne,je,De=r(87010),ke=(we=(0,I.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_en_US_js").then(r.bind(r,68376))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_zh_TW_js").then(r.bind(r,33033))},locale:j.Z}),Ie=(0,_.w0)(),we((je=function(e){(0,u.Z)(ToolBarPC,e);var t=(0,p.Z)(ToolBarPC);function ToolBarPC(e){var r;return(0,l.Z)(this,ToolBarPC),(r=t.call(this,e)).handleTriggerClick=ToolBarPC.richEditorPCToolMenuClick.bind(null,(0,d.Z)(r)),r}return(0,c.Z)(ToolBarPC,[{key:"handleInsertNewImage",value:function handleInsertNewImage(e){var t=this.props;(0,t.onInsertImageIconClick)(e,t.id)}},{key:"handleImageIconClick",value:function handleImageIconClick(){(0,this.props.onImageIconClick)()}},{key:"handleInsertNewLink",value:function handleInsertNewLink(){var e,t=this.props,r=t.onInsertLinkIconClick,n=t.editor,o=t.id;r({focus:null===(e=n.selection)||void 0===e?void 0:e.focus,id:o})}},{key:"handleInsertNewTDoc",value:function handleInsertNewTDoc(){var e,t=this.props,r=t.onInsertTDocIconClick,n=t.editor,o=t.id;r({focus:null===(e=n.selection)||void 0===e?void 0:e.focus,id:o})}},{key:"render",value:function render(){var e=this.props.insertTDocTitle,t=this.state.locale.toolbar,r=[(0,s.Z)((0,s.Z)({},De.Z.DEFAULT_INSERT_IMAGE_OPT),{},{text:t.insertImage,onClick:this.handleImageIconClick,onChange:this.handleInsertNewImage}),(0,s.Z)((0,s.Z)({},De.Z.DEFAULT_INSERT_LINK_OPT),{},{text:t.insertLink,onClick:this.handleInsertNewLink}),(0,s.Z)((0,s.Z)({},De.Z.DEFAULT_INSERT_TDOC_OPT),{},{text:t.insertDoc.replace("{{DOC_NAME}}",e),show:!!e,onClick:this.handleInsertNewTDoc})],n=this.props.classNamePrefix,o="".concat(n,"-quick-toolbar-trigger");return h.createElement(De.Z.PcToolMenu,{alignment:"right",contents:r,disabled:!1,triggerClassName:o,triggerIcon:De.Z.DEFAULT_TRIGGER_OPT,onTriggerClick:this.handleTriggerClick})}}]),ToolBarPC}(h.PureComponent),(0,m.Z)(je,"richEditorPCToolMenuClick",D.dG),Te=je,(0,f.Z)(Te,"richEditorPCToolMenuClick",[Ie],(Ne=(Ne=Object.getOwnPropertyDescriptor(Te,"richEditorPCToolMenuClick"))?Ne.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function initializer(){return Ne}}),Te),(0,f.Z)(Te.prototype,"handleInsertNewImage",[_.xB],Object.getOwnPropertyDescriptor(Te.prototype,"handleInsertNewImage"),Te.prototype),(0,f.Z)(Te.prototype,"handleImageIconClick",[_.xB],Object.getOwnPropertyDescriptor(Te.prototype,"handleImageIconClick"),Te.prototype),(0,f.Z)(Te.prototype,"handleInsertNewLink",[_.xB],Object.getOwnPropertyDescriptor(Te.prototype,"handleInsertNewLink"),Te.prototype),(0,f.Z)(Te.prototype,"handleInsertNewTDoc",[_.xB],Object.getOwnPropertyDescriptor(Te.prototype,"handleInsertNewTDoc"),Te.prototype),Ee=Te))||Ee);ke.defaultProps=(0,s.Z)((0,s.Z)({},ke.defaultProps),{},{classNamePrefix:"form-rich-editor",editor:{},id:"",insertTDocTitle:"",onImageIconClick:D.dG,onInsertImageIconClick:D.dG,onInsertLinkIconClick:D.dG,onInsertTDocIconClick:D.dG}),ke.propTypes={classNamePrefix:P().string,editor:P().shape({selection:P().shape({focus:P().shape({})})}),id:P().string,insertTDocTitle:P().string,onImageIconClick:P().func,onInsertImageIconClick:P().func,onInsertLinkIconClick:P().func,onInsertTDocIconClick:P().func};const xe=ke;r(98618);var Ze=function(e){(0,u.Z)(ImagePC,e);var t=(0,p.Z)(ImagePC);function ImagePC(e){var r;return(0,l.Z)(this,ImagePC),r=t.call(this,e),(0,m.Z)((0,d.Z)(r),"ImageGallery",Se.default),r.useLazyImage=!(v.default.isWindows&&(v.default.isWeChat||v.default.isWxMiniProgram)),r}return(0,c.Z)(ImagePC,[{key:"renderTooBar",value:function renderTooBar(e){var t=this.props,r=t.readOnly,n=t.showInsertIcon;if(r||!n)return null;var o=this.props,a=o.editor,i=o.lang,s=o.onImageIconClick,l=o.onInsertImageIconClick,c=o.onInsertLinkIconClick,d=o.onInsertTDocIconClick,u=o.insertTDocTitle;return h.createElement("div",{className:"insert-container",contentEditable:!1},h.createElement(xe,{editor:a,id:e,insertTDocTitle:u,lang:i,readOnly:r,onImageIconClick:s,onInsertImageIconClick:l,onInsertLinkIconClick:c,onInsertTDocIconClick:d,onReport:this.handleReport}))}}]),ImagePC}(Ce);Ze.defaultProps=(0,s.Z)((0,s.Z)({},Ce.defaultProps),{},{onImageIconClick:D.dG,onInsertImageIconClick:D.dG,onInsertLinkIconClick:D.dG,onInsertTDocIconClick:D.dG,showInsertIcon:!0}),Ze.propTypes=(0,s.Z)((0,s.Z)({},Ce.propTypes),{},{showInsertIcon:P().bool,onImageIconClick:P().func,onInsertImageIconClick:P().func,onInsertLinkIconClick:P().func,onInsertTDocIconClick:P().func});var Le,Re,Ae,Fe,Me,Be,qe,Ue,Ge,Ke,Ve=r(81893);var Qe=(Le=(0,I.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_en_US_js").then(r.bind(r,68376))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_zh_TW_js").then(r.bind(r,33033))},locale:j.Z}),Re=(0,_.w0)({type:"richEditorLinkRendered"}),Ae=(0,_.w0)({type:"richEditorLinkPopoverShow"}),Fe=(0,_.w0)({type:"richEditorLinkCanceled"}),Me=(0,_.w0)({type:"richEditorLinkDeleted"}),Be=(0,_.w0)({type:"richEditorLinkCopy"}),qe=(0,_.w0)({type:"richEditorEditLink"}),Ue=(0,_.w0)({type:"richEditorOpenLink"}),Le((Ke=function(e){(0,u.Z)(LinkBase,e);var t,r,s=(0,p.Z)(LinkBase);function LinkBase(e){var t;return(0,l.Z)(this,LinkBase),(t=s.call(this,e)).path=[],t.linkPopoverClassName="rich-text-link-popover",t}return(0,c.Z)(LinkBase,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"handleVisibleChange",value:function handleVisibleChange(e){e&&this.handleCurrentSelection()}},{key:"handleCurrentSelection",value:function handleCurrentSelection(){var e=this.props,t=e.editor,r=e.element;this.path=(0,M.Jz)(r.id,t.children)}},{key:"handleCancelLink",value:function handleCancelLink(){var e=this.props,t=e.editor,r=e.element,a=(0,o.Z)(this.path,2),i=a[0],s=a[1],l=(0,o.Z)(r.children,1)[0],c=t.children[i].children,d=(0,n.Z)(c);d[s]={text:l.text},removeNode(t,[i]),insert_node_insertNode(t,(0,F.$_)(d),[i],!0)}},{key:"handleClickLink",value:function handleClickLink(){this.props.readOnly&&this.handleOpenLink()}},{key:"handleDeleteLink",value:function handleDeleteLink(){!function deleteLink(e,t){var r=(0,o.Z)(t,2);removeNode(e,[r[0],r[1]])}(this.props.editor,this.path)}},{key:"handleCopyLink",value:function handleCopyLink(){var e=this.props,t=e.element.href,r=e.wxConfig;!e.canPrivateCopyOut||this.isInCopyStatus?(0,T.k)({plain:t},r):this.doCopyLinkInPrivate(t)}},{key:"handleEditLink",value:function handleEditLink(){var e=this.props,t=e.element,r=t.id,n=t.source,a=(0,o.Z)(t.children,1)[0],i=a.text,s=a.link,l=e.lang,c=e.setCurrentInfo,d=e.onUpdateLink,u=e.onCancelLink,p=this.LabeledInputPanel;c([{type:"currentId",value:r},{type:"currentPath",value:this.path}]);var m=this.state.locale,f=m.MODAL_BTN_TEXT,h=m.PANEL_BTN_TEXT,y=m.labeledInputPanel;p.show({lang:l,text:i,link:s,title:y.title,source:n,modalOkText:f.okText,modalCancelText:f.cancelText,panelDoneText:h.okText,onConfirm:d,onCancel:u})}},{key:"handleOpenLink",value:(r=(0,i.Z)((0,a.Z)().mark((function _callee(){var e,t,r,n;return(0,a.Z)().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.element.href,r=e.beforeOpenLink,o.next=3,r(t);case 3:if(o.t0=o.sent,!1!==o.t0){o.next=6;break}return o.abrupt("return");case 6:n=t.startsWith("http")?t:"https://".concat(t),(0,Ve.lY)({url:n});case 8:case"end":return o.stop()}}),_callee,this)}))),function handleOpenLink(){return r.apply(this,arguments)})},{key:"doCopyLinkInPrivate",value:(t=(0,i.Z)((0,a.Z)().mark((function _callee2(e){var t,r;return(0,a.Z)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props,r=t.corpId,(0,t.importSCCommonService)(),this.isInCopyStatus=!0,n.prev=3,n.next=6,(0,N.writeInClipBoard)({html:e,plain:e},{encrypt:!0,encryptKey:r});case 6:this.isInCopyStatus=!1,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),this.isInCopyStatus=!1;case 12:case"end":return n.stop()}}),_callee2,this,[[3,9]])}))),function doCopyLinkInPrivate(e){return t.apply(this,arguments)})},{key:"renderLink",value:function renderLink(){var e,t=this.props,r=t.attributes,n=t.children,o=t.className,a=t.classNamePrefix,i=t.element,s=t.focused,l=t.selected,c=i.source,d=i.icon,u=d?{backgroundImage:"url(".concat(d,")")}:{};return h.createElement("div",(0,O.Z)({role:"button",tabIndex:-1,className:g()(o,a,{selected:l&&s})},r),h.createElement("div",{className:"link-wrap",contentEditable:!1,role:"button",tabIndex:-1,onClick:this.handleClickLink,onKeyDown:this.handleClickLink},c?h.createElement("div",{className:g()("icon","icon-".concat(c)),style:u}):null,h.createElement("span",{className:g()("link",{"common-link":!c})},h.createElement("span",null,null===(e=i.children)||void 0===e?void 0:e[0].text))),n)}},{key:"render",value:function render(){var e,t=this.props,r=t.element,n=t.children,o=t.readOnly,a=t.lang,i=this.LinkPopover;if(""===(null===(e=r.children)||void 0===e?void 0:e[0].text))return n;var s=this.getLinkPopoverContents();return h.createElement(i,{className:this.linkPopoverClassName,contents:s,lang:a,readOnly:o,onVisibleChange:this.handleVisibleChange},this.renderLink())}}]),LinkBase}(h.Component),(0,f.Z)(Ke.prototype,"componentDidMount",[Re],Object.getOwnPropertyDescriptor(Ke.prototype,"componentDidMount"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleVisibleChange",[_.xB],Object.getOwnPropertyDescriptor(Ke.prototype,"handleVisibleChange"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleCurrentSelection",[Ae],Object.getOwnPropertyDescriptor(Ke.prototype,"handleCurrentSelection"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleCancelLink",[_.xB,Fe],Object.getOwnPropertyDescriptor(Ke.prototype,"handleCancelLink"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleClickLink",[_.xB],Object.getOwnPropertyDescriptor(Ke.prototype,"handleClickLink"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleDeleteLink",[_.xB,Me],Object.getOwnPropertyDescriptor(Ke.prototype,"handleDeleteLink"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleCopyLink",[_.xB,Be],Object.getOwnPropertyDescriptor(Ke.prototype,"handleCopyLink"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleEditLink",[_.xB,qe],Object.getOwnPropertyDescriptor(Ke.prototype,"handleEditLink"),Ke.prototype),(0,f.Z)(Ke.prototype,"handleOpenLink",[_.xB,Ue],Object.getOwnPropertyDescriptor(Ke.prototype,"handleOpenLink"),Ke.prototype),Ge=Ke))||Ge);Qe.defaultProps=(0,s.Z)((0,s.Z)({},Qe.defaultProps),{},{attributes:{},beforeOpenLink:D.dG,canPrivateCopyOut:!1,children:null,className:"",classNamePrefix:"rich-text-element-link",corpId:"",editor:{},element:{},focused:!1,importSCCommonService:D.dG,onCancelLink:D.dG,onUpdateLink:D.dG,readOnly:!0,selected:!1,setCurrentInfo:D.dG,wxConfig:void 0}),Qe.propTypes={attributes:P().shape({}),beforeOpenLink:P().func,canPrivateCopyOut:P().bool,children:P().element,className:P().string,classNamePrefix:P().string,corpId:P().string,editor:P().shape({children:P().arrayOf(P().shape({children:P().arrayOf(P().shape({})),text:P().string}))}),element:P().shape({children:P().arrayOf(P().shape({link:P().string,text:P().string})),href:P().string,icon:P().string,id:P().string,source:P().string}),focused:P().bool,importSCCommonService:P().func,readOnly:P().bool,selected:P().bool,setCurrentInfo:P().func,wxConfig:P().shape({}),onCancelLink:P().func,onUpdateLink:P().func};const He=Qe;var Ye=r(8478),ze=r(89362),$e=r(11753),We=function(e){(0,u.Z)(LabeledInputBase,e);var t=(0,p.Z)(LabeledInputBase);function LabeledInputBase(){return(0,l.Z)(this,LabeledInputBase),t.apply(this,arguments)}return(0,c.Z)(LabeledInputBase,[{key:"renderInputBody",value:function renderInputBody(){var e=this.props,t=e.autoFocus,r=e.showClear,n=e.value,o=e.placeholder,a=e.onFocus,i=e.onChange,s=this.Input;return h.createElement(s,{autoFocus:t,className:"input-body",placeholder:o,showClear:r,value:n,onChange:i,onFocus:a})}},{key:"renderExtraLine",value:function renderExtraLine(){var e=this.props,t=e.tips,r=e.actionText;if(!t&&!r)return null;var n=this.props.onEntitledAction;return h.createElement("div",{className:"entitled-wrapper"},t?h.createElement("div",{className:"entitled-tip"},t):null,r?h.createElement("div",{className:"entitled-action",role:"button",tabIndex:0,onClick:n,onKeyDown:D.dG},r):null)}},{key:"renderError",value:function renderError(){var e=this.props.errorTip;return e?h.createElement("div",{className:"error-tip"},e):null}},{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,n=e.labelName,o=e.errorTip;return h.createElement("div",{className:g()("".concat(t,"-").concat(this.componentType),t,r,{"has-error":!!o})},h.createElement("div",{className:"label-wrapper"},h.createElement("span",null,n)),h.createElement("div",{className:"input-wrapper"},this.renderInputBody(),this.renderExtraLine(),this.renderError()))}}]),LabeledInputBase}(h.PureComponent);We.defaultProps={actionText:"",autoFocus:!0,className:"",classNamePrefix:"form-label-input",errorTip:"",labelName:"",onChange:D.dG,onEntitledAction:D.dG,onFocus:D.dG,placeholder:"",showClear:!0,tips:"",value:""},We.propTypes={actionText:P().string,autoFocus:P().bool,className:P().string,classNamePrefix:P().string,errorTip:P().string,labelName:P().string,placeholder:P().string,showClear:P().bool,tips:P().string,value:P().string,onChange:P().func,onEntitledAction:P().func,onFocus:P().func};var Xe,Je,et=function(e){(0,u.Z)(LabeledInputM,e);var t=(0,p.Z)(LabeledInputM);function LabeledInputM(){var e;(0,l.Z)(this,LabeledInputM);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,m.Z)((0,d.Z)(e),"Input",$e.default),(0,m.Z)((0,d.Z)(e),"componentType","pc"),e}return(0,c.Z)(LabeledInputM)}(We),tt=r(56356),rt=r(95608),nt=r(84863);function isValidUrl(e){return rt.ol[nt.S.URL].test(e)}var ot=(0,I.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_en_US_js").then(r.bind(r,68376))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_rich-text-editor_locale_zh_TW_js").then(r.bind(r,33033))},locale:j.Z})((Je=function(e){(0,u.Z)(InputGroupBase,e);var t,r=(0,p.Z)(InputGroupBase);function InputGroupBase(e){var t;return(0,l.Z)(this,InputGroupBase),(t=r.call(this,e)).state={link:e.linkValue,text:e.textValue,entitledTip:""},t.currTempEntitledTips="",t.isTextTouched=!1,t.isLinkDirty=!1,t.setEntitledTipByCurrLink=(0,tt.default)(t.setEntitledTipByCurrLink,e.linkRecognitionDelay),t}return(0,c.Z)(InputGroupBase,[{key:"componentDidMount",value:function componentDidMount(){var e=this.state.link;this.setEntitledTipByCurrLink(e)}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){var r=this.state.link;t.link!==r&&this.setEntitledTipByCurrLink(r)}},{key:"handleTextChange",value:function handleTextChange(e){var t=e===this.currTempEntitledTips;this.setState({text:e,entitledTip:t?"":this.currTempEntitledTips}),(0,this.props.onUpdateValues)(U,e)}},{key:"handleLinkChange",value:function handleLinkChange(e){this.isLinkDirty=!0;var t=isValidUrl(e);this.currTempEntitledTips=t?this.currTempEntitledTips:"",this.setState({link:e,entitledTip:this.currTempEntitledTips});var r=this.props,n=r.onUpdateStatus,o=r.onUpdateValues;n(t),o(q,e)}},{key:"handleEntitledAction",value:function handleEntitledAction(){var e=this.state.entitledTip;this.handleTextChange(e)}},{key:"handleTextFocus",value:function handleTextFocus(){this.isTextTouched=!0}},{key:"handleLinkFocus",value:function handleLinkFocus(){this.isTextTouched=!1}},{key:"setEntitledTipByCurrLink",value:(t=(0,i.Z)((0,a.Z)().mark((function _callee(e){var t,r,n,o,i;return(0,a.Z)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(isValidUrl(e)){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,(0,B.y)(e);case 4:if(t=a.sent,r=t.data,n=t.error,o=this.props.onUpdateLinkType,!n){a.next=13;break}return this.currTempEntitledTips="",this.setState({entitledTip:this.currTempEntitledTips}),o(),a.abrupt("return");case 13:if(this.currTempEntitledTips=r.title,i=this.state.text,this.currTempEntitledTips!==i){a.next=17;break}return a.abrupt("return");case 17:this.setState({entitledTip:this.currTempEntitledTips}),o(r.docTypeAlias);case 19:case"end":return a.stop()}}),_callee,this)}))),function setEntitledTipByCurrLink(e){return t.apply(this,arguments)})},{key:"errorTip",get:function get(){var e=this.state.locale.labeledInputGroup;return this.isNoLinkErr?e.emptyLinkError:this.isWrongLinkErr?e.invalidLinkError:""}},{key:"isNoLinkErr",get:function get(){var e=this.state.link;return this.isTextTouched&&this.isLinkDirty&&!e}},{key:"isWrongLinkErr",get:function get(){var e=this.state.link,t=isValidUrl(e);return this.isTextTouched&&this.isLinkDirty&&!!e&&!t}},{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,n=e.showClear,o=this.state,a=o.link,i=o.text,s=o.entitledTip,l=o.locale.labeledInputGroup,c=l.clickToReplace,d=l.linkLabel,u=l.linkPlaceholder,p=l.textPlaceholder,m=l.titleTips,f=s?m.replace("{{TIPS}}",s):"",y=this.LabeledInput;return h.createElement("div",{className:g()("".concat(t,"-").concat(this.componentType),r)},h.createElement(y,{actionText:f?c:"",labelName:l[this.textLabelField],placeholder:p,showClear:n,tips:f,value:i,onChange:this.handleTextChange,onEntitledAction:this.handleEntitledAction,onFocus:this.handleTextFocus}),h.createElement(y,{errorTip:this.errorTip,labelName:d,placeholder:u,showClear:n,value:a,onChange:this.handleLinkChange,onFocus:this.handleLinkFocus}))}}]),InputGroupBase}(h.Component),(0,f.Z)(Je.prototype,"handleTextChange",[_.xB],Object.getOwnPropertyDescriptor(Je.prototype,"handleTextChange"),Je.prototype),(0,f.Z)(Je.prototype,"handleLinkChange",[_.xB],Object.getOwnPropertyDescriptor(Je.prototype,"handleLinkChange"),Je.prototype),(0,f.Z)(Je.prototype,"handleEntitledAction",[_.xB],Object.getOwnPropertyDescriptor(Je.prototype,"handleEntitledAction"),Je.prototype),(0,f.Z)(Je.prototype,"handleTextFocus",[_.xB],Object.getOwnPropertyDescriptor(Je.prototype,"handleTextFocus"),Je.prototype),(0,f.Z)(Je.prototype,"handleLinkFocus",[_.xB],Object.getOwnPropertyDescriptor(Je.prototype,"handleLinkFocus"),Je.prototype),(0,f.Z)(Je.prototype,"setEntitledTipByCurrLink",[_.xB],Object.getOwnPropertyDescriptor(Je.prototype,"setEntitledTipByCurrLink"),Je.prototype),Xe=Je))||Xe;ot.defaultProps=(0,s.Z)((0,s.Z)({},ot.defaultProps),{},{className:"",classNamePrefix:"form-label-input-group",linkRecognitionDelay:375,linkValue:"",onUpdateLinkType:D.dG,onUpdateStatus:D.dG,onUpdateValues:D.dG,showClear:!0,textValue:""}),ot.propTypes={className:P().string,classNamePrefix:P().string,linkRecognitionDelay:P().number,linkValue:P().string,showClear:P().bool,textValue:P().string,onUpdateLinkType:P().func,onUpdateStatus:P().func,onUpdateValues:P().func};var at,it,st=function(e){(0,u.Z)(InputGroupPc,e);var t=(0,p.Z)(InputGroupPc);function InputGroupPc(){var e;(0,l.Z)(this,InputGroupPc);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,m.Z)((0,d.Z)(e),"LabeledInput",et),(0,m.Z)((0,d.Z)(e),"componentType","pc"),(0,m.Z)((0,d.Z)(e),"textLabelField","textLabel"),e}return(0,c.Z)(InputGroupPc)}(ot);const lt=new(it=function(e){(0,u.Z)(LabeledInputPanelPc,e);var t=(0,p.Z)(LabeledInputPanelPc);function LabeledInputPanelPc(){var e;(0,l.Z)(this,LabeledInputPanelPc);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,m.Z)((0,d.Z)(e),"classNamePrefix","form-labeled-input-panel"),e}return(0,c.Z)(LabeledInputPanelPc,[{key:"show",value:function show(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,r=void 0===t?"":t,n=e.link,o=void 0===n?"":n,a=e.source,i=void 0===a?"":a,s=e.lang,l=e.title,c=e.modalOkText,d=e.modalCancelText,u=e.onConfirm,p=void 0===u?D.dG:u,m=e.onCancel,f=void 0===m?D.dG:m;this.text=r,this.link=o,this.source=i,this.onConfirm=p,this.onCancel=f;var y=!isValidUrl(o);this.linkInsertContainer=ze.default.confirm({className:this.classNamePrefix,title:l,cancelText:d,content:h.createElement(st,{lang:s,linkValue:o,textValue:r,onUpdateLinkType:this.handleLinkTypeChanged,onUpdateStatus:this.handleValidChanged,onUpdateValues:this.handleValueChanged}),okDisabled:y,okText:c,onCancel:this.handleCancelled,onOk:this.handleConfirmed})}},{key:"handleValidChanged",value:function handleValidChanged(e){var t;null===(t=this.linkInsertContainer)||void 0===t||t.update({okDisabled:!e})}}]),LabeledInputPanelPc}((at=function(){function LabeledInputPanel(){(0,l.Z)(this,LabeledInputPanel),(0,m.Z)(this,"text",""),(0,m.Z)(this,"link",""),(0,m.Z)(this,"source","")}return(0,c.Z)(LabeledInputPanel,[{key:"hide",value:function hide(){var e;null===(e=this.linkInsertContainer)||void 0===e||e.close()}},{key:"handleValueChanged",value:function handleValueChanged(e,t){this[e]=t}},{key:"handleLinkTypeChanged",value:function handleLinkTypeChanged(e){this.source=e}},{key:"handleConfirmed",value:function handleConfirmed(){if(!isValidUrl(this.link))return!1;var e=!this.text.trim()?this.link:this.text;return this.onConfirm({text:e,link:this.link,source:this.source}),this.hide(),!0}},{key:"handleCancelled",value:function handleCancelled(){this.onCancel(),this.hide()}}]),LabeledInputPanel}(),(0,f.Z)(at.prototype,"handleValueChanged",[_.xB],Object.getOwnPropertyDescriptor(at.prototype,"handleValueChanged"),at.prototype),(0,f.Z)(at.prototype,"handleLinkTypeChanged",[_.xB],Object.getOwnPropertyDescriptor(at.prototype,"handleLinkTypeChanged"),at.prototype),(0,f.Z)(at.prototype,"handleConfirmed",[_.xB],Object.getOwnPropertyDescriptor(at.prototype,"handleConfirmed"),at.prototype),(0,f.Z)(at.prototype,"handleCancelled",[_.xB],Object.getOwnPropertyDescriptor(at.prototype,"handleCancelled"),at.prototype),at)),(0,f.Z)(it.prototype,"handleValidChanged",[_.xB],Object.getOwnPropertyDescriptor(it.prototype,"handleValidChanged"),it.prototype),it);r(47868);var ct,dt,ut=(ct=function(e){(0,u.Z)(LinkPC,e);var t=(0,p.Z)(LinkPC);function LinkPC(){var e;(0,l.Z)(this,LinkPC);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,m.Z)((0,d.Z)(e),"LinkPopover",Ye.Z),(0,m.Z)((0,d.Z)(e),"LabeledInputPanel",lt),e}return(0,c.Z)(LinkPC,[{key:"handleOpenCurrentLink",value:function handleOpenCurrentLink(e){e.stopPropagation(),this.handleOpenLink()}},{key:"handleEditCurrentLink",value:function handleEditCurrentLink(e){e.stopPropagation(),this.handleEditLink()}},{key:"handleCancelCurrentLink",value:function handleCancelCurrentLink(e){e.stopPropagation(),this.handleCancelLink()}},{key:"handleDeleteCurrentLink",value:function handleDeleteCurrentLink(e){e.stopPropagation(),this.handleDeleteLink()}},{key:"handleCopyCurrentLink",value:function handleCopyCurrentLink(e){e.stopPropagation(),this.handleCopyLink()}},{key:"getLinkPopoverContents",value:function getLinkPopoverContents(){var e=this.state.locale.linkPopover;return[(0,s.Z)((0,s.Z)({},e.open),{},{onClick:this.handleOpenCurrentLink}),(0,s.Z)((0,s.Z)({},e.edit),{},{onClick:this.handleEditCurrentLink}),(0,s.Z)((0,s.Z)({},e.copy),{},{onClick:this.handleCopyCurrentLink}),(0,s.Z)((0,s.Z)({},e.cancel),{},{onClick:this.handleCancelCurrentLink}),(0,s.Z)((0,s.Z)({},e.remove),{},{onClick:this.handleDeleteCurrentLink})]}}]),LinkPC}(He),(0,f.Z)(ct.prototype,"handleOpenCurrentLink",[_.xB],Object.getOwnPropertyDescriptor(ct.prototype,"handleOpenCurrentLink"),ct.prototype),(0,f.Z)(ct.prototype,"handleEditCurrentLink",[_.xB],Object.getOwnPropertyDescriptor(ct.prototype,"handleEditCurrentLink"),ct.prototype),(0,f.Z)(ct.prototype,"handleCancelCurrentLink",[_.xB],Object.getOwnPropertyDescriptor(ct.prototype,"handleCancelCurrentLink"),ct.prototype),(0,f.Z)(ct.prototype,"handleDeleteCurrentLink",[_.xB],Object.getOwnPropertyDescriptor(ct.prototype,"handleDeleteCurrentLink"),ct.prototype),(0,f.Z)(ct.prototype,"handleCopyCurrentLink",[_.xB],Object.getOwnPropertyDescriptor(ct.prototype,"handleCopyCurrentLink"),ct.prototype),ct),pt=function(e){(0,u.Z)(ParagraphBase,e);var t=(0,p.Z)(ParagraphBase);function ParagraphBase(){return(0,l.Z)(this,ParagraphBase),t.apply(this,arguments)}return(0,c.Z)(ParagraphBase,[{key:"render",value:function render(){var e,t=this.props,r=t.attributes,n=t.children,o=t.className,a=t.classNamePrefix,i=t.element;return h.createElement("div",(0,O.Z)({className:g()(a,o)},r),n,null===(e=this.renderToolBar)||void 0===e?void 0:e.call(this,i.id))}}]),ParagraphBase}(h.PureComponent);pt.defaultProps={attributes:{},children:null,className:"",classNamePrefix:"rich-text-element-paragraph",element:{}},pt.propTypes={attributes:P().shape({}),children:P().node,className:P().string,classNamePrefix:P().string,element:P().shape({id:P().string})};var mt=(0,_.px)()(dt=function(e){(0,u.Z)(ParagraphPC,e);var t=(0,p.Z)(ParagraphPC);function ParagraphPC(){return(0,l.Z)(this,ParagraphPC),t.apply(this,arguments)}return(0,c.Z)(ParagraphPC,[{key:"renderToolBar",value:function renderToolBar(e){var t=this.props,r=t.readOnly,n=t.showInsertIcon;if(r||!n)return null;var o=this.props,a=o.editor,i=o.lang,s=o.onImageIconClick,l=o.onInsertImageIconClick,c=o.onInsertLinkIconClick,d=o.onInsertTDocIconClick,u=o.insertTDocTitle;return h.createElement("div",{className:"insert-container",contentEditable:!1},h.createElement(xe,{editor:a,id:e,insertTDocTitle:u,lang:i,readOnly:r,onImageIconClick:s,onInsertImageIconClick:l,onInsertLinkIconClick:c,onInsertTDocIconClick:d,onReport:this.handleReport}))}}]),ParagraphPC}(pt))||dt;mt.defaultProps=(0,s.Z)((0,s.Z)({},pt.defaultProps),{},{editor:{},onImageIconClick:D.dG,onInsertImageIconClick:D.dG,onInsertLinkIconClick:D.dG,onInsertTDocIconClick:D.dG,onlyBulletedList:!1,readOnly:!0,showInsertIcon:!0}),mt.propTypes=(0,s.Z)((0,s.Z)({},pt.propTypes),{},{editor:P().shape({}),onlyBulletedList:P().bool,readOnly:P().bool,showInsertIcon:P().bool,onImageIconClick:P().func,onInsertImageIconClick:P().func,onInsertLinkIconClick:P().func,onInsertTDocIconClick:P().func});const ft=mt;var ht=function(e){(0,u.Z)(SpanBase,e);var t=(0,p.Z)(SpanBase);function SpanBase(){return(0,l.Z)(this,SpanBase),t.apply(this,arguments)}return(0,c.Z)(SpanBase,[{key:"render",value:function render(){var e=this.props,t=e.attributes,r=e.children,n=e.className,o=e.classNamePrefix;return h.createElement("span",(0,O.Z)({className:g()(o,n)},t),r)}}]),SpanBase}(h.PureComponent);ht.defaultProps={attributes:{},children:null,className:"",classNamePrefix:"rich-text-element-span"},ht.propTypes={attributes:P().shape({}),children:P().node,className:P().string,classNamePrefix:P().string};var yt,bt=function(e){(0,u.Z)(SpanPC,e);var t=(0,p.Z)(SpanPC);function SpanPC(){return(0,l.Z)(this,SpanPC),t.apply(this,arguments)}return(0,c.Z)(SpanPC)}(ht),gt=r(77900),vt=0,_t=1,Ot=2,St=3,Pt=4,Ct=5,wt=6,It=7,Et=8,Tt=9,Nt=10,jt=90,Dt=91,kt=101,xt=102,Zt=(yt={},(0,m.Z)(yt,vt,"DOC"),(0,m.Z)(yt,_t,"SHEET"),(0,m.Z)(yt,Ot,"FORM"),(0,m.Z)(yt,Pt,"SLIDE"),(0,m.Z)(yt,wt,"PDF"),(0,m.Z)(yt,It,"FILEAIO"),(0,m.Z)(yt,jt,"MIND"),(0,m.Z)(yt,Dt,"FLOWCHART"),(0,m.Z)(yt,xt,"VOICENOTES"),(0,m.Z)(yt,Et,"SMARTCANVAS"),(0,m.Z)(yt,Tt,"SMARTCANVAS"),(0,m.Z)(yt,St,"FOLDER"),(0,m.Z)(yt,Ct,"NOTE"),(0,m.Z)(yt,Nt,"UNKNOWN"),(0,m.Z)(yt,kt,"DRIVE"),yt),Lt=new(function(e){(0,u.Z)(TencentDocFilePicker,e);var t=(0,p.Z)(TencentDocFilePicker);function TencentDocFilePicker(){return(0,l.Z)(this,TencentDocFilePicker),t.apply(this,arguments)}return(0,c.Z)(TencentDocFilePicker,[{key:"loadFilerPicker",value:function loadFilerPicker(e){var t=this,n=gt.default.show({});Promise.all([r.e("vendors-node_modules_tencent_ark-request_lib_index_js"),r.e("vendors-node_modules_tencent_ark-storage_lib_index_js-node_modules_tencent_docs-scenario-comp-78000c"),r.e("vendors-node_modules_tencent_dui-mobile_lib_components_Modal_index_js"),r.e("vendors-node_modules_tencent_dui-mobile_lib_components_Form_index_js-node_modules_tencent_dui-4c349d"),r.e("vendors-node_modules_tencent_docs-drive-selector_dist_drive-selector_es_js-node_modules_babel-e6a449"),r.e("node_modules_babel_runtime_helpers_esm_inheritsLoose_js")]).then(r.bind(r,31661)).then((function(r){var o=r.TencentDocsSelectorPC;t.TencentDocsSelector=o,n.close(),t.openFilePicker(e)})).catch((function(){t.TencentDocsSelector=null,n.close()}))}}]),TencentDocFilePicker}(function(){function AbstractTencentDocFilePicker(){(0,l.Z)(this,AbstractTencentDocFilePicker),(0,m.Z)(this,"TencentDocsSelector",null),(0,m.Z)(this,"tencentDocsSelectorInstance",null)}return(0,c.Z)(AbstractTencentDocFilePicker,[{key:"show",value:function show(e){this.TencentDocsSelector?this.openFilePicker(e):this.loadFilerPicker(e)}},{key:"close",value:function close(){var e;null===(e=this.tencentDocsSelectorInstance)||void 0===e||e.hide()}},{key:"openFilePicker",value:function openFilePicker(e){var t=this.TencentDocsSelector,r=e.title,n=e.className,a=e.onClose,i=e.onConfirm;this.tencentDocsSelectorInstance=new t({className:n,maxNumber:1,tabs:["Recent","Collection","MyDoc"],title:r,autoClose:!0,cancelButtonConfig:{},confirmButtonConfig:{},onCancel:a,onConfirm:function onConfirm(e){var t=(0,o.Z)(e,1)[0],r=t.url,n=window.location.protocol;i({id:t.id,title:t.title,url:r.startsWith(n)?r:"".concat(n).concat(r),rootId:t.parentId,type:Zt[t.docType],docPolicy:t.policy,padId:t.id,iconLink:t.iconUrl})}}),this.tencentDocsSelectorInstance.show()}}]),AbstractTencentDocFilePicker}())),Rt=r(43243),At=r(27597),Ft=r(19199),Mt=r(62698),Bt=r(1292),qt=function(e){(0,u.Z)(RichTextPopover,e);var t=(0,p.Z)(RichTextPopover);function RichTextPopover(){return(0,l.Z)(this,RichTextPopover),t.apply(this,arguments)}return(0,c.Z)(RichTextPopover,[{key:"renderPopoverChildren",value:function renderPopoverChildren(){return this.props.children}},{key:"render",value:function render(){return(0,Rt.Z)((0,At.Z)(RichTextPopover.prototype),"render",this).call(this)}}]),RichTextPopover}(Bt.Z);qt.defaultProps=(0,s.Z)((0,s.Z)((0,s.Z)({},Bt.Z.defaultProps),qt.defaultProps),{},{onCancel:D.dG,onDelete:D.dG,onEdit:D.dG,onOpen:D.dG}),qt.propTypes=(0,s.Z)((0,s.Z)({},Bt.Z.propTypes),{},{onCancel:P().func,onDelete:P().func,onEdit:P().func,onOpen:P().func});const Ut=qt;var Gt=function(e){(0,u.Z)(RichTextPopoverPC,e);var t=(0,p.Z)(RichTextPopoverPC);function RichTextPopoverPC(){var e;(0,l.Z)(this,RichTextPopoverPC);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,m.Z)((0,d.Z)(e),"Popover",Ft.default),e}return(0,c.Z)(RichTextPopoverPC,[{key:"getExtraPopoverProps",value:function getExtraPopoverProps(){var e=this.props,t=e.classNamePrefix,r=e.className,n=e.containerClassName,o=e.alignment,a=e.extraPopoverAttributes,i=e.contents,l=h.createElement(Mt.Z,{contents:i});return(0,s.Z)({className:g()("".concat(t,"-trigger"),r),containerClassName:g()(t,n),title:l,alignment:o,overlayStyle:{padding:0,boxShadow:"0 2px 6px 0 rgb(0 0 0 / 12%)"},containerOffsetY:8},a)}},{key:"render",value:function render(){return(0,Rt.Z)((0,At.Z)(RichTextPopoverPC.prototype),"render",this).call(this)}}]),RichTextPopoverPC}(Ut);Gt.defaultProps=(0,s.Z)((0,s.Z)({},Ut.defaultProps),{},{alignment:"start",className:"",classNamePrefix:"form-rich-text-popover",containerClassName:"",contents:[],extraPopoverAttributes:{}}),Gt.propTypes=(0,s.Z)((0,s.Z)({},Ut.propTypes),{},{alignment:P().oneOf(["start","center","end"]),className:P().string,classNamePrefix:P().string,containerClassName:P().string,contents:P().arrayOf(P().shape({})),extraPopoverAttributes:P().oneOfType([P().object])});var Kt=r(35442);function getLeftToRightSelection(e){var t=e.anchor,r=e.anchor,n=r.path,o=r.offset,a=e.focus,i=e.focus,s=i.path,l=i.offset,c=n.join("."),d=s.join("."),u=(0,Kt.yC)(c,d);return{"-1":{anchor:t,focus:a},0:{anchor:{path:n,offset:Math.min(o,l)},focus:{path:s,offset:Math.max(o,l)}},1:{anchor:a,focus:t}}[u]}r(46167);var Vt,Qt,Ht,Yt,zt,$t=(Vt=(0,_.w0)({type:"richEditorHoveringToolbarHighlight"}),Qt=(0,_.w0)({type:"richEditorHoveringToolbarCancelHighlight"}),Ht=(0,_.w0)({type:"richEditorHoveringToolbarInsertLink"}),Yt=(0,_.w0)({type:"richEditorHoveringToolbarShow"}),zt=function(e){(0,u.Z)(RichTextEditorPC,e);var t,f=(0,p.Z)(RichTextEditorPC);function RichTextEditorPC(e){var t;return(0,l.Z)(this,RichTextEditorPC),t=f.call(this,e),(0,m.Z)((0,d.Z)(t),"ImageElement",Ze),(0,m.Z)((0,d.Z)(t),"Paragraph",ft),(0,m.Z)((0,d.Z)(t),"LinkElement",ut),(0,m.Z)((0,d.Z)(t),"Span",bt),(0,m.Z)((0,d.Z)(t),"FormFilePicker",Lt),(0,m.Z)((0,d.Z)(t),"LabeledInputPanel",lt),t.state=(0,s.Z)((0,s.Z)({},t.state),{},{hoveringToolbarVisible:!1,hoveringToolbarStyle:{top:0,left:0}}),t.leftToRightSelection={},t}return(0,c.Z)(RichTextEditorPC,[{key:"componentDidMount",value:function componentDidMount(){window.addEventListener("click",this.hideHoveringToolbar)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("click",this.hideHoveringToolbar)}},{key:"importSCCommonService",value:(t=(0,i.Z)((0,a.Z)().mark((function _callee(){return(0,a.Z)().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e("vendors-node_modules_tencent_docs-scenario-components-language-pack_dist_index_js"),r.e("vendors-node_modules_tencent_dui_esm_components_Checkbox_index_js-node_modules_tencent_dui_es-759a75"),r.e("vendors-node_modules_tencent_dui-mobile_esm_components_Modal_index_js"),r.e("node_modules_tencent_docs-scenario-component-common-service_dist_esm_index_js-_433d0")]).then(r.bind(r,71349));case 2:(0,e.sent.showClipboardProtectionModal)();case 5:case"end":return e.stop()}}),_callee)}))),function importSCCommonService(){return t.apply(this,arguments)})},{key:"hideHoveringToolbar",value:function hideHoveringToolbar(){this.state.hoveringToolbarVisible&&this.setState({hoveringToolbarVisible:!1,hoveringToolbarStyle:{top:0,left:0}})}},{key:"handleMouseUp",value:function handleMouseUp(){var e=this.state.readOnly,t=this.props.onlyBulletedList;if(!e&&!t)if(""!==window.getSelection().toString()){var r=window.getSelection().getRangeAt(0).getBoundingClientRect(),n=r.top,o=r.left;this.setState({hoveringToolbarVisible:!0,hoveringToolbarStyle:{top:n-10,left:o}})}else this.hideHoveringToolbar()}},{key:"handleTextHighlight",value:function handleTextHighlight(){this.hideHoveringToolbar(),y.ML.addMark(this.editor,"highlight",!0)}},{key:"handleCancelTextHighlight",value:function handleCancelTextHighlight(){this.hideHoveringToolbar(),y.ML.removeMark(this.editor,"highlight",!0)}},{key:"isTextHighlight",value:function isTextHighlight(){return(0,M.Kw)(this.leftToRightSelection,this.editor.children)}},{key:"isSelectionContainLinkOrImage",value:function isSelectionContainLinkOrImage(){var e=this.leftToRightSelection,t=e.anchor.path,r=e.focus.path;if((0,M.qB)(this.leftToRightSelection)){var n=y.ML.parent(this.editor,t),a=(0,o.Z)(n,1)[0];return a.type===R.y.LINK||a.type===R.y.IMAGE}var i=(0,o.Z)(t,1)[0];if(i!==(0,o.Z)(r,1)[0])return!0;var s=this.editor.children[i];return-1!==(0,M.Yl)(s).index}},{key:"isSelectionContainImage",value:function isSelectionContainImage(){var e=this,t=this.leftToRightSelection,r=t.anchor,n=r.path,a=r.offset,i=t.focus,s=i.path,l=i.offset;if((0,M.qB)(this.leftToRightSelection)){var c=y.ML.parent(this.editor,n);return(0,o.Z)(c,1)[0].type===R.y.IMAGE}var d=(0,o.Z)(n,2),u=d[0],p=d[1],m=(0,o.Z)(s,1)[0],f=Array.from({length:m-u},(function(e,t){return u+1+t})),h=this.editor.children[u],b=h.children[p];return(h.type===R.y.IMAGE||-1!==(0,M.Yl)(h).index||b.text.length===a)&&(f.every((function(t){var r=e.editor.children[t],n=(0,M.Yl)(r).index;return r.type===R.y.IMAGE||-1!==n||(0,M.Yj)(r)}))&&!l)}},{key:"handleTextTotLink",value:function handleTextTotLink(){var e=this.state,t=e.lang,r=e.locale,n=r.MODAL_BTN_TEXT,o=r.PANEL_BTN_TEXT,a=r.labeledInputPanel;this.hideHoveringToolbar(),this.leftToRightSelection=getLeftToRightSelection(this.editor.selection);var i=y.ML.string(this.editor,this.leftToRightSelection);this.LabeledInputPanel.show({lang:t,text:i,title:a.title,modalOkText:n.okText,modalCancelText:n.cancelText,panelDoneText:o.okText,onConfirm:this.textChangeLink,onCancel:this.handleCancelLink})}},{key:"handleEditorFocused",value:function handleEditorFocused(e){(0,this.props.onFocus)(e)}},{key:"handleEditorBlur",value:function handleEditorBlur(e){(0,this.props.onBlur)(e)}},{key:"handleCompositionEnd",value:function handleCompositionEnd(e){if(v.default.isQQBrowser){var t=e.data;insertText(this.editor,t)}}},{key:"textChangeLink",value:function textChangeLink(e){var t=this.leftToRightSelection,r=t.anchor,a=r.path,i=r.offset,l=t.focus,c=l.path,d=l.offset,u=(0,o.Z)(a,2),p=u[0],m=u[1],f=this.editor.children[p],h=f.children[m],y=h.text,b=h.highlight,g=Array.from(f.children);if((0,M.qB)(this.leftToRightSelection))return g.splice.apply(g,[m,1].concat((0,n.Z)((0,F.jq)((0,s.Z)((0,s.Z)({},e),{},{preText:y.slice(0,i),preTextHighlight:b,aftText:y.slice(d),aftTextHighlight:b}))))),removeNode(this.editor,[p]),void insert_node_insertNode(this.editor,(0,F.$_)(g),[p],!0);var v=(0,o.Z)(c,2)[1],_=m+1,O=v-1;g[m]={text:g[m].text.slice(0,i),highlight:g[m].highlight},g[v]={text:g[v].text.slice(d),highlight:g[v].highlight},g.splice(_,O,(0,F.tg)(e)),removeNode(this.editor,[p]),insert_node_insertNode(this.editor,(0,F.$_)(g),[p],!0)}},{key:"getRichTextPopoverContents",value:function getRichTextPopoverContents(){var e=this.state.locale.richPopover;this.leftToRightSelection=getLeftToRightSelection(this.editor.selection);var t=this.isTextHighlight(),r=this.isSelectionContainLinkOrImage(),n=this.isSelectionContainImage();return[(0,s.Z)((0,s.Z)({},e.insertLink),{},{show:!0,disabled:r,onClick:this.handleTextTotLink}),(0,s.Z)((0,s.Z)({},e.highlight),{},{show:!t,onClick:this.handleTextHighlight,disabled:n}),(0,s.Z)((0,s.Z)({},e.cancelHighlight),{},{show:t,onClick:this.handleCancelTextHighlight,disabled:n})]}},{key:"renderHoveringToolbar",value:function renderHoveringToolbar(){var e=this.props,t=e.lang,r=e.classNamePrefix,n=this.state,o=n.hoveringToolbarVisible,a=n.hoveringToolbarStyle,i=this.editor.selection;if(!o||!i)return null;var s=this.getRichTextPopoverContents();return h.createElement("div",{className:g()("".concat(r,"-hovering-toobar")),style:a},h.createElement(Gt,{defaultVisible:!0,contents:s,lang:t,visible:o},h.createElement("div",null)))}}]),RichTextEditorPC}(pe),(0,f.Z)(zt.prototype,"hideHoveringToolbar",[_.xB],Object.getOwnPropertyDescriptor(zt.prototype,"hideHoveringToolbar"),zt.prototype),(0,f.Z)(zt.prototype,"handleMouseUp",[_.xB],Object.getOwnPropertyDescriptor(zt.prototype,"handleMouseUp"),zt.prototype),(0,f.Z)(zt.prototype,"handleTextHighlight",[_.xB,Vt],Object.getOwnPropertyDescriptor(zt.prototype,"handleTextHighlight"),zt.prototype),(0,f.Z)(zt.prototype,"handleCancelTextHighlight",[_.xB,Qt],Object.getOwnPropertyDescriptor(zt.prototype,"handleCancelTextHighlight"),zt.prototype),(0,f.Z)(zt.prototype,"handleTextTotLink",[_.xB,Ht],Object.getOwnPropertyDescriptor(zt.prototype,"handleTextTotLink"),zt.prototype),(0,f.Z)(zt.prototype,"handleEditorFocused",[_.xB],Object.getOwnPropertyDescriptor(zt.prototype,"handleEditorFocused"),zt.prototype),(0,f.Z)(zt.prototype,"handleEditorBlur",[_.xB],Object.getOwnPropertyDescriptor(zt.prototype,"handleEditorBlur"),zt.prototype),(0,f.Z)(zt.prototype,"handleCompositionEnd",[_.xB],Object.getOwnPropertyDescriptor(zt.prototype,"handleCompositionEnd"),zt.prototype),(0,f.Z)(zt.prototype,"textChangeLink",[_.xB],Object.getOwnPropertyDescriptor(zt.prototype,"textChangeLink"),zt.prototype),(0,f.Z)(zt.prototype,"getRichTextPopoverContents",[Yt],Object.getOwnPropertyDescriptor(zt.prototype,"getRichTextPopoverContents"),zt.prototype),zt)},5071:(e,t,r)=>{"use strict";r.d(t,{$_:()=>a,fn:()=>i,tg:()=>s,jq:()=>l,Z0:()=>d,We:()=>c});var n=r(40500),o=r(67521),a=function createParagraphNode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{text:""}];return{id:arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,n.dA)(),children:e,type:o.y.PARAGRAPH}},i=function createImageNode(e){return{data:e,id:(0,n.dA)(),type:o.y.IMAGE,children:[{text:""}]}},s=function createLinkNode(e){var t=e.link,r=e.text,a=e.source,i=e.icon,s=e.id;return{id:void 0===s?(0,n.dA)():s,href:t,children:[{text:r||t,link:t,source:a,icon:i}],type:o.y.LINK,icon:i,source:a}},l=function createInlineLinkNode(e){var t=e.link,r=e.text,o=e.icon,a=e.source,i=e.id,l=void 0===i?(0,n.dA)():i,c=e.preText,d=void 0===c?"":c,u=e.aftText,p=void 0===u?"":u,m=e.preTextHighlight,f=e.aftTextHighlight;return[{text:d,highlight:m},s({link:t,icon:o,text:r,source:a,id:l}),{text:p,highlight:f}]},c=function createLiNode(e){return{type:o.y.LI,children:[{children:[{text:null!=e?e:""}]}]}},d=function createBulletedNode(e){return{type:o.y.UL,children:[c(e)]}}},21896:(e,t,r)=>{"use strict";r.d(t,{qx:()=>getLinkNode,Jz:()=>getCurrentPath,bk:()=>getCurrentLevel,n7:()=>getInsertIndexByParagraphId,Yl:()=>getLinkNodeInfo,TN:()=>getNodeLevel,dK:()=>getCurrentLevelNode,XU:()=>getBulletedListAllNodes,Yj:()=>isVoidNode,Zc:()=>isVoidEditorNode,qB:()=>isSelectionInOneElement,Kw:()=>isSelectionHighlight});var n=r(649),o=r(11026),a=(r(35659),r(71165),r(74413),r(69108),r(84050),r(39690),r(92243),r(8532),r(20779),r(47134),r(63517),r(19717),r(98704),r(35442)),i=r(67521);function isVoidNode(e){return e.type===i.y.PARAGRAPH&&1===e.children.length&&""===e.children[0].text}function isVoidEditorNode(e){if(!e.length)return!0;var t=(0,o.Z)(e,1)[0];return 1===e.length&&isVoidNode(t)}function getLinkNode(e){var t;return null==e||null===(t=e.children)||void 0===t?void 0:t.find((function(e){return e.type===i.y.LINK}))}function getLinkNodeInfo(e){var t,r,n=null==e||null===(t=e.children)||void 0===t?void 0:t.findIndex((function(e){return e.type===i.y.LINK}));return{linkNode:null==e||null===(r=e.children)||void 0===r?void 0:r[n],index:n}}function getInsertIndexByParagraphId(e,t){return t.findIndex((function(t){return t.id===e}))}function getCurrentPath(e,t){var r,n;return[t.findIndex((function(t){return-1!==(n=t.children.findIndex((function(t){return(null==t?void 0:t.id)===e})))})),null!==(r=n)&&void 0!==r?r:-1]}function isSelectionInOneElement(e){var t=e.anchor,r=e.focus,n=t.path,o=r.path,i=n.join("."),s=o.join(".");return!(0,a.yC)(i,s)}function isSelectionHighlight(e,t){var r=e.anchor.path,n=e.focus.path;return t.slice(r[0],n[0]+1).every((function(e,t,o){var a=e.children,i=0===t?r[1]:0,s=t===o.length-1?n[1]+1:o.length;return a.slice(i,s).every((function(e){var t=e.text,r=e.highlight;return!t||r}))}))}function getCurrentLevel(e,t){var r=[0],o=-1,a=e[t[0]].children,s=(0,n.Z)(t);return s.splice(0,1),s.forEach((function(e){var t,n;(null===(t=a=a[e])||void 0===t?void 0:t.type)===i.y.UL&&r.push(e),(null===(n=a)||void 0===n?void 0:n.type)===i.y.LI&&(o=e),a=a.children})),{levels:r,optionIndex:o}}function getNodeLevel(e,t){var r=0;return e.children.forEach((function(e){var n=t;e.type===i.y.UL&&(n=getNodeLevel(e,t)),e.type===i.y.LI&&(n=getNodeLevel(e,t+1)),r=Math.max(n,r)})),r}function getCurrentLevelNode(e,t){var r=(0,n.Z)(t),o=e;return r.splice(r.length-2),r.forEach((function(e){o=o[e].children})),{type:i.y.LI,children:o}}function getBulletedListAllNodes(e){return e.children.reduce((function(e,t){return t.type===i.y.UL?e+getBulletedListAllNodes(t):t.type===i.y.LI?e+1+getBulletedListAllNodes(t):e}),0)}},41933:(e,t,r)=>{"use strict";r.d(t,{Q:()=>replaceLineBreak});var n=r(649),o=(r(12249),r(57637),r(19717),r(74413),r(98704),r(63517),r(51344),r(56614),r(36736),r(67521)),a=r(5071);function insertParagraphNode(e){return e.map((function(e){return(0,a.$_)([{text:e}])}))}function sum(e,t){return e+t}function replaceLineBreak(e){return e.reduce((function(e,t){if(t.type!==o.y.PARAGRAPH)return e.concat(t);for(var r=t.children,a=0;a<r.length;a=sum(a,1)){var i=r[a];if(i.type===o.y.LINK)e.at(-1).children.push(i,r[a+1]),a=sum(a,1);else if(-1!==i.text.indexOf("\n")){var s=i.text.split("\n");e.push.apply(e,(0,n.Z)(insertParagraphNode(s)))}else e.push(t),a=r.length}return e}),[])}},12159:(e,t,r)=>{"use strict";r.d(t,{K:()=>c});var n=r(50189),o=(r(63517),r(12249),r(57637),r(63115),"legacySubtitleImages"),a=r(67521),i=r(40500),s=r(5071),l="1.0.0";function deserializeLegacyIntoRichObject(e){return{version:l,value:[{type:a.y.PARAGRAPH,children:[{text:null!=e?e:""}],id:(0,i.dA)()}]}}function deserializeLegacyIntoRichElements(e){try{var t=JSON.parse(e);return"number"==typeof t?[{type:a.y.PARAGRAPH,children:[{text:e}],id:(0,i.dA)()}]:t}catch(r){return[{type:a.y.PARAGRAPH,children:[{text:e}],id:(0,i.dA)()}]}}var c={serialize:function serialize(e){try{var t;return JSON.stringify((0,n.Z)((0,n.Z)({},e),{},{version:null!==(t=e.version)&&void 0!==t?t:l}))}catch(r){return""}},deserialize:function deserialize(e){try{var t,r=JSON.parse(e);return"object"!=typeof r?deserializeLegacyIntoRichObject(e):r.tag===o?function transformLegacyData(e){var t=e.value,r=e.images,n=[],o=(0,s.$_)([{text:null!=t?t:""}]);if(n.push(o),null!=r&&r.length){var a=(0,s.fn)(r.map((function(e){return{src:e}})));n.push(a)}return{version:l,value:n}}(r):r.value?"string"==typeof r.value?(0,n.Z)((0,n.Z)({},r),{},{value:deserializeLegacyIntoRichElements(r.value),version:null!==(t=r.version)&&void 0!==t?t:l}):r:deserializeLegacyIntoRichObject(r.value)}catch(a){return deserializeLegacyIntoRichObject(e)}}}},25239:(e,t,r)=>{"use strict";r.d(t,{n:()=>b});var n,o=r(64649),a=(r(48316),r(12249),r(57637),r(27378)),i=r(90005),s=r.n(i),l=r(23615),c=r.n(l),d=r(40500),u="positive",p=(n={},(0,o.Z)(n,u,1),(0,o.Z)(n,"reverse",-1),n),m=(0,d.W5)((function(e){var t=e.classNamePrefix,r=e.disable,n=e.num,o=e.onChange,i=e.value;return a.createElement("div",{role:"button",tabIndex:"0",className:s()("".concat(t,"-card"),{disabled:r,selected:i===n.toString()}),onClick:function onClick(e){return o(e,n)},onKeyUp:d.dG},a.createElement("span",null,n))}));m.propTypes={classNamePrefix:c().string.isRequired,disable:c().bool.isRequired,num:c().number.isRequired,value:c().string.isRequired,onChange:c().func.isRequired},m.displayName="ScaleCard";var f=(0,d.W5)((function(e){var t=e.classNamePrefix,r=e.disabled,n=e.end,i=e.onChange,l=e.order,c=e.value,d=e.start,f=new Array(n-d+1).fill(0),h=l===u?d:n;return a.createElement("div",{className:s()("".concat(t,"-card-container"),(0,o.Z)({},"".concat(t,"-card-container-disabled"),r))},f.map((function(e,n){return 0!==n&&(h+=p[l]),a.createElement(m,{key:Number(n).toString(),classNamePrefix:t,disable:r,index:n,num:h,value:c,onChange:i})})))}));f.propTypes={classNamePrefix:c().string.isRequired,disabled:c().bool.isRequired,end:c().number.isRequired,order:c().string.isRequired,start:c().number.isRequired,value:c().string.isRequired,onChange:c().func.isRequired},f.displayName="ScaleCards";var h=(0,d.W5)((function(e){var t=e.classNamePrefix,r=e.endText,n=e.order,o=e.startText,i=n===u?{startText:o,endText:r}:{startText:r,endText:o};return a.createElement("div",{className:"".concat(t,"-bottom")},a.createElement("span",null,i.startText),a.createElement("span",null,i.endText))}));h.propTypes={classNamePrefix:c().string.isRequired,endText:c().string.isRequired,order:c().string.isRequired,startText:c().string.isRequired},h.displayName="ScaleBottom";var y=(0,d.W5)((function(e){var t=e.classNamePrefix,r=e.className,n=e.disabled,o=e.end,i=e.endText,l=e.getDesc,c=e.onChange,d=e.order,u=e.value,p=e.start,m=e.startText,y=e.readonly,b=l();return a.createElement("div",{className:s()(t,r,{readonly:y})},a.createElement(h,{classNamePrefix:t,endText:i,order:d,startText:m}),a.createElement(f,{classNamePrefix:t,disabled:n,end:o,order:d,start:p,value:u,onChange:c}),b?a.createElement("div",{className:"".concat(t,"-edit-desc")},b):null)}));y.propTypes={end:c().number.isRequired,endText:c().string.isRequired,order:c().string.isRequired,start:c().number.isRequired,startText:c().string.isRequired,className:c().string,classNamePrefix:c().string,disabled:c().bool,getDesc:c().func,readonly:c().bool,value:c().string,onChange:c().func},y.defaultProps={className:"",classNamePrefix:"form-scale",disabled:!1,getDesc:d.dG,onChange:d.dG,readonly:!1,value:"-1"},y.displayName="ScaleCoreBase";var b=y},69790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(25239),p=r(27378),m=r(23615),f=r.n(m),h=function(e){(0,l.Z)(ScaleFillLoader,e);var t=(0,c.Z)(ScaleFillLoader);function ScaleFillLoader(e){var r;return(0,a.Z)(this,ScaleFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(ScaleFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.state.ScaleFill;if(e)return p.createElement(e,this.props);var t=this.ScaleCore;return p.createElement(t,this.props)}}]),ScaleFillLoader}(p.PureComponent);h.propTypes={end:f().number.isRequired,endText:f().string.isRequired,order:f().string.isRequired,start:f().number.isRequired,startText:f().string.isRequired,className:f().string,classNamePrefix:f().string,disabled:f().bool,value:f().string},h.defaultProps={className:"",classNamePrefix:"form-scale",disabled:!1,value:void 0},delete h.defaultProps.value;var y=function(e){(0,l.Z)(ScaleFillPCLoader,e);var t,p=(0,c.Z)(ScaleFillPCLoader);function ScaleFillPCLoader(){var e;(0,a.Z)(this,ScaleFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"ScaleCore",u.n),e}return(0,i.Z)(ScaleFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_scale_scale-fill_scale-fill-pc_js").then(r.bind(r,90728));case 2:e=n.sent,t=e.default,this.setState({ScaleFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),ScaleFillPCLoader}(h)},6336:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={scanTitle:"扫码录入",fillTips:"去手机端扫码录入",updateMessage:"客户端版本过低暂不支持扫码，请升级后再试。",failMessage:"扫码失败，请重试。",permissionMessage:"请开启相机权限后重试。",initWxConfigMessage:"相机加载中，请重试。",overTimeMessage:"如无视频画面，请检查摄像头权限。"}},94865:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n,o=r(11092),a=r(27791),i=r(22951),s=r(91976),l=r(47169),c=r(67591),d=r(94337),u=r(64649),p=r(27378),m=r(90005),f=r.n(m),h=r(23615),y=r.n(h),b=r(21886),g=r(36080),v=r(6336),_=(0,b.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_scan_locale_en_US_js").then(r.bind(r,21901))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_scan_locale_zh_TW_js").then(r.bind(r,97104))},locale:v.Z})(n=function(e){(0,c.Z)(ScanFillLoader,e);var t=(0,d.Z)(ScanFillLoader);function ScanFillLoader(e){var r;return(0,i.Z)(this,ScanFillLoader),(r=t.call(this,e)).state={},r}return(0,s.Z)(ScanFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e,t,r=this.state.ScanFill;if(r)return p.createElement(r,this.props);var n=this.props,o=n.className,a=n.classNamePrefix,i=n.disabled,s=n.value,l=i&&!!s;return p.createElement("div",{className:f()(a,o,"".concat(a,"-fill-loader"))},p.createElement(g.H,{multiple:!0,backgroundDisabled:l,className:"".concat(a,"-main"),disabled:i,hasBorder:!l,prefixNode:null===(e=this.renderPrefixNode)||void 0===e?void 0:e.call(this),size:this.size,suffixNode:null===(t=this.renderSuffixNode)||void 0===t?void 0:t.call(this),text:s,textDisabled:!s}))}}]),ScanFillLoader}(p.PureComponent))||n;_.propTypes={className:y().string,classNamePrefix:y().string,disabled:y().bool,value:y().string},_.defaultProps={className:"",classNamePrefix:"form-scan",disabled:!1,value:void 0},delete _.defaultProps.value;var O=function(e){(0,c.Z)(ScanFillPCLoader,e);var t,n=(0,d.Z)(ScanFillPCLoader);function ScanFillPCLoader(){var e;(0,i.Z)(this,ScanFillPCLoader);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),(0,u.Z)((0,l.Z)(e),"size","normal"),e}return(0,s.Z)(ScanFillPCLoader,[{key:"loadComponent",value:(t=(0,a.Z)((0,o.Z)().mark((function _callee(){var e,t;return(0,o.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_scan_scan-fill_scan-fill-pc_js").then(r.bind(r,98479));case 2:e=n.sent,t=e.default,this.setState({ScanFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})},{key:"renderPrefixNode",value:function renderPrefixNode(){var e=this.props.classNamePrefix;return p.createElement("div",{className:f()("".concat(e,"-prefix"),"".concat(e,"-icon"))})}}]),ScanFillPCLoader}(_)},52489:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(67591),l=r(94337),c=r(27378),d=r(23615),u=r.n(d),p=r(90005),m=r.n(p),f=(r(12249),r(57637),r(36080)),h=r(40500),y=(0,h.W5)((function(e){var t=e.classNamePrefix,r=e.value;return c.createElement("div",{className:"".concat(t,"-multiple-container")},r.map((function(e,r){return c.createElement("div",{key:Number.prototype.toString.call(r),className:"".concat(t,"-multiple-item")},c.createElement("span",{className:"".concat(t,"-multiple-item-text")},e),c.createElement("span",{className:"".concat(t,"-multiple-item-del")}))})))}));y.propTypes={classNamePrefix:u().string.isRequired,value:u().arrayOf(u().string).isRequired},y.displayName="SelectMultipleInner";var b=(0,h.W5)((function(e){var t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.multiple,a=e.onClear,i=e.onClick,s=e.placeholder,l=e.showClearBtn,d=e.value,u=d.length>0,p=u?function getText(){return o?c.createElement(y,{classNamePrefix:r,value:d}):d[0]}():s,m={className:"".concat(r,"-clear"),onClick:a},h=l?c.createElement("div",m):null;return c.createElement(f.H,{hasArrow:!0,className:t,disabled:n,size:"small",suffixNode:h,text:p,textDisabled:!u,onClick:i})}));b.propTypes={className:u().string,classNamePrefix:u().string,disabled:u().bool,multiple:u().bool,placeholder:u().string,showClearBtn:u().bool,value:u().arrayOf(u().string),onClear:u().func,onClick:u().func},b.defaultProps={className:"",classNamePrefix:"form-select",disabled:!1,multiple:!1,onClear:Function.prototype,onClick:Function.prototype,placeholder:"请选择",showClearBtn:!1,value:[]},b.displayName="SelectCore";var g=r(70607),v=function(e){(0,s.Z)(SelectFillLoader,e);var t=(0,l.Z)(SelectFillLoader);function SelectFillLoader(e){var r;return(0,a.Z)(this,SelectFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(SelectFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"interactable",get:function get(){var e=this.props,t=e.disabled,r=e.readOnly;return!t&&!r}},{key:"value",get:function get(){var e=this.props.value;return e?"string"==typeof e?[e]:e:[]}},{key:"render",value:function render(){var e=this.props,t=e.allowClear,r=e.className,n=e.classNamePrefix,o=e.disabled,a=e.multiple,i=e.placeholder,s=this.state.SelectFill;if(s)return c.createElement(s,this.props);var l=this.interactable,d=this.value,u=(0,g.z)({allowClear:t,multiple:a,readOnly:!l,value:d});return c.createElement(b,{className:m()(n,r),disabled:o,multiple:a,placeholder:i,showClearBtn:u,value:d})}}]),SelectFillLoader}(c.PureComponent);v.propTypes={allowClear:u().bool,className:u().string,classNamePrefix:u().string,disabled:u().bool,multiple:u().bool,placeholder:u().string,readOnly:u().bool,value:u().oneOfType([u().string,u().arrayOf(u().string)])},v.defaultProps={allowClear:!0,className:"",classNamePrefix:"form-select",disabled:!1,multiple:!1,placeholder:"请选择",readOnly:!1,value:void 0},delete v.defaultProps.value;var _=function(e){(0,s.Z)(SelectFillPCLoader,e);var t,c=(0,l.Z)(SelectFillPCLoader);function SelectFillPCLoader(){return(0,a.Z)(this,SelectFillPCLoader),c.apply(this,arguments)}return(0,i.Z)(SelectFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_select_select-fill_select-fill-pc_js").then(r.bind(r,79731));case 2:e=n.sent,t=e.default,this.setState({SelectFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),SelectFillPCLoader}(v)},57131:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(50189),o=r(33978);const a=(0,n.Z)((0,n.Z)({},o.hA),{},{loadingText:"内容加载中...",modalTitle:"绘制签名",readOnlyPlaceholder:"未签名",resignBtnText:"重新签名",snackBarLoadingText:"加载中",uploadingText:"签名上传中...",editTitle:"待填写人签名",editDesc:"签名将被记录为图片",fillTitle:"点击签名",fillDesc:"签名将被记录为图片，可能被复制",tipsActionText:"好的",tipsContent:"签名仅为方便用户绘制签名图片的辅助功能，并非《中华人民共和国电子签名法》所述的电子签名或电子签名行为，不具有法律效力，仅供用户记录使用。",tipsTitle:"功能说明",unFilledTitle:"未提交签名"})},71565:(e,t,r)=>{"use strict";r.d(t,{G:()=>w});var n=r(91976),o=r(22951),a=r(47169),i=r(67591),s=r(94337),l=r(64649),c=r(27378),d=r(23615),u=r.n(d),p=r(90005),m=r.n(p),f=r(40500),h=(0,f.W5)((function(e){var t=e.classNamePrefix,r=e.value,n=e.children,o=e.onClick;return c.createElement(c.Fragment,null,c.createElement("div",{className:"".concat(t,"-picture"),role:"button",tabIndex:"-1",onClick:o,onKeyDown:Function.prototype},c.createElement("img",{alt:"签名图片",src:r,style:{height:"100%"}})),n)}));h.propTypes={classNamePrefix:u().string.isRequired,value:u().string.isRequired,onClick:u().func.isRequired,children:u().node},h.displayName="SignCoreNonEmpty";var y=(0,f.W5)((function(e){var t=e.classNamePrefix,r=e.onClick,n=e.text;return c.createElement("div",{className:"".concat(t,"-resign-btn"),role:"button",tabIndex:"-1",onClick:r,onKeyDown:Function.prototype},n)}));y.propTypes={classNamePrefix:u().string.isRequired,text:u().string.isRequired,onClick:u().func.isRequired},y.displayName="ResignBtn";var b=function(e){(0,i.Z)(SignCoreBase,e);var t=(0,s.Z)(SignCoreBase);function SignCoreBase(){return(0,o.Z)(this,SignCoreBase),t.apply(this,arguments)}return(0,n.Z)(SignCoreBase,[{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,n=e.lang,o=e.desc,a=e.title,i=e.children,s=e.onlyUseChildren,l=e.value,d=e.readOnly,u=e.resignBtnText,p=e.onBeforeReSign,f=e.onBeforeSign,b=e.onPictureClick,g=this.SignCoreEmpty;return c.createElement("div",{className:m()(t,r)},s?i:function getContent(){return l?c.createElement(h,{classNamePrefix:t,value:l,onClick:b},d?null:c.createElement(y,{classNamePrefix:t,text:u,onClick:p}),i):c.createElement(g,{classNamePrefix:t,desc:o,lang:n,title:a,onClick:f},i)}())}}]),SignCoreBase}(c.PureComponent);b.propTypes={children:u().node,className:u().string,classNamePrefix:u().string,desc:u().string,onlyUseChildren:u().bool,readOnly:u().bool,resignBtnText:u().string,title:u().string,value:u().string,onBeforeReSign:u().func,onBeforeSign:u().func,onPictureClick:u().func},b.defaultProps={children:null,className:"",classNamePrefix:"form-sign",desc:"",onBeforeReSign:Function.prototype,onBeforeSign:Function.prototype,onlyUseChildren:!1,onPictureClick:Function.prototype,readOnly:!1,resignBtnText:"",title:"",value:""};var g,v=r(19199),_=r(50189),O=r(21886),S=r(57131),P=(0,O.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_sign_locale_en_US_js").then(r.bind(r,93983))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_sign_locale_zh_TW_js").then(r.bind(r,37761))},locale:S.Z})(g=function(e){(0,i.Z)(SignEmptyBase,e);var t=(0,s.Z)(SignEmptyBase);function SignEmptyBase(){return(0,o.Z)(this,SignEmptyBase),t.apply(this,arguments)}return(0,n.Z)(SignEmptyBase,[{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.title,n=e.desc,o=e.onClick,a=e.children;return c.createElement("div",{className:"".concat(t,"-empty"),role:"button",tabIndex:"-1",onClick:o,onKeyDown:Function.prototype},c.createElement("div",{className:"".concat(t,"-title")},r),c.createElement("div",{className:"".concat(t,"-bottom")},c.createElement("div",{className:"".concat(t,"-tips")},n),n?this.renderDesc():null),a)}}]),SignEmptyBase}(c.PureComponent))||g;P.propTypes={classNamePrefix:u().string.isRequired,onClick:u().func.isRequired,children:u().node,desc:u().string,title:u().string},P.defaultProps=(0,_.Z)((0,_.Z)({},P.defaultProps),{},{children:null,desc:"",title:""});var C=function(e){(0,i.Z)(SignEmptyPC,e);var t=(0,s.Z)(SignEmptyPC);function SignEmptyPC(){return(0,o.Z)(this,SignEmptyPC),t.apply(this,arguments)}return(0,n.Z)(SignEmptyPC,[{key:"renderDesc",value:function renderDesc(){var e=this.props.classNamePrefix,t=this.state.locale.tipsContent,r=c.createElement("div",{style:{display:"flex",flexDirection:"column",lineHeight:"16px",userSelect:"none"}},c.createElement("div",{style:{marginBottom:8}},t));return c.createElement(v.default,{containerOffsetY:-10,offset:90,placement:"bottom",title:r,containerStyle:{padding:"7px 12px",width:320}},c.createElement("span",{className:"".concat(e,"-desc")}))}}]),SignEmptyPC}(P),w=function(e){(0,i.Z)(SignCorePC,e);var t=(0,s.Z)(SignCorePC);function SignCorePC(){var e;(0,o.Z)(this,SignCorePC);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),(0,l.Z)((0,a.Z)(e),"SignCoreEmpty",C),e}return(0,n.Z)(SignCorePC)}(b)},16613:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(25773),p=r(27378),m=r(23615),f=r.n(m),h=r(90005),y=r.n(h),b=r(36080),g=function(e){(0,l.Z)(SimpleFillLoader,e);var t=(0,c.Z)(SimpleFillLoader);function SimpleFillLoader(e){var r;return(0,a.Z)(this,SimpleFillLoader),(r=t.call(this,e)).state={},r.simpleRef=(0,p.createRef)(),r}return(0,i.Z)(SimpleFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"inputRef",get:function get(){var e,t;return{current:null!==(e=null===(t=this.simpleRef.current)||void 0===t?void 0:t.inputRef.current)&&void 0!==e?e:null}}},{key:"renderPrefixNode",value:function renderPrefixNode(){var e=this.props.prefix;return e?p.createElement("div",{style:{marginRight:8}},e):null}},{key:"renderSuffixNode",value:function renderSuffixNode(){var e=this.props.suffix;return e?p.createElement("div",{style:{marginLeft:8}},e):null}},{key:"render",value:function render(){var e=this.state.SimpleFill;if(e)return p.createElement(e,(0,u.Z)({ref:this.simpleRef},this.props));var t=this.props,r=t.value,n=t.placeholder,o=t.disabled,a=t.className,i=t.classNamePrefix,s=o&&!!r;return p.createElement("div",{className:y()(i,a)},p.createElement(b.H,{multiple:!0,backgroundDisabled:s,className:"".concat(i,"-main"),disabled:o,hasBorder:!s,prefixNode:this.renderPrefixNode(),size:this.size,suffixNode:this.renderSuffixNode(),text:r||n,textDisabled:!r}))}}]),SimpleFillLoader}(p.PureComponent);g.propTypes={className:f().string,classNamePrefix:f().string,disabled:f().bool,placeholder:f().string,prefix:f().string,suffix:f().string,value:f().string},g.defaultProps={className:"",classNamePrefix:"form-simple",disabled:!1,placeholder:"请输入",prefix:"",suffix:"",value:void 0},delete g.defaultProps.value;var v=function(e){(0,l.Z)(SimpleFillPCLoader,e);var t,u=(0,c.Z)(SimpleFillPCLoader);function SimpleFillPCLoader(){var e;(0,a.Z)(this,SimpleFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=u.call.apply(u,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"size","small"),e}return(0,i.Z)(SimpleFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_simple_simple-fill_simple-fill-pc_js").then(r.bind(r,85975));case 2:e=n.sent,t=e.default,this.setState({SimpleFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),SimpleFillPCLoader}(g)},54174:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(67591),l=r(94337),c=(r(12249),r(57637),r(35659),r(71165),r(74413),r(69108),r(27378)),d=r(50189),u=(r(13227),r(54370),r(5153),r(67506),r(80566),r(50870),r(75397),r(18829),r(95498),r(51429),r(61842),r(25376),r(38333),r(95864),r(63990),r(94565),r(95073),r(65204),r(47072),r(98391),r(24338),r(22727),r(2002),r(19647),r(11431),r(53124),r(62285),r(23615)),p=r.n(u),m=r(90005),f=r.n(m),h=function(e){(0,s.Z)(SortFillLoader,e);var t=(0,l.Z)(SortFillLoader);function SortFillLoader(e){var r;return(0,a.Z)(this,SortFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(SortFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"classNamePrefix",get:function get(){var e=this.props.classNamePrefix;return"".concat(e,"-fill")}},{key:"extraOptions",get:function get(){var e=this.props,t=e.value,r=e.options,n=new Set(t.map((function(e){return e.id})));return r.filter((function(e){return!n.has(e.id)})).map((function(e){return(0,d.Z)((0,d.Z)({},e),{},{empty:!0})}))}},{key:"renderOptionsList",value:function renderOptionsList(e){var t=this,r=this.props.classNamePrefix;return c.createElement("div",{className:"".concat(r,"-extra-options")},e.map((function(e,r){var n=e.title,o=e.id;return c.createElement("div",{key:o,className:f()("".concat(t.classNamePrefix,"-item-wrap")),"data-sort-fill-option-index":o},c.createElement("div",{className:"index"},r+1),c.createElement("div",{className:"title"},n))})))}},{key:"render",value:function render(){var e=this.state.SortFill;if(e)return c.createElement(e,this.props);var t=this.props,r=t.className,n=t.classNamePrefix,o=t.disabled;return c.createElement("div",{className:f()(r,n,this.classNamePrefix,{disabled:o})},this.renderSortContent())}}]),SortFillLoader}(c.PureComponent);h.propTypes={options:p().arrayOf(p().shape({id:p().string.isRequired,title:p().string})).isRequired,className:p().string,classNamePrefix:p().string,disabled:p().bool,value:p().string},h.defaultProps={className:"",classNamePrefix:"form-sort",disabled:p().bool,value:void 0},delete h.defaultProps.value;var y=function(e){(0,s.Z)(SortFillPCLoader,e);var t,d=(0,l.Z)(SortFillPCLoader);function SortFillPCLoader(){return(0,a.Z)(this,SortFillPCLoader),d.apply(this,arguments)}return(0,i.Z)(SortFillPCLoader,[{key:"sortList",get:function get(){var e=this.props,t=e.value,r=e.options;return t.map((function(e){var t=e.id,n=r.find((function(e){return e.id===t}));return null!=n?n:e}))}},{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([r.e("vendors-node_modules_tencent_form-ui-components_lib_components_react-sortable-hoc_SortableCon-4fdb53"),r.e("node_modules_tencent_form-ui-components_lib_components_sort_sort-fill_sort-fill-pc_js")]).then(r.bind(r,98509));case 2:e=n.sent,t=e.default,this.setState({SortFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})},{key:"renderSortContent",value:function renderSortContent(){var e=this.props.classNamePrefix;return c.createElement("div",{className:"".concat(e,"-content")},this.renderOptionsList(this.sortList),this.renderOptionsList(this.extraOptions))}}]),SortFillPCLoader}(h)},66112:(e,t,r)=>{"use strict";r.d(t,{gy:()=>O,Zl:()=>x});var n,o,a,i=r(50189),s=r(11026),l=r(64649),c=(r(12249),r(57637),r(53124),r(74413),r(62285),r(66066),r(48316),r(19717),r(98704),r(27378)),d=r(23615),u=r.n(d),p=r(90005),m=r.n(p),f=r(56583),h=r(14042),y=r(40500),b="file",g="image",v="normal",_="select",O=2,S=(n={},(0,l.Z)(n,h.c.SELECT,_),(0,l.Z)(n,h.c.RADIO,_),(0,l.Z)(n,h.c.CHECKBOX,_),(0,l.Z)(n,h.c.LOCATION,_),(0,l.Z)(n,h.c.TIME,_),(0,l.Z)(n,h.c.DATE,_),(0,l.Z)(n,h.c.IMAGE,g),(0,l.Z)(n,h.c.FILEIMAGE,g),(0,l.Z)(n,h.c.FILE,b),n),P=(0,f.Z)((function(e,t,r){var n=(0,s.Z)(t,1)[0].qlist;return e.filter((function(e){return n.includes(e.id)})).sort((function(e,t){return n.indexOf(e.id)-n.indexOf(t.id)})).map((function(e){var t=S[e.type]||v;return{id:e.id,placeholder:r[t],type:t,title:e.title}}))})),C=(0,f.Z)((function(e){return e.content.map((function(e){return e.title})).join(",")})),w=(0,f.Z)((function(e){return e.content.join(",")})),I=(0,f.Z)((function(e,t){var r,n,o,a=e.content,i=e.type;return a.length?1===a.length?a[0].name:"".concat((o={},(0,l.Z)(o,h.c.FILE,null==t||null===(r=t.fill)||void 0===r?void 0:r.file),(0,l.Z)(o,h.c.FILEIMAGE,null==t||null===(n=t.fill)||void 0===n?void 0:n.fileimage),o)[i],"(").concat(a.length,")"):""})),E=(0,f.Z)((function(e,t){var r;return e.content&&(null==t||null===(r=t.fill)||void 0===r?void 0:r.signed)})),T=(0,f.Z)((function(e){var t=e.content;return"string"==typeof t?t:t.value})),N=(0,f.Z)((function(e,t){var r,n=e.content,o=e.type;return((r={},(0,l.Z)(r,h.c.RADIO,C),(0,l.Z)(r,h.c.CHECKBOX,C),(0,l.Z)(r,h.c.SELECT,w),(0,l.Z)(r,h.c.FILE,I),(0,l.Z)(r,h.c.FILEIMAGE,I),(0,l.Z)(r,h.c.CANVAS,E),(0,l.Z)(r,h.c.CANVAS_IMAGE,E),(0,l.Z)(r,h.c.LOCATION,T),(0,l.Z)(r,h.c.SORT,C),r)[o]||function(){return n})({content:n,type:o},t)})),j=(0,f.Z)((function(e,t){return e.concat(new Array(Math.max(0,O-e.length)).fill([])).map((function(e){return e.reduce((function(e,r){return(0,i.Z)((0,i.Z)({},e),{},(0,l.Z)({},r.id,(0,i.Z)((0,i.Z)({},r),{},{showContent:N(r,t)})))}),{})}))})),D=(0,y.W5)((function(e){var t,r=e.classNamePrefix,n=e.content,o=e.customTableHeadCell,a=e.colIndex,i=e.locale,s=c.createElement("div",{className:r},n?c.createElement("div",{className:"".concat(r,"-content")},n):c.createElement("div",{className:"".concat(r,"-placeholder")},null==i||null===(t=i.edit)||void 0===t?void 0:t.placeholder.head));return"function"==typeof o?o({originTableHeadCell:s,colIndex:a,content:n}):s}));D.propTypes={classNamePrefix:u().string,colIndex:u().number,content:u().string,customTableHeadCell:u().func},D.displayName="TableHeadCell";var k=(0,y.W5)((function(e){var t=e.classNamePrefix,r=e.content,n=e.customTableBodyCell,o=e.placeholder,a=e.type,i=["image","file"].includes(a),s="select"===a,l=c.createElement("div",{className:t},i?c.createElement("div",{className:m()("".concat(t,"-icon-").concat(a),{"placeholder-icon":!r})}):null,r?c.createElement("div",{className:"".concat(t,"-content")},r):c.createElement("div",{className:"".concat(t,"-placeholder")},o),s?c.createElement("div",{className:m()("".concat(t,"-icon-").concat(a),{"placeholder-icon":!r})}):null);return"function"==typeof n?n({originTableBodyCell:l,content:r}):l}));k.propTypes={classNamePrefix:u().string,content:u().string,placeholder:u().string,type:u().oneOf(["normal","select","image","file"])},k.displayName="TableCell";var x=(0,y.W5)((function(e){var t=e.bodyClass,r=e.className,n=e.classNamePrefix,o=e.customTableBodyCell,a=e.customTableHeadCell,i=e.disabled,l=e.footClass,d=e.footContent,u=e.headClass,p=e.locale,f=e.placeholder,h=e.questions,b=e.rowMask,g=e.sections,v=e.showTableFooter,_=e.tableRightSlot,O=e.value,S=e.onClickBody,C=e.onClickFoot,w=e.onClickHead,I=P(h,g,f),E=j(O,p),T=c.useState(!1),N=(0,s.Z)(T,2),x=N[0],Z=N[1],L=c.useState(!1),R=(0,s.Z)(L,2),A=R[0],F=R[1],M=c.createRef();c.useEffect((function(){var e=M.current;e&&F(e.clientWidth+e.scrollLeft<e.scrollWidth-1)}),[]);return c.createElement("div",{className:m()(r,"".concat(n,"-container"))},c.createElement("div",{className:m()("".concat(n,"-wrap"))},c.createElement("div",{className:m()("".concat(n,"-scroll-container"),{"with-table-right-slot":!!_,"with-footer":v})},c.createElement("div",{className:m()("".concat(n,"-scroll-mask"),"left",{show:x})}),c.createElement("div",{ref:M,className:m()("".concat(n,"-scroll")),onScroll:function handleTableBodyScroll(e){var t=e.target;Z(!!t.scrollLeft),F(t.clientWidth+t.scrollLeft<t.scrollWidth-1)}},c.createElement("table",{className:m()(n,{disabled:i})},c.createElement("thead",{className:u},c.createElement("tr",null,I.map((function(e,t){return c.createElement("th",{key:e.id,role:"gridcell",onClick:function onClick(){return w(t)},onKeyDown:y.dG},c.createElement(D,{classNamePrefix:"".concat(n,"-head-cell"),colIndex:t,content:e.title,customTableHeadCell:a,disabled:i,locale:p}))})))),c.createElement("tbody",{className:t},E.map((function(e,t){return c.createElement("tr",{key:"".concat(t.toString())},I.map((function(r,a){var i;return c.createElement("td",{key:r.id,role:"gridcell",onClick:function onClick(e){return S(t,a,e)},onKeyDown:y.dG},c.createElement(k,{classNamePrefix:"".concat(n,"-cell"),content:null===(i=e[r.id])||void 0===i?void 0:i.showContent,customTableBodyCell:o,placeholder:r.placeholder,type:r.type}))})))})))),b),c.createElement("div",{className:m()("".concat(n,"-scroll-mask"),"right",{show:A})})),v?c.createElement("div",{className:m()("".concat(n,"-foot"),l,{disabled:i}),role:"button",tabIndex:0,onClick:C,onKeyDown:y.dG},c.createElement("div",{className:"".concat(n,"-foot-icon")}),c.createElement("div",{className:"".concat(n,"-foot-content")},d)):null),_)}));x.propTypes={bodyClass:u().string,className:u().string,classNamePrefix:u().string,customTableBodyCell:u().func,customTableHeadCell:u().func,disabled:u().bool,footClass:u().string,footContent:u().string,headClass:u().string,placeholder:u().shape((o={},(0,l.Z)(o,b,u().string),(0,l.Z)(o,g,u().string),(0,l.Z)(o,v,u().string),(0,l.Z)(o,_,u().string),o)),questions:u().arrayOf(u().shape({id:u().string,title:u().string,type:u().string})),rowMask:u().element,sections:u().arrayOf(u().shape({qlist:u().arrayOf(u().string)})),showTableFooter:u().bool,tableRightSlot:u().element,value:u().arrayOf(u().arrayOf(u().shape({content:u().oneOfType([u().string,u().array]),id:u().string,type:u().string}))),onClickBody:u().func,onClickFoot:u().func,onClickHead:u().func},x.defaultProps={bodyClass:"",className:"",classNamePrefix:"form-table",customTableBodyCell:void 0,customTableHeadCell:void 0,disabled:!1,footClass:"",footContent:"再填一行",headClass:"",onClickBody:y.dG,onClickFoot:y.dG,onClickHead:y.dG,placeholder:(a={},(0,l.Z)(a,b,"上传文件区"),(0,l.Z)(a,g,"上传图片区"),(0,l.Z)(a,v,"请输入"),(0,l.Z)(a,_,"请选择"),a),questions:[],rowMask:null,sections:[{qlist:[]}],showTableFooter:!1,tableRightSlot:null,value:[]},x.displayName="TableCore"},29885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(25773),o=r(22951),a=r(91976),i=r(67591),s=r(94337),l=r(27378),c=r(23615),d=r.n(c),u=r(90005),p=r.n(u),m=r(40500),f=function(e){(0,i.Z)(Tag,e);var t=(0,s.Z)(Tag);function Tag(){return(0,o.Z)(this,Tag),t.apply(this,arguments)}return(0,a.Z)(Tag,[{key:"render",value:function render(){var e=this.props,t=e.classNamePrefix,r=e.className,o=e.id,a=e.active,i=e.clickable,s=e.disabled,c=e.text,d=e.onClick,u=e.onMouseDown,f=e.style,h=e.size,y={onClick:function onClick(){return d({id:o,text:c})},onMouseDown:function onMouseDown(){return u({id:o,text:c})}};return c?l.createElement("div",(0,n.Z)({key:o,style:f,className:p()(r,"".concat(t,"-item"),"".concat(t,"-item-").concat(h),{active:a,clickable:i||d!==m.dG&&"function"==typeof d,disabled:s})},y),c):null}}]),Tag}(l.PureComponent);f.propTypes={text:d().string.isRequired,active:d().bool,className:d().string,classNamePrefix:d().string,clickable:d().bool,disabled:d().bool,id:d().oneOfType([d().string,d().number]),size:d().oneOf(["default","large"]),style:d().oneOfType([d().object]),onClick:d().func,onMouseDown:d().func},f.defaultProps={active:!1,className:"",classNamePrefix:"form-tag",clickable:!1,disabled:!1,id:"",onClick:m.dG,onMouseDown:m.dG,size:"default",style:{}};const h=f},65613:(e,t,r)=>{"use strict";r.d(t,{f:()=>l});var n=r(27378),o=r(23615),a=r.n(o),i=r(90005),s=r.n(i),l=(0,r(40500).W5)((function(e){var t=(0,n.useRef)(null),r=(0,n.useRef)(null),o=(0,n.useRef)(null),a=e.readOnly,i=e.focusInputIndex,l=e.classNamePrefix,c=e.hour,d=e.hourText,u=e.minute,p=e.minuteText,m=e.seconds,f=e.secondsText,h=e.onHourChange,y=e.onInputItemBlur,b=e.onMinuteChange,g=e.onMinuteKeyDown,v=e.onSecondsChange,_=e.onSecondsKeyDown;return(0,n.useEffect)((function(){var e=[t,r,o][i];null==e||e.current.focus()}),[i]),n.createElement(n.Fragment,null,n.createElement("div",{className:s()("".concat(l,"-icon"),{disabled:a})}),n.createElement("div",{className:s()("".concat(l,"-content"),{disabled:a})},n.createElement("div",{className:"".concat(l,"-content-input")},n.createElement("input",{ref:t,disabled:a,pattern:"[0-9]*",type:"text",value:c,onBlur:y,onChange:h})),n.createElement("div",{className:"".concat(l,"-content-text")},d),n.createElement("div",{className:"".concat(l,"-content-input")},n.createElement("input",{ref:r,disabled:a,pattern:"[0-9]*",type:"text",value:u,onBlur:y,onChange:b,onKeyDown:g})),n.createElement("div",{className:"".concat(l,"-content-text")},p),n.createElement("div",{className:"".concat(l,"-content-input")},n.createElement("input",{ref:o,disabled:a,pattern:"[0-9]*",type:"text",value:m,onBlur:y,onChange:v,onKeyDown:_})),n.createElement("div",{className:"".concat(l,"-content-text")},f)))}));l.propTypes={classNamePrefix:a().string,focusInputIndex:a().number,hour:a().string,hourText:a().string,minute:a().string,minuteText:a().string,readOnly:a().bool,seconds:a().string,secondsText:a().string,onHourChange:a().func,onInputItemBlur:a().func,onMinuteChange:a().func,onMinuteKeyDown:a().func,onSecondsChange:a().func,onSecondsKeyDown:a().func},l.defaultProps={classNamePrefix:"form-time",focusInputIndex:-1,hour:"",hourText:"小时",minute:"",minuteText:"分钟",onHourChange:Function.prototype,onInputItemBlur:Function.prototype,onMinuteChange:Function.prototype,onMinuteKeyDown:Function.prototype,onSecondsChange:Function.prototype,onSecondsKeyDown:Function.prototype,readOnly:!1,seconds:"",secondsText:"秒"},l.displayName="TimeDurationCore"},54951:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(67591),l=r(94337),c=r(27378),d=r(23615),u=r.n(d),p=r(90005),m=r.n(p),f=r(74602),h=r(89062),y=r(65613),b=function(e){(0,s.Z)(TimeFillLoader,e);var t=(0,l.Z)(TimeFillLoader);function TimeFillLoader(e){var r;return(0,a.Z)(this,TimeFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(TimeFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.disabled,o=e.value,a=e.type,i=this.state.TimeFill;return i?c.createElement(i,this.props):a===f.TIME_TYPE.DURATION?c.createElement("div",{className:m()(r,t)},c.createElement(y.f,{classNamePrefix:r,readOnly:n})):c.createElement(h.M,{className:"".concat(r,"-main"),readOnly:n,value:o})}}]),TimeFillLoader}(c.PureComponent);b.propTypes={className:u().string,classNamePrefix:u().string,disabled:u().bool,type:u().string,value:u().string},b.defaultProps={className:"",classNamePrefix:"form-time",disabled:!1,type:f.TIME_TYPE.TIME,value:void 0},delete b.defaultProps.value;var g=function(e){(0,s.Z)(TimeFillPCLoader,e);var t,c=(0,l.Z)(TimeFillPCLoader);function TimeFillPCLoader(){return(0,a.Z)(this,TimeFillPCLoader),c.apply(this,arguments)}return(0,i.Z)(TimeFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([r.e("vendors-node_modules_rc-motion_es_index_js-node_modules_rc-util_es_Dom_contains_js-node_modul-2a6042"),r.e("vendors-node_modules_rc-trigger_es_index_js"),r.e("vendors-node_modules_tencent_form-ui-components_lib_components_time_time-fill_time-fill-pc_js")]).then(r.bind(r,59750));case 2:e=n.sent,t=e.default,this.setState({TimeFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),TimeFillPCLoader}(b)},38611:(e,t,r)=>{"use strict";r.d(t,{O:()=>w});var n=r(11092),o=r(27791),a=r(11026),i=(r(13227),r(54370),r(5153),r(67506),r(80566),r(50870),r(75397),r(18829),r(95498),r(51429),r(61842),r(25376),r(38333),r(95864),r(63990),r(94565),r(95073),r(65204),r(47072),r(98391),r(24338),r(22727),r(2002),r(19647),r(11431),r(84050),r(32679),r(74413),r(67551),r(12249),r(57637),r(27378)),s=r(23615),l=r.n(s),c=r(90005),d=r.n(c),u=r(41589),p=r(64649),m=r(22951),f=r(91976),h=r(67591),y=r(94337),b=r(73428),g=r(21886),v=r(66040);var _,O,S=r(40500),P=(0,g.p)({en_US:function en_US(){return r.e("node_modules_tencent_form-ui-components_lib_components_vote_vote-core_locale_en_US_js").then(r.bind(r,91481))},zh_TW:function zh_TW(){return r.e("node_modules_tencent_form-ui-components_lib_components_vote_vote-core_locale_zh_TW_js").then(r.bind(r,296))},locale:{item:"票",items:"票",more:"等"}})((O=function(e){(0,h.Z)(VoteOption,e);var t=(0,y.Z)(VoteOption);function VoteOption(){return(0,m.Z)(this,VoteOption),t.apply(this,arguments)}return(0,f.Z)(VoteOption,[{key:"handleClick",value:function handleClick(){var e=this.props;(0,e.onClick)(e.index,e.selected)}},{key:"getClassName",value:function getClassName(e){var t=this.props,r=t.classNamePrefix,n=t.type;return"".concat(r,"-").concat(e," ").concat(r,"-").concat(n,"-").concat(e)}},{key:"renderOptionTextAndPercentBar",value:function renderOptionTextAndPercentBar(){var e=this.props,t=e.readOnly,r=e.selected,n=e.result,o=e.title;return i.createElement("div",{className:d()(this.getClassName("option-text"),{readonly:t,selected:r})},i.createElement("span",{className:this.getClassName("option-text-content")},o),null!=n&&n.rate?i.createElement("div",{className:d()(this.getClassName("option-text-percent"),{selected:r}),style:{width:"".concat(n.rate,"%")}}):null)}},{key:"renderOptionSelectedIcon",value:function renderOptionSelectedIcon(){return this.props.selected?i.createElement("div",{className:this.getClassName("option-selected-icon")}):null}},{key:"renderOptionStatistics",value:function renderOptionStatistics(){var e,t=this,r=this.props,n=r.result,o=r.userLimit;if(!n)return null;var a=this.state.locale,s=a.item,l=a.items,c=a.more,d=n.users,u=n.count,p=void 0===u?0:u,m=n.rate,f=void 0===m?0:m,h=null!==(e=null==d?void 0:d.length)&&void 0!==e?e:0,y=h?d.slice(0,o):[],b=y.length;return i.createElement("div",{className:this.getClassName("option-stats")},i.createElement("span",{className:this.getClassName("option-stats-count")},"".concat(p," ").concat(p>1?l:s," ").concat(f,"%")),h?i.createElement("div",{className:this.getClassName("option-stats-split")}):null,h?i.createElement("div",{className:this.getClassName("option-stats-users")},y.map((function(e,r){return i.createElement("div",{className:t.getClassName("option-stats-users-item")},i.createElement("img",{alt:"",className:"avatar",src:e.avatar}),i.createElement("span",{className:"nickname"},e.name),r<b-1&&i.createElement("span",{className:"splitter"},"、"))})),b<h&&i.createElement("span",{className:"and-more"},c)):null)}},{key:"renderOptionImages",value:function renderOptionImages(){var e=this.props,t=e.images,r=e.ImageGallery,n=e.title,o=e.onImageLoad,a=e.onPreviewImage;return t.length&&r?i.createElement(r,{images:t,size:"small",source:"option",className:d()(this.getClassName("option-image-gallery"),(0,p.Z)({},this.getClassName("option-image-gallery-no-text"),!(null!=n&&n.length))),onImageLoad:o,onPreviewImage:a}):null}},{key:"render",value:function render(){var e=this.props,t=e.selected,r=e.type;return i.createElement("div",{"aria-checked":t,className:d()(this.getClassName("option")),role:r,tabIndex:"-1",onClick:this.handleClick,onKeyDown:S.dG},i.createElement("div",{className:this.getClassName("option-content")},this.renderOptionTextAndPercentBar(),this.renderOptionSelectedIcon(),this.renderOptionStatistics(),this.renderOptionImages()))}}]),VoteOption}(i.PureComponent),(0,b.Z)(O.prototype,"handleClick",[v.xB],Object.getOwnPropertyDescriptor(O.prototype,"handleClick"),O.prototype),(0,b.Z)(O.prototype,"getClassName",[v.xB],Object.getOwnPropertyDescriptor(O.prototype,"getClassName"),O.prototype),_=O))||_;P.propTypes={classNamePrefix:l().string.isRequired,images:l().arrayOf(l().string).isRequired,index:l().number.isRequired,readOnly:l().bool.isRequired,selected:l().bool.isRequired,type:l().string.isRequired,onClick:l().func.isRequired,onImageLoad:l().func.isRequired,onPreviewImage:l().func.isRequired,ImageGallery:l().elementType,result:l().oneOf([l().shape({count:l().number.isRequired,id:l().oneOf([l().number,l().string]).isRequired,rate:l().number.isRequired,images:l().arrayOf(l().string),title:l().string,users:l().arrayOf(l().shape({avatar:l().string,name:l().string}))}),void 0]),title:l().string,userLimit:l().number},P.defaultProps={ImageGallery:null,result:void 0,title:"",userLimit:2};var C=(0,S.W5)((function(e){var t=e.className,r=e.classNamePrefix,s=e.disabled,l=e.loadImageGallery,c=e.multiple,p=e.onOptionClick,m=e.onOptionImageLoad,f=e.onOptionImagePreview,h=e.options,y=e.readOnly,b=e.results,g=e.value,v=e.userLimit,_=e.lang,O=(0,i.useState)(null),S=(0,a.Z)(O,2),C=S[0],w=S[1],I=(0,i.useState)(new Set),E=(0,a.Z)(I,2),T=E[0],N=E[1],j=(0,i.useState)([]),D=(0,a.Z)(j,2),k=D[0],x=D[1],Z=(0,i.useCallback)((function(e){var t;if(Array.isArray(b)&&b.length){var r=k.findIndex((function(t){return t===e}));return null!==(t=b[r])&&void 0!==t?t:{count:0,rate:0}}}),[b,k]);return(0,i.useEffect)((function(){if(h.some((function(e){var t;return null===(t=e.images)||void 0===t?void 0:t.length}))){var e=function(){var e=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l();case 2:e=r.sent,t=e.default,w((function(){return t}));case 5:case"end":return r.stop()}}),_callee)})));return function loadComponent(){return e.apply(this,arguments)}}();e()}}),[h]),(0,i.useEffect)((function(){N(new Set((0,u.xv)(h,g)))}),[h,g]),(0,i.useEffect)((function(){x((0,u.xv)(h,b))}),[h,b]),i.createElement("div",{className:d()(t,r)},h.map((function(e,t){var n=e.id,o=e.title,a=e.images,l=void 0===a?[]:a,d=Z(t),u=T.has(t);return i.createElement(P,{key:n.toString(),ImageGallery:C,classNamePrefix:r,disabled:s,images:l,index:t,lang:_,readOnly:y,result:d,selected:u,title:o,type:c?"checkbox":"radio",userLimit:v,onClick:p,onImageLoad:m,onPreviewImage:f})})))}));C.propTypes={className:l().string,classNamePrefix:l().string,disabled:l().bool,loadImageGallery:l().func,multiple:l().bool,options:l().arrayOf(l().shape({id:l().oneOfType([l().string,l().number]).isRequired,images:l().arrayOf(l().string),title:l().string})),readOnly:l().bool,results:l().arrayOf(l().shape({count:l().number.isRequired,id:l().oneOfType([l().string,l().number]).isRequired,rate:l().number.isRequired,images:l().arrayOf(l().string),title:l().string,users:l().arrayOf(l().shape({avatar:l().string,name:l().string}))})),userLimit:l().number,value:l().arrayOf(l().shape({id:l().oneOfType([l().string,l().number]).isRequired,images:l().arrayOf(l().string),title:l().string})),onOptionClick:l().func,onOptionImageLoad:l().func,onOptionImagePreview:l().func},C.defaultProps={className:"",classNamePrefix:"form-vote",disabled:!1,loadImageGallery:S.dG,onOptionClick:S.dG,onOptionImageLoad:S.dG,onOptionImagePreview:S.dG,options:[],readOnly:!1,results:void 0,userLimit:2,value:[]},C.displayName="VoteCore";var w=C},8605:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(11092),o=r(27791),a=r(22951),i=r(91976),s=r(47169),l=r(67591),c=r(94337),d=r(64649),u=r(38611),p=r(25773),m=r(27378),f=function loadImageGallery(){return{default:null}};var h=function(e){(0,l.Z)(VoteFillPCLoader,e);var t,p=(0,c.Z)(VoteFillPCLoader);function VoteFillPCLoader(){var e;(0,a.Z)(this,VoteFillPCLoader);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"VoteCore",u.O),e}return(0,i.Z)(VoteFillPCLoader,[{key:"loadComponent",value:(t=(0,o.Z)((0,n.Z)().mark((function _callee(){var e,t;return(0,n.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.e("node_modules_tencent_form-ui-components_lib_components_vote_vote-fill_vote-fill-pc_js").then(r.bind(r,74045));case 2:e=n.sent,t=e.default,this.setState({VoteFill:t});case 5:case"end":return n.stop()}}),_callee,this)}))),function loadComponent(){return t.apply(this,arguments)})}]),VoteFillPCLoader}(function(e){(0,l.Z)(VoteFillLoader,e);var t=(0,c.Z)(VoteFillLoader);function VoteFillLoader(e){var r;return(0,a.Z)(this,VoteFillLoader),(r=t.call(this,e)).state={},r}return(0,i.Z)(VoteFillLoader,[{key:"componentDidMount",value:function componentDidMount(){this.loadComponent()}},{key:"render",value:function render(){var e=this.state.VoteFill;if(e)return m.createElement(e,this.props);var t=this.VoteCore;return m.createElement(t,(0,p.Z)({},this.props,{loadImageGallery:f}))}}]),VoteFillLoader}(m.PureComponent))},78638:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DATE_TIME_TYPE:()=>n,DATE_TIME_MENU:()=>o});var n={DATE:"DATE",DATETIME:"DATETIME",MONTH:"MONTH",TIME:"TIME",DURATION:"DURATION"},o=[n.DATETIME,n.DATE,n.MONTH,n.TIME,n.DURATION]},88117:(e,t,r)=>{"use strict";r.d(t,{L2:()=>n,tm:()=>o,m_:()=>a,MH:()=>i,KJ:()=>s});var n={delete:"delete",download:"download",update:"update",view:"view"},o={fileRead:0,loading:1,success:2,fail:3},a=[16303],i=[o.loading,o.fileRead],s={big:"big",normal:"normal"}},51410:(e,t,r)=>{"use strict";r.d(t,{v:()=>n,z:()=>o});var n={CITY:"CITY",DISTRICT:"DISTRICT",STREET:"STREET",DETAIL:"DETAIL",GPS:"GPS",POSITION:"POSITION"},o={INIT:0,LOCATING:1,LOCATED:2,ERROR:3}},79942:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var n={CELSIUS:"CELSIUS",FAHRENHEIT:"FAHRENHEIT"}},74602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TIME_TYPE:()=>n,TIME_FORMAT:()=>o});var n={TIME:"TIME",DURATION:"DURATION"},o={TIME:"hh:mm",DURATION:"h小时mm分钟ss秒"}},21806:(e,t,r)=>{"use strict";r.d(t,{o:()=>o,Y:()=>a});r(12249),r(57637);var n=r(41589),o=function getFileDesc(e,t){var r=e.fileSize,o=e.fileType,a=void 0===o?[]:o;if(!r&&!a.length)return t.fileDescUnlimited;var i=a.length?"".concat(a.slice(0,3).map((function(e){return t.fileTypes[e]})).join("/")).concat(a.length>3?"/...":""):"",s=r?"".concat((0,n.H8)(r,"B","M",2),"B"):"";return t.fileDesc.replace("{{FILE_TYPE}}",i).replace(/{{FILE_SIZE:([^}]+)}}/,s?"$1".concat(s):"").replace(/{{DELIMITER:([^}]+)}}/,i&&s?"$1":"")},a=function getFileImageDesc(e,t){var r=e.fileNum,o=e.fileSize,a=e.watermark,i=r||{},s=i.max,l=i.min;if(!r&&!o)return t.imageDescUnlimited;var c=s||l,d=o?"".concat((0,n.H8)(o,"B","M",2),"B"):"";return t.imageDesc.replace(/{{MAX:([^}]+)}}/,s&&!l?"$1":"").replace(/{{MIN:([^}]+)}}/,l&&!s?"$1":"").replace(/{{UNIT:([^}]+)}}/,c?"".concat(c,"$1"):"").replace(/{{DELIMITER:([^}]+)}}/,r&&o?"$1":"").replace(/{{IMAGE_SIZE:([^}]+)}}/,d?"$1".concat(d):"").replace(/{{WATERMARK:([^}]+)}}/,a?"$1":"")}},88021:(e,t,r)=>{"use strict";r.d(t,{GG:()=>s,BZ:()=>l,pE:()=>c});var n=r(50189),o=(r(12249),r(57637),r(13020)),a=r(88117),i=r(40500),s=function convertToFileImage(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.dA)();return e.map((function(e,i){var s=e.status,l=e.thumbnailUrl,c=e.uploadingUrl,d=s===a.tm.success?l:c;return(0,n.Z)((0,n.Z)({},e),{},{src:t?o:d||o,id:e.id||e.key||"".concat(r).concat(i)})}))},l=function convertToFile(e){var t=(0,i.dA)();return e.map((function(e,r){return(0,n.Z)((0,n.Z)({},e),{},{id:e.id||e.key||"".concat(t).concat(r)})}))},c=function convertToOuterFileImage(e){return e.map((function(e){var t=(0,n.Z)({},e);return delete t.src,delete t.uploadingUrl,delete t.thumbnailUrl,delete t.previewUrl,t}))}},40500:(e,t,r)=>{"use strict";r.d(t,{dG:()=>o,dA:()=>a,hl:()=>getHTMLStringLength,ml:()=>convertLink,W5:()=>createMemoComponent});var n=r(27378),o=Function.prototype,a=function getRandomKey(){return"".concat(Date.now().toString(36),"_").concat(Math.floor(1e3*Math.random())%1e3)};function getHTMLStringLength(e){return function removeHTMLTag(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}(e).length}function convertLink(e){var t=function encodeHTML(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}(e);return t.replace(/https?:\/\/[\w]+\.[-%\w./?=&#]{2,}/g,(function(e){return'<a href="'.concat(e,'" target="_blank">').concat(e,"</a>")}))}function createMemoComponent(e,t){var r=(0,n.memo)(e,t);return Object.defineProperty(r,"displayName",{set(t){e.displayName="Memo(".concat(t||"anonymous",")")}}),r}},5212:(e,t,r)=>{"use strict";r.d(t,{H:()=>o});var n=r(11026),o=(0,r(56583).Z)((function(e){var t=(e||"").split("\n"),r=(0,n.Z)(t,2),o=r[0],a=r[1];return{value:o,detail:void 0===a?"":a}}))},47572:(e,t,r)=>{"use strict";r.d(t,{v:()=>l,W:()=>c});var n=r(50189),o=r(53782),a=(r(12249),r(57637),r(40500)),i=["src","id","loaded","customResult"],s=["src"],l=function convertToValue(e){return e.map((function(e){var t=e.src,r=(e.id,e.loaded,e.customResult),a=(0,o.Z)(e,i);return r||(0,n.Z)({src:t},a)}))},c=function convertToPicture(e){var t=(0,a.dA)();return e.map((function(e,r){var a=e.src,i=(0,o.Z)(e,s);return(0,n.Z)((0,n.Z)({},i),{},{id:"".concat(t).concat(r),src:a,loaded:!0})}))}},70607:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var n=function shouldShowClearBtn(e){var t=e.allowClear,r=e.multiple,n=e.readOnly,o=e.value;return t&&!n&&!r&&(null==o?void 0:o.length)>0}},63795:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>a});r(66066);var n=r(79942),o=function getUnitType(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UNKNOWN";return/^-?\d+(\.\d+)?(°C|℃)$/.test(e)?n.b.CELSIUS:/^-?\d+(\.\d+)?(°F|℉)$/.test(e)?n.b.FAHRENHEIT:t},a=function formatValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.b.CELSIUS;if(Number.isNaN(parseFloat(e)))return"";var r=o(e),a="UNKNOWN"!==r&&r!==t?function temperatureConvert(e,t,r){if(![n.b.CELSIUS,n.b.FAHRENHEIT].includes(t)||t===r||Number.isNaN(parseFloat(e)))return e;var a=r||o(e);if(a===t||![n.b.CELSIUS,n.b.FAHRENHEIT].includes(a))return e;var i=parseFloat(e);return(t===n.b.CELSIUS?(i-32)/1.8:1.8*i+32).toFixed(1)}(e,t,r):e;return parseFloat(a).toString()}},98618:()=>{},47868:()=>{},46167:()=>{},73837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var n=r(64649),o=(r(11431),r(43521),r(32904),r(72870)),a=r(87311),i=r(51399),s=r(23615),l=r.n(s),c=r(95608),d=r(84863),u=r(79072),p=r(27378),m=r(25737),f=r.n(m),h=r(7619),y=r(52851),b=r(64171),g=r(54734),v=r(14042),_=r(69842);const question_creators=e=>"string"==typeof e&&e in v.c==!0?function createDefaultQuestion(e){const t={type:e,dataType:1,id:f()(e+Date.now()),title:"",subtitle:"",placeholder:g.Z.t("请输入问题"),isDirty:!1,createTime:Date.now(),validate:[],toggle:{required:!1,randomOption:!1,showValidate:!1,showSubtitle:!1}};switch(e){case v.c.SIMPLE:t.qdata={placeholder:g.Z.t("请填写")},t.validate=[{type:12,rules:{max:500,open:!1},message:g.Z.t("输入内容需不超过500个字符。")}];break;case v.c.TIME:t.dataType=3,t.qdata={subType:"timetype",format:"hh:mm"},t.validate=[{type:11,ruletype:70,rules:{pattern:"^(20|21|22|23|[0-1]?[0-9]):[0-5]?[0-9]$"},message:g.Z.t("请输入有效的时间")}];break;case v.c.DATE:t.dataType=3,t.qdata={subType:g.Z.t('yyyy"年"m"月"d"日"'),format:g.Z.t('yyyy"年"m"月"d"日"')},t.validate=[{type:11,ruletype:80,rules:{pattern:g.Z.t("^(?:(?!0000)[0-9]{4}年(?:(?:0?[1-9]|1[0-2])月(?:0?[1-9]|1[0-9]|2[0-8])日|(?:0?[13-9]|1[0-2])月(?:29|30)日|(?:0?[13578]|1[02])月31日)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)年0?2月29日)$")},message:g.Z.t("请输入有效的日期")}];break;case v.c.TEMPERATURE:t.qdata={unit:"celsius"},t.validate=[{type:11,ruletype:90,rules:{pattern:"^([0-9]|[1-9][0-9]|1[0-9][0-9]|200)(\\.[0-9])?$"},message:g.Z.t("请输入小于 200 的正整数或携带一位小数的正值。")}];break;case v.c.LOCATION:case v.c.IMAGE:t.qdata={};break;case v.c.SELECT:t.qdata={placeholder:g.Z.t("请选择"),options:[{id:f()(Math.random()),title:g.Z.t("选项 1")},{id:f()(Math.random()),title:g.Z.t("选项 2")}]};break;case v.c.RICH:t.qdata={placeholder:g.Z.t("请填写")},t.validate=[{type:12,rules:{max:500,open:!1},message:g.Z.t("输入内容需不超过500个字符。")}],t.questionDescripe={richFirstIndex:0,richSecondIndex:0,richUserInputContent:"",richUserInputErrorMsg:""};break;case v.c.RADIO:t.qdata={placeholder:g.Z.t("添加选项"),options:[{id:1,title:g.Z.t("选项 1")},{id:2,title:g.Z.t("选项 2")}]};break;case v.c.CHECKBOX:t.qdata={placeholder:g.Z.t("添加选项"),options:[{id:1,title:g.Z.t("选项 1")},{id:2,title:g.Z.t("选项 2")}]},t.validateInput={type:"MIN",number:1};break;default:t.qdata={placeholder:g.Z.t("请填写")}}return t}(e):"number"==typeof e&&_.zJ[e]?function createCommonQuestion(e){const t=_.zJ[e];if(!t)return null;let r;const n=t.title,o={type:r,typeId:e,title:"",subtitle:"",placeholder:g.Z.t("输入{{placeholderTitle}}",{placeholderTitle:n}),isDirty:!1,createTime:Date.now(),validate:[],isCommon:!0,toggle:{required:!1,randomOption:!1,showValidate:!1,showSubtitle:!1}};return t.validate&&(o.toggle.showValidate=!0),r=7===e?v.c.DATE:8===e?v.c.TIME:[0,1,2,3,4,5].indexOf(e)>=0?v.c.SIMPLE:v.c.SELECT,o.id=f()(r+Date.now()),o.updateTime=Number(new Date),Object.assign(o,t)}(e):null;var O,S,P=r(51896),C=r(86432),w=r(1896),I=r(72598),E=r(71800);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let T=null;const snackbarShow=e=>{T?T.show(e):Promise.resolve().then(r.bind(r,78076)).then((t=>{let{default:r}=t;T=r,T.show(e)}))};let N=(0,i.connect)((e=>({formInfo:e.formInfo,edit:e.edit,detail:e.detail,fill:e.fill,result:e.result,unsubmit:e.unsubmit,roster:e.roster,resultFillor:e.resultFillor,user:e.user,toggle:e.toggle,setting:e.setting})),(e=>({interface(t,r){return e({type:t,payload:r})},routerRedexReplace(t){return e(y.routerRedux.replace(t))}})))(O=Reflect.metadata("design:type",Function)(O=Reflect.metadata("design:paramtypes",[void 0])(((S=class AutoTestForm extends p.Component{constructor(e){var t;super(e),t=this,this.getEditState=()=>this.props.edit,this.getFormInfoState=()=>this.props.formInfo,this.getDetailState=()=>this.props.detail,this.getFillState=()=>this.props.fill,this.getResultState=()=>this.props.result,this.getUnsubmitState=()=>this.props.unsubmit,this.getUserState=()=>this.props.user,this.getRosterState=()=>this.props.roster,this.getToggleState=()=>this.props.toggle,this.getResultFillorState=()=>this.props.resultFillor,this.getSettingState=()=>this.props.setting,this.getEditQuestionList=()=>{if(this.props.formInfo.data.isOwner){const e=[],{formData:t}=this.props.edit;return t&&t.sections&&t.sections[0].qlist.forEach((r=>{const n=t.questions.find((e=>e&&e.id===r));n&&e.push(n)})),e}return null},this.getFillQuestionList=()=>{if("#/edit"!==location.hash){const e=[],{formData:t}=this.props.formInfo;return t&&t.sections&&t.sections[0].qlist.forEach((r=>{const n=t.questions.find((e=>e&&e.id===r));n&&e.push(n)})),e}return null},this.getQuestionDetail=e=>"#/edit"===location.hash?this.getEditQuestionList().find((t=>t&&t.id===e)):this.getFillQuestionList().find((t=>t&&t.id===e)),this.getResultListInfo=()=>{const{total:e,userCount:t,resultsData:r,submittedUserList:n}=this.props.result;return{total:e,userCount:t,resultsData:r,submittedUserList:n}},this.getUnsubmitListInfo=()=>{const{unSubmitMember:e}=this.props.unsubmit;return{unSubmitNum:e.length,unSubmitMember:e}},this.setQuestionRequire=(e,t)=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner){var r;const n=this.getQuestionDetail(e);if(n.toggle.required===t)return!0;let o=[];null===(r=n.validate)||void 0===r||r.forEach((e=>{o.push(e)})),t?o.push({type:1,message:"该问题为必填。"}):o=o.filter((e=>1!==e.type));const a=[{dataPath:"/toggle/required",question:n,value:t},{dataPath:"/validate",question:n,value:o}];return this.props.interface("edit/setQuestionDeep",a),!0}return!1},this.isRequiredQuestion=e=>{if(this.props.formInfo.data.isOwner){const t=this.getQuestionDetail(e);return t?t.toggle.required:null}return null},this.getEditFormTitle=()=>this.props.formInfo.data.isOwner?this.props.edit.formData.title:null,this.getEditFormSubtitle=()=>this.props.formInfo.data.isOwner?this.props.edit.formData.subtitle:null,this.setStartAndEndTime=e=>{const{startTime:t,endTime:r}=e,{isOwner:n,isAdmin:o}=this.props.formInfo.data;if(n||o){const e={startTime:t,endTime:r};return this.props.interface("setting/updateSettings",{collection:e}),!0}return!1},this.setFormTitle=e=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner&&e.length<=50){const t={value:e,dataPath:"/title"};return this.props.interface("formInfo/changeFormTitle",{title:e}),this.props.interface("edit/setFormInfo",t),!0}return!1},this.setFormSubtitle=e=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner&&e.length<=1e3){const t={value:e,dataPath:"/subtitle"};return this.props.interface("edit/setFormInfo",t),!0}return!1},this.getQuestionTitle=e=>this.props.formInfo.data.isOwner?this.getQuestionDetail(e)&&this.getQuestionDetail(e).title:null,this.getQuestionSubtitle=e=>this.props.formInfo.data.isOwner?this.getQuestionDetail(e)&&this.getQuestionDetail(e).subtitle:null,this.setQuestionTitle=(e,t)=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner){const r=this.getQuestionDetail(e),n=[{dataPath:"/title",question:r,value:t},{dataPath:"/isDirty",question:r,value:!0}];return this.props.interface("edit/setQuestionDeep",n),!0}return!1},this.setQuestionSubtitle=(e,t)=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner){const r=[{dataPath:"/subtitle",question:this.getQuestionDetail(e),value:t}];return this.props.interface("edit/setQuestionDeep",r),!0}return!1},this.isMultiSubmit=()=>this.props.formInfo.data.isOwner?this.props.setting.fillerConfig.canMultiSubmit:null,this.setMultiSubmit=e=>{if(this.props.formInfo.data.isOwner){if(this.isMultiSubmit()===e)return;const t={canMultiSubmit:e};this.props.interface("setting/updateSettings",{fillerConfig:t})}return!1},this.setRelateSheetInfo=e=>!!this.props.formInfo.data.isOwner&&(this.props.interface("setting/updateSettingsReducer",{relatedSheet:e}),!0),this.createNewQuestion=e=>question_creators(e),this.addQuestion=e=>{let{question:t,type:r,index:n}=e;if("#/edit"===location.hash){const{formData:e}=this.props.edit;if(e&&e.sections&&this.props.edit.formData.sections[0].qlist.length<100){let o;r&&(o=this.createNewQuestion(r)),t&&(o=t);const a=_objectSpread(_objectSpread({},e),{},{questions:[...e.questions,o],sections:[{qlist:[...e.sections[0].qlist.slice(0,n+1),o.id,...e.sections[0].qlist.slice(n+1)]}]});return this.props.interface("edit/setFormDataByCompare",{dataPaths:[`/sections/0/qlist/${Math.min(n+1,a.sections[0].qlist.length-1)}`,"/questions"],newFormData:a}),!0}}return!1},this.removeQuestion=e=>{if(!e)return!1;if("#/edit"===location.hash){const{formData:t}=this.props.edit;if(t&&t.sections){const r=t.questions.findIndex((t=>t&&t.id===e)),n=t.sections[0].qlist.findIndex((t=>t&&t===e));if(-1!==r&&-1!==n){const e=_objectSpread(_objectSpread({},t),{},{questions:[...t.questions.slice(0,r),...t.questions.slice(r+1)],sections:[{qlist:[...t.sections[0].qlist.slice(0,n),...t.sections[0].qlist.slice(n+1)]}]});return this.props.interface("edit/setFormDataByCompare",{dataPaths:[`/sections/0/qlist/${n}`,`/questions/${r}`],newFormData:e}),!0}}}return!1},this.copyQuestion=e=>{if(!e||"#/edit"!==location.hash)return!1;const{formData:t}=this.props.edit;if(!t||!t.sections||t.sections[0].qlist.length>=100)return!1;const r=t.questions.findIndex((t=>t&&t.id===e));if(-1===r)return!1;const n=t.questions[r].type,o=_objectSpread(_objectSpread({},t.questions[r]),{},{id:f()(n+Date.now()),createTime:Date.now()}),a=o.section||0,i=t.sections[0].qlist.findIndex((t=>t&&t===e));return-1!==i&&(this.addQuestion({section:a,index:i,question:o}),!0)},this.moveQuestion=(e,t)=>{if(e===t||e<0||t<0)return!1;if("#/edit"===location.hash){const{formData:r}=this.props.edit;if(r&&r.sections){const{length:r}=this.props.edit.formData.sections[0].qlist;if(r>=e&&r>=t)return this.props.interface("edit/moveQuestionOption",{dataPath:"/sections/0/qlist",fromIndex:e,toIndex:t}),!0}}return!1},this.getHeadQuestions=()=>{const e=[];if(this.props.formInfo.data.isOwner){const{formData:t}=this.props.edit;t&&t.sections&&this.props.edit.formData.sections[0].qlist.forEach((r=>{const n=t.questions.find((e=>e&&e.id===r));n&&e.push(n)}))}return e},this.getHeadQuestionCount=()=>{if(this.props.formInfo.data.isOwner){const{formData:e}=this.props.edit;return e&&e.sections?e.sections[0].qlist.length:0}return 0},this.isChooseQuestion=e=>-1!==["SELECT","RADIO","CHECKBOX"].indexOf(e),this.getChooseQuestionOption=e=>{if(this.props.formInfo.data.isOwner){const t=this.getQuestionDetail(e);return t&&this.isChooseQuestion(t.type)?t.qdata.options:null}return null},this.addChooseQuestionOption=(e,t)=>{if(this.props.formInfo.data.isOwner){const r="Other",n=this.getChooseQuestionOption(e).slice(),o=-1!==n.findIndex((e=>e.id===r)),a=n.filter((e=>e.id!==r)),i=this.getQuestionDetail(e),{type:s}=i;if(this.isChooseQuestion(s)&&"#/edit"===location.hash){const e={id:f()(s),title:`选项 ${a.length+1}`},n={id:r,title:"其他"};return this.between(t,0,a.length)?a.splice(t,0,e):a.push(e),o&&a.push(n),this.props.interface("edit/setQuestionDeep",{dataPath:"/qdata/options",question:i,value:a}),!0}}return!1},this.haveOtherOption=e=>-1!==["CHECKBOX","RADIO"].indexOf(e),this.addChooseQuestionOtherOption=e=>{if(this.props.formInfo.data.isOwner){const t="Other",r=this.getChooseQuestionOption(e).slice(),n=-1!==r.findIndex((e=>e.id===t)),o=this.getQuestionDetail(e),{type:a}=o;if(this.haveOtherOption(a)&&"#/edit"===location.hash&&!n){const e={id:t,title:"其他"};return r.push(e),this.props.interface("edit/setQuestionDeep",{dataPath:"/qdata/options",question:o,value:r}),!0}}return!1},this.moveChooseQuestionOption=(e,t,r)=>{if(this.props.formInfo.data.isOwner){const n=this.getChooseQuestionOption(e).slice(),o=this.getQuestionDetail(e),{type:a}=o;if(!this.isChooseQuestion(a)||"#/edit"!==location.hash)return!1;if(this.between(t,0,n.length)&&this.between(r,0,n.length)){const e=n[t];return n.splice(t,1),n.splice(r,0,e),this.props.interface("edit/setQuestionDeep",{dataPath:"/qdata/options",question:o,value:n}),!0}}return!1},this.removeChooseQuestionOption=(e,t)=>{if(this.props.formInfo.data.isOwner){const r=this.getChooseQuestionOption(e).slice(),n=this.getQuestionDetail(e),{type:o}=n;return!(!this.isChooseQuestion(o)||"#/edit"!==location.hash)&&(this.between(t,0,r.length)?r.splice(t,1):r.pop(),this.props.interface("edit/setQuestionDeep",{dataPath:"/qdata/options",question:n,value:r}),!0)}return!1},this.setChooseQuestionOption=(e,t,r)=>{if(this.props.formInfo.data.isOwner){const n=this.getChooseQuestionOption(e).slice(),o=this.getQuestionDetail(e),{type:a}=o;if(!this.isChooseQuestion(a)||"#/edit"!==location.hash)return!1;const i=[];return n.forEach((e=>{e.id===t?i.push({id:t,title:r}):i.push(e)})),this.props.interface("edit/setQuestionDeep",{dataPath:"/qdata/options",question:o,value:i}),!0}return!1},this.getStateCircleInfo=()=>{if(this.props.formInfo.data.isOwner){const{isClosed:e}=this.props.setting.collection;return{text:e?"已停止":"收集中",num:this.props.detail.formRecordTotal}}return null},this.stopStartCollectForm=e=>{if(this.props.formInfo.data.isOwner){const t={isClosed:e};return this.props.interface("setting/updateSettings",{collection:t}),!0}return!1},this.isFormClose=()=>{if(-1!==location.hash.indexOf("#/fill")){const{isClosed:e}=this.props.setting.collection;return e||this.props.fill.isPostAnswerStatus||this.props.result.needTotalTips}return null},this.cloneFormData=()=>{if(this.props.formInfo.data.isOwner){const e={isFinished:!1,title:`副本-${this.props.formInfo.title}`,iconType:this.props.formInfo.data.padType,tips:"正在生成副本..."};return localStorage.setItem("jump_generatecopy",JSON.stringify(e)),o.isPC&&(0,h.tencentDocOpenUrl)("https://docs.qq.com/scenario/jumppage.html?type=generatecopy"),this.props.interface("formInfo/cloneFormData",{title:this.props.formInfo.data.title,domainId:this.props.formInfo.data.domainId,padId:this.props.formInfo.data.padId}),!0}return!1},this.backToDocsList=()=>{window.location.href="https://docs.qq.com/desktop/?_from=1"},this.goToResult=()=>!(!this.props.formInfo.data.isOwner||"#/edit"===location.hash)&&(this.props.routerRedexReplace("/result"),!0),this.goToFill=()=>{this.props.routerRedexReplace("/fill")},this.backToFill=()=>"#/edit"!==location.hash&&(this.props.routerRedexReplace("/fill"),!0),this.viewDetail=e=>"#/edit"!==location.hash&&(this.props.routerRedexReplace(`/detail/${e}`),!0),this.goToFillDetail=()=>{this.props.routerRedexReplace("/fill-detail")},this.nextDetail=()=>{const{sid:e,sidList:t}=this.getDetailState(),r=t.indexOf(e);r<t.length&&(this.props.interface("detail/updateSidReducer",{sid:t[r+1]}),this.props.interface("fill/getAnswerData",{sid:t[r+1]}))},this.preDetail=()=>{const{sid:e,sidList:t}=this.getDetailState(),r=t.indexOf(e);r>0&&(this.props.interface("detail/updateSidReducer",{sid:t[r-1]}),this.props.interface("fill/getAnswerData",{sid:t[r-1]}))},this.getDetailIndex=()=>{const{sid:e,sidList:t}=this.getDetailState();return t.indexOf(e)},this.undo=()=>!(!this.props.formInfo.data.isOwner||"#/edit"!==location.hash)&&(this.props.interface(b.MF.UNDO),!0),this.redo=()=>!(!this.props.formInfo.data.isOwner||"#/edit"!==location.hash)&&(this.props.interface(b.MF.REDO),!0),this.getPolicy=()=>this.props.formInfo.data.isOwner?3===this.props.formInfo.policy?"所有人可填写":"指定人可填写":null,this.toPreview=()=>!(!this.props.formInfo.data.isOwner||"#/edit"!==location.hash)&&(this.props.routerRedexReplace("/preview"),this.props.interface("formInfo/report",{action:"clk_preview",module:"edit"}),!0),this.goBack=()=>!!this.props.formInfo.data.isOwner&&(this.props.routerRedexReplace("/edit"),this.props.interface("formInfo/report",{action:"quit",module:"quit_preview"}),!0),this.isRelateToSheet=()=>this.props.formInfo.data.isOwner?!!this.props.formInfo.relateLoadNum&&1===this.props.formInfo.relateLoadNum:null,this.relateToSheet=()=>!!this.props.formInfo.data.isOwner&&(1===this.props.formInfo.relateLoadNum||this.props.interface("setting/bindSheet"),!0),this.unbindSheet=()=>{if(this.props.formInfo.data.isOwner){const{globalPadId:e}=this.props.setting.relatedSheet;return!e||(this.props.interface("setting/unbindSheet"),!0)}return!1},this.publish=()=>!(!this.props.formInfo.data.isOwner||"#/edit"!==location.hash&&"#/preview"!==location.hash)&&(document.dispatchEvent(new CustomEvent("checkPublish")),!0),this.getRelativeDocs=()=>this.props.formInfo.data&&this.props.formInfo.data.relative||[],this.checkRelative=()=>{var e;const{total:t}=this.props.result,{isGrey:r}=this.props.formInfo,{backendGridLimit:n,backendSmartLimit:o,subType:a}=this.props.setting.relatedSheet;return r&&t<(null!==(e={smartsheet:o,grid:n}[a])&&void 0!==e?e:o)},this.statistics=()=>{if(this.props.formInfo.data.isOwner&&"#/result"===location.hash){if(!this.checkRelative())return"收集结果超出在线表格负载，将导出数据到本地展示。";const r=this.getRelativeDocs();if(this.props.formInfo.relateLoadNum>0&&r.length>0){var e,t;const n=null!==(e=r[0].docUrl)&&void 0!==e?e:r[0].doc_url,o=null!==(t=r[0].subId)&&void 0!==t?t:r[0].sub_id,a=`${n.split("#")[0]}?tab=${o}`;(0,u.Kj)(a)}else this.props.interface("setting/bindSheet",{download:!1}).then((e=>{this.props.interface("formInfo/fetchFormData"),e.url&&(0,u.Kj)(e.url)}));return!0}return!1},this.removeResult=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(!t.props.formInfo.data.isOwner||"#/result"!==location.hash||!r&&!t.props.result.resultsData.find((t=>t.sid===e)))&&(t.props.interface("result/deleteRecord",e),!0)},this.getTemperatureQuestionUnit=e=>{if(this.props.formInfo.data.isOwner){const t=this.getQuestionDetail(e),{type:r}=t;if("TEMPERATURE"===r)return t.qdata.unit}return null},this.setTemperatureQuestionUnit=(e,t)=>{if(this.props.formInfo.data.isOwner){const r=this.getQuestionDetail(e),{type:n}=r;if("TEMPERATURE"===n)return this.props.interface("edit/setQuestionDeep",{dataPath:"/qdata",question:r,value:{unit:t}}),!0}return!1},this.isDocsType=e=>-1!==["sheet","form","word","ppt"].indexOf(e),this.newDocs=e=>{const t={word:0,sheet:1,form:2,dir:3,ppt:4};if(this.props.formInfo.data.isOwner){if("dir"===e){const e=`https://docs.qq.com/desktop/?opennewfolder=${(new Date).getTime()}`;"undefined"!=typeof external&&"function"==typeof external.openUrl?external.openUrl(null,e,null,""):setTimeout((()=>{(0,h.tencentDocOpenUrl)(e)}),100)}else if(this.isDocsType(e)){let r=`https://docs.qq.com/desktop/templates-list.html?padtype=${t[e]}`;const n=(0,C.aF)();n&&(r+=`&route_ip=${n.routeIp}&room_route_ip=${n.roomRouteIp}`),setTimeout((()=>{(0,h.tencentDocOpenUrl)(r)}),100)}return!0}return!1},this.share=()=>{if(this.props.formInfo.data.isOwner&&"#/edit"!==location.hash){if("URLSearchParams"in window){const e=new URLSearchParams(window.location.search);e.set("coord","&_w_tencentdocx_form=1");let t=`${window.location.pathname}?${e.toString()}`;window.location.hash&&(t+=window.location.hash),history.pushState(null,"",t)}const{formInfo:e,result:t}=this.props,updatePolicyCallback=()=>{};return(0,P.showShareDialog)(e.data,t,updatePolicyCallback),!0}return!1},this.saveAsTemplate=e=>{const t={domain_id:window.clientVars.domainId,pad_id:window.clientVars.padId,title:e};(0,I.gV)(t).then((e=>{let{data:t}=e,r=!1;t&&0===t.retcode&&(r=!0),snackbarShow({message:r?"模板保存成功，在[我的模板]中查看。":"网络异常，保存模板失败",autoClose:!0,type:r?"success":"info",duration:5e3,zIndex:999999})}))},this.submit=()=>{if("#/fill"===location.hash){const e=["DATE","TIME"],t=this.getFillQuestionList(),r=this.props.formInfo.formData.questions,n={},o=t.map((t=>{let r;switch(t.type){case"RADIO":case"CHECKBOX":case"SELECT":r=[{title:t.qdata.options[0].title,id:t.qdata.options[0].id}];break;case"IMAGE":r=["https://docimg2.docs.qq.com/image/VY_zzhyfr43ISQ68RxKKjQ?w=1920&h=1200?_type=jpeg"];break;case"TIME":r="20:00";break;case"DATE":r="1900年1月1日";break;case"TEMPERATURE":r="36℃";break;case"LOCATION":r="北京市 海淀区";break;default:r="hello world!"}return n[t.id]=r,{content:r,datatype:-1!==e.indexOf(t.type)?3:1,id:t.id,type:t.type}}));return this.submitAnswer(o,n,r),!0}return!1},this.submitPic=(e,t)=>{const r=this.getFillQuestionList(),n=this.props.formInfo.formData.questions,o={};o[r[e].id]=t;const a={content:t,datatype:1,id:r[e].id,type:r[e].type};this.submitAnswer(a,o,n)},this.submitAnswer=(e,t,r)=>{this.props.interface("fill/changeShowDialog",!1),this.props.interface("fill/setAnswerData",{answerData:e}),this.props.interface("fill/submitAnswerData"),this.props.interface("fill/updateMatchedAnswerData",{submitArray:e,questions:r}),this.props.interface("fill/updateAutoFillStatus",{answerObj:t,questions:r});const n=(0,C.pm)("qqzy");o.isPC&&n&&window&&window.external&&window.external.notifyWindow(`{"eventName":"homeworkSubmitted","data":"{\\"courseName\\":\\"\\",\\"id\\":\\"${window.clientVars.globalPadId}\\"}","domains":"qun.qq.com","handler":"__client_callback__"}`)},this.submitAllPic=e=>{const t=e,r=this.getFillQuestionList(),n=this.props.formInfo.formData.questions,o={};e.map(((e,n)=>{t[n].datatype=1,t[n].id=r[n].id,t[n].type=r[n].type,t[n].content=e.content,o[r[n].id]=t.content})),this.submitAnswer(t,o,n)},this.resubmit=()=>{const{formInfo:e,detail:t}=this.props;t.commitTime&&e.formData&&e.formData.updateTime&&t.commitTime>parseInt(e.formData.updateTime/1e3,10)?this.reSubmitRecordWithLastRecord():this.reSubmitRecord()},this.reSubmitRecord=()=>{this.props.interface("fill/reSubmitRecord"),this.props.interface("fill/getFormData"),this.props.interface("detail/setAnswerdataReducer",{answerData:[]}),this.props.interface("formInfo/report",{action:"clk_again",module:"fill",abtest:"1"}),this.props.routerRedexReplace("/fill")},this.reSubmitRecordWithLastRecord=()=>{this.props.interface("fill/setShowResubmitToastStatus",{showResubmitToastStatus:!0}),this.reSubmitRecord()},this.getLastRecord=()=>{-1!==location.hash.indexOf("#/fill")&&this.props.interface("fill/getAnswerData")},this.autoTest=(e,t)=>{this.props.interface(e,t)},this.between=(e,t,r)=>!isNaN(e)&&e>=t&&e<r,this.goToCropPage=()=>{this.props.routerRedexReplace("/crop")},this.setTargetFileList=async()=>{const e=await async function mockFileList(){const e=await fetch("https://docs.idqqimg.com/tim/docs/home/img/ideas/icon-video-f4e3c8.png").then((e=>e.blob())),t=new File([e],"test.jpg",{type:"image/jpg"}),r=new DataTransfer||new ClipboardEvent("").clipboardData;return r.items.add(t),r.files}();this.props.interface("edit/setHeaderImage",{headerImg:e})},this.goToEditClosingRemark=()=>{const{href:e}=location;return!!e.endsWith("/edit")&&(this.props.routerRedexReplace("/edit-closing-remark"),!0)},this.goToSubmitResult=()=>(this.props.routerRedexReplace("/submit-result"),!0),this.getClosingRemark=()=>{const{conclusion:e}=this.props.setting;return e},this.getRemarkTitle=()=>{const{conclusion:e}=this.props.setting;return e.remarkTitle},this.getPictureSrc=()=>{const{conclusion:e}=this.props.setting;return e.picSrc},this.getLinks=()=>{const{conclusion:e}=this.props.setting;return e.linkList},this.getLinkByIndex=e=>{const{conclusion:{linkList:t}}=this.props.setting;return e>=0&&e<t.length?t[e]:void 0},this.setRemarkTitle=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)return;const n=_objectSpread(_objectSpread({},t.props.setting.conclusion),{},{remarkTitle:e});r?t.props.interface("setting/updateSettings",{conclusion:n}):t.props.interface("setting/updateSettingsReducer",{conclusion:n})},this.setPictureSrc=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)return;const n=_objectSpread(_objectSpread({},t.props.setting.conclusion),{},{picSrc:e});r?t.props.interface("setting/updateSettings",{conclusion:n}):t.props.interface("setting/updateSettingsReducer",{conclusion:n})},this.setLinks=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e)||0===e.length||!c.ol[d.S.URL].test(e[0].link))return;const n=_objectSpread(_objectSpread({},t.props.setting.conclusion),{},{linkList:[_objectSpread({},e[0])]});r?t.props.interface("setting/updateSettings",{conclusion:n}):t.props.interface("setting/updateSettingsReducer",{conclusion:n})},this.setNewLink=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("[object Object]"!==Object.prototype.toString.call(e))return;if(t.props.setting.conclusion.linkList.length>0||0===Object.keys(e).length||!c.ol[d.S.URL].test(e.link))return;const n=_objectSpread(_objectSpread({},t.props.setting.conclusion),{},{linkList:[_objectSpread({},e)]});r?t.props.interface("setting/updateSettings",{conclusion:n}):t.props.interface("setting/updateSettingsReducer",{conclusion:n})},this.updateLinkByIndex=function(e){let{text:r,link:n}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o>0)return;const{conclusion:i}=t.props.setting;if(0===i.linkList.length)return void t.setNewLink({text:r,link:n},a);const{text:s,link:l}=i.linkList[o],u=void 0!==r?r:s,p=c.ol[d.S.URL].test(n)?n:l,m=[...i.linkList];m[o]={text:u,link:p};const f=_objectSpread(_objectSpread({},i),{},{linkList:m});a?t.props.interface("setting/updateSettings",{conclusion:f}):t.props.interface("setting/updateSettingsReducer",{conclusion:f})},this.deleteRemarkTitle=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{conclusion:r}=t.props.setting;if(""===r.remarkTitle)return;const n=_objectSpread(_objectSpread({},r),{},{remarkTitle:""});e?t.props.interface("setting/updateSettings",{conclusion:n}):t.props.interface("setting/updateSettingsReducer",{conclusion:n})},this.deletePictureSrc=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{conclusion:r}=t.props.setting;if(""===r.picSrc)return;const n=_objectSpread(_objectSpread({},r),{},{picSrc:""});e?t.props.interface("setting/updateSettings",{conclusion:n}):t.props.interface("setting/updateSettingsReducer",{conclusion:n})},this.deleteLinks=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{conclusion:r}=t.props.setting;if(0===r.linkList.length)return;const n=_objectSpread(_objectSpread({},r),{},{linkList:[]});e?t.props.interface("setting/updateSettings",{conclusion:n}):t.props.interface("setting/updateSettingsReducer",{conclusion:n})},this.deleteLinkByIndex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e>0)return;const{conclusion:n}=t.props.setting;if(0===n.linkList.length)return;const o=[...n.linkList];o.splice(e,1);const a=_objectSpread(_objectSpread({},n),{},{linkList:o});r?t.props.interface("setting/updateSettings",{conclusion:a}):t.props.interface("setting/updateSettingsReducer",{conclusion:a})},this.completeClosingRemark=()=>{const{href:e}=location;if(!e.endsWith("/edit-closing-remark"))return!1;const{conclusion:t}=this.props.setting;return this.props.interface("setting/updateSettings",{conclusion:t}),this.props.routerRedexReplace("/edit"),!0},this.getAllowFillerSeeResults=()=>{const{fillerConfig:e}=this.props.setting;return e.canCheckResults},this.setAllowFillerSeeResults=function(e){const r={canCheckResults:e};arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.props.interface("setting/updateSettings",{fillerConfig:r}):t.props.interface("setting/updateSettingsReducer",{fillerConfig:r})},this.setQuestionScore=(e,t)=>{if("#/edit"===location.hash){const r=this.getQuestionDetail(e),n={question:r,syncDefer:!0};if(r.answerInfo)n.dataPath="/answerInfo/score",n.value=t;else{const e=_objectSpread(_objectSpread({},r),{},{answerInfo:{score:t,rightOptionIds:[]}});n.dataPath="",n.value=e}return this.props.interface("edit/setQuestionDeep",n),!0}return!1},this.setQuestionRightOptions=(e,t)=>{const r=this.getQuestionDetail(e),n={question:r};if(r.answerInfo)n.dataPath="/answerInfo/rightOptionIds",n.value=[t];else{const e=_objectSpread(_objectSpread({},r),{},{answerInfo:{score:"0",rightOptionIds:t}});n.dataPath="",n.value=[e]}this.props.interface("edit/setQuestionDeep",[n])},this.getQuestionScore=e=>{const t=this.getQuestionDetail(e);return t.answerInfo&&t.answerInfo.score||0},this.getQuestionRightOptionId=e=>{const t=this.getQuestionDetail(e);return t.answerInfo&&t.answerInfo.rightOptionIds||[]},this.getTaskTotalScore=()=>"#/edit"===location.hash?this.props.edit.totalScore:this.props.formInfo.totalScore,this.setScoreUnVisible=e=>{if(this.props.formInfo.data.isOwner){const t={canCheckPaperScore:e};this.props.interface("setting/updateSettings",{fillerConfig:t})}},this.getScoreUnVisible=()=>this.props.setting.fillerConfig.canCheckPaperScore,this.needMarked=()=>this.getFillQuestionList().some((e=>e&&"SIMPLE"===e.type&&e.answerInfo&&e.answerInfo.score>0)),this.getTaskSubmitResult=()=>{if("#/submit-result"===location.hash){const e=this.props.fill.paper_total_score||this.props.detail.paperTotalScore;return this.getScoreUnVisible()?"已提交":this.needMarked()?"老师批卷后可查看成绩":`本次得分${parseFloat(e.toFixed(1))}分`}return null},this.setLogicJump=(e,t)=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner){const r=this.getQuestionDetail(e);return this.props.interface("edit/setLogicJump",t.map((e=>_objectSpread({question:r},e)))),!0}return!1},this.isSettedLogicJump=e=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner){const t=this.getQuestionDetail(e),{type:r,qdata:{options:n}}=t;let o=!!t.jumpId,a=Array.isArray(t.showIds)&&t.showIds.length>0;return"RADIO"===r&&(o=o||Object.values(n).some((e=>!!e.jumpId)),a=a||Object.values(n).some((e=>Array.isArray(e.showIds)&&e.showIds.length>0))),o||a}return!1},this.getLogicByQuestionId=e=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner){const t=this.getQuestionDetail(e),{jumpId:r,showIds:n}=t;return{jumpId:r,showIds:n}}return{}},this.getLogicByOptionId=(e,t)=>{if("#/edit"===location.hash&&this.props.formInfo.data.isOwner){const r=this.getQuestionDetail(e),{qdata:{options:n=[]}}=r,o=n.find((e=>{let{id:r}=e;return r===t}));if(o){const{jumpId:e,showIds:t}=o;return{jumpId:e,showIds:t}}}return{}},this.fetchRosterList=async()=>await this.props.interface("roster/fetchRosterList"),this.getRoster=()=>this.props.roster&&this.props.roster.list,this.selectRoster=async e=>await this.props.interface("roster/selectRoster",{selectedRosterIds:e,snackbarShow:()=>{}}),this.deleteRoster=async e=>{let{id:t,type:r=2}=e;return await this.props.interface("roster/deleteRoster",{id:t,type:r})},this.createRoster=async e=>await this.props.interface("roster/createRoster",_objectSpread(_objectSpread({},e),{},{snackbarShow:()=>{}})),this.updateRoster=async e=>await this.props.interface("roster/updateRoster",_objectSpread(_objectSpread({},e),{},{snackbarShow:()=>{}})),this.deleteAllRoster=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const r=t.getRoster();for(const{id:n,title:o,type:a}of r)("自动化测试专用"!==o||e)&&await t.deleteRoster({id:n,type:a})},this.preSubmitCheckRole=e=>this.props.interface("fill/preSubmitCheckRole",{name:e}),this.setLimitGray=e=>{const t={is_gray:!0,version:"1.0.0",syn_limit_cnt:e,max_limit_tip_cnt:e,limit_cnt:e};this.props.interface("formInfo/setLimitGrey",t)},this.clearDetailLastestSubmitSid=()=>{this.props.interface("detail/updateLastestSubmitSidReducer",{lastestSubmitSid:0})},this.setUserIsTxdocGray=e=>{this.props.interface("user/setIsTxdocGrayReducer",e)},this.setFormData=e=>{if("#/edit"!==location.hash)return void snackbarShow({message:"请在edit页设置",type:"error",duration:5e3});const t=_objectSpread(_objectSpread({},e),{},{updateTime:Date.now()}),{rev:r,pos:n}=E.Q.getRevAndPos();(0,w.Bj)({formData:t,rev:r,pos:n}).then((t=>{var r;0===(null===(r=t.data)||void 0===r?void 0:r.retcode)?(this.props.interface("edit/applyPatch2FormDataReducer",{formData:e}),E.Q.setRevAndPos(t.data.rev,t.data.pos),localStorage.setItem("TD-FORMS-EDIT",JSON.stringify(e)),snackbarShow({message:"设置成功，发布就好了"})):snackbarShow({message:"设置失败，请注意globalPadId是否正确（使用edit里的数据）"})}))},this.defaultConclusion={picSrc:"",remarkTitle:"",linkList:[]},function initAutoTestConfig(e,t){((0,a.xW)()||(0,a.OZ)()||(0,a.RA)())&&(window.modelRefs=e._models,window.AutoTestForm=t)}(this.props.app,this)}render(){return null}}).propTypes={form:l().object,formInfo:l().object,edit:l().object,detail:l().object,fill:l().object,interface:l().func,routerRedexReplace:l().func,app:l().object,result:l().object,roster:l().object,unsubmit:l().object,user:l().object,toggle:l().object,resultFillor:l().object,setting:l().object},O=S))||O)||O)||O},84263:(e,t,r)=>{"use strict";r.d(t,{hk:()=>getCalendarDateByCycleStatus,uU:()=>getTimeRangeByCycleStatus});var n=r(65686),o=r(50460);function*getCalendarDateByCycleStatus(e,t){var r;let{select:a}=e;const i=yield a(n.GZ),s=null!==(r=null==t?void 0:t.day)&&void 0!==r?r:yield a(n.j4);return i&&null!=s&&s.day?(0,o.wJ)(s):null}function*getTimeRangeByCycleStatus(e,t){var r;let{select:a}=e;const i=yield a(n.GZ),s=null!==(r=null==t?void 0:t.day)&&void 0!==r?r:yield a(n.j4);return i&&null!=s&&s.day?(0,o.M)(s):null}},44795:(e,t,r)=>{"use strict";r.d(t,{wp:()=>shouldUpdateEditFormData,X0:()=>updateEditFormDataByFetchHead,qD:()=>updateEditFormDataByApplyPatch});var n=r(64649),o=r(22082),a=r(79195),i=r(71800),s=r(1896),l=r(70740),c=r(45122),d=r(65686);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function*shouldUpdateEditFormData(e,t){const{select:r,call:n}=t,o=yield r(d.Mo),{data:a,error:c}=yield n(s.AA,o);if(c||!a||a.retcode!==l.oY.SUCCESS||!a.data)return;const{rev:u}=i.Q.getRevAndPos(),{rev:p}=a.data;return!(!u||!p||u===p)}function*updateEditFormDataByFetchHead(e,t){let{call:r,put:n,select:u}=t;const{data:p,error:m}=yield r(s.Bl,(0,o.e)().urlId,c.Kg.HEAD);if(m||!p||p.retcode!==l.oY.SUCCESS||!p.data)return;const{rev:f,pub:h,pos:y}=p.data;i.Q.setRevAndPos(f,y);let b=yield u(d.yr);b=(0,a.iB)(p.data.initialAttributedText.text,b);const{globalPadId:g,localPadId:v}=p.data;yield n({type:"edit/batchUpdateEditDataReducer",payload:{data:p.data,formData:_objectSpread(_objectSpread({},b),{},{globalPadId:g,padId:v})}}),yield n({type:"formInfo/updatePubReducer",payload:h})}function*updateEditFormDataByApplyPatch(e,t){let{newPos:r,newRev:n,changesets:o}=e,{put:a}=t;i.Q.setRevAndPos(n,r),yield a({type:"applyPatch2FormData",payload:o})}},4331:(e,t,r)=>{"use strict";r.d(t,{Z:()=>base_consumer,m:()=>v});r(11431);var n=r(69841),o=r(67538),a=r(86550),i=r(1896),s=r(87768),l=r(72870),c=r(70740),d=r(71800),u=r(65686),p=r(81893),m=r(4222),f=r(9410),h=r(54734),y=r(60250);const b={[c.oY.OIDB_PAD_COMMIT_ERR]:async e=>{const{default:t,mask:r,getActions:n}=await(0,y.OX)();r.open(),t.show({message:h.Z.t("服务器超时，请刷新重试。"),autoClose:!1,onClose:()=>!1,action:n(e),id:"request failed"})},[c.oY.DIRTY_CHECK_ERR]:async()=>{await(0,y.IG)(h.Z.t("输入内容包含非法词汇。"),{id:"wording warning"})},[c.oY.ERR_SAAS_ADMIN_LICENSE_EXPIRED]:async()=>{const{default:e}=await(0,y.OX)();e.show({id:"$SAAS_ADMIN_LICENSE_EXPIRED$",message:h.Z.t("编辑失败，企业授权已经到期，建议续费"),autoClose:!1,action:[{text:h.Z.t("立即续费"),onClick:()=>{(0,p.lY)({url:m.kZ.BUY_LICENSE_PAGE,ignoreDomainDetect:!0})}}]})},[c.oY.ERR_SAAS_ADMIN_POC_LICENSE_EXPIRED]:async()=>{const{default:e}=await(0,y.OX)();e.show({id:"$SAAS_ADMIN_POC_LICENSE_EXPIRED$",message:h.Z.t("编辑失败，企业试用已经到期，建议购买"),autoClose:!1,action:[{text:h.Z.t("立即购买"),onClick:()=>{(0,p.lY)({url:m.kZ.BUY_LICENSE_PAGE,ignoreDomainDetect:!0})}}]})},[c.oY.ERR_NON_SAAS_ADMIN_LICENSE_EXPIRED]:async()=>{const{default:e}=await(0,y.OX)();e.show({id:"$NON_SAAS_ADMIN_LICENSE_EXPIRED$",message:h.Z.t("编辑失败，企业授权已经到期，请联系管理员更新授权。"),autoClose:!1})},[c.oY.ERR_NON_SAAS_ADMIN_POC_LICENSE_EXPIRED]:async()=>{const{default:e}=await(0,y.OX)();e.show({id:"$NON_SAAS_ADMIN_POC_LICENSE_EXPIRED$",message:h.Z.t("编辑失败，企业试用已经到期，请联系管理员购买授权。"),autoClose:!1})}};function showNotificationByCgiRetcode(e,t){var r;const n=null!=t?t:e;null===(r=b[e])||void 0===r||r.call(b,n)}var g=r(44795);const v={lock:!1,patchActions:[],*doNextAction(){if(this.patchActions.length){const e=this.patchActions.shift();e&&(yield e())}this.lock=!!this.patchActions.length}};function*getSyncResponse(e,t,r){let{call:n,select:a}=r;const{formData:s}=yield a(u.Et);if(e){const{rev:e,pos:t}=d.Q.getRevAndPos(),r={formData:s,rev:e,pos:t};o.l.info("-----syncWithFullText-----",s);const{data:a,error:l}=yield n(i.Bj,r);return{data:a,error:l}}const{pub:l}=yield a(u.tO),c=function genActionsByFormData(e,t){let r=e;const n=t.updateTime||f.u.now(),o=r.filter((e=>"/updateTime"===e.path));return o.length>0?o[0].value=n:r=r.concat({op:"add",path:"/updateTime",value:n}),r}(t,s),p=function genSyncPayload(e,t,r){let n=t;const{rev:o,pos:a}=d.Q.getRevAndPos();return 0===parseInt(o,10)&&0===parseInt(r,10)&&(n=t.concat({op:"add",path:"/isNewForm",value:1},{op:"add",path:"/headerImg",value:""})),{actions:n,padId:e,rev:o,pos:a}}(s.globalPadId,c,l);o.l.info("-----sync-----",c);const{data:m,error:h}=yield n(i.Z_,p);return{data:m,error:h}}function*base_consumer(e,t){let{payload:r}=e;const{call:i,select:p,take:m}=t;function*handleSync(e){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{formData:h}=yield p(u.Et);h.globalPadId||(yield m("edit/setForm")),v.lock=!0;const{data:y,error:b}=yield i(getSyncResponse,f,e,t);if(y){if(y.retcode===c.oY.SUCCESS){const{rev:e,pos:t}=y.data;o.l.info("-----sync----- success"),d.Q.setRevAndPos(e,t),(0,a.$)(n.U.editSuccess,{dimensions:["edit-success"]})}else if(y.retcode!==c.oY.OIDB_PAD_COMMIT_ERR||f)if(y.retcode===c.oY.BEHIND_BASE_REV)yield i(g.X0,void 0,t);else{(0,s.G)("edit","sync_fail"),o.l.info("-----sync----- exception",y.retcode),showNotificationByCgiRetcode(y.retcode);const e=c.j_.includes(y.retcode),[t,r]=e?[n.U.editSuccess,"edit-success"]:[n.U.editFailed,"edit-failed"];(0,a.$)(t,{dimensions:[r,`edit-retcode-${y.retcode}`]})}else v.patchActions.push((function*(){yield i(handleSync,r,!0)}));yield v.doNextAction()}else{o.l.info("-----sync----- error",b),(0,s.G)("edit","sync_fail"),showNotificationByCgiRetcode(c.oY.OIDB_PAD_COMMIT_ERR,b);l.isQQ&&"Unexpected end of JSON input"===b.message||"xsrf is error"===b||(0,a.$)(n.U.editFailed,{dimensions:["edit-failed",`edit-error-message-${b}`]})}}o.l.info("-----sync----- lock = ",v.lock),v.lock?v.patchActions.push((function*(){yield i(handleSync,r)})):yield i(handleSync,r)}},5098:(e,t,r)=>{"use strict";r.d(t,{w:()=>getTransformedRecord,E:()=>filterFillAgainAnswerData});var n=r(64649),o=r(39507),a=r(14042);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function getTransformedRecord(e){const t=(0,o.XM)(e);return t.commitTime=t.post_time,t}function filterFillAgainAnswerData(e){const t=[a.c.FILE,a.c.LOCATION,a.c.IMAGE,a.c.FILEIMAGE,a.c.CANVAS_IMAGE];return null==e?void 0:e.filter((e=>!t.includes(e.type))).map((e=>e.type!==a.c.TABLE?e:_objectSpread(_objectSpread({},e),{},{content:e.content.map((e=>filterFillAgainAnswerData(e)))})))}},36022:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});const n=new class DataBase{constructor(){this.list=[],this.flag=void 0,this.hasNoticeVersionUpdate=!1}get answerCache(){return this.list}set answerCache(e){this.list=e}get checkVersionUpdateTimeoutFlag(){return this.flag}set checkVersionUpdateTimeoutFlag(e){this.flag=e}get hasNoticeVersionUpdate(){return this.hasNotice}set hasNoticeVersionUpdate(e){this.hasNotice=e}}},25748:(e,t,r)=>{"use strict";r.d(t,{eW:()=>getOpenTips,UI:()=>getCloseTips,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});r(11431);var n=r(36443),o=r(70740),a=r(54734),i=r(87768),s=r(60250),l=r(19541);const byFormInfoSelector=e=>e.formInfo,byFormInfoDataPadIdSelector=e=>e.formInfo.data.padId,byFormShowCertification=e=>e.formInfo.showCertificationIcon;function getOpenTips(e){return e?a.Z.t("已为当前文档展示官方认证信息"):a.Z.t("展示官方认证信息失败")}function getCloseTips(e){return e?a.Z.t("已关闭当前文档的官方认证信息"):a.Z.t("关闭官方认证信息失败")}function*__WEBPACK_DEFAULT_EXPORT__(e,t){let{put:r,call:a,select:c,take:d}=t;const u=yield c(byFormInfoSelector),p=yield*function*getPadId(e,t){let r,{take:n,select:o}=t;return e&&e.data&&e.data.padId||(yield n("edit/setForm")),r=yield o(byFormInfoDataPadIdSelector),r}(u,{take:d,select:c}),m=yield c(byFormShowCertification);(0,i.G)("edit_result",byFormShowCertification?"certification_open":"certification_stop");const{data:f}=yield a(n.P8,{fileId:p,isCancel:m});let h="",y="";(null==f?void 0:f.retcode)===o.oY.SUCCESS?(yield r({type:"setShowCertificationIcon",payload:{showCertificationIcon:!m}}),h=m?getCloseTips(!0):getOpenTips(!0),y=l.g.SUCCESS):(h=m?getCloseTips(!1):getOpenTips(!1),y=l.g.INFO),yield a(s.IG,h,{type:y})}},93318:(e,t,r)=>{"use strict";r.d(t,{Jc:()=>s,ez:()=>getRosterMemberCount,cd:()=>checkMemberCount,nX:()=>checkCreateMemberValid,oQ:()=>checkUpdateMemberValid,HZ:()=>getRosterFromResponse});r(13951),r(91117),r(41698),r(55294),r(9077),r(76999),r(91067),r(2126),r(18924),r(67699),r(18007),r(71675),r(99830),r(11431);var n=r(75615),o=r(60250),a=r(54734),i=r(7038);const s=[i.r.COMMON,i.r.STUDENT],getRosterMemberCount=e=>{var t,r;const n=null!==(t=e.type)&&void 0!==t?t:i.r.COMMON;return(null!==(r={[i.r.COMMON]:()=>{return(null===(t=e.names)||void 0===t?void 0:t.length)||0;var t},[i.r.STUDENT]:()=>(e=>{const t=new Map;let r=0;return e.members.forEach((e=>{let{child:{name:n,number:o,group:a}}=e;if(!n||!o||!a)return void(r+=1);const i=`${n}_${o}_${a}`;t.has(i)||(r+=1,t.set(i,1))})),r})(e)}[n])&&void 0!==r?r:()=>0)()};function checkMemberCount(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s={[i.r.COMMON]:n.hU.COMMON,[i.r.STUDENT]:n.hU.STUDENT}[t.type];if(s<e){const e=a.Z.t(r?"名单总人数不可超过{{maxCount}}人":"该名单不可超过{{maxCount}}人",{maxCount:s});return(0,o.IG)(e),!1}return!0}function checkCreateMemberValid(e){let{type:t,members:r}=e;if(t===i.r.COMMON)return!0;const n={[i.r.STUDENT]:()=>function checkCreateStudentMemberValid(e){let{members:t}=e;const r=t.some((e=>{let{child:{name:t,number:r,group:n}}=e;return(r||n)&&!t}));return r&&(0,o.IG)(a.Z.t("请把学生姓名填写完整")),!r}({members:r})}[t];return n()}function checkUpdateMemberValid(e){let{type:t,members:r}=e;if(t===i.r.COMMON)return!0;const n={[i.r.STUDENT]:()=>function checkUpdateStudentMemberValid(e){let{members:t}=e;const r=t.some((e=>e.hasUid?!(e.child.name&&e.child.number&&e.child.group&&e.role.role&&(e.role.name||1===e.role.role)):!e.child.name));return r&&(0,o.IG)(a.Z.t("请把信息填写完整")),!r}({members:r})}[t];return n()}const getRosterFromResponse=function(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null!==(e={[i.r.COMMON]:()=>getCommonRosterFromResponse(r),[i.r.STUDENT]:()=>getStudentRosterFromResponse(r)}[null===(t=r.roster_meta)||void 0===t?void 0:t.roster_template])&&void 0!==e?e:()=>r)()},getCommonRosterFromResponse=function(){let{roster_member:e=[],roster_meta:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{version:t.version,id:t.roster_id,type:t.roster_template,title:t.title,createTime:Number(t.create_time),names:e.map((e=>e.common_roster_value)),columnHeader:t.column_header}},getStudentRosterFromResponse=function(){let{roster_member:e=[],roster_meta:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{version:t.version,id:t.roster_id,type:t.roster_template,title:t.title,createTime:Number(t.create_time),members:e.map((e=>({identityId:e.identity_id,rosterId:e.roster_id,hasUid:e.has_uid,type:e.roster_template,child:e.child,role:{role:e.role.role,name:e.role.name},version:e.version})))}}},64171:(e,t,r)=>{"use strict";r.d(t,{MF:()=>n,zF:()=>o,P6:()=>a});const n={SAGA:"@@redux-saga/SAGA_ACTION",UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"},o={undo(){return{type:n.UNDO}},redo(){return{type:n.REDO}},jumpToFuture(e){return{type:n.JUMP_TO_FUTURE,index:e}},jumpToPast(e){return{type:n.JUMP_TO_PAST,index:e}},jump(e){return{type:n.JUMP,index:e}},clearHistory(){return{type:n.CLEAR_HISTORY}}},a=1e3},45122:(e,t,r)=>{"use strict";r.d(t,{Ut:()=>o,iu:()=>a,t0:()=>i,Kg:()=>s});var n=r(54734);const o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAMAAADUivDaAAABEVBMVEVGTFYAAAD8/Pz29/f19vZESlPz9PTy8/NCSFFGTFZGTFZGTFZGTFZGTFZGTFZGTFb8/Pzz8/RQVl/19fby8/O4ur5GTFZGTFZGTFb6+/v29/jz8/Tl5ufq6+y9v8P5+fn5+vrz8/Tv7/Dp6erh4uTf4OKprLCYm6GCho1dYmv7+/v4+fn39/f09PXx8fLv7/Du7u/q6+vV1tjR0tXR0tSvsrd3e4Ld3uDf4OLe3+DY2dzk5ebz8/Tl5ufj5OXr7O3c3d/b3N7W2Nnp6erJys3m5ujBw8WXmqDh4uRscHhpbnba293S09bp6ers7e7a29zq6+zp6uvMzdCgo6fj5OXh4uPi4+SPk5nb3d/e3+FeY2xNM8P5AAAAW3RSTlMzAO/W1jTX1zUuBh8bMg8p7cM20sVmIxIK6N/Nq4tr5uHHtq6el1tSRjrr39vOwcCwsIeDf19CKiIdDwbJpqaUko6LfXl1c05FQjwtGLeckoKAfFpUT01MRDMvEo/EkAAAAwZJREFUWMON2Gd7qjAUwPGUgJqAKKL11l3rqN17773u3vf7f5Cb8tAKOecA/5c+9veQpClJ2QyVrDuzJVFkrChKs05dkl8kCNcWTEvYbnZCOoKhCUdmIqRdZGRFW6YTjgYAxEkhXMFSE24SYbNM2SQhSyxjJYkTH/BBVBb3kMF8AAQhjIZry2XDmKt2EgyGC+PhTuey3zPeKg+hoRMy/gwrhlZ5FxhSI7SZXDb0FuCcRgm4mi1A+LUKWNso4TKtgQFbGTMtN0Loi9FZMpD4RJ+OKeHoPEcAbD6cN0LqO6tSxokq2HMyJGymEwbeGN0tDD6EqosTyNaXAeEwkI8KcwzmBASyNzZQooEQ4pVwGcjaQgnPQgxXETYUrCFK9NYrkLAVIRCiZ+DVsJEwiQjWHEF8g0NRQB0jlqmngIQCHIyo4kL5yQKGAmYx4jNONC1IKKCECNYePhnbCKEAgRHWFbbR5i2MEARhjaBwWiCIIk4UGoDYtVCCkUQL7JCCFQQBQRDf9dkYEIQgicJ6XOg+KgKfC/gqDolxfGG3CgRRwn61QuMmOpTNQMB/tRySKLSmxsqEIhRQp4lOrhvujUarQBEKkIw07vJ53lta6jby+RYpKGBGkMRZ/r3mI0WI4A8fsSbb+UgLewRhK8JFiUrtYy5K5FYvFtFxuMRL4PdVNaeKCCp/MELGgb6KJncLpmnmgiJCTn24vrOoLynyQry/aJpBOa3w07NaBb4QIxNa6Wxy8y0ghFW3po9ia4eDyU6Vc25OQ4XXrwzutcNBOBujNR5kAiT6CQ/yt8OZiB2Udn3OgQHjYZfBcsSOa08n/L10QVVjzI0fGm94pAwC32S2dnQ95dHSBe7/0w/QfZ5q8FjekUbM7M9jBi00n+Fl4vmEJyFcE/5iV5p9j4PAz4et7eMXq5cNnrGNF+p6d9zOJrSPEy6Zf7x0YP5X8lX36KufDJhfjlIv3IdtMwE4P8Au3BC59YghXB9m/+fDQxsoXvtBzSJKUB38vD3ve6ucr3r9T9c/Dsgv/gdBmUTum1DGhwAAAABJRU5ErkJggg==",a=n.Z.t("无标题收集表"),i=n.Z.t("未命名的收集表"),s={PUB:"pub",HEAD:"head"}},72182:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(64649);var o=r(86432);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const a=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},_objectSpread(_objectSpread({},{nick:"",avatar:"",commitTime:"",sid:Number((0,o.pm)("sid")),formRecordTotal:0,lastestSubmitSid:0,sidList:[],uidList:[],answerData:[],paperTotalScore:0,currUidBySelectedRecord:"",currUserTypeBySelectedRecord:0}),{},{baseSid:0,pass:null,passRank:0,secondPassRank:0,paperTotalScore:0,paperResults:[],answerDataList:[]}));function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const i={initSidReducer(e){return base_objectSpread(base_objectSpread({},e),{},{sid:Number((0,o.pm)("sid"))})},setFormRecordTotalReducer(e,t){let{payload:r}=t;const{formRecordTotal:n}=r;return base_objectSpread(base_objectSpread({},e),{},{formRecordTotal:n})},setAnswerdataReducer(e,t){let{payload:r}=t;const{answerData:n}=r;return base_objectSpread(base_objectSpread({},e),{},{answerData:n})},setPostInfoReducer(e,t){let{payload:r}=t;const{nick:n,avatar:o,commitTime:a}=r;return base_objectSpread(base_objectSpread({},e),{},{nick:n,avatar:o,commitTime:a})},setPaperScoreReducer(e,t){let{payload:r}=t;const{paperTotalScore:n}=r;return base_objectSpread(base_objectSpread({},e),{},{paperTotalScore:n})},updateSidReducer(e,t){let{payload:r}=t;const{sid:n}=r;return base_objectSpread(base_objectSpread({},e),{},{sid:n})},updateLastestSubmitSidReducer(e,t){let{payload:r}=t;const{lastestSubmitSid:n}=r;return base_objectSpread(base_objectSpread({},e),{},{lastestSubmitSid:n})},setSidListReducer(e,t){var r;let{payload:n}=t;const o=null!==(r=null==n?void 0:n.sidList)&&void 0!==r?r:[];return base_objectSpread(base_objectSpread({},e),{},{sidList:o})},updateUidListReducer(e,t){var r;let{payload:n}=t;const o=null!==(r=null==n?void 0:n.uidList)&&void 0!==r?r:[];return base_objectSpread(base_objectSpread({},e),{},{uidList:o})},setRecordCountReducer(e,t){let{payload:r}=t;const{formRecordTotal:n}=r,o=r.sidList||[];return base_objectSpread(base_objectSpread({},e),{},{formRecordTotal:n,sidList:o})},resetAvatorInfoReducer(e,t){let{payload:r}=t;const{avatar:n,commitTime:o,nick:a,answerData:i}=r;return base_objectSpread(base_objectSpread({},e),{},{avatar:n,commitTime:o,nick:a,answerData:i})},updateCurrUidAndUserTypeBySelectedRecordReducer(e,t){let{payload:r}=t;const{currUidBySelectedRecord:n="",currUserTypeBySelectedRecord:o=0}=null!=r?r:{};return base_objectSpread(base_objectSpread({},e),{},{currUidBySelectedRecord:n,currUserTypeBySelectedRecord:o})}};function form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s=form_base_objectSpread(form_base_objectSpread({},i),{},{setPostInfoReducer(e,t){let{payload:r}=t;const{nick:n,avatar:o,commitTime:a,paperResults:i,paperTotalScore:s,baseSid:l,role:c,myRecord:d}=r;return console.log(r),form_base_objectSpread(form_base_objectSpread({},e),{},{nick:n,avatar:o,commitTime:a,baseSid:l,paperResults:i,paperTotalScore:s||0,role:c,myRecord:d})},setPaperResultsReducer(e,t){let{payload:r}=t;const{paperResults:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{paperResults:n})},setPassInfoReducer(e,t){let{payload:r}=t;const{pass:n,passRank:o,secondPassRank:a,paperTotalScore:i,paperResults:s}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{pass:n,passRank:o,secondPassRank:a,paperTotalScore:i,paperResults:s})},setPaperTotalScoreReducer(e,t){let{payload:r}=t;const{paperTotalScore:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{paperTotalScore:n})},setAnswerdataListReducer(e,t){let{payload:r}=t;const{answerDataList:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{answerDataList:n})},deleteAnswerDataListReducer(e){return form_base_objectSpread(form_base_objectSpread({},e),{},{answerDataList:[]})}});function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const l=function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},s),c={};var d=r(70740),u=r(66940),p=r(65686);function detail_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function detail_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?detail_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):detail_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function detail_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const m=function detail_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?detail_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):detail_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},detail_form_base_objectSpread(detail_form_base_objectSpread({},c),{},{markPaper:function*mark_paper_form_base(e,t){var r,n;let{payload:o}=e,{put:a,select:i,call:s}=t;const l=yield i(p.Mo);let c=yield i(p.r7);const m=yield i(p.xz);0===c&&(c=yield i(p.jQ),yield a({type:"updateSidReducer",payload:{sid:c}}));const{data:f}=yield s(u.W,l,c,m);var h;if((null==f?void 0:f.retcode)!==d.oY.SUCCESS)return void(null===(h=o.errorCallback)||void 0===h||h.call(o));const y=(null!==(r=f.result)&&void 0!==r?r:{}).paper_total_score;yield a({type:"setPaperTotalScoreReducer",payload:{paperTotalScore:y}}),null===(n=o.successCallback)||void 0===n||n.call(o)}}));function subscriptions_detail_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const f=function subscriptions_detail_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?subscriptions_detail_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):subscriptions_detail_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{setup(e){let{dispatch:t}=e;t({type:"initSidReducer"})}});function models_detail_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_detail_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_detail_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_detail_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const h=models_detail_form_consumer_objectSpread(models_detail_form_consumer_objectSpread({},{namespace:"detail"}),{},{state:a,effects:m,reducers:l,subscriptions:f})},7819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>De});var n=r(64649);r(11431);function newHistory(e,t,r){return{past:e,present:t,future:r,group:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,_latestUnfiltered:t,index:e.length,limit:e.length+r.length+1}}function createHistory(e,t){const r=newHistory([],e,[]);return t&&(r._latestUnfiltered=null),r}function insert(e,t,r,n){const{past:o,_latestUnfiltered:a}=e,i=r&&function lengthWithoutFuture(e){return e.past.length+1}(e)>=r,s=o.slice(i?1:0);return newHistory(null!=a?[...s,a]:s,t,[],n)}function jump(e,t){return t>0?function jumpToFuture(e,t){if(t<0||t>=e.future.length)return e;const{past:r,future:n,_latestUnfiltered:o}=e;return newHistory([...r,o,...n.slice(0,t)],n[t],n.slice(t+1))}(e,t-1):t<0?function jumpToPast(e,t){if(t<0||t>=e.past.length)return e;const{past:r,future:n,_latestUnfiltered:o}=e,a=r.slice(0,t),i=[...r.slice(t+1),o,...n];return newHistory(a,r[t],i)}(e,e.past.length+t):e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const o=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},_objectSpread(_objectSpread({},{data:{},formData:{},history:createHistory({}),initTitleFlag:!1}),{},{currentFocusIndex:-1,currentFocusQuestionId:"",hadShowTips:!1,totalScore:0,initTitle:null,emptyTitleQuestions:[],isShowHeader:!0,isShowSideBar:!0,editTableScrollToId:""}));var a=r(87768),i=r(64171);function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s={setDataReducer(e,t){let{payload:r}=t;const{data:n}=r;return base_objectSpread(base_objectSpread({},e),{},{data:n})},applyPatch2FormDataReducer(e,t){let{payload:r}=t;const{formData:n}=r;return base_objectSpread(base_objectSpread({},e),{},{formData:n})},setHistoryReducer(e,t){let{payload:r}=t;const{history:n}=r;return base_objectSpread(base_objectSpread({},e),{},{history:n})},addHistoryReducer(e,t){let{payload:r}=t;const{history:n}=e,{history:o}=r,a=insert(n,o,i.P6);return base_objectSpread(base_objectSpread({},e),{},{history:a})},clearHistoryReducer(e){const t=createHistory({});return base_objectSpread(base_objectSpread({},e),{},{history:t})},setFormReducer(e,t){var r;let{payload:n}=t;const{formData:o,remoteData:a}=n;if(!o)return e;let i=base_objectSpread({},o),s={};if(e.data&&(i=base_objectSpread(base_objectSpread({},i),{},{globalPadId:e.data.globalPadId,padId:e.data.padId})),null!==(r=i.padId)&&void 0!==r&&r.includes("_draft")&&(i=base_objectSpread(base_objectSpread({},i),{},{draftId:e.data.padId,globalPadId:"",padId:""})),s=base_objectSpread(base_objectSpread({},s),{},{formData:i}),!i.questions)return base_objectSpread(base_objectSpread({},e),s);if(a){const e=function(e,t){return!e.title&&t.relative&&0!==t.relative.length&&t.title&&"无标题收集表"!==t.title}(i,a);e&&(i=base_objectSpread(base_objectSpread({},i),{},{isDirty:!0,title:a.title}),s=base_objectSpread(base_objectSpread({},s),{},{formData:i}))}return i.taskConfig&&!e.initTitleFlag&&(s=base_objectSpread(base_objectSpread({},s),{},{initTitle:i.title,initTitleFlag:!0}),s.formData.taskConfig=(e=>{const{taskType:t,shouldShuffle:r,isOneQuestionPerPage:n,isExerciseMode:o}=e.taskConfig;return 2===t?base_objectSpread(base_objectSpread({},e.taskConfig),{},{shouldShuffle:null!=r&&r,isOneQuestionPerPage:null==n||n,isExerciseMode:null==o||o}):base_objectSpread({},e.taskConfig)})(i)),localStorage.setItem("TD-FORMS-EDIT",JSON.stringify(i)),base_objectSpread(base_objectSpread({},e),s)},setFormTitle(e,t){let{payload:r}=t;return base_objectSpread(base_objectSpread({},e),{},{formData:base_objectSpread(base_objectSpread({},e.formData),{},{title:r.title})})},batchUpdateEditDataReducer(e,t){let{payload:r}=t;const{data:n,formData:o}=r;return base_objectSpread(base_objectSpread({},e),{},{data:n,formData:o})}};function form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l=form_base_objectSpread(form_base_objectSpread({},s),{},{recalcTotalScoreReducer(e,t){let{payload:r}=t;const{totalScore:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{totalScore:n})},setCurrentFocusIndexReducer(e,t){let{payload:r}=t;const{currentFocusIndex:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{currentFocusIndex:n})},setCurrentFocusQuestionIdReducer(e,t){let{payload:r}=t;const{currentFocusQuestionId:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{currentFocusQuestionId:n})},setShowTipsReducer(e){return form_base_objectSpread(form_base_objectSpread({},e),{},{hadShowTips:!0})},setEditTableScrollToId(e,t){let{payload:r}=t;const{editTableScrollToId:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{editTableScrollToId:n})},setEmptyTitleQuestionsReducer(e,t){let{payload:r}=t;const{emptyTitleQuestions:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{emptyTitleQuestions:n})},setIsShowHeaderReducer(e,t){let{payload:r}=t;const{isShowHeader:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{isShowHeader:n})},setIsShowSideBarReducer(e,t){let{payload:r}=t;const{isShowSideBar:n}=r;return n&&(0,a.G)("edit_auto_question","button_view",{ver5:0}),form_base_objectSpread(form_base_objectSpread({},e),{},{isShowSideBar:n})}});function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const c=function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l);var d=r(67913),u=r(70411),p=r(67538),m=r(14130),f=r(70740),h=r(72598),y=r(52851),b=r(63406),g=r(45607),v=r(82275),_=r(27565),O=r(72870),S=r(86432),P=r(54734);let C={};const w=P.Z.t("无标题收集表");C=O.isMobile?{title:"",subtitle:"",author:"",themeClass:"default",questions:[],sections:[{sid:0,title:"",qlist:[]}]}:{formName:w,updateTime:1532399973794,title:"",subtitle:"",author:"",themeClass:"default",padId:"3$p5b69608f0004cac81d4b50eb00035180",isDirty:!1,rightBarClicked:!1,questions:[],sections:[{sid:0,title:"",qlist:[]}]};const I=C;var E=r(9410),T=r(98549),N=r(81893),j=r(60250),D=r(19541),k=r(15342),x=r(15995);function base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let Z,L=!1;const R={headerImg:"",updateTime:"",isNewForm:"",globalPadId:"",padId:""},A={SIZE_LIMIT_OWNER:100,SIZE_LIMIT_COOPERATION_COLLABOR:102};function*initRemoteData(e,t,r,n){let{call:o,put:a,select:i}=n;const s=(0,_.FY)("TD-FORMS-EDIT");let l;if(function hasText(e){return e&&e.initialAttributedText}(e)){const{initialAttributedText:n,localPadId:d,globalPadId:u}=e;try{l=JSON.parse(n.text),function checkAdnRedirect(e){e.cardConfig&&(0,v.EV)(e.cardConfig);e.sequenceConfig&&(0,v.MY)(e.sequenceConfig)}(l)}catch(c){const{default:e,mask:t}=yield o(j.OX);t.open(),e.show({message:P.Z.t("内容获取失败，请稍后重试。"),type:D.g.ERROR,action:P.Z.t("刷新"),autoClose:!1,onClickAction:()=>(0,N.Oi)(window,(0,S.Vm)())})}const p=yield function*checkNeedDiffRemote(e,t,r){if(O.isPC){const{localFormData:n,isAdmin:o,remoteFormData:a,remoteData:i,globalPadId:s,localPadId:l}=r;if(n&&o&&n.globalPadId===s)return yield t(e,a,i,base_consumer_objectSpread(base_consumer_objectSpread({},n),{},{padId:l,globalPadId:s})),!0}return!1}(r,o,{localFormData:s,iaAdmin:t,remoteFormData:l,remoteData:e,globalPadId:u,localPadId:d});if(p)return;if(function hasQuestions(e){return e&&e.questions}(l))yield a({type:"setForm",payload:{formData:base_consumer_objectSpread(base_consumer_objectSpread({},l),{},{globalPadId:u}),remoteData:e}});else if(l&&"sheet"===(0,S.pm)("form")){const t=yield i((e=>e.user.userInfo)),n=Object.assign({},I);n.author=t&&t.userName||"",yield o(r,l,e,base_consumer_objectSpread(base_consumer_objectSpread({},n),{},{padId:d,globalPadId:u}))}}else if(l&&200207!==e.cgicode){const e=yield i((e=>e.formInfo.retcode)),{default:t,mask:r,getActions:n}=yield o(j.OX);r.open(),t.show({message:P.Z.t("内容获取失败，请稍后重试。"),type:D.g.ERROR,autoClose:!1,onClose:()=>!1,action:n(e)})}}function isRemoteDateDeletedOrNotHasAdmin(e){const{isAdmin:t,isDeleted:r}=e;return r||!t}function navigateBack(){var e;const t=O.isTencentDocsApp&&O.isIPad||O.isMiniProgram?"/desktop/m/trash":"/desktop/trash";var r,n;if(O.isMiniProgram)return void(null===(r=window.wx.miniProgram)||void 0===r||null===(n=r.navigateBack)||void 0===n||n.call(r));if(null!==(e=window.mqq)&&void 0!==e&&e.ui&&window.mqq.QQVersion)return void window.mqq.ui.popBack();const o=location.origin+t;(0,N.Oi)(window,o)}const F=function*base_consumer(e,t){let{put:r,call:n,select:o,take:i}=t;function*setFormWhenDiff(e,t,n){if(O.isMobile){const o=(0,d.compare)(e||{},n);if(yield r({type:"setForm",payload:{formData:n,remoteData:t}}),isRemoteDateDeletedOrNotHasAdmin(t))return;o.length&&(yield r({type:"sync",payload:o}))}else{if(function isRemoteFormDataUpdate(e){return e&&e.updateTime!==Z}(e)&&function isRemoteFormDataNewThanLocalFormData(e,t){return e.updateTime===Z||t.updateTime>e.updateTime}(n,e))return void(yield r({type:"setForm",payload:{formData:base_consumer_objectSpread(base_consumer_objectSpread({},n),e)}}));yield r({type:"setForm",payload:{formData:n}});const o=(0,d.compare)(base_consumer_objectSpread(base_consumer_objectSpread({},e),R)||{},base_consumer_objectSpread(base_consumer_objectSpread({},n),R));if(isRemoteDateDeletedOrNotHasAdmin(t))return;o.length&&(yield r({type:"sync",payload:o}))}}yield*function*fetchMyData(){E.u.ready();const{editFormInfo:e,error:t}=window.preData,s=e;if(!s||s.retcode!==f.oY.SUCCESS||!s.data)return void p.l.error("[fetchMyData.error]",t);let l=s.data;b.v1||(l=0===s.data.pub?(0,T.ID)(s.data):(0,T.EA)(s.data));const{isAdmin:c}=l;if(!c)return void(yield r(y.routerRedux.replace("/fill")));const{pub:d}=l;if(c&&0===d&&"#/edit"!==window.location.hash){const{initialAttributedText:{text:e}}=l,{title:t,questions:n}=JSON.parse(e);!(0,S.rA)()||t||n.length?yield r(y.routerRedux.replace("/edit")):yield r(y.routerRedux.replace("/quick-create"))}yield r({type:"setData",payload:l});const{isDeleted:v,docStatus:_,domainId:O,localPadId:C}=l;if(yield function*checkTipsAndReport(e,t){if("#/result"===window.location.hash)return;const{isAdmin:r,isDeleted:n,pub:o,rev:i}=e;if(!r||n||0!==o||L)r&&!n&&i>o&&o>0&&(yield t(y.routerRedux.replace("/edit")),(0,a.G)("edit","expo_edit"));else if(o<i&&i>1){{const{initialAttributedText:{text:r}}=e,{title:n,questions:o}=JSON.parse(r);!(0,S.rA)()||n||o.length?yield t(y.routerRedux.replace("/edit")):yield t(y.routerRedux.replace("/quick-create"))}(0,a.G)("edit","expo_edit")}}(l,r),L=!0,v&&2===_){const{initVip:e}=yield o((e=>e.formInfo));e||(yield i("formInfo/getSelfVipInfo/@@end"));const{selfVip:t}=yield o((e=>e.formInfo));(0,j.X7)({context:P.Z.t("回收站中的收集表不能编辑，如要使用请还原收集表。"),onConfirmText:P.Z.t("还原"),onCancelText:g.OS,onConfirm:()=>{(0,h.mv)({domainId:O,localPadId:C}).then((e=>{(function handleAndCheckIsRecoverable(e){const{data:t}=e;return!{[f.oY.NO_SPACE]:A.SIZE_LIMIT_OWNER,[f.oY.NO_SPACE_ADMIN]:A.SIZE_LIMIT_COOPERATION_COLLABOR}[null==t?void 0:t.retcode]||((0,x.s)(null==t?void 0:t.retcode,u.POSITIONS.DETAIL,{apprec1:"restore",apprec2:"form"}),!1)})(e)&&async function loadDCVipToast(e,t){var r;const n=null==e||null===(r=e.data)||void 0===r?void 0:r.retcode;await(0,m.Xq)(base_consumer_objectSpread({errorCode:n},n===f.oY.NORMAL_USER_RECOVER_EXCEEDED_TIME_LIMIT?{aid:(0,u.getAidForReport)({position:u.POSITIONS.DETAIL,feature:"trash",apprec1:(null==t?void 0:t.level)>=k.FL.VIP?"restore90":"restore",apprec2:"form"})}:{}))||(0,N.Oi)(window,(0,S.Vm)())}(e,t)}))},onCancel:()=>{navigateBack()}})}yield r({type:"setIsLoading",payload:!1}),yield initRemoteData(l,c,setFormWhenDiff,{call:n,put:r,select:o})}()};var M=r(65686);function apply_patch_to_form_data_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function apply_patch_to_form_data_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?apply_patch_to_form_data_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):apply_patch_to_form_data_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function*apply_patch_to_form_data_base(e,t){let{payload:r}=e,{put:n,select:o}=t;const a=E.u.now(),i=yield o(M.yr),{newDocument:s}=(0,d.applyPatch)(i,r,!1,!1),l=apply_patch_to_form_data_base_objectSpread(apply_patch_to_form_data_base_objectSpread({},s),{},{updateTime:a});localStorage.setItem("TD-FORMS-EDIT",JSON.stringify(l)),yield n({type:"applyPatch2FormDataReducer",payload:{formData:l}})}var B=r(17403);var q=r(1896),U=r(71800);var G=r(11331);var K=r(64619);function utils_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function utils_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?utils_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):utils_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const handleExamSettingOptions=(e,t,r)=>{let n=((e,t)=>{const{isExerciseMode:r}=e;return void 0!==r?utils_objectSpread(utils_objectSpread({},t),{},{isExerciseMode:r}):t})(e,t);return n=((e,t)=>{const{isOneQuestionPerPage:r}=e;return void 0!==r?utils_objectSpread(utils_objectSpread({},t),{},{isOneQuestionPerPage:r}):t})(e,n),n=((e,t)=>{const{shouldShuffle:r}=e;return void 0!==r?utils_objectSpread(utils_objectSpread({},t),{},{shouldShuffle:r}):t})(e,n),n=((e,t,r)=>{const{numOfQuestionPicked:n}=e;if(void 0!==n){const e=t.parts,o=(0,K.assignPickedQuestionCount)(r,e,n);return utils_objectSpread(utils_objectSpread({},t),{},{parts:o})}return t})(e,n,r),n};function*set_form_base(e,t){let{payload:r}=e,{put:n}=t;yield n({type:"setFormReducer",payload:r})}function patchWithPrefixPath(e,t){return e.map((e=>{let{op:r,path:n,value:o}=e;return{op:r,path:`${t}${n}`,value:o}}))}function getChildNodeByPath(e,t){const r=t[e[0]];return e.length<=1?r:getChildNodeByPath(e.slice(1),r)}class Patch{constructor(){this.$undo=void 0,this.$redo=void 0,this.$undo={formData:[]},this.$redo={formData:[]}}get undo(){return this.$undo}get redo(){return this.$redo}get allPatches(){return{undo:this.$undo,redo:this.$redo}}pushOneAddPatch(e,t){this.$redo.formData.push({op:"add",path:e,value:t}),this.$undo.formData.push({op:"remove",path:e})}pushOneRemovePatch(e,t){this.$redo.formData.push({op:"remove",path:e}),this.$undo.formData.push({op:"add",path:e,value:t})}pushPatches(e,t){this.$redo.formData.push(...e),this.$undo.formData.push(...t)}}const V=function*set_header_image_base(e,t){let{payload:{headerImg:r}}=e,{put:n,select:o}=t;const a=function set_header_image_utils_genPatch(e,t){return Object.prototype.hasOwnProperty.call(e,"headerImg")?{redo:{formData:[{op:"replace",path:"/headerImg",value:t}]},undo:{formData:[{op:"replace",path:"/headerImg",value:e.headerImg}]}}:{redo:{formData:[{op:"add",path:"/headerImg",value:t}]},undo:{formData:[{op:"remove",path:"/headerImg"}]}}}(yield o(M.yr),r);yield n({type:"applyPatch2FormData",payload:a.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:a}})};var Q=r(64049),H=r(96628),Y=r.n(H);function getPatch(e,t,r,n){const o=`/questions/${t}${r}`,a={redo:{formData:[]},undo:{formData:[]}},i=function getValueByDataPath(e,t){let r;try{r=Y().get(e,t)}catch(n){"/dataType"===t&&(r=1)}return r}(e,r);return void 0!==i?(a.redo.formData.push({op:"replace",path:o,value:n}),a.undo.formData.push({op:"replace",path:o,value:i})):"/jumpId"!==r&&"/showIds"!==r||(a.redo.formData.push({op:"add",path:o,value:n}),a.undo.formData.push({op:"remove",path:o,value:i})),a.redo.formData.push(function(e){return{op:"replace",path:`/questions/${e}/updateTime`,value:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now()}}(t)),a}const set_logic_jump_form_utils_genPatch=(e,t,r,n)=>{const o=n.questions.findIndex((t=>t.id===e.id));return getPatch(n.questions[o],o,t,r)};var z=r(45382),$=r(4331),W=r(44795);function getValueFromFormData(e,t){try{return e.isDirty?Y().get(e,t):getDefaultValue(t)}catch(r){return getDefaultValue(t)}}function getDefaultValue(e){const t={memberIds:[],memberList:[]};try{return Y().get(t,e)}catch(r){return""}}function set_form_info_utils_genPatch(e,t,r){const n={redo:{formData:[{op:"replace",path:`${r}`,value:t}]},undo:{formData:[{op:"replace",path:`${r}`,value:e}]}};return"/title"===r&&(n.redo.formData.push({op:"replace",path:"/isDirty",value:t.length>0}),n.undo.formData.push({op:"replace",path:"/isDirty",value:e.length>0})),n}var X=r(53782),J=r(25737),ee=r.n(J),te=r(14042),re=r(71783),ne=r(45099),oe=r(95240),ae=r(86202),ie=r(69842),se=r(48974);const le=["btnText"];function get_matched_questions_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function get_matched_questions_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?get_matched_questions_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):get_matched_questions_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ce=[te.c.COMMODITY,te.c.IMAGE,te.c.RECOGNITION,te.c.TEMPERATURE];function getMatchingQuestion(e){var t;let{value:r,isVague:n,optionList:o,matchList:a,type:i,needCreate:s,matchType:l}=e;const c=a.find((e=>Array.isArray(e.matchText)?n?e.matchText.find((e=>r.includes(e))):e.matchText.find((e=>e===r)):n?r.includes(e.matchText):e.matchText===r));if(!c)return[];let d=o[c.matchId];if(s){var u;const{btnText:e}=d,t=(0,X.Z)(d,le),r=get_matched_questions_base_objectSpread({},t);return[get_matched_questions_base_objectSpread(get_matched_questions_base_objectSpread({},(0,re.C)(null!==(u=t.type)&&void 0!==u?u:te.c.SIMPLE,r)),{},{matchType:l})]}return d=get_matched_questions_base_objectSpread(get_matched_questions_base_objectSpread({type:i},d),{},{title:null!==(t=d.title)&&void 0!==t?t:r,matchType:l}),[d]}var de=r(48976),ue=r(69396);const pe=["edit/setFormDataByCompare","edit/moveQuestionOption","edit/moveTableSubQuestion","edit/setFormInfo/@@end","edit/setQuestionDeep","edit/setFormRichSubtitle","edit/setHeaderImage","edit/setLogicJump","edit/setLinkList","edit/setQuestionsDefaultAnswer"];function getNetworkStatus(){return O.isAndroid&&O.isMiniProgram?new Promise((e=>{try{var t;null===(t=window.wx)||void 0===t||t.getNetworkType({success:t=>e("none"!==t.networkType),fail:()=>e(!1)})}catch(r){e(!0)}})):Promise.resolve(window.navigator.onLine)}function action_center_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function action_center_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?action_center_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):action_center_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let me=!1;const fe=500,he=200;var ye=r(3585);function check_question_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function check_question_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?check_question_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):check_question_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const be=[{type:"TEMPERATURE",moduleName:"temperature"},{type:"LOCATION",moduleName:"address"},{type:"IMAGE",moduleName:"picture"},{type:"FILEIMAGE",moduleName:"picture"}];var ge=r(22082),ve=r(81721),_e=r(45122);let Oe,Se=!1;const utils_getUpdateTimeOp=e=>({op:"replace",path:`/questions/${e}/updateTime`,value:Date.now()});function utils_getPatch(e,t,r,n){const o=`/questions/${t}${r}`,a={redo:{formData:[]},undo:{formData:[]}},i=function utils_getValueByDataPath(e,t){let r;try{r=Y().get(e,t)}catch(n){r=function dealErrorQuestionOption(e){return"string"==typeof e&&["/dataType","/validateInput"].includes(e)?{}:void 0}(t)}return r}(e,r);return void 0!==i?(a.redo.formData.push({op:"replace",path:o,value:n}),a.undo.formData.push({op:"replace",path:o,value:i})):(a.redo.formData.push({op:"add",path:o,value:n}),a.undo.formData.push({op:"remove",path:o})),a.redo.formData.push(utils_getUpdateTimeOp(t)),a}function set_question_deep_utils_genPatch(e,t,r,n){const o=e.questions.findIndex((e=>e.id===t.id)),a=e.questions[o];return"/answerInfo/explain"!==r||a.answerInfo?utils_getPatch(a,o,r,n):utils_getPatch(a,o,"/answerInfo",{rightOptionIds:[],score:0,explain:n})}var Pe=r(4869);function sync_remote_form_data_utils_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sync_remote_form_data_utils_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sync_remote_form_data_utils_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sync_remote_form_data_utils_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ce={undoRedo:function*action_center_base(e,t){let r,n,{put:o,call:s,take:l,fork:c,cancel:d,select:u,takeEvery:p}=t,m=[],f=!1;function*forkSyncActions(){r=yield c(syncActions,m)}function*syncActions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600;r&&(yield d(r));const n=function mergePatch(){const e=[],t={};(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((r=>{"replace"===r.op?t[r.path]=r.value:e.push(r)}));const r=Object.keys(t).map((e=>({op:"replace",path:e,value:t[e]})));return e.concat(r)}(e);yield(0,de.delay)(t),yield o({type:"sync",payload:n}),m=[],yield l("sync/@@end")}function*waitToSync(){n&&(yield d(n));let e,t,r=yield s(getNetworkStatus);for(;!r;)yield(0,de.delay)(1e3),r=yield s(getNetworkStatus);yield o({type:"fetchHeadFormData"}),yield l("fetchHeadFormData/@@end");const a=localStorage.getItem("TD-FORMS-EDIT"),i=yield u(M.tO);if(!function hasInitAttrTest(e){return!(null==e||!e.initialAttributedText)}(i))return void(yield*forkSyncActions());const{initialAttributedText:c,isAdmin:p,localPadId:f,globalPadId:h}=i;try{e=JSON.parse(unescape(c.text)),t=JSON.parse(a)}catch(y){console.error("edit/undoredo",y)}!function checkLocalFormData(e,t,r){return!(!e||!t||e.globalPadId!==r)}(t,p,h)?yield*forkSyncActions():(t=action_center_base_objectSpread(action_center_base_objectSpread({},t),{},{padId:f,globalPadId:h}),!function checkRemoteFormData(e){return!(!e||void 0===e.updateTime)}(e)||!function compareLocalAndRemote(e,t){return void 0===e.updateTime||t.updateTime>e.updateTime}(t,e)?yield*forkSyncActions():(yield o({type:"setForm",payload:{formData:action_center_base_objectSpread(action_center_base_objectSpread({},t),e),remoteData:i}}),yield s(j.IG,P.Z.t("从服务端更新收集表数据成功。"),{type:D.g.SUCCESS}),m=[]))}function*applyUndoRedoPatch(e){if(!e.formData)return;const{questions:t,sections:r}=yield u(M.yr);yield o({type:"applyPatch2FormData",payload:e.formData});const n=e.formData.findIndex((e=>{let{path:t}=e;return!!t.match(/^\/questions\/(\d+)\//)}));if(-1===n)return;const a=r.findIndex((e=>{let{qlist:r}=e;return r.includes(t[n].id)})),{qlist:i}=r[a],s=i.findIndex((e=>e===t[n].id)),l=i[n];yield o({type:"setCurrentFocusIndexReducer",payload:{currentFocusIndex:s}}),yield o({type:"setCurrentFocusQuestionIdReducer",payload:{currentFocusQuestionId:l}})}function*applyPatchAndSetHistory(e,t){yield s(applyUndoRedoPatch,e),yield o({type:"setHistoryReducer",payload:{history:t}})}function*confirmHistoryByActionType(e){let{history:t}=yield u(M.Et),r=t.present.redo,n=function getSyncDefer(e){return(0,ue.Z)(e,"payload.syncDefer")||(0,ue.Z)(e,"payload[0].syncDefer")}(e);return e.type===i.MF.UNDO&&(n=!0,t.past.length&&(r=t.present.undo,t=jump(t,-1),yield*applyPatchAndSetHistory(r,t))),e.type===i.MF.REDO&&(n=!0,t.future.length&&(r=t.future[0].redo,t=jump(t,1),yield*applyPatchAndSetHistory(r,t))),{history:t,patch:r,syncDefer:n}}yield p("*",(function*undoRedoProcessor(e){if(!function isActionTypeValid(e){return e&&/^@@redux-undo/.test(e)||pe.indexOf(e)>=0}(e.type))return;const{history:t,patch:i,syncDefer:l}=yield*confirmHistoryByActionType(e);if(yield o({type:"formInfo/setFormStatusByUndoredo",payload:{hasUndo:!!t.past.length}}),(0,ue.Z)(i,"formData[0]")&&(yield*function*handlePatch(e,t){const o=t?fe:he;m=m.concat(e.formData),(yield s(getNetworkStatus))?r=yield c(syncActions,m,o):(me||(yield s(j.IG,P.Z.t("网络异常，编辑内容会在网络恢复后同步。")),me=!0),n=yield c(waitToSync))}(i,l)),f)return;f=!0;const d=yield u(M.tO);(0,a.G)("edit","edit_text",{opername:"doc_core",ver1:null==d?void 0:d.globalPadId,ver2:null==d?void 0:d.creatorId,ver3:null==d?void 0:d.domainId,ver4:null==d?void 0:d.ownerId,ver5:1})}))},applyPatch2FormData:apply_patch_to_form_data_base,checkQuestion:function*check_question_base(e,t){let{payload:r}=e,{put:n,call:o,select:i}=t,s=yield i(M.yr);s=(0,ye.Z)(s,"undefined");const{questions:l,sections:c}=s,[{qlist:d}]=c;be.forEach((e=>{let{type:t,moduleName:r}=e;const n=function countTypicalQuestion(e,t,r){return e.filter((e=>{let{type:n,id:o}=e;return t.includes(o)&&n===r})).length}(l,d,t);!function reportTypicalQuestionCreated(e,t){t&&(0,a.G)(e.toLowerCase(),"create",{ver5:t})}(r,n)})),null!=r&&r.questions?yield*function*postSyncWithFullText(e,t,r){let{put:n,call:o}=r;const{questions:i,callback:s,errorCallback:l}=t,c=check_question_base_objectSpread(check_question_base_objectSpread({},e),{},{questions:i,deleteQuestions:void 0,version:2}),{rev:d,pos:u}=U.Q.getRevAndPos(),{data:p}=yield o(q.Bj,{formData:c,rev:d,pos:u});if((null==p?void 0:p.retcode)!==f.oY.SUCCESS)return(0,a.G)("post sync with fulltext - fail",null==p?void 0:p.retcode),void(null==l||l(null==p?void 0:p.retcode));const{rev:m,pos:h}=p.data;U.Q.setRevAndPos(m,h);const y=(0,T.EA)(c);localStorage.setItem("TD-FORMS-EDIT",JSON.stringify(y)),yield n({type:"applyPatch2FormDataReducer",payload:{formData:y}}),null==s||s()}(s,r,{call:o,put:n}):("function"==typeof r&&r(),localStorage.setItem("TD-FORMS-EDIT",JSON.stringify(s)),yield n({type:"applyPatch2FormDataReducer",payload:{formData:s}}))},fetchHeadFormData:function*fetch_head_form_data_base(e,t){let{put:r,call:n,select:o,fork:a,cancel:i,take:s}=t;function*fetchHeadFormData(){(yield o(M.nJ))||(yield s("user/getUserInfo/@@end"));const e=_e.Kg.HEAD,{data:t,error:a}=yield n(q.Bl,(0,ge.e)().urlId,e);if(!t)return void p.l.error("[fetchFormData.error]",a);if(t.retcode!==f.oY.SUCCESS||!t.data)return void(yield r({type:"setRetcode",payload:t.retcode}));const i=t.data,{rev:l,pos:c,isAdmin:d}=i;U.Q.setRevAndPos(l,c),d||!(0,b.MC)()?(yield r({type:"setData",payload:i}),Se||(yield r({type:"formInfo/authApplyCheck"})),Se=!0,yield r({type:"setRetcode",payload:t.retcode})):(0,N.Oi)(window,(0,ve.oW)(window.location.href,"pre"))}yield n((function*singleFetchHeadFormData(){Oe&&(yield i(Oe)),Oe=yield a(fetchHeadFormData)}))},setData:function*set_data_base(e,t){let{payload:r}=e,{put:n}=t;U.Q.setRevAndPos(r.rev,r.pos),yield n({type:"setDataReducer",payload:{data:r}})},setForm:set_form_base,setFormInfo:function*set_form_info_base(e,t){let{payload:{value:r,dataPath:n}}=e,{put:o,select:a}=t;const i=set_form_info_utils_genPatch(getValueFromFormData(yield a(M.yr),n),r,n);yield o({type:"applyPatch2FormData",payload:i.redo.formData}),yield o({type:"addHistoryReducer",payload:{history:i}})},setFormRichSubtitle:function*set_form_rich_subtitle_base(e,t){let{payload:r}=e,{put:n,select:o}=t;const a=yield o(M.yr),i={redo:{formData:[]},undo:{formData:[]}};r.forEach((e=>{const{path:t,value:r}=e,n=set_form_info_utils_genPatch(getValueFromFormData(a,t),r,t);i.redo.formData.push(...n.redo.formData),i.undo.formData.push(...n.undo.formData)})),yield n({type:"applyPatch2FormData",payload:i.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:i}})},setQuestionDeep:function*set_question_deep_base(e,t){let{payload:r}=e,{put:n,select:o}=t;const a=yield o(M.yr);let i={redo:{formData:[]},undo:{formData:[]}};if((0,Q.PO)(r)){const{question:e,dataPath:t,value:n}=r,o="/title"===t?n.replace(/\t/g,""):n;i=set_question_deep_utils_genPatch(a,e,t,o)}else r.forEach((e=>{const{question:t,dataPath:r,value:n}=e,o="/title"===r?n.replace(/\t/g,""):n,s=set_question_deep_utils_genPatch(a,t,r,o);i.redo.formData.push(...s.redo.formData),i.undo.formData.push(...s.undo.formData)}));yield n({type:"applyPatch2FormData",payload:i.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:i}})},syncRemoteFormData:function*sync_remote_form_data_base(e,t){if(!(0,Pe.isLogin)()||!window.clientVars.isOwner)return;const{put:r,call:n,take:o,select:a}=t,{globalPadId:i}=yield a(M.tO),{data:s,error:l}=yield n(q.AA,i);if(l){const e="/data/getpubrev - error";return void p.l.error(e,l)}if((null==s?void 0:s.retcode)!==f.oY.SUCCESS){const e="/data/getpubrev - retcode";return void p.l.warn(e,s)}const{rev:c}=s.data,d=U.Q.getRevAndPos();if(Number(d.rev)>=c)return;yield r({type:"fetchHeadFormData"}),yield o("fetchHeadFormData/@@end");const u=yield a(M.tO);if(!u.initialAttributedText)return;const m=function getActionOfUpdatingLocalFormData(e){let t,r=localStorage.getItem("TD-FORMS-EDIT");const{initialAttributedText:n}=e;try{t=JSON.parse(n.text),r=JSON.parse(r)}catch(l){p.l.error("edit/sync-remote-form-data",l)}return{type:"",payload:{localFormData:r,remoteFormData:t,remoteData:e}}}(u);yield*function*updateLocal(e,t){let{payload:{localFormData:r,remoteFormData:n,remoteData:o}}=e,{put:a,call:i}=t;const{isOwner:s,localPadId:l,globalPadId:c}=o;if(!s)return;if(function isLocalFormDataInvalid(e,t){return!e||e.globalPadId!==t}(r,c))return;if(function isRemoteFormDataInvalid(e){return!e||void 0===e.updateTime}(n))return;if(function isRemoteFormDataOlderThanTheLocal(e,t){return e.updateTime<=t.updateTime}(n,r))return;const d=sync_remote_form_data_utils_objectSpread(sync_remote_form_data_utils_objectSpread({},r),{},{padId:l,globalPadId:c},n);yield a({type:"setForm",payload:{formData:d,remoteData:o}}),yield i(j.IG,P.Z.t("从服务端更新收集表数据成功。"),{type:D.g.SUCCESS})}(m,t)},sync:$.Z};function edit_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function edit_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?edit_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):edit_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const we=edit_form_base_objectSpread(edit_form_base_objectSpread({},Ce),{},{applyPatch2FormData:function*apply_patch_to_form_data_form_base(e,t){const{put:r}=t;yield*apply_patch_to_form_data_base(e,t),yield r({type:"recalcTotalScore"})},checkEmptyTitleQuestions:function*check_empty_title_questions_form_base(e,t){let{put:r,select:n}=t;const o=function getEmptyTitleQuestions(e){var t,r;if(null==e||null===(t=e.sections)||void 0===t||!t.length)return[];const n=null===(r=e.sections[0])||void 0===r?void 0:r.qlist;if(null==n||!n.length)return[];const o=[];return n.forEach((t=>{var r;const n=null===(r=e.questions)||void 0===r?void 0:r.find((e=>e&&e.id===t));n&&(!n.title||["未命名的问题","请输入问题"].includes(n.title)||(0,B.mN)(n)||(0,B.Sj)(n)||(0,B.VZ)(n)||(0,B.Dl)(n))&&o.push(t)})),o}(yield n(M.yr));yield r({type:"setEmptyTitleQuestionsReducer",payload:{emptyTitleQuestions:o}})},importSheet:function*import_sheet_form_base(e,t){let{payload:{formData:r}}=e,{put:n,select:o,call:a}=t;const{rev:i,pos:s}=U.Q.getRevAndPos(),l={formData:r,rev:i,pos:s},{data:c,error:u}=yield a(q.Bj,l);if(0===(null==c?void 0:c.retcode)){p.l.info("-----importSheet----- success");const e=yield o(M.yr),t=(0,d.compare)(e,r),{rev:a,pos:i}=c.data;U.Q.setRevAndPos(a,i),yield n({type:"applyPatch2FormData",payload:t}),yield n({type:"clearHistoryReducer"})}else p.l.error("-----importSheet----- error",u),yield a(j.IG,P.Z.t("导入失败，请稍后重试"),{duration:3e3})},moveQuestionOption:function*move_question_option_form_base(e,t){let{payload:r}=e,{put:n}=t;const o=function genPatch(e){let{dataPath:t,fromIndex:r,toIndex:n}=e;return{redo:{formData:[{op:"move",from:`${t}/${r}`,path:`${t}/${n}`}]},undo:{formData:[{op:"move",from:`${t}/${n}`,path:`${t}/${r}`}]}}}(r);yield n({type:"applyPatch2FormData",payload:o.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:o}})},moveTableSubQuestion:function*move_table_sub_question_form_base(e,t){let{payload:r}=e,{put:n}=t;const o=function utils_genPatch(e){let{dataPathPrefix:t,dataPath:r,fromIndex:n,toIndex:o}=e;return{redo:{formData:[{op:"move",from:`${t}${r}/${n}`,path:`${t}${r}/${o}`}]},undo:{formData:[{op:"move",from:`${t}${r}/${o}`,path:`${t}${r}/${n}`}]}}}(r);yield n({type:"applyPatch2FormData",payload:o.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:o}})},recalcTotalScore:function*recalc_total_score_form_base(e,t){let{put:r,select:n}=t;const o=yield n(M.yr);if(!o.taskConfig)return;const a=(0,G.v)(o);yield r({type:"recalcTotalScoreReducer",payload:{totalScore:a}})},setExamSetting:function*set_exam_setting_form_base(e,t){let{payload:r}=e;const{select:n,put:o}=t,{parts:a,taskConfig:i}=yield n(M.yr),s=handleExamSettingOptions(r,i,a);yield o({type:"setFormInfo",payload:{value:s,dataPath:"/taskConfig"}})},setForm:function*set_form_form_base(e,t){yield*set_form_base(e,t);const{put:r}=t;yield r({type:"recalcTotalScore"})},setFormDataByCompare:function*set_form_data_by_compare_form_base(e,t){let{payload:{dataPaths:r,newFormData:n}}=e,{put:o,select:a}=t;const i=function genPatches(e,t,r){const n=new Patch;return e.length?(e.map((e=>e.split("/").slice(1))).forEach(((o,a)=>{var i,s;let l,c,u=-1;/^-?\d+$/.test(o[o.length-1])&&(u=parseInt(o.pop(),10));const p=null!==(i=getChildNodeByPath(o,t))&&void 0!==i?i:{},m=null!==(s=getChildNodeByPath(o,r))&&void 0!==s?s:{},{length:f}=p,{length:h}=m;if(-1!==u&&f!==h)f>h?n.pushOneRemovePatch(e[a],p[u]):f<h&&n.pushOneAddPatch(e[a],m[u]);else{l=(0,d.compare)(p,m),c=(0,d.compare)(m,p);const t=-1!==u?e[a].substring(0,e[a].lastIndexOf("/")):e[a];n.pushPatches(patchWithPrefixPath(l,t),patchWithPrefixPath(c,t))}})),n):(n.pushPatches((0,d.compare)(t,r),(0,d.compare)(r,t)),n)}(r,yield a(M.yr),n);yield o({type:"applyPatch2FormData",payload:i.redo.formData}),yield o({type:"addHistoryReducer",payload:{history:i.allPatches}})},setHeaderImage:V,setIsShowHeader:function*set_is_show_header_form_base(e,t){let{put:r,select:n}=t;const o="is-show-header",a=yield n(M.mw),i=document.querySelector("body");a?null==i||i.classList.remove(o):null==i||i.classList.add(o),yield r({type:"setIsShowHeaderReducer",payload:{isShowHeader:!a}})},setLinkList:function*set_link_list_form_base(e,t){let{payload:r}=e,{put:n,select:o}=t;const a=((e,t)=>Object.prototype.hasOwnProperty.call(e,"linkList")?{redo:{formData:[{op:"replace",path:"formData/linkList",value:t}]},undo:{formData:[{op:"replace",path:"formData/linkList",value:e.linkList}]}}:{redo:{formData:[{op:"add",path:"formData/linkList",value:t}]},undo:{formData:[{op:"remove",path:"formData/linkList"}]}})(yield o(M.yr),r);yield n({type:"applyPatch2FormData",payload:a.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:a}})},setLogicJump:function*set_logic_jump_form_base(e,t){let{payload:r}=e,{put:n,select:o}=t;const{formData:a}=yield o(M.Et);let i={redo:{formData:[]},undo:{formData:[]}};if((0,Q.PO)(r)){const{question:e,dataPath:t,value:n}=r;i=set_logic_jump_form_utils_genPatch(e,t,n,a)}else r.forEach((e=>{const{question:t,dataPath:r,value:n}=e,o=set_logic_jump_form_utils_genPatch(t,r,n,a);i.redo.formData.push(...o.redo.formData),i.undo.formData.push(...o.undo.formData)}));yield n({type:"applyPatch2FormData",payload:i.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:i}})},featHeadAgainstCollaboration:function*fetch_head_against_collaboration_form_base(e,t){let{payload:r}=e;const{select:n}=t;if(!(yield n(M.vh)))return;const{type:o,data:a}=r;$.m.lock||(o!==z.M0.DOWNSTREAM_REV?o!==z.M0.CHECKING_REV||(yield*function*collaborationWithAdmins(e,t){const r=yield*(0,W.wp)(void 0,t);if(!r)return;yield*(0,W.X0)(void 0,t)}(0,t)):yield*function*collaborationInOtherDevices(e,t){const{newRev:r}=e,{rev:n}=U.Q.getRevAndPos();if(!r||n===r)return;if(Math.abs(r-n)>1)return void(yield*(0,W.X0)(void 0,t));yield*(0,W.qD)(e,t)}(a,t))},setQuestionsDefaultAnswer:function*set_question_default_answer_base(e,t){let{payload:r}=e,{put:n,select:o}=t;const a={redo:{formData:[]},undo:{formData:[]}},i=set_form_info_utils_genPatch(getValueFromFormData(yield o(M.yr),"/questions"),r.questions,"/questions");a.redo.formData.push(...i.redo.formData),a.undo.formData.push(...i.undo.formData),yield n({type:"applyPatch2FormData",payload:a.redo.formData}),yield n({type:"addHistoryReducer",payload:{history:a}})},getMatchedQuestions:function*get_matched_questions_base(e,t){let{payload:r}=e,{call:n}=t;if(!r)return[];const o=getMatchingQuestion({value:r,isVague:!0,optionList:ae.kD,matchList:ae.LE,type:te.c.RADIO,matchType:"1"}),i=getMatchingQuestion({value:r,isVague:!0,optionList:ae.tl,matchList:ae.Yv,type:te.c.SIMPLE,matchType:"2"}),s=getMatchingQuestion({value:r,isVague:!1,optionList:ie.ZP,matchList:ie.Vj,needCreate:!0,type:te.c.SIMPLE,matchType:"3"}),l=o.concat(i,s),{data:c,error:d}=yield n(se.L,r);let u=[];u=!d&&c&&c.retcode===f.oY.SUCCESS&&c.result?c.result.questions.map((e=>function calibrationQuestion(e){const t=get_matched_questions_base_objectSpread(get_matched_questions_base_objectSpread({},e),{},{matchType:"4"});if(ce.includes(t.type))return null;if(t.type===te.c.SIMPLE){const{validate:e}=t;if(null!=e&&e.some((e=>Number(e.type)===ne.g.PATTERN)))return null}const{validate:r}=t,n=null==r?void 0:r.map((e=>Number(e.type)===ne.g.VALUE_TYPE?get_matched_questions_base_objectSpread(get_matched_questions_base_objectSpread({},e),{},{type:Number(e.type),rules:{type:"number"}}):get_matched_questions_base_objectSpread(get_matched_questions_base_objectSpread({},e),{},{type:Number(e.type)||0})));return get_matched_questions_base_objectSpread(get_matched_questions_base_objectSpread({},t),{},{validate:n})}(JSON.parse(e)))).filter(Boolean).slice(0,3):[],l.push(...u);let p="";const m=l.reduce(((e,t)=>{if(!e.some((e=>{var r,n;return(null===(r=e.validateSetting)||void 0===r?void 0:r.type)===(null===(n=t.validateSetting)||void 0===n?void 0:n.type)&&e.title.trim()===t.title.trim()}))){const r=get_matched_questions_base_objectSpread({},t);if(p+=r.matchType,oe.dq.has(t.type)){const e=r.qdata.options.map((e=>get_matched_questions_base_objectSpread(get_matched_questions_base_objectSpread({},e),{},{showIds:null,jumpId:null})));r.qdata.options=e}r.showIds=null,r.jumpId=null,r.id=ee()(r.type),e.push(r)}return e}),[]);if(p=p.split("").join("-"),!m.length){const e=(0,re.C)(te.c.SIMPLE,{title:r,matchType:"0"});m.push(e),p="0"}return(0,a.G)("edit_auto_question","search",{ver5:r,ver6:p}),m},syncWithFullText:function*sync_with_full_text_base(e,t){let{payload:{formData:r}}=e,{put:n,select:o,call:a}=t;const{rev:i,pos:s}=U.Q.getRevAndPos(),l=yield o(M.yr),c=r||l,d={formData:c,rev:i,pos:s},{data:u,error:m}=yield a(q.Bj,d);if(0===(null==u?void 0:u.retcode)){p.l.info("-----syncWithFullText----- success");const{rev:e,pos:t}=u.data;U.Q.setRevAndPos(e,t),localStorage.setItem("TD-FORMS-EDIT",JSON.stringify(c)),yield n({type:"clearHistoryReducer"})}else p.l.error("-----syncWithFullText----- error",m),yield a(j.IG,P.Z.t("网络异常，请稍后重试"),{duration:3e3})}});function edit_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function edit_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?edit_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):edit_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ie=edit_form_consumer_objectSpread(edit_form_consumer_objectSpread({},we),{},{fetchMyData:F});var Ee=r(51788),Te=r.n(Ee);class Idle{constructor(e,t,r){this.handler=e,this.timeCount=t,this.isTick=r,this.lastHandleTime=Date.now(),this.isShouldHandle=!0}receiveIdleTime(e,t){this.isShouldHandle&&t-this.lastHandleTime>=this.timeCount&&(this.handler(),this.lastHandleTime=Date.now(),this.isTick?this.isShouldHandle=!0:this.isShouldHandle=!1)}reset(){this.lastHandleTime=Date.now(),this.isShouldHandle=!0}}const Ne=new class UserIdle{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;this.detectInterval=e,this.idleList=[],this._idleTimeCount=0,this.idleStartTimestamp=Date.now(),this.resetIdleTime=this.resetIdleTime.bind(this),this.startDetect()}startDetect(){window.addEventListener("keydown",this.resetIdleTime,{capture:!0}),window.addEventListener("keypress",this.resetIdleTime,{capture:!0}),window.addEventListener("mousemove",this.resetIdleTime,{capture:!0}),window.addEventListener("mousedown",this.resetIdleTime,{capture:!0}),window.addEventListener("wheel",this.resetIdleTime,{capture:!0}),window.addEventListener("resize",this.resetIdleTime,{capture:!0}),window.addEventListener("touchstart",this.resetIdleTime,{capture:!0}),window.addEventListener("touchmove",this.resetIdleTime,{capture:!0}),this.idleStartTimestamp=Date.now(),setInterval((()=>{const e=Date.now();this._idleTimeCount=e-this.idleStartTimestamp,this.idleList.forEach((t=>t.receiveIdleTime(this._idleTimeCount,e)))}),this.detectInterval)}resetIdleTime(){this._idleTimeCount=0,this.idleStartTimestamp=Date.now(),this.idleList.forEach((e=>e.reset()))}get idleTimeCount(){return this._idleTimeCount}setIdle(e,t){if("function"!=typeof e||"number"!=typeof t)return null;const r=new Idle(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]);return this.idleList.push(r),r}clearIdle(e){const t=this.idleList.indexOf(e);return t>=0&&(this.idleList.splice(t,1),!0)}};Te().filter=()=>!0;function dispatchUndoRedo(e){let{dispatch:t}=e;t({type:"undoRedo"})}function dispatchInitLocalAndDataFetch(e){var t;let{dispatch:r}=e;document.addEventListener("predataLoadedForEdit",(()=>{r({type:"fetchMyData"})})),null!==(t=window.preData)&&void 0!==t&&t.editFormInfo&&r({type:"fetchMyData"})}function subscriptions_edit_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function subscriptions_edit_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?subscriptions_edit_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):subscriptions_edit_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function subscriptions_edit_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const je=function subscriptions_edit_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?subscriptions_edit_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):subscriptions_edit_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},subscriptions_edit_form_base_objectSpread(subscriptions_edit_form_base_objectSpread({},{setup(e){dispatchUndoRedo(e),dispatchInitLocalAndDataFetch(e)},keyEvent(e){!function invokeKeyEvent(e){let{dispatch:t}=e;"#/edit"===location.hash&&(Te()("⌘+Y, ctrl+y",(e=>{t(i.zF.redo()),e.preventDefault()})),Te()("⌘+z, ctrl+z",(e=>{var r;null!=e&&null!==(r=e.target)&&void 0!==r&&r.className.includes("rich-editable-area")||t(i.zF.undo()),e.preventDefault()}))),O.isIPad&&O.isTencentDocsApp&&window.mqq&&(window.mqq.invoke("docx","registerShortcutKeyEvent",{shortcutKey:[{input:"y",modifier:"command"},{input:"y",modifier:"control"},{input:"z",modifier:"command"},{input:"z",modifier:"control"}]}),window.mqq.addEventListener("shortcutKeyEvent",(e=>{if("#/edit"===location.hash)switch(e.input){case"y":return void t(i.zF.redo());case"z":return void t(i.zF.undo());default:return}})))}(e)}}),{},{setup(e){dispatchUndoRedo(e),function dispatchSyncRemote(e){let{dispatch:t}=e;Ne.setIdle((()=>{t({type:"syncRemoteFormData"})}),6e4,!0)}(e),dispatchInitLocalAndDataFetch(e)}}));function models_edit_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_edit_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_edit_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_edit_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const De=models_edit_form_consumer_objectSpread(models_edit_form_consumer_objectSpread({},{namespace:"edit"}),{},{state:o,reducers:c,effects:Ie,subscriptions:je})},33575:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Pe});var n=r(64649);var o=r(14148);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const a=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},_objectSpread(_objectSpread({},{globalPadId:null,isDeleted:!1,answerData:[],isPostAnswerStatus:!1,fillIsLogin:!0,showResubmitToastStatus:!1,formDataLoad:!1,recordDataLoad:!1,isInit:!1,isReSubmit:!1,hasShowSharePage:!1}),{},{smartMatchList:o.d,KVCache:{},autoFillStatus:-1,autoFillStatusCache:!0,scrollTop:0,isShowSubmitDialog:!1,userNameCheckStatus:!1,hadAnswer:!1,tableQuestionRowIndex:0,tableSubFormDisabled:!1,tableSubFormFromPage:""}));function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const i={setFillData(e,t){let{payload:r}=t;const{globalPadId:n,isDeleted:o}=r;return base_objectSpread(base_objectSpread({},e),{},{globalPadId:n,isDeleted:o})},setDeleted(e,t){let{payload:r}=t;const{isDeleted:n}=r;return base_objectSpread(base_objectSpread({},e),{},{isDeleted:n})},setAnswerData(e,t){let{payload:r}=t;const{answerData:n}=r;return base_objectSpread(base_objectSpread({},e),{},{answerData:n})},setPostAnswerStatus(e,t){let{payload:r}=t;const{isPostAnswerStatus:n}=r;return base_objectSpread(base_objectSpread({},e),{},{isPostAnswerStatus:n})},setLogin(e,t){let{payload:r}=t;const{fillIsLogin:n}=r;return base_objectSpread(base_objectSpread({},e),{},{fillIsLogin:n})},setShowResubmitToastStatus(e,t){let{payload:r}=t;const{showResubmitToastStatus:n}=r;return base_objectSpread(base_objectSpread({},e),{},{showResubmitToastStatus:n})},setIsInit(e,t){let{payload:r}=t;const n=base_objectSpread(base_objectSpread({},e),{},{formDataLoad:e.formDataLoad||!(null==r||!r.formDataLoad),recordDataLoad:e.recordDataLoad||!(null==r||!r.recordDataLoad)});return base_objectSpread(base_objectSpread({},n),{},{isInit:n.formDataLoad&&n.recordDataLoad})},reSubmit(e,t){let{payload:r}=t;const{answerData:n=[]}=r;return base_objectSpread(base_objectSpread({},e),{},{isReSubmit:!0,answerData:n})},setHasShowSharePage(e,t){let{payload:r}=t;const{hasShowSharePage:n}=r;return base_objectSpread(base_objectSpread({},e),{},{hasShowSharePage:n})}};function form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s=form_base_objectSpread(form_base_objectSpread({},i),{},{setUserNameCheckStatus(e,t){let{payload:r}=t;const{userNameCheckStatus:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{userNameCheckStatus:n})},setKVCache(e,t){let{payload:r}=t;const{KVCache:{name:n,value:o}}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{KVCache:form_base_objectSpread(form_base_objectSpread({},e.KVCache),{},{[n]:o})})},setAutoFillStatus(e,t){let{payload:r}=t;const{autoFillStatus:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{autoFillStatus:n})},setAutoFillStatusCache(e,t){let{payload:r}=t;const{autoFillStatusCache:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{autoFillStatusCache:n})},setHadAnswer(e,t){let{payload:r}=t;const{hadAnswer:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{hadAnswer:n})},setTableQuestionRowIndex(e,t){let{payload:r}=t;const{tableQuestionRowIndex:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{tableQuestionRowIndex:n})},setTableSubFormDisabled(e,t){let{payload:r}=t;const{tableSubFormDisabled:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{tableSubFormDisabled:n})},setTableSubFormFromPage(e,t){let{payload:r}=t;const{tableSubFormFromPage:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{tableSubFormFromPage:n})},setPubFormData(e,t){let{payload:r}=t;const{pubFormData:n}=r;return form_base_objectSpread(form_base_objectSpread({},e),{},{pubFormData:n})}});function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const l=function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},s);var c=r(63406),d=r(65686),u=r(27565);function*answer_question_form_consumer(e,t){let{select:r,put:n}=t;if((0,c.MC)())return;const{payload:o}=e,a=yield r(d.Yl),i=yield r(d.Zd),{globalPadId:s,tinyid:l,tinyId:p}=yield r(d._X),m=yield r(d.Bg),f=function cacheAnswer(e,t){const r=(0,u.FY)(e,{fallbackValue:[]}),n=r.length?r.findIndex((e=>e.id===t.id)):-1;return n>=0?r[n]=t:r.push(t),(0,u.H4)(e,r),r}(`${null!=p?p:l}_${s}`,o),h=!(null==f||!f.find((e=>e.content&&""!==e.content)));yield n({type:"setHadAnswer",payload:{hadAnswer:h}}),m||i>=a||(yield n({type:"formInfo/checkVersionUpdate"}))}r(11431);var p=r(60329),m=r(64049),f=r(20635),h=r(14042);function transform_answers_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function transform_answers_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?transform_answers_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):transform_answers_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function getRadioFinalAnswer(e){return transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{content:e.content.map(((t,r)=>({id:e.selectedOptionIds[r],title:t})))})}function getFileFinalAnswer(e){return transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{content:JSON.parse(e.content).map((e=>transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{status:2})))})}function getFileImageFinalAnswer(e){return transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{content:JSON.parse(e.content).map((e=>transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{status:2})))})}function getLocationFinalAnswer(e){return e.dataType!==f.g.POSITION?e:transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{content:JSON.parse(e.content)})}function getCommodityFinalAnswer(e){let t;try{t=JSON.parse(e.content)}catch(r){t=[]}return transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{content:t})}function getRecognitionFinalAnswer(e){const t=transform_answers_objectSpread({},e);let r;try{r=JSON.parse(e.content)}catch(n){r=[]}return t.content=r,t.type=h.c.RECOGNITION,delete t.originType,t}function getTableFinalAnswer(e,t){var r,n;const o=null==t?void 0:t.find((t=>e.id===t.id)),a=null==o||null===(r=o.qdata)||void 0===r?void 0:r.tableQuestionData,i=null!==(n=null==a?void 0:a.questions)&&void 0!==n?n:[];let s=[];try{s=JSON.parse(e.content)}catch(l){s=[]}return transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{content:s.map((e=>transformAnswers(e,i))).concat(new Array(Math.max(0,2-s.length)).fill([]))})}function getMatrixFinalAnswer(e){const t=JSON.parse(e.content).map((e=>transform_answers_objectSpread({},e)));return transform_answers_objectSpread(transform_answers_objectSpread({},e),{},{content:t})}function getDateTimeFinalAnswer(e,t){var r;if(!(0,c.dU)())return transform_answers_objectSpread({},e);const n=null==t?void 0:t.find((t=>t.id===e.id));return e.format===(null==n||null===(r=n.qdata)||void 0===r?void 0:r.format)&&transform_answers_objectSpread({},e)}function transformAnswers(e,t){const r={[h.c.RADIO]:getRadioFinalAnswer,[h.c.CHECKBOX]:getRadioFinalAnswer,[h.c.VOTE]:getRadioFinalAnswer,[h.c.FILE]:getFileFinalAnswer,[h.c.COMMODITY]:getCommodityFinalAnswer,[h.c.FILEIMAGE]:getFileImageFinalAnswer,[h.c.CANVAS_IMAGE]:getFileImageFinalAnswer,[h.c.LOCATION]:getLocationFinalAnswer,[h.c.TABLE]:getTableFinalAnswer,[h.c.MATRIX_CHECKBOX]:getMatrixFinalAnswer,[h.c.MATRIX_RADIO]:getMatrixFinalAnswer,[h.c.MATRIX_RATING]:getMatrixFinalAnswer,[h.c.DATE]:getDateTimeFinalAnswer,[h.c.TIME]:getDateTimeFinalAnswer,[h.c.SORT]:getRadioFinalAnswer};return(null==e?void 0:e.map((e=>{const n=r[e.type]||(e.originType===h.c.RECOGNITION?getRecognitionFinalAnswer:void 0);return n?n(e,t):e})).filter(Boolean))||[]}var y=r(70740),b=r(39507);function get_answer_data_list_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function get_answer_data_list_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?get_answer_data_list_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):get_answer_data_list_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function get_answer_data_to_push_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function get_answer_data_to_push_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?get_answer_data_to_push_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):get_answer_data_to_push_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=r(64619);function*resubmit_record_base(e,t){let{put:r}=t;yield r({type:"reSubmit",payload:{answerData:[]}})}var v=r(53782),_=r(66188),O=r(67538),S=r(9300),P=r(54969),C=(r(54370),r(5153),r(80566),r(50870),r(75397),r(18829),r(51429),r(25376),r(95864),r(94565),r(95073),r(65204),r(47072),r(98391),r(22727),r(19647),r(54734)),w=r(69271),I=r(41589),E=(r(13951),r(91117),r(41698),r(55294),r(9077),r(76999),r(91067),r(2126),r(18924),r(67699),r(18007),r(71675),r(99830),r(87768)),T=r(72870),N=r(74957),j=r(45607),D=r(60250),k=r(86432),x=r(81893),Z=r(4852),L=r(7038);function utils_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function utils_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?utils_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):utils_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const R={[y.oY.OVER_LIMIT]:C.Z.t("提交数量达到上限"),[y.oY.NOT_IN_PERIODIC]:C.Z.t("当前不在允许提交时间范围内"),[y.oY.NOT_IN_CYCLE]:C.Z.t("当前不在允许提交时间范围内"),[y.oY.SERVER_PREMISSIONS_ERROR]:C.Z.t("服务器繁忙，稍后重试"),[y.oY.SERVER_DATA_ERROR]:C.Z.t("服务器繁忙，稍后重试"),[y.oY.SERVER_TIMEOUT_ERROR]:C.Z.t("服务器繁忙，稍后重试"),[y.oY.OVER_SUBMIT_TIME]:C.Z.t("提交失败，收集已暂停"),[y.oY.SUBMIT_ILLEGAL_CONTENT]:C.Z.t("填写内容不合规，请重新填写提交"),[y.oY.DOC_HAS_BEEN_DELETE_10008]:C.Z.t("文档已被删除，可以联系相关创建者")},A={[y.oY.SUCCESS]:()=>C.Z.t("提交成功"),[y.oY.SUBMIT_NAME_REPEATED]:()=>C.Z.t("你已经提交过此收集表，请勿重复提交。"),[y.oY.NEED_TRY_RELOGIN_10004]:()=>C.Z.t("登录过期，请重新登录"),[y.oY.LOGIN_FAILED]:()=>C.Z.t("登录过期，请重新登录"),[y.oY.NEED_TRY_RELOGIN_11000]:()=>C.Z.t("登录过期，请重新登录"),[y.oY.ANONYMOUS_ENABLED]:()=>C.Z.t("管理员已开启匿名填写，请刷新后重新提交"),[y.oY.ANONYMOUS_NOT_ENABLED]:()=>C.Z.t("管理员已关闭匿名填写，请刷新后重新提交")};function reportFailedSubmit(e,t){(0,E.G)("fill","failure",{ver5:t?2:1,uin:window.clientVars.userId,toUin:window.clientVars.ownerId,ver6:(0,k.pm)("groupid")?1:T.isQQFormMiniProgram?2:"",ver7:e instanceof Error?e.message:JSON.stringify(e),abtest:"1"},void 0)}function*loadSnackbarGenerator(e,t){let{call:r}=t;const{default:n,mask:o}=yield r(D.OX);return{snackbar:n,mask:o}}function*showSimpleSnackbarGenerator(e,t){let{submitStatus:r}=e;const{snackbar:n}=yield*loadSnackbarGenerator(0,t);n.show({message:r})}function*showSimpleConfirmGenerator(e,t){const{confirm:r}=yield*function*loadConfirmGenerator(e,t){let{call:r}=t;const{default:n}=yield r(D.nP);return{confirm:n}}(0,t);r(e)}function*loadRefreshSnackbarGenerator(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;const{snackbar:n,mask:o}=yield*loadSnackbarGenerator(0,r);t&&o.open(),n.show({message:e,action:C.Z.t("刷新"),autoClose:!1,onClickAction:()=>(0,x.Oi)(window,(0,k.Vm)())})}function*loadLoginSnackbarGenerator(e,t){let{submitStatus:r,code:n}=e;(0,E.G)("account_info","log_expired",{opername:"doc_account_web",ver6:n});const{snackbar:o}=yield*loadSnackbarGenerator(0,t);o.show({message:r,autoClose:!1,closable:!0,action:C.Z.t("登录"),onClickAction:()=>{(0,Z.J)(N.e1,N.e1,!0)}})}const F=new Map([[y.oY.SUCCESS,function(e){var t,r,n;let{isAdmin:o,isPeriodic:a,anonymous:i,selectedRosters:s=[],formType:l}=e;const{tag:c}=(0,k.lN)();(0,E.G)("fill","suc_submit",utils_objectSpread(utils_objectSpread({ver5:o?2:1,uin:window.clientVars.userId,toUin:window.clientVars.ownerId,ver6:(0,k.pm)("groupid")?1:T.isQQFormMiniProgram?2:"",ver7:a?1:0,ver8:s.length&&null!==(t={[L.r.COMMON]:1,[L.r.STUDENT]:2,[L.r.EMPLOYEE]:3}[s[0].type])&&void 0!==t?t:0},c?{ver9:c}:null),{},{ver11:Number(i),ver12:l,abtest:"1"}),void 0),null===(r=window.log)||void 0===r||null===(n=r.report)||void 0===n||n.call(r,"fixReportNull",{url:window.location.href},{getRetCode:window.formDataGet,creatorId:window.clientVars.creatorId,ownerId:window.clientVars.ownerId,userId:window.clientVars.userId})}],[y.oY.STOP_COLLECTING,showSimpleSnackbarGenerator],[y.oY.SUBMIT_WITHOUT_PERMISSION,function*(e,t){let{submitStatus:r}=e;yield*loadRefreshSnackbarGenerator(r,!0,t)}],[y.oY.ANONYMOUS_ENABLED,function*(e,t){let{submitStatus:r}=e;yield*loadRefreshSnackbarGenerator(r,!1,t)}],[y.oY.ANONYMOUS_NOT_ENABLED,function*(e,t){let{submitStatus:r}=e;yield*loadRefreshSnackbarGenerator(r,!1,t)}],[y.oY.FORM_DELETED,showSimpleSnackbarGenerator],[y.oY.NO_MODIFY_RECORD_PRIV,showSimpleSnackbarGenerator],[y.oY.MAX_LIMIT,function*(e,t){let{submitStatus:r}=e;yield*showSimpleSnackbarGenerator({submitStatus:r},t);const{put:n}=t;yield n({type:"result/setNeedTips"})}],[y.oY.EXCEED_SUBMIT_TIMES,showSimpleSnackbarGenerator],[y.oY.SUBMIT_NAME_REPEATED,function*(e,t){let{submitStatus:r}=e;yield*showSimpleConfirmGenerator({context:r,onConfirmText:j.CS,onCancelText:""},t)}],[y.oY.MEMBER_NOT_IN_ROSTER,function*(e,t){let{submitStatus:r}=e;yield*showSimpleConfirmGenerator({context:r,onConfirmText:j.CS,onCancelText:"",onConfirm:()=>{document.dispatchEvent(new CustomEvent("restoreSubmitButtonStatus"))}},t)}],[y.oY.NEED_TRY_RELOGIN_10004,loadLoginSnackbarGenerator],[y.oY.LOGIN_FAILED,loadLoginSnackbarGenerator],[y.oY.NEED_TRY_RELOGIN_11000,loadLoginSnackbarGenerator]]);async function loadRefreshSnackbarAsync(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{default:r,mask:n}=await(0,D.OX)();t&&n.open(),r.show({message:e,action:C.Z.t("刷新"),autoClose:!1,onClickAction:()=>(0,x.Oi)(window,(0,k.Vm)())})}async function showSimpleSnackbarAsync(e){let{submitStatus:t}=e;const{default:r}=await(0,D.OX)();r.show({message:t})}async function showSimpleConfirmAsync(e){const{default:t}=await(0,D.nP)();t(e)}async function loadLoginSnackbarAsync(e){let{submitStatus:t}=e;const{default:r}=await(0,D.OX)();r.show({message:t,autoClose:!1,closable:!0,action:C.Z.t("登录"),onClickAction:()=>{(0,Z.J)(N.e1,N.e1,!0)}})}new Map([[y.oY.SUCCESS,function(e){var t,r,n;let{isAdmin:o,isPeriodic:a,anonymous:i,selectedRosters:s=[]}=e;const{tag:l}=(0,k.lN)();(0,E.G)("fill","suc_submit",utils_objectSpread(utils_objectSpread({ver5:o?2:1,uin:window.clientVars.userId,toUin:window.clientVars.ownerId,ver6:(0,k.pm)("groupid")?1:T.isQQFormMiniProgram?2:"",ver7:a?1:0,ver8:s.length&&null!==(t={[L.r.COMMON]:1,[L.r.STUDENT]:2,[L.r.EMPLOYEE]:3}[s[0].type])&&void 0!==t?t:0,abtest:"1"},l?{ver9:l}:null),{},{ver11:Number(i)}),void 0),null===(r=window.log)||void 0===r||null===(n=r.report)||void 0===n||n.call(r,"fixReportNull",{url:window.location.href},{getRetCode:window.formDataGet,creatorId:window.clientVars.creatorId,ownerId:window.clientVars.ownerId,userId:window.clientVars.userId})}],[y.oY.STOP_COLLECTING,showSimpleSnackbarAsync],[y.oY.SUBMIT_WITHOUT_PERMISSION,function(e){let{submitStatus:t}=e;loadRefreshSnackbarAsync(t,!0)}],[y.oY.ANONYMOUS_ENABLED,function(e){let{submitStatus:t}=e;loadRefreshSnackbarAsync(t)}],[y.oY.ANONYMOUS_NOT_ENABLED,function(e){let{submitStatus:t}=e;loadRefreshSnackbarAsync(t)}],[y.oY.FORM_DELETED,showSimpleSnackbarAsync],[y.oY.NO_MODIFY_RECORD_PRIV,showSimpleSnackbarAsync],[y.oY.MAX_LIMIT,showSimpleSnackbarAsync],[y.oY.EXCEED_SUBMIT_TIMES,showSimpleSnackbarAsync],[y.oY.SUBMIT_NAME_REPEATED,function(e){let{submitStatus:t}=e;showSimpleConfirmAsync({context:t,onConfirmText:j.CS,onCancelText:""})}],[y.oY.MEMBER_NOT_IN_ROSTER,function(e){let{submitStatus:t}=e;showSimpleConfirmAsync({context:t,onConfirmText:j.CS,onCancelText:"",onConfirm:()=>{document.dispatchEvent(new CustomEvent("restoreSubmitButtonStatus"))}})}],[y.oY.NEED_TRY_RELOGIN_10004,loadLoginSnackbarAsync],[y.oY.LOGIN_FAILED,loadLoginSnackbarAsync],[y.oY.NEED_TRY_RELOGIN_11000,loadLoginSnackbarAsync]]);function form_utils_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_utils_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_utils_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_utils_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const M=form_utils_objectSpread(form_utils_objectSpread({},A),{},{[y.oY.STOP_COLLECTING]:e=>{let{taskConfig:t}=e;return t?C.Z.t("试题已停止提交，填写者无法再提交内容。"):C.Z.t("收集表已停止收集，填写者无法再提交内容。")},[y.oY.SUBMIT_WITHOUT_PERMISSION]:e=>{let{taskConfig:t}=e;return t?C.Z.t("你在此试卷的权限已发生变化。"):C.Z.t("你在此收集表的权限已发生变化。")},[y.oY.FORM_DELETED]:e=>{let{taskConfig:t}=e;return t?C.Z.t("试题已被创建者删除"):C.Z.t("收集表已被创建者删除")},[y.oY.MAX_LIMIT]:e=>{let{taskConfig:t}=e;return t?C.Z.t("提交的试题总数量已达到最大限制，无法再提交。"):C.Z.t("提交的收集表总数量已达到最大限制，无法再提交。")},[y.oY.EXCEED_SUBMIT_TIMES]:e=>{let{taskConfig:t}=e;return t?C.Z.t("提交失败。该试题每人只能填写一份。"):C.Z.t("提交失败。该收集表每人只能填写一份。")},[y.oY.MEMBER_NOT_IN_ROSTER]:e=>{let{name:t}=e;return C.Z.t("{{name}}不在名单中，提交失败",{name:t})},[y.oY.NO_MODIFY_RECORD_PRIV]:()=>C.Z.t("没有修改记录的权限")});function getRadioCheckboxTempAnswer(e){let{answer:t,question:r}=e;const{content:n}=t,o=[],a=[];return n.forEach((e=>{let{id:t,title:n}=e;o.push(n||`选项 ${r.qdata.options.findIndex((e=>`${e.id}`==`${t}`))+1}`),a.push(t.toString())})),form_utils_objectSpread(form_utils_objectSpread({},t),{},{content:o,selectedOptionIds:a})}function getSortTempAnser(e){let{answer:t}=e;const{content:r}=t,n=r.map((e=>{let{title:t}=e;return t})),o=r.map((e=>{let{id:t}=e;return t}));return form_utils_objectSpread(form_utils_objectSpread({},t),{},{content:n,selectedOptionIds:o})}function getSelectTempAnswer(e){let{answer:t,question:r}=e;const n=t.content.map((e=>{var t;return null===(t=r.qdata.options.find((t=>t.title===e)))||void 0===t?void 0:t.id.toString()})).filter(Boolean);return n.length?form_utils_objectSpread(form_utils_objectSpread({},t),{},{selectedOptionIds:n}):null}function getSimpleTempAnswer(e){let{answer:t,userNameCheckStatus:r}=e;return form_utils_objectSpread(form_utils_objectSpread({},t),{},{securityStatus:r})}function getFileImageTempAnswer(e){let{answer:t}=e;const r=t.content.map((e=>({key:e.key,fileId:e.fileId,name:e.name,originName:e.originName||e.name,size:`${e.size}`,type:e.type})));return form_utils_objectSpread(form_utils_objectSpread({},t),{},{content:JSON.stringify(r)})}function getLocationTempAnswer(e){const{answer:t}=e;if(t.dataType!==f.g.POSITION)return t;const{content:r}=t;return form_utils_objectSpread(form_utils_objectSpread({},t),{},{content:JSON.stringify(r)})}function getFileTempAnswer(e){let{answer:t}=e;const r=form_utils_objectSpread({},t).content[0];return r.progress=0,form_utils_objectSpread(form_utils_objectSpread({},t),{},{content:JSON.stringify([{name:r.name,originName:r.originName||r.name,key:r.key,type:r.type,size:`${r.size}`}])})}function getCommodityTempAnswer(e){let{answer:t}=e;const r=t.content.map((e=>{const t=!e.price||e.price<=0?0:e.price,r=!e.quantity||e.quantity<=0?0:e.quantity;return form_utils_objectSpread(form_utils_objectSpread({},e),{},{price:t,quantity:r})}));return form_utils_objectSpread(form_utils_objectSpread({},t),{},{content:JSON.stringify(r)})}function getRecognitionTempAnswer(e){let{answer:t}=e;const r=form_utils_objectSpread({},t);return r.content=JSON.stringify(t.content),r.type=t.subType,r.originType=h.c.RECOGNITION,delete r.subType,r}function getTableTempAnswer(e){let{answer:t,question:r,userNameCheckStatus:n}=e;const o=r.qdata.tableQuestionData,a=new Set(o.sections[0].qlist);return form_utils_objectSpread(form_utils_objectSpread({},t),{},{content:t.content.map((e=>e.filter((e=>a.has(e.id)&&!(0,I.tr)(e))))).filter((e=>e.length)).map((e=>getTempAnswerData(o,e,n)))})}function getTempAnswerData(e,t,r){if(!t)return[];const n={[h.c.RADIO]:getRadioCheckboxTempAnswer,[h.c.CHECKBOX]:getRadioCheckboxTempAnswer,[h.c.VOTE]:getRadioCheckboxTempAnswer,[h.c.SELECT]:getSelectTempAnswer,[h.c.SIMPLE]:getSimpleTempAnswer,[h.c.FILE]:getFileTempAnswer,[h.c.COMMODITY]:getCommodityTempAnswer,[h.c.RECOGNITION]:getRecognitionTempAnswer,[h.c.FILEIMAGE]:getFileImageTempAnswer,[h.c.CANVAS_IMAGE]:getFileImageTempAnswer,[h.c.FILLIN]:getSimpleTempAnswer,[h.c.LOCATION]:getLocationTempAnswer,[h.c.TABLE]:getTableTempAnswer,[h.c.SORT]:getSortTempAnser};return t.map((t=>{var o,a;const i=null===(o=e.questions)||void 0===o?void 0:o.find((e=>e&&e.id===t.id));return(null!==(a=n[t.type])&&void 0!==a?a:e=>e.answer)({answer:t,question:i,userNameCheckStatus:r})})).filter(Boolean)}function base_prev_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_prev_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_prev_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_prev_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=r(78984),q=r(60940);const U=["formData","answerData","globalPadId","userNameCheckStatus"];function form_base_prev_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_base_prev_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_base_prev_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_base_prev_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function*form_base_prev(e,t){const{payload:r}=e,{call:n,select:o}=t,a=yield*function*base_prev(e,t){let{payload:r={}}=e,{put:n,select:o}=t;const a=Date.now();yield n({type:"setPostAnswerStatus",payload:{isPostAnswerStatus:!0}});const{isReSubmit:i,answerData:s,userNameCheckStatus:l}=yield o(d.sN),{formData:c}=yield o(d.rx),{isAdmin:u,tinyid:p,tinyId:m}=yield o(d._X),f=yield o(d.GZ),h=yield o(d.Ii),y=yield o(d.GS),{taskConfig:b}=c,g=yield o(d.Mo),v=i?"submit_again":"clk_submit";return(0,E.G)("fill",v,{abtest:"1"}),base_prev_objectSpread(base_prev_objectSpread({},r),{},{userNameCheckStatus:l,submitStartTime:a,formData:c,answerData:s,globalPadId:g,tinyId:p||m,isAdmin:u,isPeriodic:f,selectedRosters:y,taskConfig:b,anonymous:h,name:r.name||""})}(e,t),{formData:i,answerData:s,globalPadId:l,userNameCheckStatus:u}=a,m=(0,v.Z)(a,U);!function submitQuestionReport(e,t){t.forEach((t=>{const r=e.questions.find((e=>e.id===t.id)),n={[h.c.SIMPLE]:"fill_text",[h.c.RADIO]:"fill_radio",[h.c.CHECKBOX]:"fill_checkbox",[h.c.SELECT]:"fill_drop-down",[h.c.TIME]:{action:"fill_time",extra:()=>({ver5:r.qdata.subType})},[h.c.DATE]:{action:"fill_date",extra:()=>({ver5:r.qdata.subType})},[h.c.LOCATION]:{action:"fill_location",extra:()=>({ver5:"gps"===r.qdata.subType?2:1})},[h.c.TEMPERATURE]:{action:"fill_temperature",extra:()=>({ver5:"celsius"===r.qdata.unit?1:2})},[h.c.CANVAS]:"fill_sign",[h.c.CANVAS_IMAGE]:"fill_sign",[h.c.IMAGE]:"fill_image",[h.c.FILEIMAGE]:"fill_fileimage",[h.c.FILE]:"fill_file",[h.c.COMMODITY]:"fill_goods",[h.c.RECOGNITION]:{action:"fill_ocr",extra:()=>({ver5:{[w.m.HEALTHCODE]:1,[w.m.TRAVELCARD]:3}[t.type],ver6:r.qdata.area})},[h.c.CASCADER]:"fill_multi_level",[h.c.SCALE]:"fill_scale",[h.c.RATING]:"fill_grade",[h.c.SEGMENTATION]:"fill_section",[h.c.MATRIX_CHECKBOX]:"fill_matrix",[h.c.MATRIX_RADIO]:"fill_matrix",[h.c.MATRIX_RATING]:"fill_matrix",[h.c.TABLE]:"fill_table",[h.c.SCAN]:"fill_scan",[h.c.SORT]:"fill_sort"}[t.type];"string"==typeof n?(0,E.G)("fill",n):"object"==typeof n&&(0,E.G)("fill",n.action,n.extra())}))}(i,s);const f=getTempAnswerData(i,s,u);if(O.l.info("[submit form get tempAnswerData success]",{tempAnswerData:f}),c.v1){const{data:e,error:t}=yield n(S.TF,l,f,r);return form_base_prev_objectSpread({formType:B.c.EXAM,formData:i,answerData:s,globalPadId:l,tempAnswerData:f,submitSuccData:form_base_prev_objectSpread(form_base_prev_objectSpread({},e),{},{retcode:e.code,result:{seq:e.sid,paper_total_score:e.paper_total_score,modify_sid:e.modify_seq}}),submitFailError:t},m)}const y=(yield o(d.Ii))?form_base_prev_objectSpread(form_base_prev_objectSpread({},r),{},{user_info:form_base_prev_objectSpread(form_base_prev_objectSpread({},null==r?void 0:r.user_info),{},{type:P.f.ANONYMOUS})}):r,{prevCost:b,startTime:g}=_.Z.getCache(),C=Date.now(),I=(g?C-Number(g):0)+(Number(b)||0),T=I>36e5?0:I,{data:N,error:j}=yield n(p.T0,l,f,y,T);return form_base_prev_objectSpread({formType:(0,q.e)(i),formData:i,answerData:s,globalPadId:l,tempAnswerData:f,submitSuccData:N,submitFailError:j},m)}var G=r(42923),K=r(47028),V=r(52851),Q=r(33716),H=r(72952),Y=r(52304),z=r(83956);function*redirectToSubmitResultPage(e,t){var r,n,o;const{put:a,select:i}=t,s=yield i(d.Pw),l=yield i(d.nb),c=yield i(d.mQ);if(yield i(d.TM))return void(yield*function*redirectToClockResultPage(e,t){var r,n,o;const{put:a,select:i}=t;if(!(0,H.jB)(!1,!1))return void(yield a(V.routerRedux.replace(`/${Q.G.SUBMIT_RESULT}`)));const{mutiClock:s}=yield i(d.TM),{lastClock:l,clockNum:c}=yield i(d.tm),u=null!==(r=l.time)&&void 0!==r?r:"",p=(0,H.oW)(s,c+1,u);null===(n=window.wx)||void 0===n||null===(o=n.miniProgram)||void 0===o||o.redirectTo({url:p})}(0,t));const{dataset:u}=Y.hx[z.Td.FORM_COMMON_CONFIG](),{submitDelay:p}=u,m=!!(s&&(null!==(r=s.linkList)&&void 0!==r&&r.length||s.picSrc||s.remarkTitle));if(!(0,H.jB)(m,c))return void(yield a(V.routerRedux.replace(`/${Q.G.SUBMIT_RESULT}`)));const f=(0,H.MO)(!!l,p);null===(n=window.wx)||void 0===n||null===(o=n.miniProgram)||void 0===o||o.redirectTo({url:f})}var $=r(782),W=r(69841),X=r(86550),J=r(65158);function base_post_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_post_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_post_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_post_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function*form_base_post(e,t){var r,n;const{type:o,payload:a}=e,{put:i,select:s}=t,l=(null===(r=M[null===(n=a.submitSuccData)||void 0===n?void 0:n.retcode])||void 0===r?void 0:r.call(M,{taskConfig:a.taskConfig,name:a.name}))||"",p={type:o,payload:base_post_objectSpread(base_post_objectSpread({},a),{},{submitStatus:l})},{payload:{submitSuccData:f,submitFailError:h,submitStartTime:b,tinyId:v,globalPadId:S,taskConfig:P,retcodeErrorCallback:w}}=yield*function*base_post(e,t){let{payload:r}=e,{put:n,call:o}=t;const{submitSuccData:a,submitFailError:i,submitStatus:s,isAdmin:l,isPeriodic:c,anonymous:d,selectedRosters:u,formType:p}=r;if(i){const e=[J.F.TIMEOUT,J.F.CODE502].includes(null==i?void 0:i.message)?C.Z.t("网络异常提交失败，请重试"):C.Z.t("提交失败");return yield o(D.IG,e),reportFailedSubmit(i,l),yield n({type:"setPostAnswerStatus",payload:{isPostAnswerStatus:!1}}),O.l.error("[submit fail]",i),(0,X.$)(W.U.submitFailed,{dimensions:["submit-failed",`submit-error-message-${i instanceof Error?i.message:JSON.stringify(i)}`]}),{payload:r}}const f=F.get(a.retcode);if(f){O.l.info("[submit success]",{code:a.retcode}),(0,X.$)(W.U.submitSuccess,{dimensions:["submit-success",`submit-retcode-${a.retcode}`]});const e={data:a,isAdmin:l,submitStatus:s,anonymous:d,isPeriodic:c,selectedRosters:u,formType:p,code:a.retcode};(0,m.Qp)(f)?yield*f(e,{put:n,call:o}):f(e)}else{const{retcode:e}=a,t=R[e]||C.Z.t(`提交失败(错误状态码：${e})`);yield o(D.IG,t),reportFailedSubmit(a,l),O.l.info("[submit fail with error code]",{retcode:e,message:t});const r=y.Kg.includes(e),[n,i]=r?[W.U.submitSuccess,"submit-success"]:[W.U.submitFailed,"submit-failed"];(0,X.$)(n,{dimensions:[i,`submit-retcode-${e}`]})}return{payload:r}}(p,t);if(h)return void setTimeout((()=>{document.dispatchEvent(new CustomEvent("restoreSubmitButtonStatus"))}),2e3);if((null==f?void 0:f.retcode)===y.oY.SUCCESS){var I,E;const{groupUin:e,uinType:r,isFormMini:n,formData:o}=yield s(d.rx);if(K.d.roster.type>L.r.NOT_SET){const e={[L.r.STUDENT]:a.member,[L.r.COMMON]:{role:{role:0,name:a.name}}}[K.d.roster.type];G.E.formInfo.setRosterMembers(K.d.roster.members.concat(e))}if(c.v1){const e=(0,g.getBigPaperInfo)(void 0);e.status=g.BIGPAPER_STATE.FILLED,e.index=0,(0,g.setBigPaperInfo)(e,void 0)}$.Z.emitSubmission({globalPadId:S,groupId:e,isFormQQApp:Number(!!n),uinType:r,formType:Number(!!o.taskConfig)}),yield i({type:"result/updateOverallStatistics"}),yield i({type:"detail/updateLastestSubmitSidReducer",payload:{lastestSubmitSid:null===(I=f.result)||void 0===I?void 0:I.seq}}),yield i({type:"detail/setPaperTotalScoreReducer",payload:{paperTotalScore:null===(E=f.result)||void 0===E?void 0:E.paper_total_score}}),yield i({type:"setPostAnswerStatus",payload:{isPostAnswerStatus:!1}}),yield i({type:"formInfo/setHasCommited",payload:!0}),yield i({type:"setHadAnswer",payload:{hadAnswer:!1}}),P?c.v1&&(yield i({type:"getPaperAnswer",payload:{finalPage:!0}})):yield i({type:"getAnswerData"}),function removeCacheOfFormSubmitData(e,t){const r=`${t}_${e}`;(0,u.Vr)(r)}(S,v),_.Z.resetCalc(),yield*redirectToSubmitResultPage(0,t)}else null!=f&&f.retcode&&(null==w||w(null==f?void 0:f.retcode),setTimeout((()=>{document.dispatchEvent(new CustomEvent("restoreSubmitButtonStatus"))}),2e3));const T={timeConsuming:Date.now()-b,submitStatus:l};O.l.info(C.Z.t("form-fill 收集表提交结束"),T),yield i({type:"setPostAnswerStatus",payload:{isPostAnswerStatus:!1}})}const ee=function*base_consumer(e,t){let{select:r,put:n}=t;const{globalPadId:o,tinyid:a,tinyId:i}=yield r(d._X),s=`${null!=i?i:a}_${o}`,l=(0,u.FY)(s,{fallbackValue:[]});yield n({type:"setAnswerData",payload:{answerData:[...l]}})};var te=r(22082),re=r(1896),ne=r(45122),oe=r(79195),ae=r(98549),ie=r(71800);function check_name_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function check_name_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?check_name_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):check_name_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=r(36022),le=r(69396),ce=r(4869),de=r(4222);let{answerCache:ue}=se.C;function*getCacheAnswerData(e,t){let{select:r,put:n}=t;const{tinyid:o,tinyId:a}=yield r(d._X),i=`${null!=a?a:o}_${e.data.globalPadId}`,s=(0,u.FY)(i,{fallbackValue:[]});ue=[...s],yield n({type:"setAnswerData",payload:{answerData:ue}}),ue.some((e=>e.securityStatus))&&(yield n({type:"setUserNameCheckStatus",payload:{userNameCheckStatus:!0}}))}function get_form_data_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function get_form_data_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?get_form_data_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):get_form_data_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function*get_form_data_base(e,t){if(!(0,ce.isLogin)())return null;const r=(0,c.MC)(),{select:n,put:o,take:a,call:i}=t,s=yield n(d.rx);Object.keys(s.data).length||(yield a("formInfo/fetchFormData/@@end"));const l=yield*function*initData(e,t){let{select:r,put:n}=t;const o=yield r(d.rx);return(0,ce.isLogin)()||(yield n({type:"formInfo/setUnloginPreview",payload:!0})),o}(0,t),u=yield*function*noCanEditorBad(e,t){var r,n;let{put:o}=t;const a=null!==(r=(0,le.Z)(e,"data.privilegeAttribute.canFill"))&&void 0!==r?r:(0,le.Z)(e,"data.privilegeAttribute.can_fill"),i=null!==(n=(0,le.Z)(e,"data.privilegeAttribute.canEdit"))&&void 0!==n?n:(0,le.Z)(e,"data.privilegeAttribute.can_edit"),s=de.kZ.SPECIAL_AUTH_INFO&&"boolean"==typeof a?a:a||i;if(!s){var l;yield o({type:"formInfo/setPermission",payload:s});const t=null!==(l=(0,le.Z)(e,"data.privilegeAttribute.canRead"))&&void 0!==l?l:(0,le.Z)(e,"data.privilegeAttribute.can_read");if(!t)return!1;yield o({type:"formInfo/setUnloginPreview",payload:t})}const c=(0,le.Z)(e,"data.bad",null);return!(c&&2!==c&&!e.data.isOwner)}(l,t);if(!u)return;if(yield*function*checkLogin(e,t){let{put:r}=t;const{tinyid:n,tinyId:o}=e.data;(0,k.pm)("notLogin")||(yield r({type:"setLogin",payload:{fillIsLogin:!!(null!=o?o:n)}}),n||o||T.isQQ&&!T.isQQMiniProgram&&(0,x.Oi)(window,`https://xui.ptlogin2.qq.com/cgi-bin/xlogin?daid=536&appid=1600000931&s_url=${encodeURIComponent(location.href)}`))}(l,t),!l||l.retcode!==y.oY.SUCCESS)return void(yield i(D.IG,C.Z.t("数据请求失败。")));yield o({type:"setFillData",payload:get_form_data_base_objectSpread({},l.data)}),yield o({type:"updateInComplete",payload:!l.editMode});const p=yield n(d.jQ),m=yield n(d.Bg),f=yield n(d.bn),h=yield n(d.vh),b=(0,le.Z)(l,"data.pub",0);return h&&(yield o({type:"fetchPubFormData"})),m||0!==b?(yield*function*setLoadingStatus(e,t){let{isOwner:r,isPreView:n,sid:o,isReSubmit:a}=e,{put:i}=t;(r&&0!==n||0!==o||a)&&(yield i({type:"setIsInit",payload:{recordDataLoad:!0}}))}({isOwner:m,isPreView:r,sid:p,isReSubmit:f},t),yield*function*setUnPreviewData(e,t){let{isPreView:r,sid:n,data:o}=e;r||0!==n||(yield*getCacheAnswerData(o,t))}({isPreView:r,sid:p,data:l},t),{sid:p,data:l}):void 0}var pe=r(82937),me=r(35463),fe=r(35548);var he=r(80203);function get_paper_answer_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function get_paper_answer_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?get_paper_answer_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):get_paper_answer_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=r(66426);function update_matched_answer_data_form_utils_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function update_matched_answer_data_form_utils_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?update_matched_answer_data_form_utils_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):update_matched_answer_data_form_utils_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function reportSmartFill(e){(0,E.G)("smart_fill","smart_memory",{obj2:e||"",ver5:2},void 0)}var be=r(5098);const ge={getAnswerData:function*get_answer_data_base(e,t){var r,n;let{payload:o}=e,{call:a,put:i,select:s}=t,l=yield s(d.jQ);if(null!=o&&o.sid&&(l=o.sid),0===l)return;const c=yield s(d.Mo),u=yield s(d.UI),{data:f}=yield a(p._z,c,l);if(!(0,m.PO)(f)||f.retcode!==y.oY.SUCCESS||null===(r=f.result)||void 0===r||!r.record)return;let h;try{h=JSON.parse(f.result.record.answers)}catch(g){h=[]}null!==(n=h)&&void 0!==n&&n.length&&(h[0].del=f.result.record.record_status);let b=transformAnswers(h,u);"fillAgain"===(null==o?void 0:o.type)&&(b=(0,be.E)(b)),yield i({type:"detail/setAnswerdataReducer",payload:{answerData:b}}),yield i({type:"detail/setPostInfoReducer",payload:(0,be.w)(f.result.record)}),yield i({type:"detail/updateSidReducer",payload:{sid:l}})},reSubmitRecord:resubmit_record_base};function fill_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fill_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fill_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fill_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ve=fill_form_base_objectSpread(fill_form_base_objectSpread({},ge),{},{checkName:function*check_name_form_base(e,t){let{payload:r}=e,{call:n,put:o,select:a}=t;if(!r)return;const i=yield a(d.Mo),{data:s}=yield n(S.ym,i,r.content);(null==s?void 0:s.code)===y.oY.SUCCESS&&(yield o({type:"setUserNameCheckStatus",payload:{userNameCheckStatus:null==s?void 0:s.status}}),yield o({type:"answerQuestion",payload:check_name_form_base_objectSpread(check_name_form_base_objectSpread({},r),{},{securityStatus:null==s?void 0:s.status})}))},getFormData:function*get_form_data_form_base(e,t){let{payload:r}=e;const n=yield*get_form_data_base(0,t);if(!n)return;const{sid:o,data:a}=n,{put:i}=t;yield*function*getBigPaperAnswerData(e,t){c.v1&&(0,g.isFillingBigPaper)()&&(yield*getCacheAnswerData(e,t))}(a,t),0===o&&c.v1&&(yield i({type:"result/getSeqs"})),yield i({type:"initAutoFillStatus"}),T.isMobile&&i({type:"setIsInit",payload:{formDataLoad:!0}})},getMatchedAnswerList:function*get_matched_answer_list_form_base(e,t){const{name:r,matchedAnswerList:n}=yield*function*get_matched_answer_list_base(e,t){let{payload:r}=e,{call:n,select:o}=t;if(!(0,ce.isLogin)())return{};const a=yield o(d.OV),i=yield o(d.VD);if(!a.length)return{};if(1!==i)return{};const s=r.title.replace(/' '/g,""),l=(0,fe.e)(a,s);if(!l)return r.callback({id:r.id,value:[]}),{};const c=yield o(d.ul),u=(0,me._j)(l,c),p=pe.Ez.getUserAttributeValueByName.bind(pe.Ez);let m=yield n(p,u,[]);return Array.isArray(m)||(m=(0,oe.iB)(m,[m])),{name:u,matchedAnswerList:m,matchedTitle:l}}(e,t);if(!r)return;const{payload:o}=e,{put:a}=t;o.callback({id:o.id,value:n}),yield a({type:"setKVCache",payload:{KVCache:{name:r,value:n}}})},getPaperAnswer:function*get_paper_answer_form_base(e,t){let{payload:r={}}=e,{call:n,put:o,select:a}=t;const i=yield a(d.jQ);if(0===i)return;const s=yield a(d.Ko),{globalPadId:l,taskConfig:c}=s,{data:u}=yield n(S.Es,l,i);if(!u||u.code!==y.oY.SUCCESS||!u.data)return;let p;try{p=JSON.parse(u.data)}catch(f){return void O.l.error("[get bigpaper answer error]")}let m=transformAnswers(p);if(r.firstPage&&c.fixedInfo){const{sections:[{qlist:e}]}=s;m=m.filter((t=>e.includes(t.id))),yield o({type:"setAnswerData",payload:{answerData:m}});for(let t=0,r=m.length;t<r;t++)yield o({type:"answerQuestion",payload:m[t]})}else if(r.finalPage){yield o({type:"detail/setAnswerdataReducer",payload:{answerData:m}});const{paperResult:e}=(0,he.verifyAnswer)(s,m.reduce(((e,t)=>{let{id:r,content:n}=t;return get_paper_answer_form_base_objectSpread(get_paper_answer_form_base_objectSpread({},e),{},{[r]:n})}),{}));yield o({type:"detail/setPassInfoReducer",payload:{pass:u.pass,passRank:u.pass_rank,secondPassRank:u.second_pass_rank,paperTotalScore:u.score,paperResults:e}})}},initAutoFillStatus:function*init_auto_fill_status_form_base(e,t){let{call:r,put:n}=t;const o=yield r(pe.Ez.getUserAttributeValueByName.bind(pe.Ez),ye._.FORM_AUTO_FILL),a="number"!=typeof o?parseInt(`${o}`,10):o;yield n({type:"setAutoFillStatus",payload:{autoFillStatus:Number.isNaN(a)?1:a}})},updateAutoFillStatus:function*update_auto_fill_status_form_base(e,t){let{payload:r}=e,{call:n,select:o}=t;const{autoFillStatus:a,autoFillStatusCache:i,smartMatchList:s}=yield o(d.sN),{answerObj:l,questions:c}=r,u=(0,fe.t)(s,l,c);if(-1===a&&u){const e=""+(!0===i?1:0);yield n(pe.Ez.forceUpdateUserAttributes.bind(pe.Ez),[{name:ye._.FORM_AUTO_FILL,value:e}])}},updateMatchedAnswerData:function*update_matched_answer_data_form_base(e,t){let{call:r,select:n}=t;const o=yield n(d.OV),a=yield n(d.Ub),i=yield n(d.ul),s=yield n(d.Ko),{submitArray:l,questions:c,roleInfo:u}=e.payload,p=l.filter((e=>e.type===h.c.SIMPLE));if(!o.length)return void reportSmartFill(s.title);let m=p.map((e=>function getMatchedObject(e,t,r){const[n]=t.filter((t=>t&&t.id===e.id)),{title:o}=n;return{title:o,content:String(e.content).trim(),matchedTitle:(0,fe.e)(r,o)}}(e,c,o)));u&&(m=m.concat(function getRosterMatchedObject(e,t){const{title:r,content:n}=e;return{title:r,content:n,matchedTitle:(0,fe.e)(t,r)}}(u,o)));const f=m.filter((e=>function getMatchedObjWithValidTitleAndContent(e){return!!e.matchedTitle&&e.content}(e))).reduce(((e,t)=>function getExceptMatchObjArray(e,t){const r=e.filter((e=>e.matchedTitle!==t.matchedTitle)),n=e.filter((e=>e.matchedTitle===t.matchedTitle));return n.length?r.push(Object.assign({},t,{content:n.map((e=>e.content)).flat().concat(t.content)})):r.push(update_matched_answer_data_form_utils_objectSpread(update_matched_answer_data_form_utils_objectSpread({},t),{},{content:[t.content]})),r}(e,t)),[]).map((e=>function getKeyValObjectFormMatchedObject(e,t,r){const n=(0,me._j)(e.matchedTitle,t);let{content:o}=e;Array.isArray(o)||(o=[o]);let a=r[n];return a?(a=a.filter((e=>-1===o.indexOf(e))),a=o.concat(a).slice(0,5)):a=o,{name:n,value:a}}(e,i,a)));f.length&&(yield r(pe.Ez.forceUpdateUserAttributes.bind(pe.Ez),f)),reportSmartFill(s.title)},updateMatchedAnswerList:function*update_matched_answer_list_form_base(e,t){let{payload:r}=e,{call:n,select:o,put:a}=t;const{title:i,value:s}=r;if(!i)return;const l=yield o(d.ul),c=yield o(d.OV),u=(0,fe.e)(c,i),p=(0,me._j)(u,l);yield n(pe.Ez.forceUpdateUserAttributes.bind(pe.Ez),[{name:p,value:s}]),yield a({type:"setKVCache",payload:{KVCache:{value:s,name:p}}}),T.isMobile&&a({type:"setHadAnswer",payload:{hadAnswer:!0}})}});function fill_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fill_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fill_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fill_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _e=fill_form_consumer_objectSpread(fill_form_consumer_objectSpread({},ve),{},{answerQuestion:answer_question_form_consumer,getAnswerDataList:function*get_answer_data_list_form_consumer(e,t){let{payload:r}=e,{call:n,put:o,select:a}=t;const{sidList:i,uidList:s}=r;if(null==i||!i.length||null==s||!s.length)return;const l=new Array(i.length),c=yield a(d.Mo);for(const d of i){var u;const{data:e}=yield n(p._z,c,d),t=null==i?void 0:i.indexOf(d);if(!(0,m.PO)(e)||e.retcode!==y.oY.SUCCESS||null===(u=e.result)||void 0===u||!u.record)continue;try{const t=transformAnswers(JSON.parse(e.result.record.answers));e.result.record.answers=JSON.stringify(t)}catch(f){}const r=get_answer_data_list_form_consumer_objectSpread(get_answer_data_list_form_consumer_objectSpread({},(0,b.XM)(e.result.record)),{},{data:e.result.record.answers});l[t]={sid:d,data:r}}yield o({type:"detail/setAnswerdataListReducer",payload:{answerDataList:l}})},getAnswerDataToPush:function*get_answer_data_to_push_form_consumer(e,t){var r,n;let{payload:o}=e,{call:a,put:i,select:s}=t;const{direction:l,sid:c}=o;if(!c)return;const u=yield s(d.Mo),f=yield s(d.dr),{data:h}=yield a(p._z,u,c);if(!(0,m.PO)(h)||h.retcode!==y.oY.SUCCESS||null===(r=h.result)||void 0===r||!r.record)return;try{const e=transformAnswers(JSON.parse(h.result.record.answers));h.result.record.answers=JSON.stringify(e)}catch(v){}const g=get_answer_data_to_push_form_consumer_objectSpread(get_answer_data_to_push_form_consumer_objectSpread({},(0,b.XM)(h.result.record)),{},{data:null!==(n=h.result.record.answers)&&void 0!==n?n:"[]"});1===l?f.push({sid:c,data:g}):f.unshift({sid:c,data:g}),yield i({type:"detail/setAnswerdataListReducer",payload:{answerDataList:f}})},reSubmitRecord:function*resubmit_record_form_consumer(e,t){if(c.v1){var r,n;const e=(0,g.getBigPaperInfo)();e.index=1,e.status=g.BIGPAPER_STATE.FILLING,(0,g.setBigPaperInfo)(e);const o=yield t.select(d.Ko),a=yield t.select(d.fp),i=null!==(r=null===(n=o.sections[0])||void 0===n?void 0:n.qlist.reduce(((e,t)=>{const r=a.find((e=>{let{id:r}=e;return r===t}));return r?e.concat(r):e}),[]))&&void 0!==r?r:[];for(const r of i)yield answer_question_form_consumer({payload:r,type:""},t);return yield t.put({type:"reSubmit",payload:{answerData:i}}),void(yield t.put({type:"formInfo/getBigPaperData"}))}yield*resubmit_record_base(0,t)},submitAnswerData:function*submit_answer_data_form_base(e,t){const r=yield*form_base_prev(e,t),n={type:e.type,payload:r};yield*form_base_post(n,t)},updateAnswerData:ee,fetchPubFormData:function*fetch_pub_form_data(e,t){let{call:r,put:n,select:o}=t;const{rev:a}=ie.Q.getRevAndPos(),{pub:i}=yield o(d._X),s=yield o(d.vh);if(!i||!a||!s)return;if(i===a){const e=yield o(d.Ko);return void(yield n({type:"setPubFormData",payload:{pubFormData:e}}))}const{data:l,error:c}=yield r(re.Bl,(0,te.e)().urlId,ne.Kg.PUB);if(c||!l||l.retcode!==y.oY.SUCCESS||!l.data)return;const{initialAttributedText:u}=l.data,p=(0,oe.iB)(u.text,{}),m=(0,ae.EA)(p);yield n({type:"setPubFormData",payload:{pubFormData:m}})}}),Oe=_e;const Se={setup(e){let{dispatch:t}=e;!function dispatchGetFormData(e){e({type:"getFormData",payload:{isFirstScreenRouting:!0}})}(t),document.addEventListener("visibilitychange",(()=>{!function dispatchFormInfoCheckVersionUpdate(e){e({type:"formInfo/checkVersionUpdate"})}(t)}))}};function models_fill_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_fill_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_fill_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_fill_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Pe=models_fill_form_consumer_objectSpread(models_fill_form_consumer_objectSpread({},{namespace:"fill"}),{},{state:a,reducers:l,effects:Oe,subscriptions:Se})},30095:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ge});var n=r(64649);var o,a,i,s,l,c=r(88559);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const d=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{data:{},formData:{},checkAuthIsApply:!1,hasEdited:!1,globalPadId:"",cgicode:0,retcode:0,maxLimit:1e5,isGrey:!0,report:{send:()=>{},isMock:!0},groupName:"",groupUin:0,formAioTip:!1,endTime:0,newForm:!1,formCapacity:0,formFromQQExcelFile:!1,formDataLoaded:!1,formStatus:"init",editMode:!1,showMode:1,isOwner:!1,isAdmin:!1,isViewer:!1,permission:!0,isUnloginPreview:!1,hasCommited:!1,totalScore:0,pubrevlimit:1e4,editPubRevInterval:3e3,sequenceListScrollHeight:0,resultListScrollHeight:0,titleVipColor:null===(o=window)||void 0===o||null===(a=o.basicClientVars)||void 0===a||null===(i=a.docInfo)||void 0===i||null===(s=i.personalizeInfo)||void 0===s||null===(l=s.titleColor)||void 0===l?void 0:l.color,ownerVip:c._o,selfVip:c.V0,initVip:!1});var u=r(69396),p=r(54734),m=r(67538),f=r(11331),h=r(67010),y=r(82275),b=r(63406),g=r(87768),v=r(79195),_=r(51336),O=r(72556),S=r(45122);function base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const P=[p.Z.t("无标题收集表"),p.Z.t("创建打卡"),p.Z.t("空白"),p.Z.t("无标题试题")];function initClientVars(e){const t=e;P.includes(e.title)&&0===e.pub&&1===e.rev&&(t.isUserChangeTitle=!1),window.clientVars=window.clientVars||{},window.clientVars=base_consumer_objectSpread(base_consumer_objectSpread(base_consumer_objectSpread({},window.clientVars),t),{},{padId:e.localPadId,padTitle:e.title}),function initShareInfo(){window.clientVars=window.clientVars||{};const e={shareLink:(0,h.getShareLink)(),shareTitle:window.clientVars.title};window.clientVars=base_consumer_objectSpread(base_consumer_objectSpread({},window.clientVars),e)}()}let C=null;const w={setFormInfo(e,t){var r,n,o,a;let{payload:i}=t;m.l.debug("get forminfo:",i),m.l.error("get forminfo:",{tinyid:i.tinyid,privilegeAttribute:i.privilegeAttribute,policy:i.policy,pub:i.pub,rev:i.rev,pos:i.pos,isOwner:i.isOwner,globalPadId:i.globalPadId});const s=(0,u.Z)(i,"initialAttributedText.text",""),l=s?JSON.parse(s):{},c=l.questions?l:base_consumer_objectSpread({},O.t),d=Date.now(),{cardConfig:h,sequenceConfig:P}=c;(()=>{if(h){(0,y.EV)(h);const{endTime:e=0,needSetNick:t}=h;c.isClosed=1e3*e<d,t&&document.dispatchEvent(new CustomEvent("getMyClockResult"))}P&&(0,y.MY)(P)})(),c.questions&&(c.questions=c.questions.map((e=>base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{answerInfo:e.answerInfo?base_consumer_objectSpread(base_consumer_objectSpread({},e.answerInfo),{},{rightOptionIds:e.answerInfo.rightOptionIds||[]}):null}))));const{title:w,isOwner:I}=i,E=function setNavigationTitle(e,t){const r=p.Z.t("无标题收集表");return(0,_.Dm)(t&&(0,b.MC)()?p.Z.t("预览收集表 - 腾讯文档"):`${e||r}`),r}(w,I);window.tempData={formInfo:i};const T=base_consumer_objectSpread(base_consumer_objectSpread({},i),{},{remoteFormData:c});initClientVars(base_consumer_objectSpread({},T));let N=!1;(()=>{if(C)return;const{rev:e,pub:t}=i;C=t?t===e?"clean":"draft":"init",((e,t)=>{if(!e&&!t&&w===E||c.isNewForm||!e&&i.relative){N=!0;try{const e=document.createEvent("CustomEvent");e.initEvent("isNewForm"),document.dispatchEvent(e)}catch(r){}}})();I||(i.title===S.iu&&(0,g.G)("fill","no_title"),i.title===S.t0&&(0,g.G)("fill","blank_title"))})(),c.cardConfig&&setTimeout((()=>{document.dispatchEvent(new CustomEvent("isClockForm",{detail:{config:c.cardConfig}}))}),100);const j=c.taskConfig?(0,f.v)(c):0;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{data:base_consumer_objectSpread(base_consumer_objectSpread({},i),{},{relativeUrl:null===(r=i.relative)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.doc_url,creatorDomain:null!==(o=i.creatorDomain)&&void 0!==o?o:i.createDomain,domainId:null!==(a=i.domainId)&&void 0!==a?a:i.createDomain}),formData:c,isOwner:i.isOwner,isAdmin:i.isAdmin,isViewer:1===i.rightFlag,formDataLoaded:!0,formStatus:C,editMode:"clean"!==C,showCertificationIcon:!(0,v.Sd)(null==i?void 0:i.official_auth_info),newForm:N,totalScore:j,policy:i.policy})},setShowCertificationIcon(e,t){let{payload:r}=t;const{showCertificationIcon:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{showCertificationIcon:n})},setWeChatOfficailInfo(e,t){let{payload:r}=t;const{data:n}=e;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{data:base_consumer_objectSpread(base_consumer_objectSpread({},n),r)})},setFormDataFromEdit(e,t){let{payload:r}=t;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{formData:r})},setHasCommited(e,t){let{payload:r}=t;const n=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{hasCommited:n})},setPermission(e,t){let{payload:r}=t;e.permission=r},setUnloginPreview(e,t){let{payload:r}=t;e.isUnloginPreview=r},setRetcode(e,t){let{payload:r}=t;e.retcode=r},setFormTitle(e,t){var r;let{payload:n}=t;const o=`${n.title||e.data.title||p.Z.t("无标题收集表")}`;return(0,_.Dm)(o),null!==(r=window)&&void 0!==r&&r.clientVars&&(window.clientVars.shareTitle=o),base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{data:base_consumer_objectSpread(base_consumer_objectSpread({},e.data),{},{title:n.title})})},setPub(e){e.data&&!e.data.pub&&(e.data.pub=1,document.dispatchEvent(new CustomEvent("formHadPublished")))},updateAuthState(e,t){let{payload:r}=t;e.checkAuthIsApply=r||!1,m.l.debug("checkAuthIsApply:",r)},authApplyCheckDone(e,t){let{payload:r}=t;e.checkAuthIsApply=!!r,m.l.debug("authApplyCheckDone:",r)},setFormStatusByUndoredo(e,t){let{payload:r}=t;"clean"===C&&(e.formStatus=r.hasUndo?"draft":"clean")},setFormStatusByPublish(e){e.editMode=!1,e.formStatus="clean",C="clean",e.hasEdited&&(e.hasEdited=!1)},setFormEditMode(e,t){let{payload:r}=t;e.editMode=!!r},report(e,t){var r;let{payload:n}=t;null===(r=e.report)||void 0===r||r.send(n)},setDocState(e){e.data.docStatus=0},setShowMode(e,t){let{payload:r}=t;e.showMode=r},setGroupInfo(e,t){let{payload:r}=t;r&&Object.keys(r).length&&(e.uinType=r.uinType,e.groupUin=r.groupId,e.groupName=r.groupname,e.isFormMini=r.isFormMini,e.formAioTip=r.formAioTip)},setAioTips(e){e.formAioTip=!1},setFormFormQQExcelFile(e,t){let{payload:r}=t;r&&(e.formFromQQExcelFile=r)},changePolicy(e,t){let{payload:r}=t;e.policy=r},setPubRevLimit(e,t){let{payload:r}=t;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{pubrevlimit:r.pubrevlimit})},setEditPubRevInterval(e,t){let{payload:r}=t;const{editPubRevInterval:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{editPubRevInterval:n})},setModify(e,t){let{payload:r}=t;const{modify:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{modify:n})},setSequencePageScrollHeight(e,t){let{payload:r}=t;const{height:n,id:o}=r,a="sequence"===o?{sequenceListScrollHeight:n}:{resultListScrollHeight:n};return base_consumer_objectSpread(base_consumer_objectSpread({},e),a)},switchSetVipColorReducer(e,t){let{payload:r}=t;const{titleVipColor:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{titleVipColor:n})},setPadOwnerVipReducer(e,t){let{payload:r}=t;const{ownerVip:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{ownerVip:n})},setSelfVipReducer(e,t){let{payload:r}=t;const{selfVip:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{selfVip:n,initVip:!0})},setFormCapacity(e,t){let{payload:r}=t;const{formCapacity:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{formCapacity:n})},updatePubReducer(e,t){let{payload:r}=t;e.data.pub=r}};function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const I=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},w);var E=r(65686);var T=r(72870),N=r(81721),j=r(86432),D=r(22082),k=r(70740),x=r(1896),Z=r(71800),L=r(98549),R=r(9410),A=r(81893);function fetch_form_data_base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fetch_form_data_base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fetch_form_data_base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fetch_form_data_base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let F=!1,M=0;var B=r(72598),q=r(41677),U=r(60250),G=r(15995);function cloneFormDataFailed(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{retcode:r,message:n,msg:o,traceid:a,traceId:i}=t,s=null!==(e={312002:p.Z.t("生成副本失败，请联系管理员更新产品授权。")}[r])&&void 0!==e?e:p.Z.t("生成副本失败 [{{retcode}}]",{retcode:r});if(window.mqq)(0,U.IG)(s),r&&k.i8.includes(Number(r))&&(0,G.s)(r,"detail",{apprec1:"copy",apprec2:"form"});else{const e={isFinished:!0,title:t.title,iconType:window.clientVars.padType,retcode:t.retcode||-1,failImg:{src:"generator_fail"},tips:p.Z.t("生成副本失败，请稍后重试。")};localStorage.setItem("jump_generatecopy",JSON.stringify(e))}m.l.error("Fail to generate copy",i||a||o||n)}function cloneFormDataDone(e,t){const{url:r,domainId:n,localPadId:o}=function preTreatFormData(e){var t,r,n,o,a;return{url:null!==(t=e.docUrl)&&void 0!==t?t:e.doc_url,domainId:null!==(r=null===(n=e.docId)||void 0===n?void 0:n.domainId)&&void 0!==r?r:e.doc_id.domain_id,localPadId:null!==(o=null===(a=e.docId)||void 0===a?void 0:a.padId)&&void 0!==o?o:e.doc_id.pad_id}}(e);if(T.isTimOrQQ&&!T.isQQBrowser){try{(0,q.G)("ADD",{domainId:n,localPadId:o,padType:"form",title:e.title||p.Z.t("副本-{{title}}",{title:t}),url:r,list_item_type:1})}catch(a){console.error(a)}let i=r.replace("/","/");const s=(0,j.pm)("disableReturnList");i=/^https:\/\//.test(i)?i:`https:${i}`,i=(0,N.At)(i,{newPad:1,newPadType:"clone",disableReturnList:s?1:0}),(0,y.BL)(i)}else!function jumpPage(e){var t;const r=(0,j.pm)("qqapp"),n="form"===r||"clock"===r||"jielong"===r,o=null!==(t=e.docUrl)&&void 0!==t?t:e.doc_url,a={isFinished:!0,title:e.title,iconType:"form",retcode:e.retcode,url:n?`${o}?qqapp=form`:o};localStorage.setItem("jump_generatecopy",JSON.stringify(a)),(0,A.lY)({url:o,replace:!T.isTencentDocsApp})}(e)}r(11431),r(5735),r(32904);var K=r(36443);var V=r(4222);const dataSelect=e=>e.formInfo.data||{};var Q=r(36022);let{checkVersionUpdateTimeoutFlag:H,hasNoticeVersionUpdate:Y}=Q.C;function init_local_data_base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function init_local_data_base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?init_local_data_base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):init_local_data_base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const base_consumer_dataSelect=e=>e.formInfo.data;var z=r(11380),$=r(9300),W=r(64619);var X=r(32944);var J=r(25748),ee=r(99537);var te=r(15342);function get_self_vip_info_base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var re=r(48976),ne=r(55515);var oe=r(18834);var ae=r(43802);const ie={changeTitle:function*change_title_base_consumer(e,t){let{select:r,put:n}=t;const{title:o}=yield r(E._X);o&&(yield n({type:"setFormTitle",payload:{title:o}}),document.title=o)},fetchFormData:function*fetch_form_data_base_consumer(e,t){let{payload:r}=e,{put:n,call:o}=t;R.u.ready();const{formInfo:a}=window.preData,i=Date.now(),s=(0,j.pm)("rtkey"),l=(0,j.pm)("confirmed"),c=!F&&!r||b.v1?a:yield function*(){const e="requestHead"===r?S.Kg.HEAD:S.Kg.PUB;return(yield o(x.Bl,(0,D.e)().urlId,e,s,l)).data}();if(c){if(function requestOk(e){return e.retcode===k.oY.SUCCESS&&e.data}(c)){var d;let e=c.data;const{rev:t,pos:r}=e;Z.Q.setRevAndPos(t,r);const{cgicode:o}=c,a=function checkNeedReturn(e){const{isAdmin:t}=e;return!t&&(0,b.MC)()?((0,A.Oi)(window,(0,N.oW)(window.location.href,"pre")),!0):!(t||!(0,j.pm)("sid")||((0,A.Oi)(window,(0,N.oW)(window.location.href,"sid")),0))}(e);if(a)return;b.v1||(e=0===e.pub?(0,L.ID)(c.data):(0,L.EA)(e)),yield n({type:"setFormInfo",payload:fetch_form_data_base_consumer_objectSpread(fetch_form_data_base_consumer_objectSpread({},e),{},{padId:e.localPadId,cgicode:o})}),yield n({type:"setShowCertificationIcon",payload:{showCertificationIcon:!(0,v.Sd)(null===(d=e)||void 0===d?void 0:d.official_auth_info)}}),T.isMobile&&F&&i-M>1e3&&(yield n({type:"fill/getFormData"}));(()=>!F)()&&(yield n({type:"authApplyCheck"}))}yield n({type:"setRetcode",payload:c.retcode}),M=Date.now(),F=!0}},cloneFormData:function*clone_form_data_base_consumer(e,t){let{payload:r}=e,{call:n,select:o}=t;const{data:a}=yield n(B.fm,r),{title:i}=yield o(E._X);(null==a?void 0:a.retcode)===k.oY.SUCCESS?cloneFormDataDone(a,i):cloneFormDataFailed(a)},createDocNew:function*create_doc_new_base_consumer(e,t){var r;let{payload:n}=e,{call:o}=t;const{data:a}=yield o(B.wd,n);if(!a)return;const i=new URL(`https:${null!==(r=a.docUrl)&&void 0!==r?r:a.doc_url}`),s=(0,j.aF)();s&&(i.searchParams.set("route_ip",s.routeIp),i.searchParams.set("room_route_ip",s.roomRouteIp)),(0,A.wB)(i.href)},authApplyCheck:function*auth_apply_check_base_consumer(e,t){let{put:r,call:n,select:o}=t;const a=yield o(E.dg),{data:i}=yield n(K.nQ,a);if(!i)return void(yield r({type:"authApplyCheckDone",payload:!1}));const s=[k.oY.NO_PERMISSION,k.oY.NO_PERMISSION2,k.oY.LOGIN_FAILED].includes(i.retcode);yield r({type:"authApplyCheckDone",payload:s})},changeFormTitle:function*change_form_title_base_consumer(e,t){let{payload:r}=e,{call:n,put:o,select:a}=t;const i=yield a(dataSelect),{padId:s="",domainId:l=""}=function getId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{padId:e.padId,domainId:e.domainId}}(i),c=function getNewFormTitle(e){return e.title||S.iu}(r),{changeFromList:d}=r,{initCard:u}=r;if(d)return yield o({type:"setFormTitle",payload:{title:c}}),void function setClientVarsByBool(){window.clientVars.isUserChangeTitle||(window.clientVars.isUserChangeTitle=!0)}();const m=yield n(B.OH,{title:c,domain_id:l,pad_id:s}),{data:f,error:h}=m||{};h&&console.error("changeFormTitle:error",h),!function isSuccess(e){return e&&0===e.retcode}(f)?!function isValidTitle(e){return e&&(12e3===e.retcode||12e3===e.cgicode)}(f)?(!function setClientVarsByType(e){"/initHeaderTitle"===e&&(window.clientVars.isUserChangeTitle=!1)}(r.type),V.i0.CHANGE_TITLE_TOAST_SHOW&&(yield n(U.IG,p.Z.t("修改标题失败。")))):yield n(U.IG,p.Z.t("请修改标题后重试")):(document.title=c,yield o({type:"setFormTitle",payload:{title:c}}),function setClientVarsByMultipleBool(e){window.clientVars.isUserChangeTitle||e||(window.clientVars.isUserChangeTitle=!0)}(u))},checkVersionUpdate:function*check_version_update_base_consumer(e,t){let{call:r,select:n}=t;const o=yield n((e=>e.fill.showCommitResult)),a=yield n(E.W_);if(!o&&!H&&!Y){H=!0,setTimeout((()=>{H=!1}),a);const e=yield n((e=>e.formInfo.data.globalPadId)),{data:t,error:o}=yield r(x.AA,e);if(o)return;const{pub:i}=yield n((e=>e.formInfo.data)),s=t;if(0===s.retcode&&s.data&&s.data.pub!==i){0,Y=!0;const{default:e,mask:t}=yield r(U.OX);return t.open(),void e.show({message:p.Z.t("管理员编辑了收集表，有内容变更。"),action:p.Z.t("获取变更"),autoClose:!1,onClickAction:()=>(0,A.Oi)(window,(0,j.Vm)()),onClose:()=>{Y=!1},id:"update-1"})}if(200207===t.retcode){const{default:e,mask:t}=yield r(U.OX);t.open(),e.show({message:p.Z.t("你的权限已发生变化。"),action:p.Z.t("刷新"),autoClose:!1,onClickAction:()=>(0,A.Oi)(window,(0,j.Vm)()),id:"200207-1"})}}},initWithLocalData:function*init_local_data_base_consumer(e,t){let{put:r,select:n}=t;const{pubLocalData:o}=window.localData,a=o.data,i=yield n(base_consumer_dataSelect);if(a&&(!i||Object.keys(i)<1)){const e=a,{cgicode:t}=o;yield r({type:"setFormInfo",payload:init_local_data_base_consumer_objectSpread(init_local_data_base_consumer_objectSpread({},e),{},{padId:e.localPadId,cgicode:t})})}},getBigPaperData:function*get_big_paper_data_base_consumer(e,t){let{type:r}=e,{put:n,call:o}=t;const{data:a}=yield o($.dC);if(0===(null==a?void 0:a.retcode)){const{urlId:e}=(0,D.e)(),t=(0,W.dealBigPaperData)(a),o=r.split("/");o[o.length-1]="setFormInfo",yield n({type:o.join("/"),payload:t.data}),(0,z.t8)(e,JSON.stringify(t.data))}},setFormCollectStatus:function*set_form_collect_status_base_consumer(e,t){var r;let{put:n,select:o,take:a}=t;const i=yield o((e=>e.formInfo));null!=i&&null!==(r=i.data)&&void 0!==r&&r.globalPadId||(yield a("fetchFormData/@@end")),yield n({type:"setFormStatusByPublish"})},getFormCapacity:function*form_base_consumer(e,t){let{put:r,call:n,select:o}=t;const a=yield o(E.dg),{data:i,error:s}=yield n(X.w_,a);if(s||!i||i.retcode)return yield n(U.IG,p.Z.t("获取收集表容量失败，请重试。")),void m.l.error("getUserSpaceError:",s);const{result:{size:l}}=i,c=Number(l)||0;return yield r({type:"setFormCapacity",payload:{formCapacity:c}}),m.l.info("getUserSpace:",i),c},switchCertification:J.ZP,getPadOwnerVipInfo:function*get_pad_owner_vip_info_base_consumer(e,t){var r;let{put:n,call:o,select:a,take:i}=t;const s=yield a(E.rx);null!=s&&null!==(r=s.data)&&void 0!==r&&r.globalPadId||(yield i("setFormInfo"));const{localPadId:l}=yield a(E._X),{data:c,error:d}=yield o(ee.kQ,l);if(d||!c)return void m.l.error("[FORM CGI] [getPadOwnerVipLevel] failed",d||c);if(c.retcode)return void m.l.error("[FORM CGI] [getPadOwnerVipLevel] retcode is invalid",c.retcode);const{result:{vip_level:u,vip_info:p}}=c;let f={};try{f=JSON.parse(p)}catch(d){return void m.l.error("[FORM CGI] [getPadOwnerVipLevel] parse vip_info error",p)}const h={level:u,renewal:f.renewal_status,avatarFrameUrl:f.avatar_frame_url,expiredStatus:f.expired_status};yield n({type:"setPadOwnerVipReducer",payload:{ownerVip:h}})},getSelfVipInfo:function*get_self_vip_info_base_consumer(e,t){let{put:r,call:o}=t;const a=function get_self_vip_info_base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?get_self_vip_info_base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):get_self_vip_info_base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},c.V0),{data:i,error:s}=yield o(ee.mh);if(s||!i||i.retcode)m.l.error("[FORM CGI] [getSelfVipLevel] failed",s||i);else{var l;const{info:e,vip:t,super_vip:r,super_vip_plus:n}=i.result.all;a.level=e.vip_level,a.renewal=e.renewal_status,a.avatarFrameUrl=e.avatar_frame_url,a.expiredStatus=e.expired_status,a.endTime=null!==(l={[te.FL.NO_VIP]:0,[te.FL.VIP]:t.end_time,[te.FL.SVIP]:r.end_time,[te.FL.SVIP_PLUS]:null==n?void 0:n.end_time}[a.level])&&void 0!==l?l:0}const{data:d,error:u}=yield o(ee.IR);if(u||!d||d.retcode)m.l.error("[FORM CGI] [getNewVip] failed",u||d);else{const{is_new:e}=d.result;a.isNewVip=e}yield r({type:"setSelfVipReducer",payload:{selfVip:a}})},waitingParseFile:function*waitingParseFile(e,t){let{payload:r}=e,{call:n}=t;const o=Date.now();do{const{data:e,error:t}=yield n(ne.lQ,r.operationId);if(t)return{error:t};const{questionnaire:o,code:a}=e;if(a||o)return{data:e};yield(0,re.delay)(2e3)}while(Date.now()-o<36e5);return{data:{}}},getQqChannelInfo:function*get_qq_channel_info_base_consumer(e,t){var r,n,o,a,i;let{put:s,call:l,select:c,take:d}=t;const u=yield c(E.rx);null!=u&&null!==(r=u.data)&&void 0!==r&&r.globalPadId||(yield d("setFormInfo"));const{guildId:p,channelId:f}=(0,j.C6)();if(!p||!f)return;const{userInfo:h}=yield c(E._X),y=null!==(n=null==h?void 0:h.uin)&&void 0!==n?n:null===(o=window)||void 0===o||null===(a=o.basicClientVars)||void 0===a||null===(i=a.userInfo)||void 0===i?void 0:i.uin,{data:b,error:g}=yield l(oe.qE,p,f,y);if(!g&&b)if(parseInt(b.retcode,10))m.l.error("[FORM CGI] [getQQChannelNickName] retcode is invalid",b.retcode);else try{const{UserInfo:[{name:e}]}=b.data,t={nicknameInQqChannel:e};yield s({type:"user/setQQRelatedInfo",payload:{qqRelated:t}})}catch(g){m.l.error("[FORM CGI] [getQQChannelNickName] destruction failed",b.data)}else m.l.error("[FORM CGI] [getQQChannelNickName] failed",g||b)},verifyPrivateLicense:function*verify_private_license(e,t){let{call:r}=t;yield r(ae._)}};var se=r(45382),le=r(68222),ce=r(34556);const de=T.isPC?[".edit-form-root",".form-add-question-side-bar",'div[class*="-setting-pc-drawer"]']:[".form-edit-wrap"];var ue=r(52851),pe=r(45607),me=r(33716);function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const fe=form_consumer_objectSpread(form_consumer_objectSpread({},ie),{},{connectToSocket:function*connect_to_socket_form(e,t){let{payload:n}=e;const o="$Collaboration-Waring-Snackbar$",{call:a,all:i}=t,{globalPadId:s,currentUserTinyId:l,isAdmin:c}=yield*function*getFormInfoParams(e,t){var r;let{select:n,take:o}=t;const a=yield n(E.rx);null!=a&&null!==(r=a.data)&&void 0!==r&&r.globalPadId||(yield o("setFormInfo"));const i=yield n(E.Mo),s=yield n(E.fw),l=yield n(E.vh);return{globalPadId:i,currentUserTinyId:s,isAdmin:l}}(0,t);if(!c)return;const{dispatch:d,history:m}=n,[f,h]=s.split("$"),[{default:y},{default:_}]=yield i([a(U.OX),a((()=>Promise.all([r.e("vendors-node_modules_tencent_ark-request_lib_index_js"),r.e("vendors-node_modules_tencent_netcheck_lib_helper_js-node_modules_tencent_netcheck_lib_network-7c7eaf"),r.e("vendors-node_modules_tencent_docs-connection_lib_index_js-node_modules_core-js_modules_es_pro-c38a30"),r.e("vendors-node_modules_crypto-js_md5_js"),r.e("js_utils_network_socket_request_ts")]).then(r.bind(r,30827))))]);let O=null;function lockElements(e){de.forEach((t=>{const r=document.querySelector(t);r&&(r.style.pointerEvents=e?"none":"auto")}))}async function showUnlockingTip(e){var t;const r=await le.S.queryUserMark(s,e),n=r.markName||r.englishName,a=n?p.Z.t("{{name}} 已暂停编辑，你可以开始编辑。",{name:n}):p.Z.t("其他管理员已暂停编辑，你可以开始编辑。"),i={id:o,message:a};null===(t=O)||void 0===t||t.close(),O=y.show(i)}_.socket.setSocketProps({onLock:async function handleSocketLocked(e){if((0,b.YY)()){var t,r;const n=null===(t=e.lockinfos)||void 0===t||null===(r=t[se.QH])||void 0===r?void 0:r[`${f}$${h}`];if(!n||(0,v.Qr)(n))return void _.send(se.h$.LOCK);if(ce.Z.holdingLockUserId=n.owner,ce.Z.holdingLockUserId===l)return await d({type:"edit/featHeadAgainstCollaboration",payload:{type:se.M0.CHECKING_REV}}),void function releaseCurrentPage(){var e;lockElements(!1),null===(e=O)||void 0===e||e.close()}();!async function lockCurrentPage(e){var t;lockElements(!0);const r=await le.S.queryUserMark(s,e),n=r.markName||r.englishName,a=n?p.Z.t("{{name}} 正在编辑收集表...",{name:n}):p.Z.t("其他管理员正在编辑收集表..."),i={id:o,message:a,autoClose:!1,closable:!1};null===(t=O)||void 0===t||t.close(),O=y.show(i),(0,g.G)("edit_collaboration","editing_alert")}(ce.Z.holdingLockUserId)}else{var n,a;const t=null===(n=e.lockinfos)||void 0===n||null===(a=n[se.QH])||void 0===a?void 0:a[`${f}$${h}`];if(!t||(0,v.Qr)(t))return void ce.Z.clear();if(ce.Z.holdingLockUserId=t.owner,ce.Z.holdingLockUserId===l)return void _.send(se.h$.UNLOCK);!async function showLockingTip(e){var t;const r=await le.S.queryUserMark(s,e),n=r.markName||r.englishName,a=n?p.Z.t("{{name}} 正在编辑收集表...",{name:n}):p.Z.t("其他管理员正在编辑收集表..."),i={id:o,message:a,autoClose:!1,closable:!1};null===(t=O)||void 0===t||t.close(),O=y.show(i),(0,g.G)("edit_collaboration","editing_alert")}(ce.Z.holdingLockUserId)}},onUnlock:function handleSocketUnlocked(e){if((0,b.YY)()){const t=e.lockinfo;if(!t||(0,v.Qr)(t)||t.owner===l)return void ce.Z.clear();_.send(se.h$.LOCK)}else{const t=e.lockinfo;if(!t||(0,v.Qr)(t)||t.owner===l)return void ce.Z.clear();showUnlockingTip(ce.Z.holdingLockUserId),ce.Z.clear()}},onUserLeft:function handleUserLeft(e){var t;const r=null!==(t=null==e?void 0:e.userId)&&void 0!==t?t:[];(0,b.YY)()?r.includes(ce.Z.holdingLockUserId)&&_.send(se.h$.LOCK):r.includes(ce.Z.holdingLockUserId)&&(showUnlockingTip(ce.Z.holdingLockUserId),ce.Z.clear())},getSocketConnectionParams:function handleGetSocketConnectionParams(){return{domainId:f,padId:h,uid:l}},onRoomOpened:function handleSocketAlreadyConnected(){_.send(se.h$.GET_FULL_LOCK)},onNewMsgChanged:function handleNewMsgChanged(e){const t=function getNecessaryNewChangedParams(e){console.info("[socket] getNecessaryNewChangedParams",e);const{author:t="",changeset:r="",newPos:n,newRev:o}=(0,u.Z)(e,"0.body.data.data",{}),a=t.replace("p.","");return{changesets:(0,v.iB)(r,[]),currTinyId:a,newPos:n,newRev:o}}(e);t.currTinyId!==l&&d({type:"edit/featHeadAgainstCollaboration",payload:{type:se.M0.DOWNSTREAM_REV,data:t}})}}),_.socket.init(),m.listen((function handleHashChange(){if(!_.socket.isOpened)return;const{holdingLockUserId:e}=ce.Z;(0,b.YY)()||e!==l?!(0,b.YY)()||e?(0,b.YY)()&&e!==l&&_.send(se.h$.GET_FULL_LOCK):_.send(se.h$.LOCK):_.send(se.h$.UNLOCK)}))},goEditAgainstCollaboration:function*go_edit_against_collaboration(e,t){let{call:r,select:n,put:o}=t;const a=yield n(E.Mo),i=yield n(E.fw),{holdingLockUserId:s}=ce.Z;if(!s||s===i)return yield o(ue.routerRedux.push(`/${me.G.EDIT}`)),void(0,g.G)("tool_bar","edit",{abtest:"1"});const l=le.S.queryUserMark.bind(le.S),c=yield r(l,a,s),d=c.markName||c.englishName,u=d?p.Z.t("{{name}} 正在编辑中。为避免多人编辑冲突，请稍后再试。",{name:d}):p.Z.t("文档管理员正在编辑中。为避免多人编辑冲突，请稍后再试。");yield r(U.N4,{title:p.Z.t("他人编辑中"),content:u,okText:pe.ce,cancelText:null}),(0,g.G)("edit_collaboration","editing_toast")}});var he=r(54356),ye=r(67550);function formInfo_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function formInfo_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?formInfo_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):formInfo_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const be=formInfo_form_consumer_objectSpread(formInfo_form_consumer_objectSpread({},{init(e){var t;let{dispatch:r,history:n}=e;(0,he.ys)(),(0,y.Fe)()&&r(ue.routerRedux.replace("/detail")),null!==(t=window.localData)&&void 0!==t&&t.pubLocalData&&r({type:"initWithLocalData"});const handlePreDataError=()=>{if(window.preData&&"retcode"in window.preData&&0!==window.preData.retcode){switch(window.preData.retcode){case 201003:case 200207:r({type:"setPermission",payload:!1})}return!0}return!1};if(document.addEventListener("predataLoaded",(()=>{r({type:"fetchFormData"})})),document.addEventListener("predataLoadFail",(()=>{handlePreDataError()||r({type:"fetchFormData",payload:"requestPub"})})),document.addEventListener("hadPublishForm",(()=>{r({type:"fetchFormData",payload:"requestHead"})})),window.preData&&(window.preData.formInfo||"retcode"in window.preData)){if(handlePreDataError())return;r({type:"fetchFormData"})}if(T.isMobile){n.listen((e=>{const t="/edit"===e.pathname;r({type:"setFormEditMode",payload:t})}));const checkShowMode=()=>{const e=window.innerWidth;let t=2;e<=320?t=0:e<=640&&(t=1),T.isIPad&&(document.body.className=`is-pad show-mode-${t} `,m.l.debug("change show mode :",{extra:{mode:t}}))};checkShowMode(),window.addEventListener("resize",checkShowMode,!1);"qqFile"===(0,j.pm)("converFrom")&&r({type:"setFormFormQQExcelFile",payload:!0})}else n.listen((()=>{document.dispatchEvent(new CustomEvent("pathChanged"))}));const o=(0,ye.yL)();r({type:"setGroupInfo",payload:o}),V.pg.TOC&&(r({type:"getPadOwnerVipInfo"}),r({type:"getSelfVipInfo"}),r({type:"getQqChannelInfo"})),V.kZ.SPECIAL_LICENSE_VERIFY&&r({type:"verifyPrivateLicense"})}}),{},{initSocket(e){let{dispatch:t,history:r}=e;t({type:"connectToSocket",payload:{dispatch:t,history:r}})}});function models_formInfo_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_formInfo_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_formInfo_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_formInfo_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ge=models_formInfo_form_consumer_objectSpread(models_formInfo_form_consumer_objectSpread({},{namespace:"formInfo"}),{},{state:d,effects:fe,reducers:I,subscriptions:be})},38999:(e,t,r)=>{"use strict";r.d(t,{Z:()=>te});var n=r(64649);const o={needTotalTips:!1,hadInit:!1,userCount:0,unReadCount:0,since:1,allPageNum:1,pageSize:20,delCount:0,resultsData:[],selfSubmittedList:[],submittedUserList:[],total:0,totalSelf:0,loading:!0,loadingMore:!0,hasMore:!0,fetchType:1,clockNum:0,lastClock:{time:""},hasSameIdentify:!1,prevPage:1,prevPageSize:20,limit:0,records:[],sid:0,needClear:!1,resultListHasMore:!0,resultList:[],resultCurrentPage:1,type:"result",hasEverSubmitted:!1,totalOverall:0,delCntOverall:0,userCountOverall:0,totalFillNumberInLatestCycle:0,selfFillNumberInLatestCycle:0,periodicalStatistics:{},hasAnonymousSubmitted:!1,delUnreadCnt:0};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const a=_objectSpread(_objectSpread({},o),{},{voteResultsMap:{}});r(11431);var i=r(63406),s=r(39507);function base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l={saveFetchedUserData(e,t){let{payload:r}=t;const{submittedUserList:n=[]}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{hadInit:!0,loading:!1,submittedUserList:n})},saveFetchResultsData(e,t){let{payload:r}=t;const{since:n,resultsData:o,selfSubmittedList:a,fetchType:i,hasMore:l,type:c,deleteRecordsList:d}=r,u=[];o.forEach((e=>{const t=(0,s.XM)(e);t.data=e.answers,u.push(t)}));const p=[],m=[];a.forEach((e=>{const t=(0,s.XM)(e);t.data=e.answers,p.push(t)})),d.forEach((e=>{const t=(0,s.XM)(e);t.data=e.answers,m.push(t)}));const{resultsData:f,selfSubmittedList:h,resultList:y,resultListHasMore:b,deleteRecordsList:g}=e,v={resultList:y,resultListHasMore:b,resultsData:f,selfSubmittedList:h,hasMore:e.hasMore,resultCurrentPage:e.resultCurrentPage,since:e.since,deleteRecordsList:g||[]};if("sequenceResult"===c)v.resultList=1===n?u:y.concat(u),v.resultListHasMore=l,v.resultCurrentPage=n;else{let e=u,t=p;"sequence_homepage"!==c&&(e=u.sort(((e,t)=>e.sid<t.sid?1:-1)),t=p.sort(((e,t)=>e.sid<t.sid?1:-1))),v.resultsData=-1===n?e:f.concat(u),v.selfSubmittedList=-1===n?t:h.concat(p),v.deleteRecordsList=v.deleteRecordsList.concat(m),v.hasMore=l,v.since=n}const _=e.userCount;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{loading:!1,loadingMore:!0,fetchType:i,hadInit:!0,userCount:_},v)},deleteOneRecordSuc(e,t){let{payload:r}=t;const{sid:n}=r,{total:o,resultsData:a,selfSubmittedList:i}=e,s=[...a],l=[...i];return s.splice(s.findIndex((e=>e.sid===n)),1),l.splice(l.findIndex((e=>e.sid===n)),1),base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{total:o?o-1:o,resultsData:s,selfSubmittedList:l})},savePageData(e,t){let{payload:r}=t;const{since:n,pageSize:o}=e,{since:a,pageSize:i}=r,s={resultCurrentPage:e.resultCurrentPage,currentPage:e.since};return"sequenceResult"===r.type?s.resultCurrentPage=a:s.currentPage=a,base_consumer_objectSpread(base_consumer_objectSpread({},e),{},void 0!==i?{prevPage:n,prevPageSize:o,pageSize:i}:{prevPage:n},s)},resetPageData(e){const{prevPage:t,prevPageSize:r}=e;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{currentPage:t,pageSize:r})},clearResult(e){return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{currentPage:1,allPageNum:1,prevPage:1,resultsData:[],total:0,hasMore:!0})},updateLocalResultData(e,t){let{payload:r}=t;const{resultsData:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{resultsData:n})},setHasEverSubmitted(e,t){let{payload:r}=t;const{hasEverSubmitted:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{hasEverSubmitted:n})},updateOverallReducer(e,t){let{payload:r}=t;const{totalOverall:n,delCntOverall:o,userCountOverall:a}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{totalOverall:null!=n?n:e.totalOverall,delCntOverall:null!=o?o:e.delCntOverall,userCountOverall:null!=a?a:e.userCountOverall})},recordLatestCycleStats(e,t){let{payload:r}=t;const{totalFillNumberInLatestCycle:n,selfFillNumberInLatestCycle:o}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{totalFillNumberInLatestCycle:n,selfFillNumberInLatestCycle:o})},updateLocalResultTotal(e,t){let{payload:r}=t;const{total:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{total:n})},setPageInfo(e,t){let{payload:r}=t;const{unReadCount:n,delCount:o,total:a,userCount:s}=r,{hadInit:l,pageSize:c}=e,d=o||0,u=a-d,p=base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{delCount:d,total:u,userCount:s,allPageNum:Math.ceil(u/c)});return l||!(0,i.L_)()?base_consumer_objectSpread(base_consumer_objectSpread({},p),{},{unReadCount:n}):p},showResultLoading(e,t){let{payload:r}=t;const{loading:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{loading:n})},setLoadingMore(e,t){let{payload:r}=t;const{loadingMore:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{loadingMore:n})},setClockNum(e,t){let{payload:r}=t;const{records:n}=r;if(!Array.isArray(n))return e;const{length:o}=n;if(o){const t=[];n.forEach((e=>{const r=(0,s.XM)(e);r.data=e.answers,t.push(r)}));const r=JSON.parse(t.shift().data),a={};return r.forEach((e=>{a[e.id]=e.content})),base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{clockNum:o,lastClock:a})}return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{clockNum:0,lastClock:{time:""}})},setSameIdentify(e,t){let{payload:r}=t;const{hasSameIdentify:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{hasSameIdentify:n||!1})},setTotalSelfCount(e,t){let{payload:r}=t;const{limit:n=1/0,totalSelf:o}=r,a=Math.max(n,Math.min(1e5,500*Math.ceil(o/500)));return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{totalSelf:o,needTotalTips:o>=a})},setNeedTips(e){return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{needTotalTips:!0})},setHasMore(e,t){let{payload:r}=t;const{hasMore:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{hasMore:n})},resetState(){return base_consumer_objectSpread({},o)},updateResultData(e,t){let{payload:r}=t;return base_consumer_objectSpread(base_consumer_objectSpread({},e),r)},setResultList(e,t){let{payload:r}=t;const{resultList:n}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{resultList:n})},updatePeriodicStatisticsReducer(e,t){let{payload:r}=t;const n=base_consumer_objectSpread(base_consumer_objectSpread({},e.periodicalStatistics),r.periodicalStatistics);return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{periodicalStatistics:n})},updateBasicStatisticsReducer(e,t){let{payload:r}=t;const{total:n,totalSelf:o,delCount:a,userCount:i,delUnreadCnt:s,needTotalTips:l,hasAnonymousSubmitted:c}=r;return base_consumer_objectSpread(base_consumer_objectSpread({},e),{},{total:null!=n?n:e.total,totalSelf:null!=o?o:e.totalSelf,userCount:null!=i?i:e.userCount,delCount:null!=a?a:e.delCount,delUnreadCnt:null!=s?s:e.delUnreadCnt,hasAnonymousSubmitted:null!=c?c:e.hasAnonymousSubmitted,needTotalTips:null!=l?l:e.needTotalTips})}};function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c=consumer_objectSpread(consumer_objectSpread({},l),{},{updateVoteResultsMapReducer(e,t){let{payload:r}=t;const{voteResultsMap:n}=r;return consumer_objectSpread(consumer_objectSpread({},e),{},{voteResultsMap:n})}}),d=c;var u=r(14042),p=r(60329),m=r(86432),f=r(54734),h=r(62378),y=r(65686),b=r(60250);function fetch_page_results_base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fetch_page_results_base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fetch_page_results_base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fetch_page_results_base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const byFormInfo=e=>e.formInfo,byResultPageSize=e=>e.result.pageSize,byFormInfoDataGlobalPadIdSelector=e=>e.formInfo.data.globalPadId,byResultHasMore=e=>e.result.hasMore,byResultUpdateTotalCount=e=>e.result.unReadCount,g={FIRST_LOAD:1,NEXT_PAGE:2,REFRESH_IMMEDIATELY:3};function*getGlobalPadId(e,t){let r,{take:n,select:o}=t;return e&&e.data&&e.data.globalPadId||(yield n("edit/setForm")),r=yield o(byFormInfoDataGlobalPadIdSelector),r}function*confirmBy(e,t,r,n){let{put:o,select:a,call:s}=n;if(0===(null==e?void 0:e.retcode)){const{needPictures:n}=t,{questions:i=[]}=yield a((e=>e.formInfo.formData)),{padId:s}=yield a(y._X);let{records:l}=e.result;if(n&&function needShowPicture(e){return 1===e.filter((e=>{let{type:t}=e;return[u.c.FILEIMAGE,u.c.IMAGE,u.c.CANVAS_IMAGE].includes(t)})).length}(i)){const e=l.map((e=>JSON.parse(e.answers).map((e=>([u.c.FILEIMAGE,u.c.IMAGE,u.c.CANVAS_IMAGE].includes(e.type)&&(e.content="string"==typeof e.content?JSON.parse(e.content):e.content),e)))));let t=yield Promise.all(e.map((e=>(0,h.zv)(e,s,!0)))).then((e=>e));t=t.map((e=>JSON.stringify(e))),l=l.map(((e,r)=>fetch_page_results_base_consumer_objectSpread(fetch_page_results_base_consumer_objectSpread({},e),{},{answers:t[r]})))}yield o({type:"saveFetchResultsData",payload:{since:r,userCount:e.result.user_cnt,resultsData:e.result.records&&!t.selfOnly?l:[],selfSubmittedList:e.result.records&&t.selfOnly?l:[],deleteRecordsList:e.result.records&&2===t.orderBy?e.result.records:[],fetchType:t.fetchType,hasMore:0!==e.result.records.length,type:t.type}}),yield o({type:"savePageData",payload:{since:r,type:t.type}})}else[g.NEXT_PAGE,g.REFRESH_IMMEDIATELY].includes(t.fetchType)&&(yield o({type:"resetPageData"})),(0,m.pm)("big")||i.v1||(yield s(b.IG,f.Z.t("获取收集结果失败。"))),yield o({type:"showResultLoading",payload:{loading:!1}})}function*fetch_page_results_base_consumer(e,t){let{payload:r}=e,{put:n,call:o,select:a,take:i}=t;const{since:l,descending_order:c=!1,orderBy:d,status:u,timeRange:m,deleteTimeRange:f}=r,h=yield a(byResultPageSize),y=yield a(byFormInfo),b=yield*getGlobalPadId(y,{take:i,select:a});yield n({type:"setLoadingMore",payload:{loadingMore:!0}});const g=yield a(byResultHasMore),v=yield a(byResultUpdateTotalCount);g||0!==v||(yield n({type:"setLoadingMore",payload:{loadingMore:!1}}));const{data:_}=yield o(p.Ng,{docId:b,since:l,pageSize:h,filterDel:!0,needData:!0,startTime:r.startTime,endTime:r.endTime,selfOnly:r.selfOnly,descending_order:c,orderBy:d,status:u,timeRange:m,deleteTimeRange:f});if(yield*confirmBy(_,r,l,{put:n,take:i,select:a,call:o}),yield n({type:"setLoadingMore",payload:{loadingMore:!1}}),2===r.orderBy&&0===(null==_?void 0:_.retcode)){const e=[];return _.result.records.forEach((t=>{const r=(0,s.XM)(t);r.data=t.answers,e.push(r)})),e}}var v=r(9309),_=r(84263),O=r(70740);r(54370),r(5153),r(80566),r(50870),r(75397),r(18829),r(51429),r(25376),r(95864),r(94565),r(95073),r(65204),r(47072),r(98391),r(22727),r(19647);var S=r(52851),P=r(67538),C=r(19541),w=r(87768),I=r(32944);function*handleDeleteImageCapacity(e,t){let{payload:r}=e,{call:n,select:o,put:a}=t;const i=function getAllImageUrls(e){let t=[],r=[];try{t=JSON.parse(e)}catch(n){t=[]}return t.forEach((e=>{let{type:t,content:n}=e;t===u.c.IMAGE&&(r=r.concat(n))})),r=r.map((e=>e.split("?")[0])),r}(r.data);if(i.length){var s;const e=yield o((e=>e.formInfo.data.localPadId)),t=yield n(I.st,e,i);var l;if(null!==(s=t.data)&&void 0!==s&&s.code||t.error)return(0,w.G)("deleteImageCapacity","fail",{ver5:null===(l=t.data)||void 0===l?void 0:l.code}),void P.l.error("deleteImageCapacity:",t.error);yield a({type:"formInfo/getFormCapacity"})}}function getObjKeysFromAnswers(e){return e.reduce(((e,t)=>{let r,{type:n,content:o}=t;if([u.c.FILEIMAGE,u.c.FILE,u.c.CANVAS_IMAGE].includes(n)){try{r="string"==typeof o?JSON.parse(o):o}catch(a){r=[]}return e.concat(r.map((e=>e.key)))}if(n===u.c.TABLE){try{r="string"==typeof o?JSON.parse(o):o}catch(a){r=[[]]}return e.concat(r.reduce(((e,t)=>e.concat(getObjKeysFromAnswers(t))),[]))}return e}),[])}function getFileImageObjkeys(e){let t=[];try{t=JSON.parse(e)}catch(r){t=[]}return getObjKeysFromAnswers(t)}var E=r(9300);function formatDateString(e){const t=Array.from(e).concat(f.Z.t("日"));return t.splice(6,0,f.Z.t("月")),t.splice(4,0,f.Z.t("年")),t.join("")}var T=r(53782),N=r(64619),j=r(96601),D=r(4869);const k=["message"];var x=r(26338),Z=r(3585),L=r(33716),R=r(50460),A=r(38318);function*unifiedUpdateStatistics(e,t,r){let{isPeriodic:n,isLatestPeriodic:o}=t,{put:a,select:i}=r;const{totalCnt:s,delCnt:l,userCnt:c,personalValidCnt:d,hasAnonymousSubmitted:u,delUnreadCnt:p}=e,m=s-l,f=d>0;n&&o?yield a({type:"recordLatestCycleStats",payload:{totalFillNumberInLatestCycle:m,selfFillNumberInLatestCycle:d}}):n||(yield a({type:"updateOverallReducer",payload:{totalOverall:m,delCntOverall:l,userCountOverall:c}})),Array.isArray(e.selfSids)&&e.selfSids.length&&(yield a({type:"setHasEverSubmitted",payload:{hasEverSubmitted:!0}}),yield a({type:"detail/updateLastestSubmitSidReducer",payload:{lastestSubmitSid:e.selfSids.slice(-1)[0]}}),yield a({type:"detail/setSidListReducer",payload:{sidList:e.selfSids}}));const h=yield i(y.XR),b=Math.max(h,Math.min(h,500*Math.ceil(d/500)));yield a({type:"updateBasicStatisticsReducer",payload:{total:m,totalSelf:d,userCount:c,hasAnonymousSubmitted:u,delUnreadCnt:p,needTotalTips:d>=b}}),yield a({type:"detail/setFormRecordTotalReducer",payload:{formRecordTotal:m}}),yield a({type:"formInfo/setHasCommited",payload:f})}var F=r(3252),M=r(20782),B=r(65162);function query_overall_statistics_base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function query_overall_statistics_base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?query_overall_statistics_base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):query_overall_statistics_base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const q={fetchPageResults:fetch_page_results_base_consumer,deleteRecord:function*delete_record_base_consumer(e,t){let{payload:r}=e;const{put:n,call:o,select:a,take:i}=t,s=r instanceof Object?r.sid:r,l=yield a((e=>e.formInfo));let c;l&&l.data&&l.data.globalPadId||(yield i("edit/setForm")),c=yield a((e=>e.formInfo.data.globalPadId)),yield handleDeleteImageCapacity({payload:r},t),yield function*handleDeleteFileImageCapacity(e,t){var r;let{payload:n}=e,{call:o,select:a,put:i}=t;const s=getFileImageObjkeys(n.data);if(!s.length)return;const l=yield a((e=>e.formInfo.data.localPadId)),c=yield o(I.tF,l,s);var d;if(null!==(r=c.data)&&void 0!==r&&r.code||c.error)return(0,w.G)("deleteFileImageCapacity","fail",{ver5:null===(d=c.data)||void 0===d?void 0:d.code}),void P.l.error("deleteFileImageCapacity:",c.error);yield i({type:"formInfo/getFormCapacity"})}({payload:r},t);const d=yield o(p.JS,c,s),{data:u}=d,m=f.Z.t("收集结果");if(P.l.debug("delete record:",u),u&&(0===u.retcode||0===u.code)){const{sidList:e,uidList:t}=yield a((e=>e.detail));0;{var h;(0,w.G)("result","suc_delete",{ver5:1}),(0,w.G)("fill","delete_fill_clk",{ver5:{"#/fii-detail":0,"#/detail":1,"#/result":2,"#/fill-list":3}[location.hash]}),null===(h=r.onSuccess)||void 0===h||h.call(r),yield n({type:"deleteOneRecordSuc",payload:{sid:s}}),yield o(b.IG,f.Z.t("删除{{typeText}}成功。",{typeText:m}),{type:C.g.SUCCESS});const e=function getNextInfo(e,t){const r=t.indexOf(e),n=[...new Set(t)];n.splice(r,1);const o=r?n[r-1]:n[0];return n.length>0?{idx:o,list:n}:0}(s,t);yield n({type:"result/updateOverallStatistics"}),yield n({type:"detail/setSidListReducer",payload:{sidList:(null==e?void 0:e.list)||[]}}),yield n({type:"detail/updateSidReducer",payload:{sid:(null==e?void 0:e.idx)||0}}),yield n({type:"detail/updateLastestSubmitSidReducer",payload:{lastestSubmitSid:(null==e?void 0:e.idx)||0}}),e||null!=r&&r.keepPage?yield n({type:"fill/getAnswerData"}):yield n(S.routerRedux.replace("/fill")),yield n({type:"fill/setAnswerData",payload:[]})}if(t.length){const e=t.filter((e=>e!==s));yield n({type:"detail/updateUidListReducer",payload:{uidList:e}})}return!0}yield o(b.IG,f.Z.t("删除{{typeText}}失败，请稍后重试。",{typeText:m}))},getBigPaperResult:function*get_big_paper_result_base_consumer(e,t){let{select:r,call:n,put:o}=t;const a=yield r(y.Mo),{data:i,error:s}=yield n(E.tx,a);if(s||!i||i.code){const e=(null==i?void 0:i.code)===O.oY.BIGPAPER_NO_AUTH?f.Z.t("无权获取答案"):f.Z.t("获取答案失败");return yield n(b.IG,e),void P.l.error(`[${e}]`,{error:s,code:null==i?void 0:i.code})}const{url_arr:l}=i;yield o({type:"updateLocalResultData",payload:{resultsData:null==l?void 0:l.map((e=>({url:`https://${e.URL}`,date:formatDateString(e.Key)})))}})},getSeqs:function*get_seqs_base_consumer(e,t){let{put:r,call:n,select:o}=t;if(!(0,D.isLogin)()||location.hash===j.y.BIGPAPER_DOWNLOAD_RESULT)return;const a=yield o(y.Ko),{globalPadId:i}=a,{data:s}=yield n(E.Bc,i);if((null==s?void 0:s.code)===O.oY.SUCCESS)if(s.sids.length>0)yield r({type:"detail/updateLastestSubmitSidReducer",payload:{lastestSubmitSid:s.sids[0]}}),(0,N.isFilledBigPaper)()?yield r({type:"fill/getPaperAnswer",payload:{finalPage:!0}}):(0,N.isUnFilledBigPaper)()&&(yield r({type:"fill/getPaperAnswer",payload:{firstPage:!0}}));else if(0===(0,N.getBigPaperSectionIndex)()&&a.taskConfig.startToast){const e=a.taskConfig.startToast,{message:t}=e,r=(0,T.Z)(e,k);yield n(b.IG,t,r)}},refreshPage:function*refresh_page_base_consumer(e,t){let{put:r,select:n}=t;const{fetchType:o,pageSize:a,since:i}=yield n(y.tm);yield r({type:"fetchPageResults",payload:{since:i,pageSize:a,fetchType:o}})},fetchSubmittedUsers:function*fetch_submitted_users_base_consumer(e,t){const{select:r,call:n,put:o}=t;yield o({type:"showResultLoading",payload:{loading:!0}});const a=yield r(y.Mo),i=yield(0,_.hk)(t);if(!i)return yield o({type:"setLoadingMore",payload:{loadingMore:!1}}),void(yield o({type:"showResultLoading",payload:{loading:!1}}));const{data:l}=yield n(v.p,a,i);if((null==l?void 0:l.retcode)===O.oY.SUCCESS){var c,d;const e=null!==(c=null===(d=l.result)||void 0===d?void 0:d.users)&&void 0!==c?c:[];yield o({type:"saveFetchedUserData",payload:{submittedUserList:(0,s.sq)(e)}})}yield o({type:"showResultLoading",payload:{loading:!1}}),yield o({type:"setLoadingMore",payload:{loadingMore:!1}})},queryOverallStatistics:function*query_overall_statistics_base_consumer(e,t){var r;let{payload:n={}}=e;const{currCalendarDate:o,needAutoRouting:a,needAutoDelTip:s,forceQueryWithoutCalendar:l}=n,{put:c,call:d,take:u,select:h}=t,g=yield h(y.rx);null!=g&&null!==(r=g.data)&&void 0!==r&&r.globalPadId||(yield u("formInfo/setFormInfo"));const v=yield h(y.Mo),{isDeleted:_,permission:P}=yield h(y.rx);if(_||!P)return;let C=null;const w=yield h(y.vG),I=(0,B.OQ)({startTime:w});if(l&&!(0,F.h)(o)){const{data:e}=yield d(p.wg,v,void 0,I);if((null==e?void 0:e.retcode)===O.oY.SUCCESS&&e.result){C=(0,A.u)(e.result);const r={isPeriodic:!1,isLatestPeriodic:!1};yield*unifiedUpdateStatistics(C,r,t)}}(yield h(y.gD))||(yield u("setting/querySettings/@@end"));const E=yield h(y.GZ),T=null!=o?o:yield h(y.j4),j=yield h(y.Pm),D=E&&(0,F.h)(T),k=(0,x.default)(T,j),q=(0,M.y)(T);let U=null;if(D){var G;const e=yield h(y.iu);if(k||!e[q]){var K;const e=(0,R.wJ)(T),{data:t}=yield d(p.wg,v,e);U=query_overall_statistics_base_consumer_objectSpread(query_overall_statistics_base_consumer_objectSpread({},null==t?void 0:t.result),{},{retcode:null!==(K=null==t?void 0:t.retcode)&&void 0!==K?K:O.oY.ERROR})}else U=query_overall_statistics_base_consumer_objectSpread(query_overall_statistics_base_consumer_objectSpread({},e[q]),{},{retcode:O.oY.SUCCESS});if((null===(G=U)||void 0===G?void 0:G.retcode)===O.oY.SUCCESS){const e={[q]:(0,Z.Z)(U,"retcode")};yield c({type:"updatePeriodicStatisticsReducer",payload:{periodicalStatistics:e}})}}else if(!C){var V;const{data:e}=yield d(p.wg,v);U=query_overall_statistics_base_consumer_objectSpread(query_overall_statistics_base_consumer_objectSpread({},null==e?void 0:e.result),{},{retcode:null!==(V=null==e?void 0:e.retcode)&&void 0!==V?V:O.oY.ERROR})}U&&(C=(0,A.u)(U),yield*unifiedUpdateStatistics(C,{isPeriodic:E,isLatestPeriodic:k},t)),yield*function*autoRouting(e,t,r){let{select:n,put:o}=r;if(!t||!e)return;const{isAdmin:a}=yield n(y._X);if(Array.isArray(e.selfSids)){if(a&&(0,i.P0)()||!a){if(i.v1){const e=(0,N.isFilledBigPaper)()?L.G.SUBMIT_RESULT:L.G.FILL;return void(yield o(S.routerRedux.replace(`/${e}`)))}if(Number((0,m.pm)("sid"))||!e.personalValidCnt||(0,m.zf)())return void(yield o(S.routerRedux.push(`/${L.G.FILL}`)));(0,i.L_)()||(0,i.dU)()||(0,i.Wt)()||(0,i.j4)()||(0,i.G9)()||(yield o(S.routerRedux.replace(`/${L.G.FILL_DETAIL}`)))}}else a||e.personalValidCnt||(yield o(S.routerRedux.push("/fill")))}(C,a,t),yield*function*autoShowDelTip(e,t,r){let{select:n,call:o}=r;if(!t||!e)return;const{isOwner:a,isAdmin:i}=yield n(y._X),{personalValidCnt:s,personalTotalCnt:l}=e;if(!a&&!i&&0===s&&l>0){const e=f.Z.t("填写内容不合规或者被创建者删除，请重新填写提交");yield o(b.IG,e,{duration:3e3})}}(C,s,t)},updateOverallStatistics:function*update_overall_statistics_base_consumer(e,t){let{payload:r={}}=e,{put:n}=t;yield n({type:"queryOverallStatistics",payload:r})}};var U=r(4222),G=r(52304),K=r(83956);const V=U.kZ.NEED_LOWER_RECORD_LIMIT?500:5e3;var Q=r(64049);var H=r(78984),Y=r(52753);const z=["roles"],$=["options"];function form_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const W=form_consumer_objectSpread(form_consumer_objectSpread({},q),{},{getLastPaperScore:function*get_last_paper_score_form_base_consumer(e,t){var r,n;let{payload:o}=e,{call:a,put:i,select:s}=t;if(null==o||!o.sid)return;const l=yield s(y.Mo),{data:c}=yield a(p._z,l,o.sid);(0,Q.PO)(c)&&c.retcode===O.oY.SUCCESS&&c.result.record&&(yield i({type:"detail/setPaperScoreReducer",payload:{paperTotalScore:null!==(r=null===(n=c.result.record.paper_result)||void 0===n?void 0:n.total_score)&&void 0!==r?r:0}}))},fetchPageResults:function*form_base_consumer(e,t){var r,n;const{payload:{selfOnly:o,status:a}}=e,{select:i,take:l,call:c,put:d}=t,u=yield i(byFormInfo),{data:{isAdmin:p}}=u,{dataset:m}=G.hx[K.Td.FORM_COMMON_CONFIG](),f=!(null==m||null===(r=m.setting)||void 0===r||null===(n=r.result)||void 0===n||!n.cluster);if(!o&&p&&f&&201!==a){const e=yield*getGlobalPadId(u,{take:l,select:i});if((yield i(y.W4))<V){const r=yield(0,_.hk)(t),{data:n}=yield c(v.p,e,r);if((null==n?void 0:n.retcode)===O.oY.SUCCESS){var h,b;const e=null!==(h=null===(b=n.result)||void 0===b?void 0:b.users)&&void 0!==h?h:[];return void(yield d({type:"saveFetchedUserData",payload:{submittedUserList:(0,s.sq)(e)}}))}}}return yield*fetch_page_results_base_consumer(e,t)},queryVoteResults:function*query_vote_results_form(e,t){var r;const{put:n,call:o,take:a,select:i}=t,s=yield i(y.rx);null!=s&&null!==(r=s.data)&&void 0!==r&&r.globalPadId||(yield a("formInfo/setFormInfo"));const l=yield i(y.Mo),c=yield i(y.DQ);if((null==c?void 0:c.type)!==H.c.VOTE)return;const d=yield i(y.vh);(yield i(y.gD))||(yield a("setting/querySettings/@@end"));const u=yield i(y.y6);if(!d&&!u)return;const p=yield i(y.Ii),m=(yield i(y.GZ))?(0,R.M)(yield i(y.j4)):null,{questions:f}=yield i(y.Ko),h=form_objectSpread({form_id:l,agg_question_filters:f.map((e=>{let{id:t}=e;return{question_id:t}}))},m?{time_range:(0,B.OQ)(m)}:null),{data:b}=yield o(Y.o,h);if(!b.length)return;const g=function getCurrResultsMap(e,t){let{anonymous:r}=t;const treatOptionRole=e=>{var t,r,n,o;return{name:(null==e||null===(t=e.member)||void 0===t||null===(r=t.child)||void 0===r?void 0:r.name)||e.name||(null===(n=e.user_info)||void 0===n?void 0:n.nick),avatar:null===(o=e.user_info)||void 0===o?void 0:o.avatar}},treatStatisticOption=e=>{const{roles:t}=e,n=(0,T.Z)(e,z);if(r)return n;if(!Array.isArray(t)||!t.length)return form_objectSpread(form_objectSpread({},n),{},{users:[]});const o=t.map(treatOptionRole);return form_objectSpread(form_objectSpread({},n),{},{users:o})},n=e.reduce(((e,t)=>{const{options:r}=t,n=(0,T.Z)(t,$),o=r.map(treatStatisticOption);return e[t.id]=form_objectSpread(form_objectSpread({},n),{},{options:o}),e}),{});return n}(b,{anonymous:p});yield n({type:"updateVoteResultsMapReducer",payload:{voteResultsMap:g}})}});var X=r(72870);let J=!1;const ee={setup(e){if(!(0,D.isLogin)())return void(J=!0);const{dispatch:t}=e;t({type:"queryOverallStatistics",payload:{forceQueryWithoutCalendar:!0,needAutoRouting:!0,needAutoDelTip:!0}}),X.isMobile||function listenToPathNameChange(e,t){let{history:r,dispatch:n}=e,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.listen((e=>{"/result"===e.pathname&&t&&n({type:"savePageData",payload:{currentPage:1,type:o?"sequenceResult":""}})}))}(e,J),J=!0}};function result_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function result_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?result_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):result_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const te=result_form_consumer_objectSpread(result_form_consumer_objectSpread({},{namespace:"result"}),{},{state:a,effects:W,reducers:d,subscriptions:ee})},47524:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(64649);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const o=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{list:[],rosterInitialized:!1,selectedRosters:[],selectedRostersVersion:1,selectedRosterInitialized:!1}));function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const a={setCycleData(e,t){let{payload:r}=t;const{cycleMemberChild:n,cycleUids:o}=r;return base_objectSpread(base_objectSpread({},e),{},{cycleMemberChild:n,cycleUids:o})},updateRosterListReducer(e,t){let{payload:r}=t;const{list:n}=r;return base_objectSpread(base_objectSpread({},e),{},{list:n,rosterInitialized:!0})},updateSelectedRostersReducer(e,t){let{payload:r}=t;const{selectedRosters:n}=r;return base_objectSpread(base_objectSpread({},e),{},{selectedRosters:n,selectedRosterInitialized:!0})},updateSelectedRosterVersionReducer(e,t){let{payload:r}=t;const{selectedRostersVersion:n}=r;return base_objectSpread(base_objectSpread({},e),{},{selectedRostersVersion:n})}};function form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const i=function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a));r(11431),r(54370),r(5153),r(80566),r(50870),r(75397),r(18829),r(51429),r(25376),r(95864),r(94565),r(95073),r(65204),r(47072),r(98391),r(22727),r(19647);var s=r(67538),l=r(70740),c=r(65686),d=r(75645),u=r(93318);function fetch_roster_list_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fetch_roster_list_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fetch_roster_list_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fetch_roster_list_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rosterSort(e){e.sort(((e,t)=>e.type===t.type?e.createTime-t.createTime:t.type-e.type))}function*fetch_roster_list_base(e,t){let{payload:r}=e,{put:n,call:o,select:a}=t;const i=yield a(c.Bg),{list:p,rosterInitialized:m}=yield a(c.zI);if(!i||m)return p;let f=[];const{data:h}=yield o(d.AL,r);if((null==h?void 0:h.retcode)!==l.oY.SUCCESS)return s.l.error("[Fetch New Roster List error]"),f;var y,b;if(f=(null==h||null===(y=h.result)||void 0===y||null===(b=y.roster)||void 0===b?void 0:b.map((e=>(0,u.HZ)(e))))||[],f=f.filter((e=>u.Jc.includes(null==e?void 0:e.type))),rosterSort(f),!r){const{selectedRosters:e}=yield a(c.zI),t=e.filter((e=>!f.some((t=>e.id===t.id)))).map((e=>fetch_roster_list_base_objectSpread(fetch_roster_list_base_objectSpread({},e),{},{isOthersRoster:!0})));f=[...new Set(f.concat(t))],rosterSort(f),yield n({type:"updateRosterListReducer",payload:{list:f}})}return f}var p=r(25773),m=r(54734),f=r(87768),h=r(7038),y=r(60250);function roster_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function roster_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?roster_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):roster_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const b=roster_form_consumer_objectSpread(roster_form_consumer_objectSpread({},{fetchRosterList:fetch_roster_list_base,createRoster:function*create_roster_base(e,t){let{payload:r}=e,{put:n,call:o,select:a}=t;const i=(0,p.Z)({},r),b=(0,u.ez)(i);if(!(0,u.cd)(b,r)||!(0,u.nX)(r))return;const{data:g,error:v}=yield o(d.U5,i);if(v||(null==g?void 0:g.retcode)!==l.oY.SUCCESS){const e=(null==g?void 0:g.retcode)===l.oY.NOT_SAFE?m.Z.t("名单内容不符合《腾讯文档平台公约规范》，请重新录入"):m.Z.t("新建名单失败，请重试");return yield o(y.IG,e),void s.l.error("[create roster request fail]")}const _=(0,u.HZ)(g.result.roster);if(!_)return;const O=yield a(c.wG);return yield n({type:"updateRosterListReducer",payload:{list:O.concat(_)}}),s.l.info("[Create Roster success]",_),(0,f.G)("settings","edit_list",{ver5:b,ver6:{[h.r.STUDENT]:1,[h.r.EMPLOYEE]:2,[h.r.COMMON]:3}[_.type]}),_.type===h.r.COMMON&&(0,f.G)("settings","edit_list_question",{ver5:_.columnHeader}),yield function*selectRoster(e,t){let{type:r,rosterId:n}=e,{put:o,select:a}=t;const i=yield a(c.GS);i.length&&i[0].type!==r||(yield o({type:"selectRoster",payload:{selectedRosterIds:i.map((e=>{let{id:t}=e;return t})).concat(n)}}))}({type:i.type,rosterId:_.id},{put:n,select:a}),b},updateRoster:function*update_roster_base(e,t){let{payload:r}=e,{put:n,call:o,select:a}=t;const i=(0,p.Z)({},r),b=(0,u.ez)(i);if(!(0,u.cd)(b,r)||!(0,u.oQ)(r))return;const{data:g,error:v}=yield o(d.lQ,i);if(v||(null==g?void 0:g.retcode)!==l.oY.SUCCESS){const e=(null==g?void 0:g.retcode)===l.oY.NOT_SAFE?m.Z.t("名单内容不符合《腾讯文档平台公约规范》，请重新录入"):m.Z.t("修改名单失败，请重试");return yield o(y.IG,e),void s.l.error("[update roster request fail]")}const _=(0,u.HZ)(g.result.roster),O=yield a(c.wG);yield n({type:"updateRosterListReducer",payload:{list:O.map((e=>e.id===_.id?_:e))}});const S=(yield a(c.GS)).map((e=>{let{id:t}=e;return t}));return S.includes(_.id)&&(yield n({type:"selectRoster",payload:{selectedRosterIds:S}})),s.l.info("[Update Roster success]",_),(0,f.G)("settings","edit_list",{ver5:b,ver6:{[h.r.STUDENT]:1,[h.r.EMPLOYEE]:2,[h.r.COMMON]:3}[_.type]}),!0},deleteRoster:function*delete_roster_base(e,t){let{payload:r}=e,{put:n,call:o,select:a}=t;const{error:i,data:u}=yield o(d.rd,r);if(i||(null==u?void 0:u.retcode)!==l.oY.SUCCESS)return void s.l.error("[deleteRoster error]");const p=yield a(c.wG);yield n({type:"updateRosterListReducer",payload:{list:p.filter((e=>{let{id:t}=e;return t!==r.id}))}});const m=(yield a(c.GS)).map((e=>{let{id:t}=e;return t})),f=m.filter((e=>e!==r.id));return f.length!==m.length&&(yield n({type:"selectRoster",payload:{selectedRosterIds:f,noPost:!0}})),s.l.info("[Delete Roster success]",r),!0},getSelectedRosters:function*get_selected_rosters_base(e,t){const{put:r,select:n,call:o}=t,{selectedRosterInitialized:a}=yield n(c.zI);if(a)return;if(!(yield n(c.Bg)))return void(yield r({type:"updateSelectedRostersReducer",payload:{selectedRosters:[]}}));const i=yield n(c.wC),{data:u}=yield o(d.xA,{globalPadId:i});if((null==u?void 0:u.retcode)!==l.oY.SUCCESS)return void s.l.error("[get selected roster ids from cgi fail]");yield r({type:"updateSelectedRosterVersionReducer",payload:{selectedRostersVersion:u.result.version}});const p=u.result.roster_ids||[];s.l.info("[get selected roster ids from cgi success]",{selectedRosterIds:p});const m={rosterIds:p,type:u.result.roster_template},f=(yield o(fetch_roster_list_base,{payload:m},t)).filter((e=>{let{id:t}=e;return p.includes(t)}));yield r({type:"updateSelectedRostersReducer",payload:{selectedRosters:f}}),s.l.info("[get selected rosters success]",{selectedRosters:f})}}),{},{selectRoster:function*select_roster_base(e,t){let{payload:{selectedRosterIds:r,noPost:n}}=e,{put:o,select:a,call:i}=t;const{list:p,selectedRosters:b,selectedRostersVersion:g}=yield a(c.zI),v=p.filter((e=>{let{id:t}=e;return r.includes(t)})),_=v.reduce(((e,t)=>e+(0,u.ez)(t)),0);if(v.length){const{type:e}=v[0];if(!(0,u.cd)(_,{type:e},!0))return}const O=function getRosterBindingStates(e,t){const r=[],n=t.filter((t=>!e.some((e=>e.id===t.id)))),o=[...new Set(e.concat(n))];return o.forEach((n=>{e.find((e=>e.id===n.id))||r.push({roster_id:n.id,roster_template:n.type,bound:!0}),t.find((e=>e.id===n.id))||r.push({roster_id:n.id,roster_template:n.type,bound:!1})})),r}(b,v);if(O.length&&!n){const e=yield a(c.wC),{data:t}=yield i(d.Y2,{rosterBindingStates:O,globalPadId:e,version:g});if((null==t?void 0:t.retcode)!==l.oY.SUCCESS)return void(0,y.IG)(m.Z.t("选择名单失败"));yield o({type:"updateSelectedRosterVersionReducer",payload:{selectedRostersVersion:t.result.version}}),s.l.info("[Select Roster]",{selectedRosterIds:r,selectedRosters:v}),v.length&&(0,f.G)("settings","set_list",{ver5:_,ver6:{[h.r.STUDENT]:1,[h.r.EMPLOYEE]:2,[h.r.COMMON]:3}[v[0].type]})}return yield o({type:"updateSelectedRostersReducer",payload:{selectedRosters:v}}),!0}});function models_roster_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_roster_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_roster_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_roster_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=models_roster_form_consumer_objectSpread(models_roster_form_consumer_objectSpread({},{namespace:"roster"}),{},{state:o,effects:b,reducers:i})},66082:(e,t,r)=>{"use strict";r.d(t,{Z:()=>U});var n=r(64649);var o=r(8760),a=r(74988),i=r(45519),s=r(66127),l=r(53345),c=r(5576);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const d=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{formVersion:0,serverTime:0,serverTimeDifference:0,hasInit:!1,hasSuccessInit:!1,collection:{startTime:0,endTime:0,anonymous:!1,isClosed:!1,recordsLimit:0,backendMaxRecordLimit:a.U.MAX,backendNearMaxRecordLimit:a.U.NEAR_MAX},fillerConfig:{canMultiSubmit:!0,canModifyRecords:!1,canCheckResults:!1,canCheckPaperScore:!0,canDeleteRecords:!1},notifyConfig:{canNotifyOwner:!1,canReceiveClockNotify:!1,canReceivePeriodicNotify:!0,collectResultNotifyConfig:{dailyNotifyTime:0,type:0}},conclusion:{picSrc:"",remarkTitle:"",linkList:[]},relatedSheet:{backendGridLimit:i.gu.GRID,backendSmartLimit:i.gu.SMART,bindPattern:s.Ah.NORMAL,globalPadId:void 0,url:"",subId:"",subType:s.jy.GRID},relatedPeriodic:{isPeriodic:!1,submitStatus:l.j5.DEFAULT,canSubmitByPeriodic:!1,isInCurrPeriodic:!0,periodicPattern:l.CR.DEFAULT,notifyPattern:l.$S.DEFAULT,notifyBefore:0,allowedStartTime:o.v.START,allowedEndTime:o.v.END,periodicDays:[],histories:[],historicalMap:{},currSelectedHistory:{year:0,month:0,day:void 0,start:void 0,end:void 0},latestHistory:{year:0,month:0,day:void 0,start:void 0,end:void 0}},userPreferred:{questionCreatedPattern:c.m.INTELLIGENT}});var u=r(9938);function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p={updateSettingsReducer(e,t){let{payload:r}=t;const{collection:n,fillerConfig:o,notifyConfig:a,conclusion:i,relatedSheet:s,relatedPeriodic:l,resultSetting:c,userPreferred:d}=e,{formVersion:u,serverTime:p,hasInit:m,hasSuccessInit:f,serverTimeDifference:h,collection:y,fillerConfig:b,notifyConfig:g,conclusion:v,relatedSheet:_,relatedPeriodic:O,resultSetting:S,userPreferred:P}=r;return base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread(base_objectSpread({},e),"number"!=typeof u?null:{formVersion:u}),"number"!=typeof p?null:{serverTime:p}),"boolean"!=typeof m?null:{hasInit:m}),"boolean"!=typeof f?null:{hasSuccessInit:f}),"number"!=typeof h?null:{serverTimeDifference:h}),y?{collection:base_objectSpread(base_objectSpread({},n),y)}:null),b?{fillerConfig:base_objectSpread(base_objectSpread({},o),b)}:null),g?{notifyConfig:base_objectSpread(base_objectSpread({},a),g)}:null),v?{conclusion:base_objectSpread(base_objectSpread({},i),v)}:null),_?{relatedSheet:base_objectSpread(base_objectSpread({},s),_)}:null),O?{relatedPeriodic:base_objectSpread(base_objectSpread({},l),O)}:null),S?{resultSetting:base_objectSpread(base_objectSpread({},c),S)}:null),P?{userPreferred:base_objectSpread(base_objectSpread({},d),P)}:null)},updatePeriodicHistoriesReducer(e,t){let{payload:r}=t;const n=(0,u.W)(e.relatedPeriodic,r.relatedPeriodic);return base_objectSpread(base_objectSpread({},e),{},{relatedPeriodic:n})}};function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const m=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},p);r(11431);var f=r(68586),h=r(54443),y=r(4869),b=r(67486),g=r(70740),v=r(67698),_=r(82937),O=r(66426),S=r(52304),P=r(83956),C=r(65686),w=r(27565);function base_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=r(53782),E=r(60250),T=r(54734),N=r(19541);const j=["successCb","failureCb"];function commonSuccessCb(){(0,E.IG)(T.Z.t("设置成功"),{id:"$DEFAULT_SUCCESS_SETTING_TIP$",type:N.g.SUCCESS})}function commonFailureCb(e){const t=T.Z.t("设置失败。错误码 {{retcode}}",{retcode:e});(0,E.IG)(t,{id:"$DEFAULT_FAILURE_SETTING_TIP$"})}var D=r(48976),k=r(69396),x=r(69841),Z=r(67538),L=r(86550);function*bindProcess(e,t,r){var n,o,a,i,s,l,c,d,u;let{globalPadId:p,taskId:m}=e,{update:f}=t,{call:y}=r;yield(0,D.delay)(1e3);const b=Date.now(),{dataset:v}=S.hx[P.Td.FORM_COMMON_CONFIG](),_=6e4*(null!==(n=null==v||null===(o=v.setting)||void 0===o||null===(a=o.sheet)||void 0===a?void 0:a.bindLoopTimeout)&&void 0!==n?n:10),O=null!==(i=null==v||null===(s=v.setting)||void 0===s||null===(l=s.sheet)||void 0===l?void 0:l.bindLoopFailureLimit)&&void 0!==i?i:60,C=1e3*(null!==(c=null==v||null===(d=v.setting)||void 0===d||null===(u=d.sheet)||void 0===u?void 0:u.bindLoopDelay)&&void 0!==c?c:2);let w,I=0,E=0,N=0,j=0;do{var k,x,Z;const{data:e,error:t}=yield y(h.Lq,p,m);if(t||!e||I>=O)return{boundSheet:w,code:null==e?void 0:e.retcode};const{retcode:r}=e;if([g.oY.SYNC_FAILURE,g.oY.SHEET_DELETED,g.oY.SHEET_DELETED2,g.oY.NO_SPACE,g.oY.NO_PERMISSION,g.oY.NO_PERMISSION2,g.oY.NO_PERMISSION3,g.oY.NO_PERMISSION4,g.oY.LOGIN_FAILED].includes(r))return{boundSheet:w,code:r};const n=null!==(k=e.result)&&void 0!==k?k:{};if(w=n.bind_sheet,w)return{boundSheet:w,code:r};E=null!==(x=n.total)&&void 0!==x?x:E,j=null!==(Z=n.sync_total)&&void 0!==Z?Z:j,f({message:T.Z.t("正在关联：{{rate}}",{rate:j>E?"100%":`${Math.round(100*(j/E||0))}%`}),type:"loading"}),I=N===j?I+1:0,N=j,yield(0,D.delay)(C)}while(Date.now()-b<_);return{boundSheet:w,code:void 0}}function*bind_sheet_base_consumer(e,t){let{payload:r={}}=e;const{put:n,call:o,select:a}=t,{download:s=!1,exportToLocal:l=!1,sheetId:c="",sheetUrl:d="",sheetType:u="",showSnackbarShow:p=!0}=r,m=yield*function*getGlobalPadId(e){var t;let{select:r,take:n}=e;const o=yield r(C.rx);null!=o&&null!==(t=o.data)&&void 0!==t&&t.globalPadId||(yield n("edit/setForm"));const a=yield r(C.Mo);return a}(t),{close:f,update:y}=yield*function*showPreBindTip(e,t,r){let{call:n}=r;const close=()=>{},update=()=>{};if(!e)return{close,update};const o=t?T.Z.t("正在导出，请稍候"):T.Z.t("正在生成到表格，请稍候"),a=yield n(E.IG,o,{type:N.g.loadingMsg,autoClose:!1});return a}(p,s,t),{data:_,error:O}=yield*function*startToBind(e,t){let{globalPadId:r,sheetId:n,sheetUrl:o,sheetType:a}=e,{call:i,select:s}=t;const{bindPattern:l}=yield s(C.$Q),c={globalPadId:n,url:o,subType:a},d=(0,k.Z)((0,v.E1)({relatedSheet:c}),v.LG.RELATED_SHEET),u=yield i(h.Yv,r,l,d);return u}({globalPadId:m,sheetId:c,sheetUrl:d,exportToLocal:l,sheetType:u},{call:o,select:a});if(O||!_)return function startBindInFailure(e,t){let{update:r}=t;return r({message:T.Z.t("操作失败，请稍后重试。"),type:N.g.INFO,closable:!0}),Z.l.error("[export fail]",{error:e}),(0,L.$)(x.U.exportFailed,{dimensions:[`fail-${e}`]}),{}}(O,{update:y});if(_.retcode!==g.oY.SUCCESS)return function startBindAgainstRetcode(e,t){var r;let{close:n,update:o}=t;if([g.oY.NO_PERMISSION,g.oY.NO_PERMISSION2,g.oY.NO_PERMISSION3,g.oY.NO_PERMISSION4,g.oY.LOGIN_FAILED].includes(e))return n(),{status:"noPermission"};if(e&&g.i8.includes(Number(e)))return n(),{retcode:e};const a=null!==(r=i._E[e])&&void 0!==r?r:T.Z.t("操作失败，请稍后重试。{{retcode}}",{retcode:e});return o({message:a,type:N.g.INFO,closable:!0}),(0,L.$)(x.U.exportSuccess,{dimensions:[`success-other-retcode-${e}`]}),{}}(_.retcode,{close:f,update:y});if(s)return yield*function*relateExportToLocal(e,t,r){let{call:n}=r;const{close:o,update:a}=t,i=yield*function*exportFile(e,t){let{globalPadId:r,update:n}=e,{call:o}=t;const a=36e5,i=Date.now();let s=0;do{var l,c;const e=yield o(h.Fp,{globalPadId:r});if(null!==(l=e.data)&&void 0!==l&&l.url)return e;if(null!==(c=e.data)&&void 0!==c&&c.rate){const{rate:t}=e.data;null==n||n({message:T.Z.t("正在导出: {{rate}}%",{rate:t})}),s=s||t}yield(0,D.delay)(2e3)}while(Date.now()-i<a);return{data:{}}}({globalPadId:e,update:a},{call:n});return null==o||o(),(0,L.$)(x.U.exportSuccess,{dimensions:["success-download"]}),Z.l.info("[export success download]"),i.data}(m,{close:f,update:y},{call:o});const{task_id:S}=_.result;return yield*function*getBindResult(e,t,r){let{globalPadId:n,taskId:o}=e,{close:a,update:s}=t,{put:l,call:c}=r;const{boundSheet:d,code:u}=yield*bindProcess({globalPadId:n,taskId:o},{update:s},{put:l,call:c});if(!d){var p;return s({message:null!==(p=i._E[u])&&void 0!==p?p:T.Z.t("操作失败，请稍后重试。"),type:N.g.INFO,closable:!0}),{retcode:u}}s({message:T.Z.t("关联成功"),type:N.g.SUCCESS});const m=(0,b.default)({},v.LG.RELATED_SHEET,d),{relatedSheet:f}=(0,v.oY)(m,{useDef:!1});return yield l({type:"updateSettingsReducer",payload:{relatedSheet:f}}),Z.l.info("[export success relate]"),(0,L.$)(x.U.exportSuccess,{dimensions:["success-relate"]}),a(),{url:f.url,sheetType:f.subType}}({globalPadId:m,taskId:S},{close:f,update:y},{put:n,call:o,select:a})}var R=r(87768);var A=r(9309),F=r(2001);function*updateLocalSettings(e,t){const{put:r}=t,n={canReceivePeriodicNotify:e};yield r({type:"updateSettingsReducer",payload:{notifyConfig:n}})}const M={querySettings:function*base_consumer(e,t){var r;if(!(0,y.isLogin)())return;const{put:n,call:o,select:a,take:l}=t,d=yield a(C.rx);null!=d&&null!==(r=d.data)&&void 0!==r&&r.globalPadId||(yield l("formInfo/setFormInfo"));const u=yield a(C.Mo),{isDeleted:p,permission:m}=yield a(C.rx);if(p||!m)return;const I=yield a(C.vh),E=new Date,T={year:E.getFullYear(),month:E.getMonth()+1},{data:N}=yield o(f._,u,{needSheetRelatedConfig:I,needPeriodicRelatedConfig:!0,needResultSetting:I,historicalPeriodicConfig:T});if(null==N||!N.result||N.retcode!==g.oY.SUCCESS)return void(yield n({type:"updateSettingsReducer",payload:{hasInit:!0}}));const j=(0,v.oY)(N.result);!function calibrateInitialization(e){e.hasInit=!0,e.hasSuccessInit=!0}(j),yield*function*calibrateSelectedRoster(e,t){let{put:r,select:n}=t;if(!e.selectedRoster)return;(yield n(C.Bg))||(yield r({type:"roster/updateSelectedRostersReducer",payload:{selectedRosters:[e.selectedRoster]}}))}(j,t),yield*function*calibrateSheetSubType(e,t){var r,n;let{call:o}=t;const{dataset:a}=S.hx[P.Td.FORM_COMMON_CONFIG](),i=yield o(_.Ez.getUserAttributeValueByName.bind(_.Ez),O._.PREFERRED_RELATED_SHEET_TYPE,(null==a||null===(r=a.setting)||void 0===r||null===(n=r.sheet)||void 0===n?void 0:n.defaultSheetType)||s.jy.GRID);e.relatedSheet.subType=e.relatedSheet.subType||i}(j,t),function calibratePeriodicRelated(e,t){let{year:r,month:n}=t;if(!e.relatedPeriodic.isPeriodic)return;const o=e.relatedPeriodic.histories,a=o.length,i=base_consumer_objectSpread({year:r,month:n},a?o[a-1]:{day:void 0,start:void 0,end:void 0});e.relatedPeriodic=base_consumer_objectSpread(base_consumer_objectSpread({},e.relatedPeriodic),{},{latestHistory:i,currSelectedHistory:i,isInCurrPeriodic:!0,historicalMap:{[`${r}/${n}`]:o}})}(j,T),yield*function*calibrateSheetBindPattern(e,t){let{call:r,select:n}=t;if(!(yield n(C.vh)))return;const o=yield n(C.fw),a=yield n(C.Mo),{data:l,error:c}=yield r(h.jq,a),d=c||!(null!=l&&l.result)||l.retcode===g.oY.SHEET_NO_BIND,u=(0,w.FY)(`${i.xF}${o}`,{fallbackValue:s.Ah.NORMAL}),p=d?u:l.result.bind_type||u;e.relatedSheet.bindPattern=p}(j,t),yield*function*calibrateQuestionCreatedPattern(e,t){let{call:r}=t;const n=yield r(_.Ez.getUserAttributeValueByName.bind(_.Ez),O._.CREATE_QUESTION_BY_TYPE,c.m.INTELLIGENT);(0,b.default)(e,"userPreferred.questionCreatedPattern",n)}(j,t),yield n({type:"updateSettingsReducer",payload:j})},updateSettings:function*update_settings_base_consumer(e,t){let{payload:r}=e,{put:n,call:o,select:a}=t;const{successCb:i=commonSuccessCb,failureCb:s=commonFailureCb}=r,l=(0,I.Z)(r,j),c=yield a(C.Mo),d=(0,v.E1)(l),{data:u,error:p}=yield o(f.a,c,d);var m;p||(null==u?void 0:u.retcode)!==g.oY.SUCCESS?s(null!==(m=null==u?void 0:u.retcode)&&void 0!==m?m:g.oY.ERROR):(yield n({type:"updateSettingsReducer",payload:l}),l.relatedPeriodic&&(yield n({type:"updatePeriodicHistoriesReducer",payload:l})),i())},bindSheet:bind_sheet_base_consumer,unbindSheet:function*unbind_sheet_base_consumer(e,t){var r,n;let{payload:o}=e,{put:a,call:i,select:s,take:l}=t;const c=yield s(C.rx);null!=c&&null!==(r=c.data)&&void 0!==r&&r.globalPadId||(yield l("edit/setForm"));const d=null===(n=null==o?void 0:o.showSnackbar)||void 0===n||n,u=yield s(C.Mo),{globalPadId:p,subId:m,subType:f}=yield s(C.$Q),y={globalPadId:p,subId:m,subType:f},b=(0,k.Z)((0,v.E1)({relatedSheet:y}),v.LG.RELATED_SHEET),{data:_,error:O}=yield i(h.Vj,u,b);if((0,R.G)("edit","clk_generate_excel"),O||!_||_.retcode!==g.oY.SUCCESS)return yield i(E.IG,T.Z.t("取消关联表格失败，请稍后重试。")),_;const S={globalPadId:void 0,url:"",subId:""};return yield a({type:"updateSettingsReducer",payload:{relatedSheet:S}}),d&&(yield i(E.IG,T.Z.t("取消关联表格成功。"),{type:N.g.SUCCESS})),_},rebindSheet:function*rebind_sheet_base_consumer(e,t){var r;let{payload:n}=e,{put:o,call:a,select:s,take:l}=t;const{close:c,update:d}=yield a(E.IG,T.Z.t("正在重新绑定新表格中..."),{type:N.g.LOADING,autoClose:!1}),{type:u,bindType:p}=n,m=yield s(C.Mo),y=yield s(C.$Q),_=yield a(f._,m,{needSheetRelatedConfig:!0}),{relatedSheet:O}=(0,v.oY)(null===(r=_.data)||void 0===r?void 0:r.result),S=O.globalPadId?O:y;if(!S.globalPadId){c();const e={sheetType:u},{url:t}=yield a(bind_sheet_base_consumer,{payload:e},{put:o,call:a,select:s,take:l});return{sheetUrl:t||""}}const P=(0,k.Z)((0,v.E1)({relatedSheet:{globalPadId:S.globalPadId,subId:S.subId}}),v.LG.RELATED_SHEET),w=(0,k.Z)((0,v.E1)({relatedSheet:{globalPadId:n.target?n.target.sheetId:S.globalPadId,subType:u}}),v.LG.RELATED_SHEET),{data:I,error:j}=yield a(h.ey,m,p,P,w);var D,x;if(j||!I||I.retcode!==g.oY.SUCCESS)return d({message:null!==(D=i._E[null==I?void 0:I.retcode])&&void 0!==D?D:T.Z.t("切换失败，请重试。{{code}}",{code:null!==(x=null==I?void 0:I.retcode)&&void 0!==x?x:-1}),type:N.g.INFO,autoClose:!0,closable:!0}),{sheetUrl:"",code:null==I?void 0:I.retcode};const{task_id:Z}=I.result,{boundSheet:L,code:R}=yield*bindProcess({globalPadId:m,taskId:Z},{update:d},{call:a});var A;if(!L)return d({message:null!==(A=i._E[R])&&void 0!==A?A:T.Z.t("切换失败，请重试。{{code}}",{code:"NO_BOUND"}),type:N.g.INFO,autoClose:!0,closable:!0}),{sheetUrl:"",code:null!=R?R:"NO_BOUND"};const F={};(0,b.default)(F,v.LG.RELATED_SHEET,L),(0,b.default)(F,v.LG.BIND_PATTERN,p);const{relatedSheet:M}=(0,v.oY)(F);return yield o({type:"updateSettingsReducer",payload:{relatedSheet:M}}),c(),{sheetUrl:M.url}},updatePreferredSheetType:function*update_preferred_sheet_type_base_consumer(e,t){let{payload:r}=e,{put:n,call:o}=t;const a=r||s.jy.SMART,i={relatedSheet:{subType:a}};yield n({type:"updateSettingsReducer",payload:i}),yield o(_.Ez.forceUpdateUserAttributes.bind(_.Ez),[{name:O._.PREFERRED_RELATED_SHEET_TYPE,value:a}])},queryPeriodicHistory:function*query_periodic_history_base_consumer(e,t){let{payload:r}=e,{put:n,call:o,select:a}=t;const{year:i,month:s}=r,l=yield a(C.Mo),c=yield a(C.vh),{error:d,data:u}=yield o(f._,l,{needSheetRelatedConfig:c,needPeriodicRelatedConfig:!0,historicalPeriodicConfig:{year:i,month:s}});if(d||(null==u?void 0:u.retcode)!==g.oY.SUCCESS||!u.result)return;const{relatedPeriodic:{histories:p}}=(0,v.oY)(u.result),m={histories:p,historicalMap:{[`${i}/${s}`]:p}};return yield n({type:"updatePeriodicHistoriesReducer",payload:{relatedPeriodic:m}}),p},updatePeriodicSubmitNotify:function*update_periodic_submit_notify_base_consumer(e,t){let{payload:r}=e;const{canReceivePeriodicNotify:n,forceUpdated:o=!1,successCb:a,failureCb:i}=r,{call:s,select:l}=t,c=yield l(C.OO);if(!o&&!c)return void(yield*updateLocalSettings(n,t));const d=yield l(C.Mo),{data:u}=yield s(A.j,{globalPadId:d,isEnabled:n,tinyId:(0,F.G)()});var p;(null==u?void 0:u.retcode)===g.oY.SUCCESS?(yield*updateLocalSettings(n,t),null==a||a()):null==i||i(null!==(p=null==u?void 0:u.retcode)&&void 0!==p?p:g.oY.ERROR)},updateMatchedQuestionsPattern:function*update_matched_questions_pattern_base_consumer(e,t){let{payload:r}=e,{put:n}=t;const{pattern:o}=r;_.Ez.forceUpdateUserAttributes([{name:O._.CREATE_QUESTION_BY_TYPE,value:o}]),yield n({type:"updateSettingsReducer",payload:{userPreferred:{questionCreatedPattern:o}}})}};function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const B=function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},M);function setting_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const q=function setting_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?setting_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):setting_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{setup(e){if(!(0,y.isLogin)())return;const{dispatch:t}=e;t({type:"querySettings"})}});function models_setting_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_setting_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_setting_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_setting_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const U=models_setting_form_consumer_objectSpread(models_setting_form_consumer_objectSpread({},{namespace:"setting"}),{},{state:d,effects:B,reducers:m,subscriptions:q})},32609:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(64649);const o={activeId:"index",showTab:!0,isFillerShowTab:!0,showHeader:!0,showTitleBar:!1,topBarTitle:"",scrollContainerRef:r(27378).createRef(),scrollDistance:{edit:0,result:0,setting:0},topPictureCropData:{}};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const a=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o);function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const i={setHeaderVisible(e,t){let{payload:r}=t;const{showHeader:n}=r;return base_objectSpread(base_objectSpread({},e),{},{showHeader:n})},setTabVisible(e,t){let{payload:r}=t;const{showTab:n}=r;return base_objectSpread(base_objectSpread({},e),{},{showTab:n})},setActiveId(e,t){let{payload:r}=t;const{activeId:n}=r;return base_objectSpread(base_objectSpread({},e),{},{activeId:n})},setTopBarTitle(e,t){let{payload:r}=t;const{topBarTitle:n}=r;return base_objectSpread(base_objectSpread({},e),{},{topBarTitle:n})},setTopTitleBarVisible(e,t){let{payload:r}=t;const{showTitleBar:n}=r;return base_objectSpread(base_objectSpread({},e),{},{showTitleBar:n})},setScrollContainerRef(e,t){let{payload:r}=t;const{scrollContainerRef:n}=r;return base_objectSpread(base_objectSpread({},e),{},{scrollContainerRef:n})},setScrollDistance(e,t){let{payload:r}=t;const{scrollDistance:{edit:n,result:o,setting:a}}=r;return base_objectSpread(base_objectSpread({},e),{},{scrollDistance:{edit:null!=n?n:e.scrollDistance.edit,result:null!=o?o:e.scrollDistance.result,setting:null!=a?a:e.scrollDistance.setting}})},resetState(){return base_objectSpread({},o)},setTopPictureCropData(e,t){let{payload:r}=t;const{topPictureCropData:n}=r;return base_objectSpread(base_objectSpread({},e),{},{topPictureCropData:n})}};function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s=consumer_objectSpread(consumer_objectSpread({},i),{},{resetState(){return consumer_objectSpread({},a)}});function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l=form_consumer_objectSpread(form_consumer_objectSpread({},{namespace:"toggle"}),{},{state:a,reducers:s})},53333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(64649);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const o=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{loading:!1,hasMore:!0,currentPage:1,pageSize:20,unSubmitNum:0,umSubmitMemberNum:0,unSubmitMember:[],hasLongRoster:!1}));function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const a={saveUnSubmitDataReducer(e,t){let{payload:r}=t;const{hasMore:n,umSubmitMemberNum:o,unSubmitNum:a,loading:i,unSubmitMember:s}=r;return base_objectSpread(base_objectSpread({},e),{},{hasMore:n,umSubmitMemberNum:o,unSubmitNum:a,loading:i,unSubmitMember:s})},saveUnSubmitDataInRoster(e,t){let{payload:r}=t;const{unSubmitMember:n,unSubmitNum:o}=r;return base_objectSpread(base_objectSpread({},e),{},{unSubmitMember:n,unSubmitNum:o,hasMore:!1})},savePageData(e,t){let{payload:r}=t;const{currentPage:n,pageSize:o=e.pageSize}=r;return base_objectSpread(base_objectSpread({},e),{},{currentPage:n,pageSize:o})},setLoading(e,t){let{payload:r}=t;const{loading:n}=r;return base_objectSpread(base_objectSpread({},e),{},{loading:n})},setHasLongRoster(e,t){let{payload:r}=t;const{hasLongRoster:n}=r;return base_objectSpread(base_objectSpread({},e),{},{hasLongRoster:n})},setHasLargeSubmittedCount(e,t){let{payload:r}=t;const{hasLargeSubmittedCount:n}=r;return base_objectSpread(base_objectSpread({},e),{},{hasLargeSubmittedCount:n})}};function form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const i=function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a));r(11431);var s=r(65686),l=r(70740),c=r(60250),d=r(46603),u=r(54734),p=r(84263),m=r(65162);function*getUnsubmitWithMemberList(e,t,r){const{call:n,put:o}=e,a=yield*function*getGlobalPadId(e){var t;let{take:r,select:n}=e;const o=yield n(s.rx);return null!=o&&null!==(t=o.data)&&void 0!==t&&t.globalPadId||(yield r("edit/setForm")),yield n(s.Mo)}(e),i=yield(0,p.hk)(e),f=yield(0,p.uU)(e),h=r?(0,m.OQ)(f||{}):null;if(t&&!i)return;const{data:y}=yield n(d.P,{globalPadId:a,cycleCollectTime:i,timeRange:h});if(function checkDataRight(e,t){return t?0===(null==e?void 0:e.retcode):(null==e?void 0:e.data)&&0===e.ret}(y,!0)){const{users:e=[],total:t}=y.result||{},r=e.map((e=>{var t,r,n;let{name:o,nick:a,avatar:i,role:s}=e;return{NickName:(null==s||null===(t=s.members)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.child.name)||(null==o?void 0:o.name)||a,Avatar:i,auxiliary:null==s||null===(n=s.members)||void 0===n?void 0:n.map((e=>{let{role:t}=e;return t}))}})),n=null!=t?t:e.length;yield o({type:"saveUnSubmitDataInRoster",payload:{unSubmitMember:r,unSubmitNum:n}})}else{if(y.retcode===l.oY.ROSTER_OVER_LIMIT)return yield n(c.IG,u.Z.t("名单过长，暂不统计未填写人")),void(yield o({type:"setHasLongRoster",payload:{hasLongRoster:!0}}));yield n(c.IG,u.Z.t("拉取未填写结果失败。"))}}function unsubmit_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function unsubmit_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const f=function unsubmit_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?unsubmit_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):unsubmit_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function unsubmit_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?unsubmit_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):unsubmit_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{getUnSubmit:function*get_unsubmit_base(e,t){let{payload:r}=e;const{select:n,put:o,take:a}=t,{data:i}=yield n(s.rx),{isOwner:l,isAdmin:c}=i;if(!l&&!c||0===(null==i?void 0:i.pub))return;const{selectedRosterInitialized:d}=yield n(s.zI),u=yield n(s.GZ);d||u||(yield a("roster/getSelectedRosters/@@end"));const p=yield n(s.XK),m=yield n(s.Jr);((e,t,r)=>!e&&(!t||r))(r.pooling,m,p)||(yield o({type:"setLoading",payload:{loading:!0}}),yield*getUnsubmitWithMemberList(t,u,r.useTimeRange),yield o({type:"setLoading",payload:{loading:!1}}))}}));function subscriptions_unsubmit_form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function subscriptions_unsubmit_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const h=function subscriptions_unsubmit_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?subscriptions_unsubmit_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):subscriptions_unsubmit_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function subscriptions_unsubmit_form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?subscriptions_unsubmit_form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):subscriptions_unsubmit_form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{setup(e){let{dispatch:t}=e;document.addEventListener("hadPublishToMini",(()=>{t({type:"getUnSubmit",payload:{}})})),document.addEventListener("hadSendAIOToGroup",(()=>{t({type:"getUnSubmit",payload:{}})}))}}));function models_unsubmit_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_unsubmit_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_unsubmit_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_unsubmit_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const y=models_unsubmit_form_consumer_objectSpread(models_unsubmit_form_consumer_objectSpread({},{namespace:"unsubmit"}),{},{state:o,effects:f,reducers:i,subscriptions:h})},49399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(64649);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const o=function consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{status:!1,userInfo:{},unreadNum:{},signInfo:[],lastSignInfo:{},signInfoSelectId:"",initedSignInfo:!1,relativeSheet:{next:"",list:[]},spaceInfo:{total:0,used:0,coupon:[],free:{expiry:"0",space:"0",type:0},vip:[]},qqRelated:{}}));var a=r(65779),i=r(72870);function base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s={setUserInfo(e,t){let{payload:r}=t;e.userInfo=r,e.status=!0,function initClientVars(e){if(window.clientVars=window.clientVars||{},window.clientVars=base_objectSpread(base_objectSpread({},window.clientVars),{},{padType:"form",userDomainId:e.domainId,userPic:decodeURIComponent(e.userPic),userName:e.userName,uin:e.uin,userInfo:{fullName:e.userName}}),""===(0,a.ej)("utype")){const{corp_id:t="",corp_name:r=""}=e,{clientVars:n}=window;n.userLoginCorpId=t,n.userLoginCorpName=r}i.isMobile&&(window.clientVars.isMobile=!0),document.dispatchEvent(new CustomEvent("clientvarsinited"))}(r)},setStatus(e,t){let{payload:r}=t;e.status=r.status},setUnreadNum(e,t){let{payload:r}=t;e.unreadNum=r},resetUnreadNum(e){e.unreadNum.unread_num=0,e.unreadNum.unread_sum_count=0},initSignInfo(e,t){let{payload:r}=t;e.signInfo=r.signInfo,e.signInfoSelectId=r.selectId,e.initedSignInfo=!0},setQQRelatedInfo(e,t){let{payload:r}=t;const{qqRelated:n}=r,{qqRelated:o}=r;return base_objectSpread(base_objectSpread({},e),{},{qqRelated:base_objectSpread(base_objectSpread({},o),n)})}};function form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l=form_consumer_objectSpread(form_consumer_objectSpread({},s),{},{setRelativeSheet(e,t){let{payload:{list_info:r,next:n}}=t;const o=e.relativeSheet.list.concat(r);return form_consumer_objectSpread(form_consumer_objectSpread({},e),{},{relativeSheet:{list:o,next:n}})},setRelativeSheetList(e){return form_consumer_objectSpread(form_consumer_objectSpread({},e),{},{relativeSheet:{list:[],next:""}})},setUserSpaceInfo(e,t){let{payload:r={total:0,used:0,coupon:[],free:{},vip:[]}}=t;return form_consumer_objectSpread(form_consumer_objectSpread({},e),{},{spaceInfo:form_consumer_objectSpread({},r)})}}),c=l;var d=r(67538),u=r(45008);r(11431);var p=r(35463),m=r(4869),f=r(65686);function byRoldId(e){return e.role_id||(e.role_id=(0,p.O1)()),e}function confirmSelected(e,t,r,n,o){n[e]||(n[e]=t),r&&r===t&&(n[e]=t),o[e]||(o[e]=0),o[e]=o[e]+1}function*handleSuccess(e,t,r,n){let{put:o}=n;if(!e&&t&&0===t.code){let e=t.sign_roles||[],n="";e=e.map(byRoldId),t.selected_id&&(n=t.selected_id);const{signInfo:a,selectId:i}=function filterSignInfo(e,t,r){const n={},o={},a=[];for(let i=e.length-1;i>=0;i--){const r=e[i],{type:s,role_id:l}=r;confirmSelected(s,l,t,o,n),4!==s&&n[s]>1||4===s&&n[s]>4||a.unshift(r)}return{signInfo:a,selectId:o[r]||""}}(e,n,r);yield o({type:"initSignInfo",payload:{signInfo:a,selectId:i}});const s=a.find((e=>e.role_id===n))||{};yield o({type:"result/getClockResult",payload:{selectSignInfo:s}})}}var h=r(54734),y=r(60250),b=r(52255),g=r(87768);const getSetData=e=>{if(!e)return{};const{type:t,name:r,identify:n="",birthday:o=""}=e;let{relation:a}=e;a||(a=0);let{role_id:i}=e;return i||(i=(0,p.O1)()),{type:t,name:r,identify:n,relation:a,birthday:o,role_id:i}};const signInfoSelectIdSelector=e=>e.user.signInfoSelectId,signInfoSelector=e=>e.user.signInfo;const v={clearUnreadNum:function*clear_unread_num_base(e,t){let{put:r}=t;yield r({type:"resetUnreadNum",payload:{}})},getUnreadNum:function*get_unread_num_base(e,t){let{put:r,call:n}=t;const{data:o,error:a}=yield n(u.f7);o?(yield r({type:"setUnreadNum",payload:o}),d.l.info("getUnreadNum:",o)):a&&d.l.error("getUnreadNumError:",a)},getSignInfo:function*get_sign_role_base(e,t){let{}=e,{put:r,call:n,select:o}=t;if(!(0,m.isLogin)())return;const{data:a,error:i}=yield n(u.ap),s=yield o(f.TM),{realNameType:l=[]}=s||{},c=l&&l[0]||"normal";let d=["normal","self","child","staff","parent"].indexOf(c);d=d>0&&d<5?d:0,yield*handleSuccess(i,a,d,{put:r})},getUserInfo:function*get_user_info_base(e,t){let{call:r,put:n,select:o}=t;if(yield o(f.nJ))return;const{data:a,error:i}=yield r(b.b);if(a){if(d.l.debug("getUserInfo:",a),11005===a.retcode||11e3===a.retcode){const e={11005:h.Z.t("登录过期"),11e3:h.Z.t("缺少登录态")}[a.retcode],handleKeyExpiredClick=()=>{window.SLR.load("Login",(e=>{e.show(document.getElementById("login-container"),{padId:"",domainId:""})}))};(0,g.G)("account_info","log_expired",{opername:"doc_account_web",ver6:a.retcode}),yield r(y.IG,e,{action:h.Z.t("刷新"),autoClose:!1,onClickAction:handleKeyExpiredClick})}yield n({type:"setUserInfo",payload:a})}else i&&(yield n({type:"setStatus",payload:!1}),d.l.debug("getUserInfoError:",i))},setSignInfo:function*set_sign_role_base(e,t){let{payload:r}=e,{put:n,call:o,select:a}=t;const i=yield a(signInfoSelectIdSelector),s=yield a(signInfoSelector),{setData:l,delModData:c,operator:d="add"}=r,{signInfo:p,selectedId:m}=((e,t,r,n,o)=>{if(!e)return{signInfo:"",selectedId:""};let a=JSON.parse(JSON.stringify(e)),i="";if((e=>"delete"===e||"modify"===e)(t)){const e=((e,t)=>{if(!e||!t)return-1;const{role_id:r}=e;let n=-1;for(let o=0;o<t.length;o++)t[o].role_id===r&&(n=o);return n})(n,a);if(-1!==e)if(a.splice(e,1),"modify"===t){const e=getSetData(r);a.push(e),i=e.role_id}else i=""}else if("unsetSelect"===t)i="";else if("setSelect"===t)i=r.role_id||"";else if(((e,t)=>"deleteOver"===e&&t)(t,n)){const e=function getNewInfo(e,t){const r=[];for(let n=0;n<e.length;n++)-1===t.indexOf(e[n].role_id)&&r.push(e[n]);return r}(a,n);a=e,i=o}else{const e=getSetData(r);a.push(e),i=e.role_id}return{signInfo:a,selectedId:i}})(s,d,l,c,i),{data:f,error:h}=yield o(u.QZ,p,m);!h&&f&&0===f.code&&(yield n({type:"getSignInfo"}))}};var _=r(33358),O=r(70740),S=r(54443);function get_relative_sheet_list_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const P=function*get_relative_sheet_list_base(e,t){let{payload:r}=e,{put:o,call:a}=t;const{data:i,error:s}=yield a(S.Cp,function get_relative_sheet_list_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?get_relative_sheet_list_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):get_relative_sheet_list_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type_filter:!0,doc_type:1,xsrf:(0,_.VQ)()},r));if(!s&&(null==i?void 0:i.retcode)===O.oY.SUCCESS)return yield o({type:"setRelativeSheet",payload:i}),{list:i.list_info,next:i.next};d.l.debug('[CGI fails] "getRelativeSheetList"',s||i)};function form_base_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function form_base_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?form_base_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):form_base_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const C=form_base_objectSpread(form_base_objectSpread({},v),{},{getRelativeSheetList:P});var w=r(4222),I=r(55515);function user_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function user_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?user_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):user_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const E=user_form_consumer_objectSpread(user_form_consumer_objectSpread({},C),{},{getUserSpaceInfo:function*get_user_space_form_base(e,t){let{put:r,call:n}=t;const{data:o,error:a}=yield n(I.Kn);if(a||null==o||!o.result)return yield n(y.IG,h.Z.t("获取附件容量信息失败，请重试。")),void d.l.error("getUserSpaceError:",a||(null==o?void 0:o.result));const{result:{total:i,used:s,coupon:l,free:c,vip:u}}=o;w.kZ.SPECIAL_SPACE_ACCESSIBILITY&&(c.space=i),yield r({type:"setUserSpaceInfo",payload:{total:Number(i),used:Number(s),coupon:l,free:c,vip:u}}),d.l.info("getUserSpace:",o)}});var T=r(54356);function subscriptions_user_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const N=function subscriptions_user_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?subscriptions_user_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):subscriptions_user_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{setup(e){let{dispatch:t}=e;(0,T.ys)(),function dispatchConsumerLoginEvent(e){(0,m.isLogin)()?(e({type:"getUserInfo"}),e({type:"getUnreadNum"})):(0,g.G)("fill","exp_nologin")}(t)}});function models_user_form_consumer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function models_user_form_consumer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?models_user_form_consumer_ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):models_user_form_consumer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const j=models_user_form_consumer_objectSpread(models_user_form_consumer_objectSpread({},{namespace:"user"}),{},{subscriptions:N,state:o,effects:E,reducers:c})},65686:(e,t,r)=>{"use strict";r.d(t,{Et:()=>byEditSelector,mw:()=>byEditIsShowHeaderSelector,tO:()=>byEditDataSelector,wC:()=>byEditDataGlobalPadIdSelector,yr:()=>byEditFormDataSelector,jQ:()=>byDetailLatestSubmitSidSelector,Zd:()=>byDetailFormRecordTotal,fp:()=>byDetailAnswerDataSelector,xz:()=>byDetailPaperResultsSelector,r7:()=>byDetailSidSelector,dr:()=>byDetailAnswerDataListSelector,sN:()=>byFillSelector,bn:()=>byFillIsReSubmitSelector,OV:()=>byFillSmartMatchListSelector,VD:()=>byFillAutoFillStatusSelector,Ub:()=>byFillKVCacheSelector,rx:()=>byFormInfoSelector,Yl:()=>byFormInfoPubPrevLimitSelector,W_:()=>byFormInfoEditPubRevIntervalSelector,_X:()=>byFormInfoDataSelector,Bg:()=>byFormInfoDataIsOwnerSelector,vh:()=>byFormInfoDataIsAdminSelector,fw:()=>byFormInfoDataTinyIdSelector,vG:()=>byFormInfoDataCreatedDateSelector,Mo:()=>byFormInfoDataGlobalPadIdSelector,dg:()=>byFormInfoDataLocalPadIdSelector,Ko:()=>byFormInfoFormDataSelector,TM:()=>byFormInfoFormDataCardConfigSelector,mQ:()=>byFormInfoFormDataTaskConfigSelector,UI:()=>byFormInfoFormDataQuestionsSelector,DQ:()=>byFormInfoFormDataSceneSelector,ul:()=>byUserInfoUidSelector,nJ:()=>byUserStatusSelector,tm:()=>byResultSelector,iu:()=>byPeriodicalStatisticsSelector,W4:()=>byResultTotalOverallSelector,OO:()=>byResultTotalSelfSelector,zI:()=>byRosterSelector,wG:()=>byRosterListSelector,GS:()=>byRosterSelectedRostersSelector,Jr:()=>byUnsubmitHasMoreSelector,XK:()=>byUnsubmitLoadingSelector,gD:()=>bySettingHasInitSelector,GZ:()=>byPeriodicSelector,Ii:()=>byCollectionConfigAnonymousSelector,XR:()=>byCollectionMaxLimitCntSelector,Pw:()=>byConclusionSelector,nb:()=>byFillerConfigMultiSubmitSelector,$Q:()=>byRelatedSheetSelector,Pm:()=>byPeriodicLatestHistorySelector,j4:()=>byPeriodicCurrSelectedHistorySelector,y6:()=>byFillerConfigCanCheckResultsSelector});const byEditSelector=e=>e.edit,byEditIsShowHeaderSelector=e=>e.edit.isShowHeader,byEditDataSelector=e=>e.edit.data,byEditDataGlobalPadIdSelector=e=>e.edit.data.globalPadId,byEditFormDataSelector=e=>e.edit.formData,byDetailLatestSubmitSidSelector=e=>e.detail.lastestSubmitSid,byDetailFormRecordTotal=e=>e.detail.formRecordTotal,byDetailAnswerDataSelector=e=>e.detail.answerData,byDetailPaperResultsSelector=e=>e.detail.paperResults,byDetailSidSelector=e=>e.detail.sid,byDetailAnswerDataListSelector=e=>e.detail.answerDataList,byFillSelector=e=>e.fill,byFillIsReSubmitSelector=e=>e.fill.isReSubmit,byFillSmartMatchListSelector=e=>e.fill.smartMatchList,byFillAutoFillStatusSelector=e=>e.fill.autoFillStatus,byFillKVCacheSelector=e=>e.fill.KVCache,byFormInfoSelector=e=>e.formInfo,byFormInfoDataIsOwnerSelector=e=>e.formInfo.data.isOwner,byFormInfoDataIsAdminSelector=e=>e.formInfo.data.isAdmin,byFormInfoPubPrevLimitSelector=e=>e.formInfo.pubrevlimit,byFormInfoEditPubRevIntervalSelector=e=>e.formInfo.editPubRevInterval,byFormInfoDataSelector=e=>e.formInfo.data,byFormInfoDataTinyIdSelector=e=>e.formInfo.data.tinyid||e.formInfo.data.tinyId,byFormInfoDataCreatedDateSelector=e=>e.formInfo.data.createdDate,byFormInfoDataGlobalPadIdSelector=e=>e.formInfo.data.globalPadId,byFormInfoDataLocalPadIdSelector=e=>e.formInfo.data.localPadId,byFormInfoFormDataSelector=e=>e.formInfo.formData,byFormInfoFormDataCardConfigSelector=e=>e.formInfo.formData.cardConfig,byFormInfoFormDataTaskConfigSelector=e=>e.formInfo.formData.taskConfig,byFormInfoFormDataQuestionsSelector=e=>e.formInfo.formData.questions,byFormInfoFormDataSceneSelector=e=>e.formInfo.formData.scene,byUserInfoUidSelector=e=>e.user.userInfo.uid,byUserStatusSelector=e=>e.user.status,byResultSelector=e=>e.result,byResultTotalOverallSelector=e=>e.result.totalOverall,byResultTotalSelfSelector=e=>e.result.totalSelf,byPeriodicalStatisticsSelector=e=>e.result.periodicalStatistics,byUnsubmitLoadingSelector=e=>e.unsubmit.loading,byUnsubmitHasMoreSelector=e=>e.unsubmit.hasMore,byRosterSelector=e=>e.roster,byRosterListSelector=e=>e.roster.list,byRosterSelectedRostersSelector=e=>e.roster.selectedRosters,bySettingHasInitSelector=e=>e.setting.hasInit,byCollectionMaxLimitCntSelector=e=>e.setting.collection.backendMaxRecordLimit,byFillerConfigCanCheckResultsSelector=e=>e.setting.fillerConfig.canCheckResults,byFillerConfigMultiSubmitSelector=e=>e.setting.fillerConfig.canMultiSubmit,byConclusionSelector=e=>e.setting.conclusion,byCollectionConfigAnonymousSelector=e=>e.setting.collection.anonymous,byRelatedSheetSelector=e=>e.setting.relatedSheet,byPeriodicSelector=e=>e.setting.relatedPeriodic.isPeriodic,byPeriodicLatestHistorySelector=e=>e.setting.relatedPeriodic.latestHistory,byPeriodicCurrSelectedHistorySelector=e=>e.setting.relatedPeriodic.currSelectedHistory},51336:(e,t,r)=>{"use strict";r.d(t,{Dm:()=>setTitleFromDoc,Td:()=>setTitle});r(11431);var n=r(72870),o=r(67550),a=r(41677),i=r(4222);function setTitleFromDoc(e){const{globalPadId:t,isOwner:r,localPadId:a}=window.clientVars;if(!t)return;const s=t.split("$"),[l]=s;if(function setTitleFromDocBaseDevice(e){if(n.isTencentDocsApp)(0,o.dw)("ui","setWebviewNaviTitle",{title:e,url:window.location.href,refreshDocList:!1}),document.title=e;else if(n.isAndroidPhone)document.title=e;else if(n.isIOS){var t,r;document.title=e,null===(t=window.mqq)||void 0===t||null===(r=t.ui)||void 0===r||r.refreshTitle()}}(e),n.isMiniProgram){let e=document.createElement("iframe");e.style.visibility="hidden",e.style.width="1px",e.style.height="1px",e.onload=()=>{setTimeout((()=>{document.body.removeChild(e),e=null}),0)},e.src=`https://${i._P.DOMAIN_NAME}/qq_830cff74ba6f46e2eb30a3ca73ebbdeb.txt`,document.body.appendChild(e)}}function setTitle(e){if(document.title=e,function setTitleBaseDevice(e){if(n.isTencentDocsApp)(0,o.dw)("ui","setWebviewNaviTitle",{title:e,url:window.location.href,refreshDocList:!1});else if(n.isAndroidPhone);else if(n.isIOS){var t,r;null===(t=window.mqq)||void 0===t||null===(r=t.ui)||void 0===r||r.refreshTitle()}}(e),n.isMiniProgram){let e=document.createElement("iframe");e.style.visibility="hidden",e.style.width="1px",e.style.height="1px",e.onload=()=>{setTimeout((()=>{document.body.removeChild(e),e=null}),0)},e.src=`https://${i._P.DOMAIN_NAME}/qq_830cff74ba6f46e2eb30a3ca73ebbdeb.txt`,document.body.appendChild(e)}}window.setLocalActions=a.G},9410:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});const n=new class ServerTime{constructor(){this.timeDelta=0,this.isGetTimeDeltaDone=!1}now(){return Date.now()+this.timeDelta}getTimeDelta(){return this.timeDelta}ready(){this.isGetTimeDeltaDone||(this.isGetTimeDeltaDone=!0,this.timeDelta=this.getServerClienTimeDelta())}getServerClienTimeDelta(){return(window.serverDate?window.serverDate.getTime()-Date.now():0)|0}}},98549:(e,t,r)=>{"use strict";r.d(t,{EA:()=>transRemoteFormDataQuestions,ID:()=>filterQuestionsDeleteQuestions});var n=r(64649),o=(r(11431),r(95240)),a=r(14042),i=r(87768),s=r(39834);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function transRemoteFormDataQuestions(e){if(!e||!e.initialAttributedText&&!e.questions)return e;try{var t;const r=e.initialAttributedText?JSON.parse(null==e?void 0:e.initialAttributedText.text):_objectSpread({},e),{qlist:n}=(null===(t=r.sections)||void 0===t?void 0:t[0])||{},[o,a]=genQuestionsAndDeleteQuestions(r.questions,n);return r.questions=o,r.deleteQuestions=a,e.initialAttributedText?_objectSpread(_objectSpread({},e),{},{initialAttributedText:_objectSpread(_objectSpread({},e.initialAttributedText),{},{text:JSON.stringify(r)})}):_objectSpread(_objectSpread({},e),r)}catch(r){return(0,i.G)("transform-form-data","transform-form-data-fail",r),e}}function genQuestionsAndDeleteQuestions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=[],n=[];return null==e||e.forEach((e=>{const{id:i,status:l,type:c,qdata:d}=e;if(t.includes(i))if(isOptionsType(c)||o.Fk.has(c))if(d.options.length){const[t,a]=splitNormalDeleteOptions(d.options),[i,s]=splitNormalDeleteOptions(d.subtitles);if(o.Fk.has(c)){const o=_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},d),{},{options:t,subtitles:i})}),l=_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},d),{},{options:a,subtitles:s})});return(t.length||i.length)&&r.push(o),void((a.length||s.length)&&n.push(l))}if(t.length){const n=_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},d),{},{options:t})});r.push(n)}if(a.length){const t=_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},d),{},{options:a})});n.push(t)}}else r.push(_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},e.qdata),{},{options:[]})}));else if(c===a.c.TABLE){const t=d.tableQuestionData.questions,o=d.tableQuestionData.sections[0].qlist,[a,i]=genQuestionsAndDeleteQuestions(t,o);if(a.length){const t=_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},d),{},{tableQuestionData:_objectSpread(_objectSpread({},d.tableQuestionData),{},{questions:a})})});r.push(t)}if(i.length){const t=_objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},d),{},{tableQuestionData:_objectSpread(_objectSpread({},d.tableQuestionData),{},{questions:i})})});n.push(t)}}else r.push(e);else l===s.x.Delete&&n.push(_objectSpread({},e))})),[r,n]}function filterQuestionsDeleteQuestions(e){if(null==e||!e.initialAttributedText)return e;try{const t=JSON.parse(e.initialAttributedText.text);return t.questions=filterDeleteQuestionAndOption(t.questions),_objectSpread(_objectSpread({},e),{},{initialAttributedText:_objectSpread(_objectSpread({},e.initialAttributedText),{},{text:JSON.stringify(t)})})}catch(t){return(0,i.G)("filter-questions-delete-questions","failed",{obj1:t}),e}}function filterDeleteQuestionAndOption(e){return e.filter((e=>e.status!==s.x.Delete)).map((e=>{const{type:t,qdata:r}=e;if(isOptionsType(t)){const t=r.options.filter((e=>e.status!==s.x.Delete));return _objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},e.qdata),{},{options:t})})}if(o.Fk.has(t)){const t=r.subtitles.filter((e=>e.status!==s.x.Delete)),n=r.options.filter((e=>e.status!==s.x.Delete));return _objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},e.qdata),{},{options:n,subtitles:t})})}if(t===a.c.TABLE){const{tableQuestionData:t}=e.qdata;return _objectSpread(_objectSpread({},e),{},{qdata:_objectSpread(_objectSpread({},e.qdata),{},{tableQuestionData:_objectSpread(_objectSpread({},t),{},{questions:filterDeleteQuestionAndOption(t.questions)})})})}return _objectSpread({},e)}))}function splitNormalDeleteOptions(e){const t=[],r=[];return null==e||e.forEach((e=>e.status===s.x.Delete?t.push(_objectSpread({},e)):r.push(_objectSpread({},e)))),[r,t]}function isOptionsType(e){return o.dq.has(e)}},40444:()=>{},96553:()=>{}},e=>{e.O(0,["corejs-chunks","form-main-chunks","category-common-chunks","base-common-chunks","tencent-common-chunks","i18n-chunks","tencent-experimental-chunks","node-other-chunks"],(()=>{return t=12371,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=form-pc-3b2100.js.map